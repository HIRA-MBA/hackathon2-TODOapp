"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d";
exports.ids = ["vendor-chunks/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/api/index.mjs":
/*!*******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/api/index.mjs ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAuthEndpoint: () => (/* binding */ createAuthEndpoint),\n/* harmony export */   createAuthMiddleware: () => (/* binding */ createAuthMiddleware),\n/* harmony export */   optionsMiddleware: () => (/* binding */ optionsMiddleware)\n/* harmony export */ });\n/* harmony import */ var _context_DblZrIwO_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../context-DblZrIwO.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/context-DblZrIwO.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/.pnpm/better-call@1.1.7_zod@4.3.4/node_modules/better-call/dist/index.mjs\");\n\n\n\n//#region src/api/index.ts\nconst optionsMiddleware = (0,better_call__WEBPACK_IMPORTED_MODULE_1__.createMiddleware)(async () => {\n\t/**\n\t* This will be passed on the instance of\n\t* the context. Used to infer the type\n\t* here.\n\t*/\n\treturn {};\n});\nconst createAuthMiddleware = better_call__WEBPACK_IMPORTED_MODULE_1__.createMiddleware.create({ use: [optionsMiddleware, (0,better_call__WEBPACK_IMPORTED_MODULE_1__.createMiddleware)(async () => {\n\treturn {};\n})] });\nconst use = [optionsMiddleware];\nfunction createAuthEndpoint(pathOrOptions, handlerOrOptions, handlerOrNever) {\n\tconst path = typeof pathOrOptions === \"string\" ? pathOrOptions : void 0;\n\tconst options = typeof handlerOrOptions === \"object\" ? handlerOrOptions : pathOrOptions;\n\tconst handler = typeof handlerOrOptions === \"function\" ? handlerOrOptions : handlerOrNever;\n\tif (path) return (0,better_call__WEBPACK_IMPORTED_MODULE_1__.createEndpoint)(path, {\n\t\t...options,\n\t\tuse: [...options?.use || [], ...use]\n\t}, async (ctx) => (0,_context_DblZrIwO_mjs__WEBPACK_IMPORTED_MODULE_0__.f)(ctx, () => handler(ctx)));\n\treturn (0,better_call__WEBPACK_IMPORTED_MODULE_1__.createEndpoint)({\n\t\t...options,\n\t\tuse: [...options?.use || [], ...use]\n\t}, async (ctx) => (0,_context_DblZrIwO_mjs__WEBPACK_IMPORTED_MODULE_0__.f)(ctx, () => handler(ctx)));\n}\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L2FwaS9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBc0U7QUFDUDs7QUFFL0Q7QUFDQSwwQkFBMEIsNkRBQWdCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCw2QkFBNkIseURBQWdCLFVBQVUseUJBQXlCLDZEQUFnQjtBQUNoRztBQUNBLENBQUMsSUFBSTtBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMkRBQWM7QUFDaEM7QUFDQTtBQUNBLEVBQUUsaUJBQWlCLHdEQUFzQjtBQUN6QyxRQUFRLDJEQUFjO0FBQ3RCO0FBQ0E7QUFDQSxFQUFFLGlCQUFpQix3REFBc0I7QUFDekM7O0FBRUEiLCJzb3VyY2VzIjpbIkQ6XFxoYWNrYXRob25lMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcLnBucG1cXEBiZXR0ZXItYXV0aCtjb3JlQDEuNC4xMF9AYl9lMGM3ZTE4NjA3OTY1YTYyMmMwMTMxM2ZmOTQ2ZjU0ZFxcbm9kZV9tb2R1bGVzXFxAYmV0dGVyLWF1dGhcXGNvcmVcXGRpc3RcXGFwaVxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGYgYXMgcnVuV2l0aEVuZHBvaW50Q29udGV4dCB9IGZyb20gXCIuLi9jb250ZXh0LURibFpySXdPLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlRW5kcG9pbnQsIGNyZWF0ZU1pZGRsZXdhcmUgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvaW5kZXgudHNcbmNvbnN0IG9wdGlvbnNNaWRkbGV3YXJlID0gY3JlYXRlTWlkZGxld2FyZShhc3luYyAoKSA9PiB7XG5cdC8qKlxuXHQqIFRoaXMgd2lsbCBiZSBwYXNzZWQgb24gdGhlIGluc3RhbmNlIG9mXG5cdCogdGhlIGNvbnRleHQuIFVzZWQgdG8gaW5mZXIgdGhlIHR5cGVcblx0KiBoZXJlLlxuXHQqL1xuXHRyZXR1cm4ge307XG59KTtcbmNvbnN0IGNyZWF0ZUF1dGhNaWRkbGV3YXJlID0gY3JlYXRlTWlkZGxld2FyZS5jcmVhdGUoeyB1c2U6IFtvcHRpb25zTWlkZGxld2FyZSwgY3JlYXRlTWlkZGxld2FyZShhc3luYyAoKSA9PiB7XG5cdHJldHVybiB7fTtcbn0pXSB9KTtcbmNvbnN0IHVzZSA9IFtvcHRpb25zTWlkZGxld2FyZV07XG5mdW5jdGlvbiBjcmVhdGVBdXRoRW5kcG9pbnQocGF0aE9yT3B0aW9ucywgaGFuZGxlck9yT3B0aW9ucywgaGFuZGxlck9yTmV2ZXIpIHtcblx0Y29uc3QgcGF0aCA9IHR5cGVvZiBwYXRoT3JPcHRpb25zID09PSBcInN0cmluZ1wiID8gcGF0aE9yT3B0aW9ucyA6IHZvaWQgMDtcblx0Y29uc3Qgb3B0aW9ucyA9IHR5cGVvZiBoYW5kbGVyT3JPcHRpb25zID09PSBcIm9iamVjdFwiID8gaGFuZGxlck9yT3B0aW9ucyA6IHBhdGhPck9wdGlvbnM7XG5cdGNvbnN0IGhhbmRsZXIgPSB0eXBlb2YgaGFuZGxlck9yT3B0aW9ucyA9PT0gXCJmdW5jdGlvblwiID8gaGFuZGxlck9yT3B0aW9ucyA6IGhhbmRsZXJPck5ldmVyO1xuXHRpZiAocGF0aCkgcmV0dXJuIGNyZWF0ZUVuZHBvaW50KHBhdGgsIHtcblx0XHQuLi5vcHRpb25zLFxuXHRcdHVzZTogWy4uLm9wdGlvbnM/LnVzZSB8fCBbXSwgLi4udXNlXVxuXHR9LCBhc3luYyAoY3R4KSA9PiBydW5XaXRoRW5kcG9pbnRDb250ZXh0KGN0eCwgKCkgPT4gaGFuZGxlcihjdHgpKSk7XG5cdHJldHVybiBjcmVhdGVFbmRwb2ludCh7XG5cdFx0Li4ub3B0aW9ucyxcblx0XHR1c2U6IFsuLi5vcHRpb25zPy51c2UgfHwgW10sIC4uLnVzZV1cblx0fSwgYXN5bmMgKGN0eCkgPT4gcnVuV2l0aEVuZHBvaW50Q29udGV4dChjdHgsICgpID0+IGhhbmRsZXIoY3R4KSkpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCwgY3JlYXRlQXV0aE1pZGRsZXdhcmUsIG9wdGlvbnNNaWRkbGV3YXJlIH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/api/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/async_hooks/index.mjs":
/*!***************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/async_hooks/index.mjs ***!
  \***************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAsyncLocalStorage: () => (/* binding */ getAsyncLocalStorage)\n/* harmony export */ });\n//#region src/async_hooks/index.ts\nconst AsyncLocalStoragePromise = import(\n\t/* @vite-ignore */\n\t/* webpackIgnore: true */\n\t\"node:async_hooks\"\n).then((mod) => mod.AsyncLocalStorage).catch((err) => {\n\tif (\"AsyncLocalStorage\" in globalThis) return globalThis.AsyncLocalStorage;\n\tif (typeof window !== \"undefined\") return null;\n\tconsole.warn(\"[better-auth] Warning: AsyncLocalStorage is not available in this environment. Some features may not work as expected.\");\n\tconsole.warn(\"[better-auth] Please read more about this warning at https://better-auth.com/docs/installation#mount-handler\");\n\tconsole.warn(\"[better-auth] If you are using Cloudflare Workers, please see: https://developers.cloudflare.com/workers/configuration/compatibility-flags/#nodejs-compatibility-flag\");\n\tthrow err;\n});\nasync function getAsyncLocalStorage() {\n\tconst mod = await AsyncLocalStoragePromise;\n\tif (mod === null) throw new Error(\"getAsyncLocalStorage is only available in server code\");\n\telse return mod;\n}\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L2FzeW5jX2hvb2tzL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIkQ6XFxoYWNrYXRob25lMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcLnBucG1cXEBiZXR0ZXItYXV0aCtjb3JlQDEuNC4xMF9AYl9lMGM3ZTE4NjA3OTY1YTYyMmMwMTMxM2ZmOTQ2ZjU0ZFxcbm9kZV9tb2R1bGVzXFxAYmV0dGVyLWF1dGhcXGNvcmVcXGRpc3RcXGFzeW5jX2hvb2tzXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9hc3luY19ob29rcy9pbmRleC50c1xuY29uc3QgQXN5bmNMb2NhbFN0b3JhZ2VQcm9taXNlID0gaW1wb3J0KFxuXHQvKiBAdml0ZS1pZ25vcmUgKi9cblx0Lyogd2VicGFja0lnbm9yZTogdHJ1ZSAqL1xuXHRcIm5vZGU6YXN5bmNfaG9va3NcIlxuKS50aGVuKChtb2QpID0+IG1vZC5Bc3luY0xvY2FsU3RvcmFnZSkuY2F0Y2goKGVycikgPT4ge1xuXHRpZiAoXCJBc3luY0xvY2FsU3RvcmFnZVwiIGluIGdsb2JhbFRoaXMpIHJldHVybiBnbG9iYWxUaGlzLkFzeW5jTG9jYWxTdG9yYWdlO1xuXHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIG51bGw7XG5cdGNvbnNvbGUud2FybihcIltiZXR0ZXItYXV0aF0gV2FybmluZzogQXN5bmNMb2NhbFN0b3JhZ2UgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50LiBTb21lIGZlYXR1cmVzIG1heSBub3Qgd29yayBhcyBleHBlY3RlZC5cIik7XG5cdGNvbnNvbGUud2FybihcIltiZXR0ZXItYXV0aF0gUGxlYXNlIHJlYWQgbW9yZSBhYm91dCB0aGlzIHdhcm5pbmcgYXQgaHR0cHM6Ly9iZXR0ZXItYXV0aC5jb20vZG9jcy9pbnN0YWxsYXRpb24jbW91bnQtaGFuZGxlclwiKTtcblx0Y29uc29sZS53YXJuKFwiW2JldHRlci1hdXRoXSBJZiB5b3UgYXJlIHVzaW5nIENsb3VkZmxhcmUgV29ya2VycywgcGxlYXNlIHNlZTogaHR0cHM6Ly9kZXZlbG9wZXJzLmNsb3VkZmxhcmUuY29tL3dvcmtlcnMvY29uZmlndXJhdGlvbi9jb21wYXRpYmlsaXR5LWZsYWdzLyNub2RlanMtY29tcGF0aWJpbGl0eS1mbGFnXCIpO1xuXHR0aHJvdyBlcnI7XG59KTtcbmFzeW5jIGZ1bmN0aW9uIGdldEFzeW5jTG9jYWxTdG9yYWdlKCkge1xuXHRjb25zdCBtb2QgPSBhd2FpdCBBc3luY0xvY2FsU3RvcmFnZVByb21pc2U7XG5cdGlmIChtb2QgPT09IG51bGwpIHRocm93IG5ldyBFcnJvcihcImdldEFzeW5jTG9jYWxTdG9yYWdlIGlzIG9ubHkgYXZhaWxhYmxlIGluIHNlcnZlciBjb2RlXCIpO1xuXHRlbHNlIHJldHVybiBtb2Q7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0QXN5bmNMb2NhbFN0b3JhZ2UgfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/async_hooks/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/context-DblZrIwO.mjs":
/*!**************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/context-DblZrIwO.mjs ***!
  \**************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ defineRequestState),\n/* harmony export */   c: () => (/* binding */ hasRequestState),\n/* harmony export */   d: () => (/* binding */ getCurrentAuthContextAsyncLocalStorage),\n/* harmony export */   f: () => (/* binding */ runWithEndpointContext),\n/* harmony export */   i: () => (/* binding */ runWithTransaction),\n/* harmony export */   l: () => (/* binding */ runWithRequestState),\n/* harmony export */   n: () => (/* binding */ getCurrentDBAdapterAsyncLocalStorage),\n/* harmony export */   o: () => (/* binding */ getCurrentRequestState),\n/* harmony export */   r: () => (/* binding */ runWithAdapter),\n/* harmony export */   s: () => (/* binding */ getRequestStateAsyncLocalStorage),\n/* harmony export */   t: () => (/* binding */ getCurrentAdapter),\n/* harmony export */   u: () => (/* binding */ getCurrentAuthContext)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_async_hooks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/async_hooks */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/async_hooks/index.mjs\");\n\n\n//#region src/context/endpoint-context.ts\nlet currentContextAsyncStorage = null;\nconst ensureAsyncStorage$2 = async () => {\n\tif (!currentContextAsyncStorage) currentContextAsyncStorage = new (await ((0,_better_auth_core_async_hooks__WEBPACK_IMPORTED_MODULE_0__.getAsyncLocalStorage)()))();\n\treturn currentContextAsyncStorage;\n};\n/**\n* This is for internal use only. Most users should use `getCurrentAuthContext` instead.\n*\n* It is exposed for advanced use cases where you need direct access to the AsyncLocalStorage instance.\n*/\nasync function getCurrentAuthContextAsyncLocalStorage() {\n\treturn ensureAsyncStorage$2();\n}\nasync function getCurrentAuthContext() {\n\tconst context = (await ensureAsyncStorage$2()).getStore();\n\tif (!context) throw new Error(\"No auth context found. Please make sure you are calling this function within a `runWithEndpointContext` callback.\");\n\treturn context;\n}\nasync function runWithEndpointContext(context, fn) {\n\treturn (await ensureAsyncStorage$2()).run(context, fn);\n}\n\n//#endregion\n//#region src/context/request-state.ts\nlet requestStateAsyncStorage = null;\nconst ensureAsyncStorage$1 = async () => {\n\tif (!requestStateAsyncStorage) requestStateAsyncStorage = new (await ((0,_better_auth_core_async_hooks__WEBPACK_IMPORTED_MODULE_0__.getAsyncLocalStorage)()))();\n\treturn requestStateAsyncStorage;\n};\nasync function getRequestStateAsyncLocalStorage() {\n\treturn ensureAsyncStorage$1();\n}\nasync function hasRequestState() {\n\treturn (await ensureAsyncStorage$1()).getStore() !== void 0;\n}\nasync function getCurrentRequestState() {\n\tconst store = (await ensureAsyncStorage$1()).getStore();\n\tif (!store) throw new Error(\"No request state found. Please make sure you are calling this function within a `runWithRequestState` callback.\");\n\treturn store;\n}\nasync function runWithRequestState(store, fn) {\n\treturn (await ensureAsyncStorage$1()).run(store, fn);\n}\nfunction defineRequestState(initFn) {\n\tconst ref = Object.freeze({});\n\treturn {\n\t\tget ref() {\n\t\t\treturn ref;\n\t\t},\n\t\tasync get() {\n\t\t\tconst store = await getCurrentRequestState();\n\t\t\tif (!store.has(ref)) {\n\t\t\t\tconst initialValue = await initFn();\n\t\t\t\tstore.set(ref, initialValue);\n\t\t\t\treturn initialValue;\n\t\t\t}\n\t\t\treturn store.get(ref);\n\t\t},\n\t\tasync set(value) {\n\t\t\t(await getCurrentRequestState()).set(ref, value);\n\t\t}\n\t};\n}\n\n//#endregion\n//#region src/context/transaction.ts\nlet currentAdapterAsyncStorage = null;\nconst ensureAsyncStorage = async () => {\n\tif (!currentAdapterAsyncStorage) currentAdapterAsyncStorage = new (await ((0,_better_auth_core_async_hooks__WEBPACK_IMPORTED_MODULE_0__.getAsyncLocalStorage)()))();\n\treturn currentAdapterAsyncStorage;\n};\n/**\n* This is for internal use only. Most users should use `getCurrentAdapter` instead.\n*\n* It is exposed for advanced use cases where you need direct access to the AsyncLocalStorage instance.\n*/\nconst getCurrentDBAdapterAsyncLocalStorage = async () => {\n\treturn ensureAsyncStorage();\n};\nconst getCurrentAdapter = async (fallback) => {\n\treturn ensureAsyncStorage().then((als) => {\n\t\treturn als.getStore() || fallback;\n\t}).catch(() => {\n\t\treturn fallback;\n\t});\n};\nconst runWithAdapter = async (adapter, fn) => {\n\tlet called = true;\n\treturn ensureAsyncStorage().then((als) => {\n\t\tcalled = true;\n\t\treturn als.run(adapter, fn);\n\t}).catch((err) => {\n\t\tif (!called) return fn();\n\t\tthrow err;\n\t});\n};\nconst runWithTransaction = async (adapter, fn) => {\n\tlet called = true;\n\treturn ensureAsyncStorage().then((als) => {\n\t\tcalled = true;\n\t\treturn adapter.transaction(async (trx) => {\n\t\t\treturn als.run(trx, fn);\n\t\t});\n\t}).catch((err) => {\n\t\tif (!called) return fn();\n\t\tthrow err;\n\t});\n};\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L2NvbnRleHQtRGJsWnJJd08ubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBcUU7O0FBRXJFO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSxtRkFBb0I7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLG1GQUFvQjtBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsbUZBQW9CO0FBQy9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBIiwic291cmNlcyI6WyJEOlxcaGFja2F0aG9uZTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXC5wbnBtXFxAYmV0dGVyLWF1dGgrY29yZUAxLjQuMTBfQGJfZTBjN2UxODYwNzk2NWE2MjJjMDEzMTNmZjk0NmY1NGRcXG5vZGVfbW9kdWxlc1xcQGJldHRlci1hdXRoXFxjb3JlXFxkaXN0XFxjb250ZXh0LURibFpySXdPLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRBc3luY0xvY2FsU3RvcmFnZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hc3luY19ob29rc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NvbnRleHQvZW5kcG9pbnQtY29udGV4dC50c1xubGV0IGN1cnJlbnRDb250ZXh0QXN5bmNTdG9yYWdlID0gbnVsbDtcbmNvbnN0IGVuc3VyZUFzeW5jU3RvcmFnZSQyID0gYXN5bmMgKCkgPT4ge1xuXHRpZiAoIWN1cnJlbnRDb250ZXh0QXN5bmNTdG9yYWdlKSBjdXJyZW50Q29udGV4dEFzeW5jU3RvcmFnZSA9IG5ldyAoYXdhaXQgKGdldEFzeW5jTG9jYWxTdG9yYWdlKCkpKSgpO1xuXHRyZXR1cm4gY3VycmVudENvbnRleHRBc3luY1N0b3JhZ2U7XG59O1xuLyoqXG4qIFRoaXMgaXMgZm9yIGludGVybmFsIHVzZSBvbmx5LiBNb3N0IHVzZXJzIHNob3VsZCB1c2UgYGdldEN1cnJlbnRBdXRoQ29udGV4dGAgaW5zdGVhZC5cbipcbiogSXQgaXMgZXhwb3NlZCBmb3IgYWR2YW5jZWQgdXNlIGNhc2VzIHdoZXJlIHlvdSBuZWVkIGRpcmVjdCBhY2Nlc3MgdG8gdGhlIEFzeW5jTG9jYWxTdG9yYWdlIGluc3RhbmNlLlxuKi9cbmFzeW5jIGZ1bmN0aW9uIGdldEN1cnJlbnRBdXRoQ29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkge1xuXHRyZXR1cm4gZW5zdXJlQXN5bmNTdG9yYWdlJDIoKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldEN1cnJlbnRBdXRoQ29udGV4dCgpIHtcblx0Y29uc3QgY29udGV4dCA9IChhd2FpdCBlbnN1cmVBc3luY1N0b3JhZ2UkMigpKS5nZXRTdG9yZSgpO1xuXHRpZiAoIWNvbnRleHQpIHRocm93IG5ldyBFcnJvcihcIk5vIGF1dGggY29udGV4dCBmb3VuZC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UgYXJlIGNhbGxpbmcgdGhpcyBmdW5jdGlvbiB3aXRoaW4gYSBgcnVuV2l0aEVuZHBvaW50Q29udGV4dGAgY2FsbGJhY2suXCIpO1xuXHRyZXR1cm4gY29udGV4dDtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJ1bldpdGhFbmRwb2ludENvbnRleHQoY29udGV4dCwgZm4pIHtcblx0cmV0dXJuIChhd2FpdCBlbnN1cmVBc3luY1N0b3JhZ2UkMigpKS5ydW4oY29udGV4dCwgZm4pO1xufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvY29udGV4dC9yZXF1ZXN0LXN0YXRlLnRzXG5sZXQgcmVxdWVzdFN0YXRlQXN5bmNTdG9yYWdlID0gbnVsbDtcbmNvbnN0IGVuc3VyZUFzeW5jU3RvcmFnZSQxID0gYXN5bmMgKCkgPT4ge1xuXHRpZiAoIXJlcXVlc3RTdGF0ZUFzeW5jU3RvcmFnZSkgcmVxdWVzdFN0YXRlQXN5bmNTdG9yYWdlID0gbmV3IChhd2FpdCAoZ2V0QXN5bmNMb2NhbFN0b3JhZ2UoKSkpKCk7XG5cdHJldHVybiByZXF1ZXN0U3RhdGVBc3luY1N0b3JhZ2U7XG59O1xuYXN5bmMgZnVuY3Rpb24gZ2V0UmVxdWVzdFN0YXRlQXN5bmNMb2NhbFN0b3JhZ2UoKSB7XG5cdHJldHVybiBlbnN1cmVBc3luY1N0b3JhZ2UkMSgpO1xufVxuYXN5bmMgZnVuY3Rpb24gaGFzUmVxdWVzdFN0YXRlKCkge1xuXHRyZXR1cm4gKGF3YWl0IGVuc3VyZUFzeW5jU3RvcmFnZSQxKCkpLmdldFN0b3JlKCkgIT09IHZvaWQgMDtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldEN1cnJlbnRSZXF1ZXN0U3RhdGUoKSB7XG5cdGNvbnN0IHN0b3JlID0gKGF3YWl0IGVuc3VyZUFzeW5jU3RvcmFnZSQxKCkpLmdldFN0b3JlKCk7XG5cdGlmICghc3RvcmUpIHRocm93IG5ldyBFcnJvcihcIk5vIHJlcXVlc3Qgc3RhdGUgZm91bmQuIFBsZWFzZSBtYWtlIHN1cmUgeW91IGFyZSBjYWxsaW5nIHRoaXMgZnVuY3Rpb24gd2l0aGluIGEgYHJ1bldpdGhSZXF1ZXN0U3RhdGVgIGNhbGxiYWNrLlwiKTtcblx0cmV0dXJuIHN0b3JlO1xufVxuYXN5bmMgZnVuY3Rpb24gcnVuV2l0aFJlcXVlc3RTdGF0ZShzdG9yZSwgZm4pIHtcblx0cmV0dXJuIChhd2FpdCBlbnN1cmVBc3luY1N0b3JhZ2UkMSgpKS5ydW4oc3RvcmUsIGZuKTtcbn1cbmZ1bmN0aW9uIGRlZmluZVJlcXVlc3RTdGF0ZShpbml0Rm4pIHtcblx0Y29uc3QgcmVmID0gT2JqZWN0LmZyZWV6ZSh7fSk7XG5cdHJldHVybiB7XG5cdFx0Z2V0IHJlZigpIHtcblx0XHRcdHJldHVybiByZWY7XG5cdFx0fSxcblx0XHRhc3luYyBnZXQoKSB7XG5cdFx0XHRjb25zdCBzdG9yZSA9IGF3YWl0IGdldEN1cnJlbnRSZXF1ZXN0U3RhdGUoKTtcblx0XHRcdGlmICghc3RvcmUuaGFzKHJlZikpIHtcblx0XHRcdFx0Y29uc3QgaW5pdGlhbFZhbHVlID0gYXdhaXQgaW5pdEZuKCk7XG5cdFx0XHRcdHN0b3JlLnNldChyZWYsIGluaXRpYWxWYWx1ZSk7XG5cdFx0XHRcdHJldHVybiBpbml0aWFsVmFsdWU7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gc3RvcmUuZ2V0KHJlZik7XG5cdFx0fSxcblx0XHRhc3luYyBzZXQodmFsdWUpIHtcblx0XHRcdChhd2FpdCBnZXRDdXJyZW50UmVxdWVzdFN0YXRlKCkpLnNldChyZWYsIHZhbHVlKTtcblx0XHR9XG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9jb250ZXh0L3RyYW5zYWN0aW9uLnRzXG5sZXQgY3VycmVudEFkYXB0ZXJBc3luY1N0b3JhZ2UgPSBudWxsO1xuY29uc3QgZW5zdXJlQXN5bmNTdG9yYWdlID0gYXN5bmMgKCkgPT4ge1xuXHRpZiAoIWN1cnJlbnRBZGFwdGVyQXN5bmNTdG9yYWdlKSBjdXJyZW50QWRhcHRlckFzeW5jU3RvcmFnZSA9IG5ldyAoYXdhaXQgKGdldEFzeW5jTG9jYWxTdG9yYWdlKCkpKSgpO1xuXHRyZXR1cm4gY3VycmVudEFkYXB0ZXJBc3luY1N0b3JhZ2U7XG59O1xuLyoqXG4qIFRoaXMgaXMgZm9yIGludGVybmFsIHVzZSBvbmx5LiBNb3N0IHVzZXJzIHNob3VsZCB1c2UgYGdldEN1cnJlbnRBZGFwdGVyYCBpbnN0ZWFkLlxuKlxuKiBJdCBpcyBleHBvc2VkIGZvciBhZHZhbmNlZCB1c2UgY2FzZXMgd2hlcmUgeW91IG5lZWQgZGlyZWN0IGFjY2VzcyB0byB0aGUgQXN5bmNMb2NhbFN0b3JhZ2UgaW5zdGFuY2UuXG4qL1xuY29uc3QgZ2V0Q3VycmVudERCQWRhcHRlckFzeW5jTG9jYWxTdG9yYWdlID0gYXN5bmMgKCkgPT4ge1xuXHRyZXR1cm4gZW5zdXJlQXN5bmNTdG9yYWdlKCk7XG59O1xuY29uc3QgZ2V0Q3VycmVudEFkYXB0ZXIgPSBhc3luYyAoZmFsbGJhY2spID0+IHtcblx0cmV0dXJuIGVuc3VyZUFzeW5jU3RvcmFnZSgpLnRoZW4oKGFscykgPT4ge1xuXHRcdHJldHVybiBhbHMuZ2V0U3RvcmUoKSB8fCBmYWxsYmFjaztcblx0fSkuY2F0Y2goKCkgPT4ge1xuXHRcdHJldHVybiBmYWxsYmFjaztcblx0fSk7XG59O1xuY29uc3QgcnVuV2l0aEFkYXB0ZXIgPSBhc3luYyAoYWRhcHRlciwgZm4pID0+IHtcblx0bGV0IGNhbGxlZCA9IHRydWU7XG5cdHJldHVybiBlbnN1cmVBc3luY1N0b3JhZ2UoKS50aGVuKChhbHMpID0+IHtcblx0XHRjYWxsZWQgPSB0cnVlO1xuXHRcdHJldHVybiBhbHMucnVuKGFkYXB0ZXIsIGZuKTtcblx0fSkuY2F0Y2goKGVycikgPT4ge1xuXHRcdGlmICghY2FsbGVkKSByZXR1cm4gZm4oKTtcblx0XHR0aHJvdyBlcnI7XG5cdH0pO1xufTtcbmNvbnN0IHJ1bldpdGhUcmFuc2FjdGlvbiA9IGFzeW5jIChhZGFwdGVyLCBmbikgPT4ge1xuXHRsZXQgY2FsbGVkID0gdHJ1ZTtcblx0cmV0dXJuIGVuc3VyZUFzeW5jU3RvcmFnZSgpLnRoZW4oKGFscykgPT4ge1xuXHRcdGNhbGxlZCA9IHRydWU7XG5cdFx0cmV0dXJuIGFkYXB0ZXIudHJhbnNhY3Rpb24oYXN5bmMgKHRyeCkgPT4ge1xuXHRcdFx0cmV0dXJuIGFscy5ydW4odHJ4LCBmbik7XG5cdFx0fSk7XG5cdH0pLmNhdGNoKChlcnIpID0+IHtcblx0XHRpZiAoIWNhbGxlZCkgcmV0dXJuIGZuKCk7XG5cdFx0dGhyb3cgZXJyO1xuXHR9KTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZGVmaW5lUmVxdWVzdFN0YXRlIGFzIGEsIGhhc1JlcXVlc3RTdGF0ZSBhcyBjLCBnZXRDdXJyZW50QXV0aENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSBhcyBkLCBydW5XaXRoRW5kcG9pbnRDb250ZXh0IGFzIGYsIHJ1bldpdGhUcmFuc2FjdGlvbiBhcyBpLCBydW5XaXRoUmVxdWVzdFN0YXRlIGFzIGwsIGdldEN1cnJlbnREQkFkYXB0ZXJBc3luY0xvY2FsU3RvcmFnZSBhcyBuLCBnZXRDdXJyZW50UmVxdWVzdFN0YXRlIGFzIG8sIHJ1bldpdGhBZGFwdGVyIGFzIHIsIGdldFJlcXVlc3RTdGF0ZUFzeW5jTG9jYWxTdG9yYWdlIGFzIHMsIGdldEN1cnJlbnRBZGFwdGVyIGFzIHQsIGdldEN1cnJlbnRBdXRoQ29udGV4dCBhcyB1IH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/context-DblZrIwO.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/context/index.mjs":
/*!***********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/context/index.mjs ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defineRequestState: () => (/* reexport safe */ _context_DblZrIwO_mjs__WEBPACK_IMPORTED_MODULE_0__.a),\n/* harmony export */   getCurrentAdapter: () => (/* reexport safe */ _context_DblZrIwO_mjs__WEBPACK_IMPORTED_MODULE_0__.t),\n/* harmony export */   getCurrentAuthContext: () => (/* reexport safe */ _context_DblZrIwO_mjs__WEBPACK_IMPORTED_MODULE_0__.u),\n/* harmony export */   getCurrentAuthContextAsyncLocalStorage: () => (/* reexport safe */ _context_DblZrIwO_mjs__WEBPACK_IMPORTED_MODULE_0__.d),\n/* harmony export */   getCurrentDBAdapterAsyncLocalStorage: () => (/* reexport safe */ _context_DblZrIwO_mjs__WEBPACK_IMPORTED_MODULE_0__.n),\n/* harmony export */   getCurrentRequestState: () => (/* reexport safe */ _context_DblZrIwO_mjs__WEBPACK_IMPORTED_MODULE_0__.o),\n/* harmony export */   getRequestStateAsyncLocalStorage: () => (/* reexport safe */ _context_DblZrIwO_mjs__WEBPACK_IMPORTED_MODULE_0__.s),\n/* harmony export */   hasRequestState: () => (/* reexport safe */ _context_DblZrIwO_mjs__WEBPACK_IMPORTED_MODULE_0__.c),\n/* harmony export */   runWithAdapter: () => (/* reexport safe */ _context_DblZrIwO_mjs__WEBPACK_IMPORTED_MODULE_0__.r),\n/* harmony export */   runWithEndpointContext: () => (/* reexport safe */ _context_DblZrIwO_mjs__WEBPACK_IMPORTED_MODULE_0__.f),\n/* harmony export */   runWithRequestState: () => (/* reexport safe */ _context_DblZrIwO_mjs__WEBPACK_IMPORTED_MODULE_0__.l),\n/* harmony export */   runWithTransaction: () => (/* reexport safe */ _context_DblZrIwO_mjs__WEBPACK_IMPORTED_MODULE_0__.i)\n/* harmony export */ });\n/* harmony import */ var _context_DblZrIwO_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../context-DblZrIwO.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/context-DblZrIwO.mjs\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L2NvbnRleHQvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNlkiLCJzb3VyY2VzIjpbIkQ6XFxoYWNrYXRob25lMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcLnBucG1cXEBiZXR0ZXItYXV0aCtjb3JlQDEuNC4xMF9AYl9lMGM3ZTE4NjA3OTY1YTYyMmMwMTMxM2ZmOTQ2ZjU0ZFxcbm9kZV9tb2R1bGVzXFxAYmV0dGVyLWF1dGhcXGNvcmVcXGRpc3RcXGNvbnRleHRcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhIGFzIGRlZmluZVJlcXVlc3RTdGF0ZSwgYyBhcyBoYXNSZXF1ZXN0U3RhdGUsIGQgYXMgZ2V0Q3VycmVudEF1dGhDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UsIGYgYXMgcnVuV2l0aEVuZHBvaW50Q29udGV4dCwgaSBhcyBydW5XaXRoVHJhbnNhY3Rpb24sIGwgYXMgcnVuV2l0aFJlcXVlc3RTdGF0ZSwgbiBhcyBnZXRDdXJyZW50REJBZGFwdGVyQXN5bmNMb2NhbFN0b3JhZ2UsIG8gYXMgZ2V0Q3VycmVudFJlcXVlc3RTdGF0ZSwgciBhcyBydW5XaXRoQWRhcHRlciwgcyBhcyBnZXRSZXF1ZXN0U3RhdGVBc3luY0xvY2FsU3RvcmFnZSwgdCBhcyBnZXRDdXJyZW50QWRhcHRlciwgdSBhcyBnZXRDdXJyZW50QXV0aENvbnRleHQgfSBmcm9tIFwiLi4vY29udGV4dC1EYmxackl3Ty5tanNcIjtcblxuZXhwb3J0IHsgZGVmaW5lUmVxdWVzdFN0YXRlLCBnZXRDdXJyZW50QWRhcHRlciwgZ2V0Q3VycmVudEF1dGhDb250ZXh0LCBnZXRDdXJyZW50QXV0aENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSwgZ2V0Q3VycmVudERCQWRhcHRlckFzeW5jTG9jYWxTdG9yYWdlLCBnZXRDdXJyZW50UmVxdWVzdFN0YXRlLCBnZXRSZXF1ZXN0U3RhdGVBc3luY0xvY2FsU3RvcmFnZSwgaGFzUmVxdWVzdFN0YXRlLCBydW5XaXRoQWRhcHRlciwgcnVuV2l0aEVuZHBvaW50Q29udGV4dCwgcnVuV2l0aFJlcXVlc3RTdGF0ZSwgcnVuV2l0aFRyYW5zYWN0aW9uIH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/context/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/db/adapter/index.mjs":
/*!**************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/db/adapter/index.mjs ***!
  \**************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAdapter: () => (/* binding */ createAdapter),\n/* harmony export */   createAdapterFactory: () => (/* binding */ createAdapterFactory),\n/* harmony export */   deepmerge: () => (/* binding */ deepmerge),\n/* harmony export */   initGetDefaultFieldName: () => (/* binding */ initGetDefaultFieldName),\n/* harmony export */   initGetDefaultModelName: () => (/* binding */ initGetDefaultModelName),\n/* harmony export */   initGetFieldAttributes: () => (/* binding */ initGetFieldAttributes),\n/* harmony export */   initGetFieldName: () => (/* binding */ initGetFieldName),\n/* harmony export */   initGetIdField: () => (/* binding */ initGetIdField),\n/* harmony export */   initGetModelName: () => (/* binding */ initGetModelName),\n/* harmony export */   withApplyDefault: () => (/* binding */ withApplyDefault)\n/* harmony export */ });\n/* harmony import */ var _get_tables_CMc_Emww_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../get-tables-CMc_Emww.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/get-tables-CMc_Emww.mjs\");\n/* harmony import */ var _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../env-DbssmzoK.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env-DbssmzoK.mjs\");\n/* harmony import */ var _utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils-NloIXYE0.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils-NloIXYE0.mjs\");\n/* harmony import */ var _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../error-RtKwr3Pu.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/error-RtKwr3Pu.mjs\");\n\n\n\n\n\n//#region src/db/adapter/get-default-model-name.ts\nconst initGetDefaultModelName = ({ usePlural, schema }) => {\n\t/**\n\t* This function helps us get the default model name from the schema defined by devs.\n\t* Often times, the user will be using the `modelName` which could had been customized by the users.\n\t* This function helps us get the actual model name useful to match against the schema. (eg: schema[model])\n\t*\n\t* If it's still unclear what this does:\n\t*\n\t* 1. User can define a custom modelName.\n\t* 2. When using a custom modelName, doing something like `schema[model]` will not work.\n\t* 3. Using this function helps us get the actual model name based on the user's defined custom modelName.\n\t*/\n\tconst getDefaultModelName = (model) => {\n\t\tif (usePlural && model.charAt(model.length - 1) === \"s\") {\n\t\t\tlet pluralessModel = model.slice(0, -1);\n\t\t\tlet m$1 = schema[pluralessModel] ? pluralessModel : void 0;\n\t\t\tif (!m$1) m$1 = Object.entries(schema).find(([_, f]) => f.modelName === pluralessModel)?.[0];\n\t\t\tif (m$1) return m$1;\n\t\t}\n\t\tlet m = schema[model] ? model : void 0;\n\t\tif (!m) m = Object.entries(schema).find(([_, f]) => f.modelName === model)?.[0];\n\t\tif (!m) throw new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_3__.t(`Model \"${model}\" not found in schema`);\n\t\treturn m;\n\t};\n\treturn getDefaultModelName;\n};\n\n//#endregion\n//#region src/db/adapter/get-default-field-name.ts\nconst initGetDefaultFieldName = ({ schema, usePlural }) => {\n\tconst getDefaultModelName = initGetDefaultModelName({\n\t\tschema,\n\t\tusePlural\n\t});\n\t/**\n\t* This function helps us get the default field name from the schema defined by devs.\n\t* Often times, the user will be using the `fieldName` which could had been customized by the users.\n\t* This function helps us get the actual field name useful to match against the schema. (eg: schema[model].fields[field])\n\t*\n\t* If it's still unclear what this does:\n\t*\n\t* 1. User can define a custom fieldName.\n\t* 2. When using a custom fieldName, doing something like `schema[model].fields[field]` will not work.\n\t*/\n\tconst getDefaultFieldName = ({ field, model: unsafeModel }) => {\n\t\tif (field === \"id\" || field === \"_id\") return \"id\";\n\t\tconst model = getDefaultModelName(unsafeModel);\n\t\tlet f = schema[model]?.fields[field];\n\t\tif (!f) {\n\t\t\tconst result = Object.entries(schema[model].fields).find(([_, f$1]) => f$1.fieldName === field);\n\t\t\tif (result) {\n\t\t\t\tf = result[1];\n\t\t\t\tfield = result[0];\n\t\t\t}\n\t\t}\n\t\tif (!f) throw new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_3__.t(`Field ${field} not found in model ${model}`);\n\t\treturn field;\n\t};\n\treturn getDefaultFieldName;\n};\n\n//#endregion\n//#region src/db/adapter/get-id-field.ts\nconst initGetIdField = ({ usePlural, schema, disableIdGeneration, options, customIdGenerator, supportsUUIDs }) => {\n\tconst getDefaultModelName = initGetDefaultModelName({\n\t\tusePlural,\n\t\tschema\n\t});\n\tconst idField = ({ customModelName, forceAllowId }) => {\n\t\tconst useNumberId = options.advanced?.database?.useNumberId || options.advanced?.database?.generateId === \"serial\";\n\t\tconst useUUIDs = options.advanced?.database?.generateId === \"uuid\";\n\t\tlet shouldGenerateId = (() => {\n\t\t\tif (disableIdGeneration) return false;\n\t\t\telse if (useNumberId && !forceAllowId) return false;\n\t\t\telse if (useUUIDs) return !supportsUUIDs;\n\t\t\telse return true;\n\t\t})();\n\t\tconst model = getDefaultModelName(customModelName ?? \"id\");\n\t\treturn {\n\t\t\ttype: useNumberId ? \"number\" : \"string\",\n\t\t\trequired: shouldGenerateId ? true : false,\n\t\t\t...shouldGenerateId ? { defaultValue() {\n\t\t\t\tif (disableIdGeneration) return void 0;\n\t\t\t\tlet generateId$1 = options.advanced?.database?.generateId;\n\t\t\t\tif (generateId$1 === false || useNumberId) return void 0;\n\t\t\t\tif (typeof generateId$1 === \"function\") return generateId$1({ model });\n\t\t\t\tif (customIdGenerator) return customIdGenerator({ model });\n\t\t\t\tif (generateId$1 === \"uuid\") return crypto.randomUUID();\n\t\t\t\treturn (0,_utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_2__.r)();\n\t\t\t} } : {},\n\t\t\ttransform: {\n\t\t\t\tinput: (value) => {\n\t\t\t\t\tif (!value) return void 0;\n\t\t\t\t\tif (useNumberId) {\n\t\t\t\t\t\tconst numberValue = Number(value);\n\t\t\t\t\t\tif (isNaN(numberValue)) return;\n\t\t\t\t\t\treturn numberValue;\n\t\t\t\t\t}\n\t\t\t\t\tif (useUUIDs) {\n\t\t\t\t\t\tif (shouldGenerateId && !forceAllowId) return value;\n\t\t\t\t\t\tif (disableIdGeneration) return void 0;\n\t\t\t\t\t\tif (supportsUUIDs) return void 0;\n\t\t\t\t\t\tif (forceAllowId && typeof value === \"string\") if (/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(value)) return value;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconst stack = (/* @__PURE__ */ new Error()).stack?.split(\"\\n\").filter((_, i) => i !== 1).join(\"\\n\").replace(\"Error:\", \"\");\n\t\t\t\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_1__.i.warn(\"[Adapter Factory] - Invalid UUID value for field `id` provided when `forceAllowId` is true. Generating a new UUID.\", stack);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof value !== \"string\" && !supportsUUIDs) return crypto.randomUUID();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t},\n\t\t\t\toutput: (value) => {\n\t\t\t\t\tif (!value) return void 0;\n\t\t\t\t\treturn String(value);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n\treturn idField;\n};\n\n//#endregion\n//#region src/db/adapter/get-field-attributes.ts\nconst initGetFieldAttributes = ({ usePlural, schema, options, customIdGenerator, disableIdGeneration }) => {\n\tconst getDefaultModelName = initGetDefaultModelName({\n\t\tusePlural,\n\t\tschema\n\t});\n\tconst getDefaultFieldName = initGetDefaultFieldName({\n\t\tusePlural,\n\t\tschema\n\t});\n\tconst idField = initGetIdField({\n\t\tusePlural,\n\t\tschema,\n\t\toptions,\n\t\tcustomIdGenerator,\n\t\tdisableIdGeneration\n\t});\n\tconst getFieldAttributes = ({ model, field }) => {\n\t\tconst defaultModelName = getDefaultModelName(model);\n\t\tconst defaultFieldName = getDefaultFieldName({\n\t\t\tfield,\n\t\t\tmodel: defaultModelName\n\t\t});\n\t\tconst fields = schema[defaultModelName].fields;\n\t\tfields.id = idField({ customModelName: defaultModelName });\n\t\tconst fieldAttributes = fields[defaultFieldName];\n\t\tif (!fieldAttributes) throw new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_3__.t(`Field ${field} not found in model ${model}`);\n\t\treturn fieldAttributes;\n\t};\n\treturn getFieldAttributes;\n};\n\n//#endregion\n//#region src/db/adapter/get-field-name.ts\nconst initGetFieldName = ({ schema, usePlural }) => {\n\tconst getDefaultModelName = initGetDefaultModelName({\n\t\tschema,\n\t\tusePlural\n\t});\n\tconst getDefaultFieldName = initGetDefaultFieldName({\n\t\tschema,\n\t\tusePlural\n\t});\n\t/**\n\t* Get the field name which is expected to be saved in the database based on the user's schema.\n\t*\n\t* This function is useful if you need to save the field name to the database.\n\t*\n\t* For example, if the user has defined a custom field name for the `user` model, then you can use this function to get the actual field name from the schema.\n\t*/\n\tfunction getFieldName({ model: modelName, field: fieldName }) {\n\t\tconst model = getDefaultModelName(modelName);\n\t\tconst field = getDefaultFieldName({\n\t\t\tmodel,\n\t\t\tfield: fieldName\n\t\t});\n\t\treturn schema[model]?.fields[field]?.fieldName || field;\n\t}\n\treturn getFieldName;\n};\n\n//#endregion\n//#region src/db/adapter/get-model-name.ts\nconst initGetModelName = ({ usePlural, schema }) => {\n\tconst getDefaultModelName = initGetDefaultModelName({\n\t\tschema,\n\t\tusePlural\n\t});\n\t/**\n\t* Users can overwrite the default model of some tables. This function helps find the correct model name.\n\t* Furthermore, if the user passes `usePlural` as true in their adapter config,\n\t* then we should return the model name ending with an `s`.\n\t*/\n\tconst getModelName = (model) => {\n\t\tconst defaultModelKey = getDefaultModelName(model);\n\t\tif (schema && schema[defaultModelKey] && schema[defaultModelKey].modelName !== model) return usePlural ? `${schema[defaultModelKey].modelName}s` : schema[defaultModelKey].modelName;\n\t\treturn usePlural ? `${model}s` : model;\n\t};\n\treturn getModelName;\n};\n\n//#endregion\n//#region src/db/adapter/utils.ts\nfunction withApplyDefault(value, field, action) {\n\tif (action === \"update\") {\n\t\tif (value === void 0 && field.onUpdate !== void 0) {\n\t\t\tif (typeof field.onUpdate === \"function\") return field.onUpdate();\n\t\t\treturn field.onUpdate;\n\t\t}\n\t\treturn value;\n\t}\n\tif (action === \"create\") {\n\t\tif (value === void 0 || field.required === true && value === null) {\n\t\t\tif (field.defaultValue !== void 0) {\n\t\t\t\tif (typeof field.defaultValue === \"function\") return field.defaultValue();\n\t\t\t\treturn field.defaultValue;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n}\nfunction isObject(item) {\n\treturn item !== null && typeof item === \"object\" && !Array.isArray(item);\n}\nfunction deepmerge(target, source) {\n\tif (Array.isArray(target) && Array.isArray(source)) return [...target, ...source];\n\telse if (isObject(target) && isObject(source)) {\n\t\tconst result = { ...target };\n\t\tfor (const [key, value] of Object.entries(source)) {\n\t\t\tif (value === void 0) continue;\n\t\t\tif (key in target) result[key] = deepmerge(target[key], value);\n\t\t\telse result[key] = value;\n\t\t}\n\t\treturn result;\n\t}\n\treturn source;\n}\n\n//#endregion\n//#region src/db/adapter/factory.ts\nlet debugLogs = [];\nlet transactionId = -1;\nconst createAsIsTransaction = (adapter) => (fn) => fn(adapter);\nconst createAdapterFactory = ({ adapter: customAdapter, config: cfg }) => (options) => {\n\tconst uniqueAdapterFactoryInstanceId = Math.random().toString(36).substring(2, 15);\n\tconst config = {\n\t\t...cfg,\n\t\tsupportsBooleans: cfg.supportsBooleans ?? true,\n\t\tsupportsDates: cfg.supportsDates ?? true,\n\t\tsupportsJSON: cfg.supportsJSON ?? false,\n\t\tadapterName: cfg.adapterName ?? cfg.adapterId,\n\t\tsupportsNumericIds: cfg.supportsNumericIds ?? true,\n\t\tsupportsUUIDs: cfg.supportsUUIDs ?? false,\n\t\tsupportsArrays: cfg.supportsArrays ?? false,\n\t\ttransaction: cfg.transaction ?? false,\n\t\tdisableTransformInput: cfg.disableTransformInput ?? false,\n\t\tdisableTransformOutput: cfg.disableTransformOutput ?? false,\n\t\tdisableTransformJoin: cfg.disableTransformJoin ?? false\n\t};\n\tif ((options.advanced?.database?.useNumberId === true || options.advanced?.database?.generateId === \"serial\") && config.supportsNumericIds === false) throw new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_3__.t(`[${config.adapterName}] Your database or database adapter does not support numeric ids. Please disable \"useNumberId\" in your config.`);\n\tconst schema = (0,_get_tables_CMc_Emww_mjs__WEBPACK_IMPORTED_MODULE_0__.t)(options);\n\tconst debugLog = (...args) => {\n\t\tif (config.debugLogs === true || typeof config.debugLogs === \"object\") {\n\t\t\tconst logger$2 = (0,_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_1__.n)({ level: \"info\" });\n\t\t\tif (typeof config.debugLogs === \"object\" && \"isRunningAdapterTests\" in config.debugLogs) {\n\t\t\t\tif (config.debugLogs.isRunningAdapterTests) {\n\t\t\t\t\targs.shift();\n\t\t\t\t\tdebugLogs.push({\n\t\t\t\t\t\tinstance: uniqueAdapterFactoryInstanceId,\n\t\t\t\t\t\targs\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (typeof config.debugLogs === \"object\" && config.debugLogs.logCondition && !config.debugLogs.logCondition?.()) return;\n\t\t\tif (typeof args[0] === \"object\" && \"method\" in args[0]) {\n\t\t\t\tconst method = args.shift().method;\n\t\t\t\tif (typeof config.debugLogs === \"object\") {\n\t\t\t\t\tif (method === \"create\" && !config.debugLogs.create) return;\n\t\t\t\t\telse if (method === \"update\" && !config.debugLogs.update) return;\n\t\t\t\t\telse if (method === \"updateMany\" && !config.debugLogs.updateMany) return;\n\t\t\t\t\telse if (method === \"findOne\" && !config.debugLogs.findOne) return;\n\t\t\t\t\telse if (method === \"findMany\" && !config.debugLogs.findMany) return;\n\t\t\t\t\telse if (method === \"delete\" && !config.debugLogs.delete) return;\n\t\t\t\t\telse if (method === \"deleteMany\" && !config.debugLogs.deleteMany) return;\n\t\t\t\t\telse if (method === \"count\" && !config.debugLogs.count) return;\n\t\t\t\t}\n\t\t\t\tlogger$2.info(`[${config.adapterName}]`, ...args);\n\t\t\t} else logger$2.info(`[${config.adapterName}]`, ...args);\n\t\t}\n\t};\n\tconst logger$1 = (0,_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_1__.n)(options.logger);\n\tconst getDefaultModelName = initGetDefaultModelName({\n\t\tusePlural: config.usePlural,\n\t\tschema\n\t});\n\tconst getDefaultFieldName = initGetDefaultFieldName({\n\t\tusePlural: config.usePlural,\n\t\tschema\n\t});\n\tconst getModelName = initGetModelName({\n\t\tusePlural: config.usePlural,\n\t\tschema\n\t});\n\tconst getFieldName = initGetFieldName({\n\t\tschema,\n\t\tusePlural: config.usePlural\n\t});\n\tconst idField = initGetIdField({\n\t\tschema,\n\t\toptions,\n\t\tusePlural: config.usePlural,\n\t\tdisableIdGeneration: config.disableIdGeneration,\n\t\tcustomIdGenerator: config.customIdGenerator,\n\t\tsupportsUUIDs: config.supportsUUIDs\n\t});\n\tconst getFieldAttributes = initGetFieldAttributes({\n\t\tschema,\n\t\toptions,\n\t\tusePlural: config.usePlural,\n\t\tdisableIdGeneration: config.disableIdGeneration,\n\t\tcustomIdGenerator: config.customIdGenerator\n\t});\n\tconst transformInput = async (data, defaultModelName, action, forceAllowId) => {\n\t\tconst transformedData = {};\n\t\tconst fields = schema[defaultModelName].fields;\n\t\tconst newMappedKeys = config.mapKeysTransformInput ?? {};\n\t\tconst useNumberId = options.advanced?.database?.useNumberId || options.advanced?.database?.generateId === \"serial\";\n\t\tfields.id = idField({\n\t\t\tcustomModelName: defaultModelName,\n\t\t\tforceAllowId: forceAllowId && \"id\" in data\n\t\t});\n\t\tfor (const field in fields) {\n\t\t\tlet value = data[field];\n\t\t\tconst fieldAttributes = fields[field];\n\t\t\tlet newFieldName = newMappedKeys[field] || fields[field].fieldName || field;\n\t\t\tif (value === void 0 && (fieldAttributes.defaultValue === void 0 && !fieldAttributes.transform?.input && !(action === \"update\" && fieldAttributes.onUpdate) || action === \"update\" && !fieldAttributes.onUpdate)) continue;\n\t\t\tif (fieldAttributes && fieldAttributes.type === \"date\" && !(value instanceof Date) && typeof value === \"string\") try {\n\t\t\t\tvalue = new Date(value);\n\t\t\t} catch {\n\t\t\t\tlogger$1.error(\"[Adapter Factory] Failed to convert string to date\", {\n\t\t\t\t\tvalue,\n\t\t\t\t\tfield\n\t\t\t\t});\n\t\t\t}\n\t\t\tlet newValue = withApplyDefault(value, fieldAttributes, action);\n\t\t\tif (fieldAttributes.transform?.input) newValue = await fieldAttributes.transform.input(newValue);\n\t\t\tif (fieldAttributes.references?.field === \"id\" && useNumberId) if (Array.isArray(newValue)) newValue = newValue.map((x) => x !== null ? Number(x) : null);\n\t\t\telse newValue = newValue !== null ? Number(newValue) : null;\n\t\t\telse if (config.supportsJSON === false && typeof newValue === \"object\" && fieldAttributes.type === \"json\") newValue = JSON.stringify(newValue);\n\t\t\telse if (config.supportsArrays === false && Array.isArray(newValue) && (fieldAttributes.type === \"string[]\" || fieldAttributes.type === \"number[]\")) newValue = JSON.stringify(newValue);\n\t\t\telse if (config.supportsDates === false && newValue instanceof Date && fieldAttributes.type === \"date\") newValue = newValue.toISOString();\n\t\t\telse if (config.supportsBooleans === false && typeof newValue === \"boolean\") newValue = newValue ? 1 : 0;\n\t\t\tif (config.customTransformInput) newValue = config.customTransformInput({\n\t\t\t\tdata: newValue,\n\t\t\t\taction,\n\t\t\t\tfield: newFieldName,\n\t\t\t\tfieldAttributes,\n\t\t\t\tmodel: getModelName(defaultModelName),\n\t\t\t\tschema,\n\t\t\t\toptions\n\t\t\t});\n\t\t\tif (newValue !== void 0) transformedData[newFieldName] = newValue;\n\t\t}\n\t\treturn transformedData;\n\t};\n\tconst transformOutput = async (data, unsafe_model, select = [], join) => {\n\t\tconst transformSingleOutput = async (data$1, unsafe_model$1, select$1 = []) => {\n\t\t\tif (!data$1) return null;\n\t\t\tconst newMappedKeys = config.mapKeysTransformOutput ?? {};\n\t\t\tconst transformedData$1 = {};\n\t\t\tconst tableSchema = schema[getDefaultModelName(unsafe_model$1)].fields;\n\t\t\tconst idKey = Object.entries(newMappedKeys).find(([_, v]) => v === \"id\")?.[0];\n\t\t\ttableSchema[idKey ?? \"id\"] = { type: options.advanced?.database?.useNumberId || options.advanced?.database?.generateId === \"serial\" ? \"number\" : \"string\" };\n\t\t\tfor (const key in tableSchema) {\n\t\t\t\tif (select$1.length && !select$1.includes(key)) continue;\n\t\t\t\tconst field = tableSchema[key];\n\t\t\t\tif (field) {\n\t\t\t\t\tconst originalKey = field.fieldName || key;\n\t\t\t\t\tlet newValue = data$1[Object.entries(newMappedKeys).find(([_, v]) => v === originalKey)?.[0] || originalKey];\n\t\t\t\t\tif (field.transform?.output) newValue = await field.transform.output(newValue);\n\t\t\t\t\tlet newFieldName = newMappedKeys[key] || key;\n\t\t\t\t\tif (originalKey === \"id\" || field.references?.field === \"id\") {\n\t\t\t\t\t\tif (typeof newValue !== \"undefined\" && newValue !== null) newValue = String(newValue);\n\t\t\t\t\t} else if (config.supportsJSON === false && typeof newValue === \"string\" && field.type === \"json\") newValue = (0,_utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_2__.n)(newValue);\n\t\t\t\t\telse if (config.supportsArrays === false && typeof newValue === \"string\" && (field.type === \"string[]\" || field.type === \"number[]\")) newValue = (0,_utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_2__.n)(newValue);\n\t\t\t\t\telse if (config.supportsDates === false && typeof newValue === \"string\" && field.type === \"date\") newValue = new Date(newValue);\n\t\t\t\t\telse if (config.supportsBooleans === false && typeof newValue === \"number\" && field.type === \"boolean\") newValue = newValue === 1;\n\t\t\t\t\tif (config.customTransformOutput) newValue = config.customTransformOutput({\n\t\t\t\t\t\tdata: newValue,\n\t\t\t\t\t\tfield: newFieldName,\n\t\t\t\t\t\tfieldAttributes: field,\n\t\t\t\t\t\tselect: select$1,\n\t\t\t\t\t\tmodel: getModelName(unsafe_model$1),\n\t\t\t\t\t\tschema,\n\t\t\t\t\t\toptions\n\t\t\t\t\t});\n\t\t\t\t\ttransformedData$1[newFieldName] = newValue;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn transformedData$1;\n\t\t};\n\t\tif (!join || Object.keys(join).length === 0) return await transformSingleOutput(data, unsafe_model, select);\n\t\tunsafe_model = getDefaultModelName(unsafe_model);\n\t\tlet transformedData = await transformSingleOutput(data, unsafe_model, select);\n\t\tconst requiredModels = Object.entries(join).map(([model, joinConfig]) => ({\n\t\t\tmodelName: getModelName(model),\n\t\t\tdefaultModelName: getDefaultModelName(model),\n\t\t\tjoinConfig\n\t\t}));\n\t\tif (!data) return null;\n\t\tfor (const { modelName, defaultModelName, joinConfig } of requiredModels) {\n\t\t\tlet joinedData = await (async () => {\n\t\t\t\tif (options.experimental?.joins) return data[modelName];\n\t\t\t\telse return await handleFallbackJoin({\n\t\t\t\t\tbaseModel: unsafe_model,\n\t\t\t\t\tbaseData: transformedData,\n\t\t\t\t\tjoinModel: modelName,\n\t\t\t\t\tspecificJoinConfig: joinConfig\n\t\t\t\t});\n\t\t\t})();\n\t\t\tif (joinedData === void 0 || joinedData === null) joinedData = joinConfig.relation === \"one-to-one\" ? null : [];\n\t\t\tif (joinConfig.relation === \"one-to-many\" && !Array.isArray(joinedData)) joinedData = [joinedData];\n\t\t\tlet transformed = [];\n\t\t\tif (Array.isArray(joinedData)) for (const item of joinedData) {\n\t\t\t\tconst transformedItem = await transformSingleOutput(item, modelName, []);\n\t\t\t\ttransformed.push(transformedItem);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst transformedItem = await transformSingleOutput(joinedData, modelName, []);\n\t\t\t\ttransformed.push(transformedItem);\n\t\t\t}\n\t\t\ttransformedData[defaultModelName] = (joinConfig.relation === \"one-to-one\" ? transformed[0] : transformed) ?? null;\n\t\t}\n\t\treturn transformedData;\n\t};\n\tconst transformWhereClause = ({ model, where, action }) => {\n\t\tif (!where) return void 0;\n\t\tconst newMappedKeys = config.mapKeysTransformInput ?? {};\n\t\treturn where.map((w) => {\n\t\t\tconst { field: unsafe_field, value, operator = \"eq\", connector = \"AND\" } = w;\n\t\t\tif (operator === \"in\") {\n\t\t\t\tif (!Array.isArray(value)) throw new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_3__.t(\"Value must be an array\");\n\t\t\t}\n\t\t\tlet newValue = value;\n\t\t\tconst defaultModelName = getDefaultModelName(model);\n\t\t\tconst defaultFieldName = getDefaultFieldName({\n\t\t\t\tfield: unsafe_field,\n\t\t\t\tmodel\n\t\t\t});\n\t\t\tconst fieldName = newMappedKeys[defaultFieldName] || getFieldName({\n\t\t\t\tfield: defaultFieldName,\n\t\t\t\tmodel: defaultModelName\n\t\t\t});\n\t\t\tconst fieldAttr = getFieldAttributes({\n\t\t\t\tfield: defaultFieldName,\n\t\t\t\tmodel: defaultModelName\n\t\t\t});\n\t\t\tconst useNumberId = options.advanced?.database?.useNumberId || options.advanced?.database?.generateId === \"serial\";\n\t\t\tif (defaultFieldName === \"id\" || fieldAttr.references?.field === \"id\") {\n\t\t\t\tif (useNumberId) if (Array.isArray(value)) newValue = value.map(Number);\n\t\t\t\telse newValue = Number(value);\n\t\t\t}\n\t\t\tif (fieldAttr.type === \"date\" && value instanceof Date && !config.supportsDates) newValue = value.toISOString();\n\t\t\tif (fieldAttr.type === \"boolean\" && typeof value === \"boolean\" && !config.supportsBooleans) newValue = value ? 1 : 0;\n\t\t\tif (fieldAttr.type === \"json\" && typeof value === \"object\" && !config.supportsJSON) try {\n\t\t\t\tnewValue = JSON.stringify(value);\n\t\t\t} catch (error) {\n\t\t\t\tthrow new Error(`Failed to stringify JSON value for field ${fieldName}`, { cause: error });\n\t\t\t}\n\t\t\tif (config.customTransformInput) newValue = config.customTransformInput({\n\t\t\t\tdata: newValue,\n\t\t\t\tfieldAttributes: fieldAttr,\n\t\t\t\tfield: fieldName,\n\t\t\t\tmodel: getModelName(model),\n\t\t\t\tschema,\n\t\t\t\toptions,\n\t\t\t\taction\n\t\t\t});\n\t\t\treturn {\n\t\t\t\toperator,\n\t\t\t\tconnector,\n\t\t\t\tfield: fieldName,\n\t\t\t\tvalue: newValue\n\t\t\t};\n\t\t});\n\t};\n\tconst transformJoinClause = (baseModel, unsanitizedJoin, select) => {\n\t\tif (!unsanitizedJoin) return void 0;\n\t\tif (Object.keys(unsanitizedJoin).length === 0) return void 0;\n\t\tconst transformedJoin = {};\n\t\tfor (const [model, join] of Object.entries(unsanitizedJoin)) {\n\t\t\tif (!join) continue;\n\t\t\tconst defaultModelName = getDefaultModelName(model);\n\t\t\tconst defaultBaseModelName = getDefaultModelName(baseModel);\n\t\t\tlet foreignKeys = Object.entries(schema[defaultModelName].fields).filter(([field, fieldAttributes]) => fieldAttributes.references && getDefaultModelName(fieldAttributes.references.model) === defaultBaseModelName);\n\t\t\tlet isForwardJoin = true;\n\t\t\tif (!foreignKeys.length) {\n\t\t\t\tforeignKeys = Object.entries(schema[defaultBaseModelName].fields).filter(([field, fieldAttributes]) => fieldAttributes.references && getDefaultModelName(fieldAttributes.references.model) === defaultModelName);\n\t\t\t\tisForwardJoin = false;\n\t\t\t}\n\t\t\tif (!foreignKeys.length) throw new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_3__.t(`No foreign key found for model ${model} and base model ${baseModel} while performing join operation.`);\n\t\t\telse if (foreignKeys.length > 1) throw new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_3__.t(`Multiple foreign keys found for model ${model} and base model ${baseModel} while performing join operation. Only one foreign key is supported.`);\n\t\t\tconst [foreignKey, foreignKeyAttributes] = foreignKeys[0];\n\t\t\tif (!foreignKeyAttributes.references) throw new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_3__.t(`No references found for foreign key ${foreignKey} on model ${model} while performing join operation.`);\n\t\t\tlet from;\n\t\t\tlet to;\n\t\t\tlet requiredSelectField;\n\t\t\tif (isForwardJoin) {\n\t\t\t\trequiredSelectField = foreignKeyAttributes.references.field;\n\t\t\t\tfrom = getFieldName({\n\t\t\t\t\tmodel: baseModel,\n\t\t\t\t\tfield: requiredSelectField\n\t\t\t\t});\n\t\t\t\tto = getFieldName({\n\t\t\t\t\tmodel,\n\t\t\t\t\tfield: foreignKey\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\trequiredSelectField = foreignKey;\n\t\t\t\tfrom = getFieldName({\n\t\t\t\t\tmodel: baseModel,\n\t\t\t\t\tfield: requiredSelectField\n\t\t\t\t});\n\t\t\t\tto = getFieldName({\n\t\t\t\t\tmodel,\n\t\t\t\t\tfield: foreignKeyAttributes.references.field\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (select && !select.includes(requiredSelectField)) select.push(requiredSelectField);\n\t\t\tconst isUnique = to === \"id\" ? true : foreignKeyAttributes.unique ?? false;\n\t\t\tlet limit = options.advanced?.database?.defaultFindManyLimit ?? 100;\n\t\t\tif (isUnique) limit = 1;\n\t\t\telse if (typeof join === \"object\" && typeof join.limit === \"number\") limit = join.limit;\n\t\t\ttransformedJoin[getModelName(model)] = {\n\t\t\t\ton: {\n\t\t\t\t\tfrom,\n\t\t\t\t\tto\n\t\t\t\t},\n\t\t\t\tlimit,\n\t\t\t\trelation: isUnique ? \"one-to-one\" : \"one-to-many\"\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tjoin: transformedJoin,\n\t\t\tselect\n\t\t};\n\t};\n\t/**\n\t* Handle joins by making separate queries and combining results (fallback for adapters that don't support native joins).\n\t*/\n\tconst handleFallbackJoin = async ({ baseModel, baseData, joinModel, specificJoinConfig: joinConfig }) => {\n\t\tif (!baseData) return baseData;\n\t\tconst modelName = getModelName(joinModel);\n\t\tconst field = joinConfig.on.to;\n\t\tconst value = baseData[getDefaultFieldName({\n\t\t\tfield: joinConfig.on.from,\n\t\t\tmodel: baseModel\n\t\t})];\n\t\tif (value === null || value === void 0) return joinConfig.relation === \"one-to-one\" ? null : [];\n\t\tlet result;\n\t\tconst where = transformWhereClause({\n\t\t\tmodel: modelName,\n\t\t\twhere: [{\n\t\t\t\tfield,\n\t\t\t\tvalue,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}],\n\t\t\taction: \"findOne\"\n\t\t});\n\t\ttry {\n\t\t\tif (joinConfig.relation === \"one-to-one\") result = await adapterInstance.findOne({\n\t\t\t\tmodel: modelName,\n\t\t\t\twhere\n\t\t\t});\n\t\t\telse {\n\t\t\t\tconst limit = joinConfig.limit ?? options.advanced?.database?.defaultFindManyLimit ?? 100;\n\t\t\t\tresult = await adapterInstance.findMany({\n\t\t\t\t\tmodel: modelName,\n\t\t\t\t\twhere,\n\t\t\t\t\tlimit\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tlogger$1.error(`Failed to query fallback join for model ${modelName}:`, {\n\t\t\t\twhere,\n\t\t\t\tlimit: joinConfig.limit\n\t\t\t});\n\t\t\tconsole.error(error);\n\t\t\tthrow error;\n\t\t}\n\t\treturn result;\n\t};\n\tconst adapterInstance = customAdapter({\n\t\toptions,\n\t\tschema,\n\t\tdebugLog,\n\t\tgetFieldName,\n\t\tgetModelName,\n\t\tgetDefaultModelName,\n\t\tgetDefaultFieldName,\n\t\tgetFieldAttributes,\n\t\ttransformInput,\n\t\ttransformOutput,\n\t\ttransformWhereClause\n\t});\n\tlet lazyLoadTransaction = null;\n\tconst adapter = {\n\t\ttransaction: async (cb) => {\n\t\t\tif (!lazyLoadTransaction) if (!config.transaction) lazyLoadTransaction = createAsIsTransaction(adapter);\n\t\t\telse {\n\t\t\t\tlogger$1.debug(`[${config.adapterName}] - Using provided transaction implementation.`);\n\t\t\t\tlazyLoadTransaction = config.transaction;\n\t\t\t}\n\t\t\treturn lazyLoadTransaction(cb);\n\t\t},\n\t\tcreate: async ({ data: unsafeData, model: unsafeModel, select, forceAllowId = false }) => {\n\t\t\ttransactionId++;\n\t\t\tlet thisTransactionId = transactionId;\n\t\t\tconst model = getModelName(unsafeModel);\n\t\t\tunsafeModel = getDefaultModelName(unsafeModel);\n\t\t\tif (\"id\" in unsafeData && typeof unsafeData.id !== \"undefined\" && !forceAllowId) {\n\t\t\t\tlogger$1.warn(`[${config.adapterName}] - You are trying to create a record with an id. This is not allowed as we handle id generation for you, unless you pass in the \\`forceAllowId\\` parameter. The id will be ignored.`);\n\t\t\t\tconst stack = (/* @__PURE__ */ new Error()).stack?.split(\"\\n\").filter((_, i) => i !== 1).join(\"\\n\").replace(\"Error:\", \"Create method with `id` being called at:\");\n\t\t\t\tconsole.log(stack);\n\t\t\t\tunsafeData.id = void 0;\n\t\t\t}\n\t\t\tdebugLog({ method: \"create\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(1, 4)}`, `${formatMethod(\"create\")} ${formatAction(\"Unsafe Input\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: unsafeData\n\t\t\t});\n\t\t\tlet data = unsafeData;\n\t\t\tif (!config.disableTransformInput) data = await transformInput(unsafeData, unsafeModel, \"create\", forceAllowId);\n\t\t\tdebugLog({ method: \"create\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(2, 4)}`, `${formatMethod(\"create\")} ${formatAction(\"Parsed Input\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata\n\t\t\t});\n\t\t\tconst res = await adapterInstance.create({\n\t\t\t\tdata,\n\t\t\t\tmodel\n\t\t\t});\n\t\t\tdebugLog({ method: \"create\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(3, 4)}`, `${formatMethod(\"create\")} ${formatAction(\"DB Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tres\n\t\t\t});\n\t\t\tlet transformed = res;\n\t\t\tif (!config.disableTransformOutput) transformed = await transformOutput(res, unsafeModel, select, void 0);\n\t\t\tdebugLog({ method: \"create\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(4, 4)}`, `${formatMethod(\"create\")} ${formatAction(\"Parsed Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: transformed\n\t\t\t});\n\t\t\treturn transformed;\n\t\t},\n\t\tupdate: async ({ model: unsafeModel, where: unsafeWhere, update: unsafeData }) => {\n\t\t\ttransactionId++;\n\t\t\tlet thisTransactionId = transactionId;\n\t\t\tunsafeModel = getDefaultModelName(unsafeModel);\n\t\t\tconst model = getModelName(unsafeModel);\n\t\t\tconst where = transformWhereClause({\n\t\t\t\tmodel: unsafeModel,\n\t\t\t\twhere: unsafeWhere,\n\t\t\t\taction: \"update\"\n\t\t\t});\n\t\t\tdebugLog({ method: \"update\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(1, 4)}`, `${formatMethod(\"update\")} ${formatAction(\"Unsafe Input\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: unsafeData\n\t\t\t});\n\t\t\tlet data = unsafeData;\n\t\t\tif (!config.disableTransformInput) data = await transformInput(unsafeData, unsafeModel, \"update\");\n\t\t\tdebugLog({ method: \"update\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(2, 4)}`, `${formatMethod(\"update\")} ${formatAction(\"Parsed Input\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata\n\t\t\t});\n\t\t\tconst res = await adapterInstance.update({\n\t\t\t\tmodel,\n\t\t\t\twhere,\n\t\t\t\tupdate: data\n\t\t\t});\n\t\t\tdebugLog({ method: \"update\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(3, 4)}`, `${formatMethod(\"update\")} ${formatAction(\"DB Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: res\n\t\t\t});\n\t\t\tlet transformed = res;\n\t\t\tif (!config.disableTransformOutput) transformed = await transformOutput(res, unsafeModel, void 0, void 0);\n\t\t\tdebugLog({ method: \"update\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(4, 4)}`, `${formatMethod(\"update\")} ${formatAction(\"Parsed Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: transformed\n\t\t\t});\n\t\t\treturn transformed;\n\t\t},\n\t\tupdateMany: async ({ model: unsafeModel, where: unsafeWhere, update: unsafeData }) => {\n\t\t\ttransactionId++;\n\t\t\tlet thisTransactionId = transactionId;\n\t\t\tconst model = getModelName(unsafeModel);\n\t\t\tconst where = transformWhereClause({\n\t\t\t\tmodel: unsafeModel,\n\t\t\t\twhere: unsafeWhere,\n\t\t\t\taction: \"updateMany\"\n\t\t\t});\n\t\t\tunsafeModel = getDefaultModelName(unsafeModel);\n\t\t\tdebugLog({ method: \"updateMany\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(1, 4)}`, `${formatMethod(\"updateMany\")} ${formatAction(\"Unsafe Input\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: unsafeData\n\t\t\t});\n\t\t\tlet data = unsafeData;\n\t\t\tif (!config.disableTransformInput) data = await transformInput(unsafeData, unsafeModel, \"update\");\n\t\t\tdebugLog({ method: \"updateMany\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(2, 4)}`, `${formatMethod(\"updateMany\")} ${formatAction(\"Parsed Input\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata\n\t\t\t});\n\t\t\tconst updatedCount = await adapterInstance.updateMany({\n\t\t\t\tmodel,\n\t\t\t\twhere,\n\t\t\t\tupdate: data\n\t\t\t});\n\t\t\tdebugLog({ method: \"updateMany\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(3, 4)}`, `${formatMethod(\"updateMany\")} ${formatAction(\"DB Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: updatedCount\n\t\t\t});\n\t\t\tdebugLog({ method: \"updateMany\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(4, 4)}`, `${formatMethod(\"updateMany\")} ${formatAction(\"Parsed Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: updatedCount\n\t\t\t});\n\t\t\treturn updatedCount;\n\t\t},\n\t\tfindOne: async ({ model: unsafeModel, where: unsafeWhere, select, join: unsafeJoin }) => {\n\t\t\ttransactionId++;\n\t\t\tlet thisTransactionId = transactionId;\n\t\t\tconst model = getModelName(unsafeModel);\n\t\t\tconst where = transformWhereClause({\n\t\t\t\tmodel: unsafeModel,\n\t\t\t\twhere: unsafeWhere,\n\t\t\t\taction: \"findOne\"\n\t\t\t});\n\t\t\tunsafeModel = getDefaultModelName(unsafeModel);\n\t\t\tlet join;\n\t\t\tlet passJoinToAdapter = true;\n\t\t\tif (!config.disableTransformJoin) {\n\t\t\t\tconst result = transformJoinClause(unsafeModel, unsafeJoin, select);\n\t\t\t\tif (result) {\n\t\t\t\t\tjoin = result.join;\n\t\t\t\t\tselect = result.select;\n\t\t\t\t}\n\t\t\t\tif (!options.experimental?.joins && join && Object.keys(join).length > 0) passJoinToAdapter = false;\n\t\t\t} else join = unsafeJoin;\n\t\t\tdebugLog({ method: \"findOne\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(1, 3)}`, `${formatMethod(\"findOne\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\twhere,\n\t\t\t\tselect,\n\t\t\t\tjoin\n\t\t\t});\n\t\t\tconst res = await adapterInstance.findOne({\n\t\t\t\tmodel,\n\t\t\t\twhere,\n\t\t\t\tselect,\n\t\t\t\tjoin: passJoinToAdapter ? join : void 0\n\t\t\t});\n\t\t\tdebugLog({ method: \"findOne\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(2, 3)}`, `${formatMethod(\"findOne\")} ${formatAction(\"DB Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: res\n\t\t\t});\n\t\t\tlet transformed = res;\n\t\t\tif (!config.disableTransformOutput) transformed = await transformOutput(res, unsafeModel, select, join);\n\t\t\tdebugLog({ method: \"findOne\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(3, 3)}`, `${formatMethod(\"findOne\")} ${formatAction(\"Parsed Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: transformed\n\t\t\t});\n\t\t\treturn transformed;\n\t\t},\n\t\tfindMany: async ({ model: unsafeModel, where: unsafeWhere, limit: unsafeLimit, sortBy, offset, join: unsafeJoin }) => {\n\t\t\ttransactionId++;\n\t\t\tlet thisTransactionId = transactionId;\n\t\t\tconst limit = unsafeLimit ?? options.advanced?.database?.defaultFindManyLimit ?? 100;\n\t\t\tconst model = getModelName(unsafeModel);\n\t\t\tconst where = transformWhereClause({\n\t\t\t\tmodel: unsafeModel,\n\t\t\t\twhere: unsafeWhere,\n\t\t\t\taction: \"findMany\"\n\t\t\t});\n\t\t\tunsafeModel = getDefaultModelName(unsafeModel);\n\t\t\tlet join;\n\t\t\tlet passJoinToAdapter = true;\n\t\t\tif (!config.disableTransformJoin) {\n\t\t\t\tconst result = transformJoinClause(unsafeModel, unsafeJoin, void 0);\n\t\t\t\tif (result) join = result.join;\n\t\t\t\tif (!options.experimental?.joins && join && Object.keys(join).length > 0) passJoinToAdapter = false;\n\t\t\t} else join = unsafeJoin;\n\t\t\tdebugLog({ method: \"findMany\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(1, 3)}`, `${formatMethod(\"findMany\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\twhere,\n\t\t\t\tlimit,\n\t\t\t\tsortBy,\n\t\t\t\toffset,\n\t\t\t\tjoin\n\t\t\t});\n\t\t\tconst res = await adapterInstance.findMany({\n\t\t\t\tmodel,\n\t\t\t\twhere,\n\t\t\t\tlimit,\n\t\t\t\tsortBy,\n\t\t\t\toffset,\n\t\t\t\tjoin: passJoinToAdapter ? join : void 0\n\t\t\t});\n\t\t\tdebugLog({ method: \"findMany\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(2, 3)}`, `${formatMethod(\"findMany\")} ${formatAction(\"DB Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: res\n\t\t\t});\n\t\t\tlet transformed = res;\n\t\t\tif (!config.disableTransformOutput) transformed = await Promise.all(res.map(async (r) => {\n\t\t\t\treturn await transformOutput(r, unsafeModel, void 0, join);\n\t\t\t}));\n\t\t\tdebugLog({ method: \"findMany\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(3, 3)}`, `${formatMethod(\"findMany\")} ${formatAction(\"Parsed Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: transformed\n\t\t\t});\n\t\t\treturn transformed;\n\t\t},\n\t\tdelete: async ({ model: unsafeModel, where: unsafeWhere }) => {\n\t\t\ttransactionId++;\n\t\t\tlet thisTransactionId = transactionId;\n\t\t\tconst model = getModelName(unsafeModel);\n\t\t\tconst where = transformWhereClause({\n\t\t\t\tmodel: unsafeModel,\n\t\t\t\twhere: unsafeWhere,\n\t\t\t\taction: \"delete\"\n\t\t\t});\n\t\t\tunsafeModel = getDefaultModelName(unsafeModel);\n\t\t\tdebugLog({ method: \"delete\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(1, 2)}`, `${formatMethod(\"delete\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\twhere\n\t\t\t});\n\t\t\tawait adapterInstance.delete({\n\t\t\t\tmodel,\n\t\t\t\twhere\n\t\t\t});\n\t\t\tdebugLog({ method: \"delete\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(2, 2)}`, `${formatMethod(\"delete\")} ${formatAction(\"DB Result\")}:`, { model });\n\t\t},\n\t\tdeleteMany: async ({ model: unsafeModel, where: unsafeWhere }) => {\n\t\t\ttransactionId++;\n\t\t\tlet thisTransactionId = transactionId;\n\t\t\tconst model = getModelName(unsafeModel);\n\t\t\tconst where = transformWhereClause({\n\t\t\t\tmodel: unsafeModel,\n\t\t\t\twhere: unsafeWhere,\n\t\t\t\taction: \"deleteMany\"\n\t\t\t});\n\t\t\tunsafeModel = getDefaultModelName(unsafeModel);\n\t\t\tdebugLog({ method: \"deleteMany\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(1, 2)}`, `${formatMethod(\"deleteMany\")} ${formatAction(\"DeleteMany\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\twhere\n\t\t\t});\n\t\t\tconst res = await adapterInstance.deleteMany({\n\t\t\t\tmodel,\n\t\t\t\twhere\n\t\t\t});\n\t\t\tdebugLog({ method: \"deleteMany\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(2, 2)}`, `${formatMethod(\"deleteMany\")} ${formatAction(\"DB Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: res\n\t\t\t});\n\t\t\treturn res;\n\t\t},\n\t\tcount: async ({ model: unsafeModel, where: unsafeWhere }) => {\n\t\t\ttransactionId++;\n\t\t\tlet thisTransactionId = transactionId;\n\t\t\tconst model = getModelName(unsafeModel);\n\t\t\tconst where = transformWhereClause({\n\t\t\t\tmodel: unsafeModel,\n\t\t\t\twhere: unsafeWhere,\n\t\t\t\taction: \"count\"\n\t\t\t});\n\t\t\tunsafeModel = getDefaultModelName(unsafeModel);\n\t\t\tdebugLog({ method: \"count\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(1, 2)}`, `${formatMethod(\"count\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\twhere\n\t\t\t});\n\t\t\tconst res = await adapterInstance.count({\n\t\t\t\tmodel,\n\t\t\t\twhere\n\t\t\t});\n\t\t\tdebugLog({ method: \"count\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(2, 2)}`, `${formatMethod(\"count\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: res\n\t\t\t});\n\t\t\treturn res;\n\t\t},\n\t\tcreateSchema: adapterInstance.createSchema ? async (_, file) => {\n\t\t\tconst tables = (0,_get_tables_CMc_Emww_mjs__WEBPACK_IMPORTED_MODULE_0__.t)(options);\n\t\t\tif (options.secondaryStorage && !options.session?.storeSessionInDatabase) delete tables.session;\n\t\t\tif (options.rateLimit && options.rateLimit.storage === \"database\" && (typeof options.rateLimit.enabled === \"undefined\" || options.rateLimit.enabled === true)) tables.ratelimit = {\n\t\t\t\tmodelName: options.rateLimit.modelName ?? \"ratelimit\",\n\t\t\t\tfields: {\n\t\t\t\t\tkey: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tunique: true,\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tfieldName: options.rateLimit.fields?.key ?? \"key\"\n\t\t\t\t\t},\n\t\t\t\t\tcount: {\n\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tfieldName: options.rateLimit.fields?.count ?? \"count\"\n\t\t\t\t\t},\n\t\t\t\t\tlastRequest: {\n\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tbigint: true,\n\t\t\t\t\t\tdefaultValue: () => Date.now(),\n\t\t\t\t\t\tfieldName: options.rateLimit.fields?.lastRequest ?? \"lastRequest\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn adapterInstance.createSchema({\n\t\t\t\tfile,\n\t\t\t\ttables\n\t\t\t});\n\t\t} : void 0,\n\t\toptions: {\n\t\t\tadapterConfig: config,\n\t\t\t...adapterInstance.options ?? {}\n\t\t},\n\t\tid: config.adapterId,\n\t\t...config.debugLogs?.isRunningAdapterTests ? { adapterTestDebugLogs: {\n\t\t\tresetDebugLogs() {\n\t\t\t\tdebugLogs = debugLogs.filter((log) => log.instance !== uniqueAdapterFactoryInstanceId);\n\t\t\t},\n\t\t\tprintDebugLogs() {\n\t\t\t\tconst separator = ``.repeat(80);\n\t\t\t\tconst logs = debugLogs.filter((log$1) => log$1.instance === uniqueAdapterFactoryInstanceId);\n\t\t\t\tif (logs.length === 0) return;\n\t\t\t\tlet log = logs.reverse().map((log$1) => {\n\t\t\t\t\tlog$1.args[0] = `\\n${log$1.args[0]}`;\n\t\t\t\t\treturn [...log$1.args, \"\\n\"];\n\t\t\t\t}).reduce((prev, curr) => {\n\t\t\t\t\treturn [...curr, ...prev];\n\t\t\t\t}, [`\\n${separator}`]);\n\t\t\t\tconsole.log(...log);\n\t\t\t}\n\t\t} } : {}\n\t};\n\treturn adapter;\n};\nfunction formatTransactionId(transactionId$1) {\n\tif ((0,_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_1__.o)() < 8) return `#${transactionId$1}`;\n\treturn `${_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_1__.t.fg.magenta}#${transactionId$1}${_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_1__.t.reset}`;\n}\nfunction formatStep(step, total) {\n\treturn `${_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_1__.t.bg.black}${_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_1__.t.fg.yellow}[${step}/${total}]${_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_1__.t.reset}`;\n}\nfunction formatMethod(method) {\n\treturn `${_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_1__.t.bright}${method}${_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_1__.t.reset}`;\n}\nfunction formatAction(action) {\n\treturn `${_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_1__.t.dim}(${action})${_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_1__.t.reset}`;\n}\n/**\n* @deprecated Use `createAdapterFactory` instead. This export will be removed in a future version.\n* @alias\n*/\nconst createAdapter = createAdapterFactory;\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L2RiL2FkYXB0ZXIvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW1FO0FBQzBDO0FBQzlCO0FBQ2Y7O0FBRWhFO0FBQ0EsbUNBQW1DLG1CQUFtQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGtEQUFlLFdBQVcsTUFBTTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsbUNBQW1DLG1CQUFtQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsMkJBQTJCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGtEQUFlLFVBQVUsT0FBTyxxQkFBcUIsTUFBTTtBQUMvRTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMEJBQTBCLG1GQUFtRjtBQUM3RztBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Ysb0JBQW9CLCtCQUErQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxrRUFBa0UsT0FBTztBQUN6RSxzREFBc0QsT0FBTztBQUM3RDtBQUNBLFdBQVcsc0RBQVU7QUFDckIsT0FBTyxJQUFJO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFDQTtBQUNBLFdBQVcsZ0RBQVUsS0FBSyxHQUFHLE9BQU8sR0FBRyxnREFBVSxPQUFPO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiRDpcXGhhY2thdGhvbmUyXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFwucG5wbVxcQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkXFxub2RlX21vZHVsZXNcXEBiZXR0ZXItYXV0aFxcY29yZVxcZGlzdFxcZGJcXGFkYXB0ZXJcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0IGFzIGdldEF1dGhUYWJsZXMgfSBmcm9tIFwiLi4vLi4vZ2V0LXRhYmxlcy1DTWNfRW13dy5tanNcIjtcbmltcG9ydCB7IGkgYXMgbG9nZ2VyLCBuIGFzIGNyZWF0ZUxvZ2dlciwgbyBhcyBnZXRDb2xvckRlcHRoLCB0IGFzIFRUWV9DT0xPUlMgfSBmcm9tIFwiLi4vLi4vZW52LURic3Ntem9LLm1qc1wiO1xuaW1wb3J0IHsgbiBhcyBzYWZlSlNPTlBhcnNlLCByIGFzIGdlbmVyYXRlSWQgfSBmcm9tIFwiLi4vLi4vdXRpbHMtTmxvSVhZRTAubWpzXCI7XG5pbXBvcnQgeyB0IGFzIEJldHRlckF1dGhFcnJvciB9IGZyb20gXCIuLi8uLi9lcnJvci1SdEt3cjNQdS5tanNcIjtcblxuLy8jcmVnaW9uIHNyYy9kYi9hZGFwdGVyL2dldC1kZWZhdWx0LW1vZGVsLW5hbWUudHNcbmNvbnN0IGluaXRHZXREZWZhdWx0TW9kZWxOYW1lID0gKHsgdXNlUGx1cmFsLCBzY2hlbWEgfSkgPT4ge1xuXHQvKipcblx0KiBUaGlzIGZ1bmN0aW9uIGhlbHBzIHVzIGdldCB0aGUgZGVmYXVsdCBtb2RlbCBuYW1lIGZyb20gdGhlIHNjaGVtYSBkZWZpbmVkIGJ5IGRldnMuXG5cdCogT2Z0ZW4gdGltZXMsIHRoZSB1c2VyIHdpbGwgYmUgdXNpbmcgdGhlIGBtb2RlbE5hbWVgIHdoaWNoIGNvdWxkIGhhZCBiZWVuIGN1c3RvbWl6ZWQgYnkgdGhlIHVzZXJzLlxuXHQqIFRoaXMgZnVuY3Rpb24gaGVscHMgdXMgZ2V0IHRoZSBhY3R1YWwgbW9kZWwgbmFtZSB1c2VmdWwgdG8gbWF0Y2ggYWdhaW5zdCB0aGUgc2NoZW1hLiAoZWc6IHNjaGVtYVttb2RlbF0pXG5cdCpcblx0KiBJZiBpdCdzIHN0aWxsIHVuY2xlYXIgd2hhdCB0aGlzIGRvZXM6XG5cdCpcblx0KiAxLiBVc2VyIGNhbiBkZWZpbmUgYSBjdXN0b20gbW9kZWxOYW1lLlxuXHQqIDIuIFdoZW4gdXNpbmcgYSBjdXN0b20gbW9kZWxOYW1lLCBkb2luZyBzb21ldGhpbmcgbGlrZSBgc2NoZW1hW21vZGVsXWAgd2lsbCBub3Qgd29yay5cblx0KiAzLiBVc2luZyB0aGlzIGZ1bmN0aW9uIGhlbHBzIHVzIGdldCB0aGUgYWN0dWFsIG1vZGVsIG5hbWUgYmFzZWQgb24gdGhlIHVzZXIncyBkZWZpbmVkIGN1c3RvbSBtb2RlbE5hbWUuXG5cdCovXG5cdGNvbnN0IGdldERlZmF1bHRNb2RlbE5hbWUgPSAobW9kZWwpID0+IHtcblx0XHRpZiAodXNlUGx1cmFsICYmIG1vZGVsLmNoYXJBdChtb2RlbC5sZW5ndGggLSAxKSA9PT0gXCJzXCIpIHtcblx0XHRcdGxldCBwbHVyYWxlc3NNb2RlbCA9IG1vZGVsLnNsaWNlKDAsIC0xKTtcblx0XHRcdGxldCBtJDEgPSBzY2hlbWFbcGx1cmFsZXNzTW9kZWxdID8gcGx1cmFsZXNzTW9kZWwgOiB2b2lkIDA7XG5cdFx0XHRpZiAoIW0kMSkgbSQxID0gT2JqZWN0LmVudHJpZXMoc2NoZW1hKS5maW5kKChbXywgZl0pID0+IGYubW9kZWxOYW1lID09PSBwbHVyYWxlc3NNb2RlbCk/LlswXTtcblx0XHRcdGlmIChtJDEpIHJldHVybiBtJDE7XG5cdFx0fVxuXHRcdGxldCBtID0gc2NoZW1hW21vZGVsXSA/IG1vZGVsIDogdm9pZCAwO1xuXHRcdGlmICghbSkgbSA9IE9iamVjdC5lbnRyaWVzKHNjaGVtYSkuZmluZCgoW18sIGZdKSA9PiBmLm1vZGVsTmFtZSA9PT0gbW9kZWwpPy5bMF07XG5cdFx0aWYgKCFtKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBNb2RlbCBcIiR7bW9kZWx9XCIgbm90IGZvdW5kIGluIHNjaGVtYWApO1xuXHRcdHJldHVybiBtO1xuXHR9O1xuXHRyZXR1cm4gZ2V0RGVmYXVsdE1vZGVsTmFtZTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9kYi9hZGFwdGVyL2dldC1kZWZhdWx0LWZpZWxkLW5hbWUudHNcbmNvbnN0IGluaXRHZXREZWZhdWx0RmllbGROYW1lID0gKHsgc2NoZW1hLCB1c2VQbHVyYWwgfSkgPT4ge1xuXHRjb25zdCBnZXREZWZhdWx0TW9kZWxOYW1lID0gaW5pdEdldERlZmF1bHRNb2RlbE5hbWUoe1xuXHRcdHNjaGVtYSxcblx0XHR1c2VQbHVyYWxcblx0fSk7XG5cdC8qKlxuXHQqIFRoaXMgZnVuY3Rpb24gaGVscHMgdXMgZ2V0IHRoZSBkZWZhdWx0IGZpZWxkIG5hbWUgZnJvbSB0aGUgc2NoZW1hIGRlZmluZWQgYnkgZGV2cy5cblx0KiBPZnRlbiB0aW1lcywgdGhlIHVzZXIgd2lsbCBiZSB1c2luZyB0aGUgYGZpZWxkTmFtZWAgd2hpY2ggY291bGQgaGFkIGJlZW4gY3VzdG9taXplZCBieSB0aGUgdXNlcnMuXG5cdCogVGhpcyBmdW5jdGlvbiBoZWxwcyB1cyBnZXQgdGhlIGFjdHVhbCBmaWVsZCBuYW1lIHVzZWZ1bCB0byBtYXRjaCBhZ2FpbnN0IHRoZSBzY2hlbWEuIChlZzogc2NoZW1hW21vZGVsXS5maWVsZHNbZmllbGRdKVxuXHQqXG5cdCogSWYgaXQncyBzdGlsbCB1bmNsZWFyIHdoYXQgdGhpcyBkb2VzOlxuXHQqXG5cdCogMS4gVXNlciBjYW4gZGVmaW5lIGEgY3VzdG9tIGZpZWxkTmFtZS5cblx0KiAyLiBXaGVuIHVzaW5nIGEgY3VzdG9tIGZpZWxkTmFtZSwgZG9pbmcgc29tZXRoaW5nIGxpa2UgYHNjaGVtYVttb2RlbF0uZmllbGRzW2ZpZWxkXWAgd2lsbCBub3Qgd29yay5cblx0Ki9cblx0Y29uc3QgZ2V0RGVmYXVsdEZpZWxkTmFtZSA9ICh7IGZpZWxkLCBtb2RlbDogdW5zYWZlTW9kZWwgfSkgPT4ge1xuXHRcdGlmIChmaWVsZCA9PT0gXCJpZFwiIHx8IGZpZWxkID09PSBcIl9pZFwiKSByZXR1cm4gXCJpZFwiO1xuXHRcdGNvbnN0IG1vZGVsID0gZ2V0RGVmYXVsdE1vZGVsTmFtZSh1bnNhZmVNb2RlbCk7XG5cdFx0bGV0IGYgPSBzY2hlbWFbbW9kZWxdPy5maWVsZHNbZmllbGRdO1xuXHRcdGlmICghZikge1xuXHRcdFx0Y29uc3QgcmVzdWx0ID0gT2JqZWN0LmVudHJpZXMoc2NoZW1hW21vZGVsXS5maWVsZHMpLmZpbmQoKFtfLCBmJDFdKSA9PiBmJDEuZmllbGROYW1lID09PSBmaWVsZCk7XG5cdFx0XHRpZiAocmVzdWx0KSB7XG5cdFx0XHRcdGYgPSByZXN1bHRbMV07XG5cdFx0XHRcdGZpZWxkID0gcmVzdWx0WzBdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoIWYpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYEZpZWxkICR7ZmllbGR9IG5vdCBmb3VuZCBpbiBtb2RlbCAke21vZGVsfWApO1xuXHRcdHJldHVybiBmaWVsZDtcblx0fTtcblx0cmV0dXJuIGdldERlZmF1bHRGaWVsZE5hbWU7XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvZGIvYWRhcHRlci9nZXQtaWQtZmllbGQudHNcbmNvbnN0IGluaXRHZXRJZEZpZWxkID0gKHsgdXNlUGx1cmFsLCBzY2hlbWEsIGRpc2FibGVJZEdlbmVyYXRpb24sIG9wdGlvbnMsIGN1c3RvbUlkR2VuZXJhdG9yLCBzdXBwb3J0c1VVSURzIH0pID0+IHtcblx0Y29uc3QgZ2V0RGVmYXVsdE1vZGVsTmFtZSA9IGluaXRHZXREZWZhdWx0TW9kZWxOYW1lKHtcblx0XHR1c2VQbHVyYWwsXG5cdFx0c2NoZW1hXG5cdH0pO1xuXHRjb25zdCBpZEZpZWxkID0gKHsgY3VzdG9tTW9kZWxOYW1lLCBmb3JjZUFsbG93SWQgfSkgPT4ge1xuXHRcdGNvbnN0IHVzZU51bWJlcklkID0gb3B0aW9ucy5hZHZhbmNlZD8uZGF0YWJhc2U/LnVzZU51bWJlcklkIHx8IG9wdGlvbnMuYWR2YW5jZWQ/LmRhdGFiYXNlPy5nZW5lcmF0ZUlkID09PSBcInNlcmlhbFwiO1xuXHRcdGNvbnN0IHVzZVVVSURzID0gb3B0aW9ucy5hZHZhbmNlZD8uZGF0YWJhc2U/LmdlbmVyYXRlSWQgPT09IFwidXVpZFwiO1xuXHRcdGxldCBzaG91bGRHZW5lcmF0ZUlkID0gKCgpID0+IHtcblx0XHRcdGlmIChkaXNhYmxlSWRHZW5lcmF0aW9uKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRlbHNlIGlmICh1c2VOdW1iZXJJZCAmJiAhZm9yY2VBbGxvd0lkKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRlbHNlIGlmICh1c2VVVUlEcykgcmV0dXJuICFzdXBwb3J0c1VVSURzO1xuXHRcdFx0ZWxzZSByZXR1cm4gdHJ1ZTtcblx0XHR9KSgpO1xuXHRcdGNvbnN0IG1vZGVsID0gZ2V0RGVmYXVsdE1vZGVsTmFtZShjdXN0b21Nb2RlbE5hbWUgPz8gXCJpZFwiKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0dHlwZTogdXNlTnVtYmVySWQgPyBcIm51bWJlclwiIDogXCJzdHJpbmdcIixcblx0XHRcdHJlcXVpcmVkOiBzaG91bGRHZW5lcmF0ZUlkID8gdHJ1ZSA6IGZhbHNlLFxuXHRcdFx0Li4uc2hvdWxkR2VuZXJhdGVJZCA/IHsgZGVmYXVsdFZhbHVlKCkge1xuXHRcdFx0XHRpZiAoZGlzYWJsZUlkR2VuZXJhdGlvbikgcmV0dXJuIHZvaWQgMDtcblx0XHRcdFx0bGV0IGdlbmVyYXRlSWQkMSA9IG9wdGlvbnMuYWR2YW5jZWQ/LmRhdGFiYXNlPy5nZW5lcmF0ZUlkO1xuXHRcdFx0XHRpZiAoZ2VuZXJhdGVJZCQxID09PSBmYWxzZSB8fCB1c2VOdW1iZXJJZCkgcmV0dXJuIHZvaWQgMDtcblx0XHRcdFx0aWYgKHR5cGVvZiBnZW5lcmF0ZUlkJDEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIGdlbmVyYXRlSWQkMSh7IG1vZGVsIH0pO1xuXHRcdFx0XHRpZiAoY3VzdG9tSWRHZW5lcmF0b3IpIHJldHVybiBjdXN0b21JZEdlbmVyYXRvcih7IG1vZGVsIH0pO1xuXHRcdFx0XHRpZiAoZ2VuZXJhdGVJZCQxID09PSBcInV1aWRcIikgcmV0dXJuIGNyeXB0by5yYW5kb21VVUlEKCk7XG5cdFx0XHRcdHJldHVybiBnZW5lcmF0ZUlkKCk7XG5cdFx0XHR9IH0gOiB7fSxcblx0XHRcdHRyYW5zZm9ybToge1xuXHRcdFx0XHRpbnB1dDogKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0aWYgKCF2YWx1ZSkgcmV0dXJuIHZvaWQgMDtcblx0XHRcdFx0XHRpZiAodXNlTnVtYmVySWQpIHtcblx0XHRcdFx0XHRcdGNvbnN0IG51bWJlclZhbHVlID0gTnVtYmVyKHZhbHVlKTtcblx0XHRcdFx0XHRcdGlmIChpc05hTihudW1iZXJWYWx1ZSkpIHJldHVybjtcblx0XHRcdFx0XHRcdHJldHVybiBudW1iZXJWYWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHVzZVVVSURzKSB7XG5cdFx0XHRcdFx0XHRpZiAoc2hvdWxkR2VuZXJhdGVJZCAmJiAhZm9yY2VBbGxvd0lkKSByZXR1cm4gdmFsdWU7XG5cdFx0XHRcdFx0XHRpZiAoZGlzYWJsZUlkR2VuZXJhdGlvbikgcmV0dXJuIHZvaWQgMDtcblx0XHRcdFx0XHRcdGlmIChzdXBwb3J0c1VVSURzKSByZXR1cm4gdm9pZCAwO1xuXHRcdFx0XHRcdFx0aWYgKGZvcmNlQWxsb3dJZCAmJiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIGlmICgvXlswLTlhLWZdezh9LVswLTlhLWZdezR9LVsxLTVdWzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9JC9pLnRlc3QodmFsdWUpKSByZXR1cm4gdmFsdWU7XG5cdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc3RhY2sgPSAoLyogQF9fUFVSRV9fICovIG5ldyBFcnJvcigpKS5zdGFjaz8uc3BsaXQoXCJcXG5cIikuZmlsdGVyKChfLCBpKSA9PiBpICE9PSAxKS5qb2luKFwiXFxuXCIpLnJlcGxhY2UoXCJFcnJvcjpcIiwgXCJcIik7XG5cdFx0XHRcdFx0XHRcdGxvZ2dlci53YXJuKFwiW0FkYXB0ZXIgRmFjdG9yeV0gLSBJbnZhbGlkIFVVSUQgdmFsdWUgZm9yIGZpZWxkIGBpZGAgcHJvdmlkZWQgd2hlbiBgZm9yY2VBbGxvd0lkYCBpcyB0cnVlLiBHZW5lcmF0aW5nIGEgbmV3IFVVSUQuXCIsIHN0YWNrKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgdmFsdWUgIT09IFwic3RyaW5nXCIgJiYgIXN1cHBvcnRzVVVJRHMpIHJldHVybiBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdG91dHB1dDogKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0aWYgKCF2YWx1ZSkgcmV0dXJuIHZvaWQgMDtcblx0XHRcdFx0XHRyZXR1cm4gU3RyaW5nKHZhbHVlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH07XG5cdHJldHVybiBpZEZpZWxkO1xufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2RiL2FkYXB0ZXIvZ2V0LWZpZWxkLWF0dHJpYnV0ZXMudHNcbmNvbnN0IGluaXRHZXRGaWVsZEF0dHJpYnV0ZXMgPSAoeyB1c2VQbHVyYWwsIHNjaGVtYSwgb3B0aW9ucywgY3VzdG9tSWRHZW5lcmF0b3IsIGRpc2FibGVJZEdlbmVyYXRpb24gfSkgPT4ge1xuXHRjb25zdCBnZXREZWZhdWx0TW9kZWxOYW1lID0gaW5pdEdldERlZmF1bHRNb2RlbE5hbWUoe1xuXHRcdHVzZVBsdXJhbCxcblx0XHRzY2hlbWFcblx0fSk7XG5cdGNvbnN0IGdldERlZmF1bHRGaWVsZE5hbWUgPSBpbml0R2V0RGVmYXVsdEZpZWxkTmFtZSh7XG5cdFx0dXNlUGx1cmFsLFxuXHRcdHNjaGVtYVxuXHR9KTtcblx0Y29uc3QgaWRGaWVsZCA9IGluaXRHZXRJZEZpZWxkKHtcblx0XHR1c2VQbHVyYWwsXG5cdFx0c2NoZW1hLFxuXHRcdG9wdGlvbnMsXG5cdFx0Y3VzdG9tSWRHZW5lcmF0b3IsXG5cdFx0ZGlzYWJsZUlkR2VuZXJhdGlvblxuXHR9KTtcblx0Y29uc3QgZ2V0RmllbGRBdHRyaWJ1dGVzID0gKHsgbW9kZWwsIGZpZWxkIH0pID0+IHtcblx0XHRjb25zdCBkZWZhdWx0TW9kZWxOYW1lID0gZ2V0RGVmYXVsdE1vZGVsTmFtZShtb2RlbCk7XG5cdFx0Y29uc3QgZGVmYXVsdEZpZWxkTmFtZSA9IGdldERlZmF1bHRGaWVsZE5hbWUoe1xuXHRcdFx0ZmllbGQsXG5cdFx0XHRtb2RlbDogZGVmYXVsdE1vZGVsTmFtZVxuXHRcdH0pO1xuXHRcdGNvbnN0IGZpZWxkcyA9IHNjaGVtYVtkZWZhdWx0TW9kZWxOYW1lXS5maWVsZHM7XG5cdFx0ZmllbGRzLmlkID0gaWRGaWVsZCh7IGN1c3RvbU1vZGVsTmFtZTogZGVmYXVsdE1vZGVsTmFtZSB9KTtcblx0XHRjb25zdCBmaWVsZEF0dHJpYnV0ZXMgPSBmaWVsZHNbZGVmYXVsdEZpZWxkTmFtZV07XG5cdFx0aWYgKCFmaWVsZEF0dHJpYnV0ZXMpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYEZpZWxkICR7ZmllbGR9IG5vdCBmb3VuZCBpbiBtb2RlbCAke21vZGVsfWApO1xuXHRcdHJldHVybiBmaWVsZEF0dHJpYnV0ZXM7XG5cdH07XG5cdHJldHVybiBnZXRGaWVsZEF0dHJpYnV0ZXM7XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvZGIvYWRhcHRlci9nZXQtZmllbGQtbmFtZS50c1xuY29uc3QgaW5pdEdldEZpZWxkTmFtZSA9ICh7IHNjaGVtYSwgdXNlUGx1cmFsIH0pID0+IHtcblx0Y29uc3QgZ2V0RGVmYXVsdE1vZGVsTmFtZSA9IGluaXRHZXREZWZhdWx0TW9kZWxOYW1lKHtcblx0XHRzY2hlbWEsXG5cdFx0dXNlUGx1cmFsXG5cdH0pO1xuXHRjb25zdCBnZXREZWZhdWx0RmllbGROYW1lID0gaW5pdEdldERlZmF1bHRGaWVsZE5hbWUoe1xuXHRcdHNjaGVtYSxcblx0XHR1c2VQbHVyYWxcblx0fSk7XG5cdC8qKlxuXHQqIEdldCB0aGUgZmllbGQgbmFtZSB3aGljaCBpcyBleHBlY3RlZCB0byBiZSBzYXZlZCBpbiB0aGUgZGF0YWJhc2UgYmFzZWQgb24gdGhlIHVzZXIncyBzY2hlbWEuXG5cdCpcblx0KiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWZ1bCBpZiB5b3UgbmVlZCB0byBzYXZlIHRoZSBmaWVsZCBuYW1lIHRvIHRoZSBkYXRhYmFzZS5cblx0KlxuXHQqIEZvciBleGFtcGxlLCBpZiB0aGUgdXNlciBoYXMgZGVmaW5lZCBhIGN1c3RvbSBmaWVsZCBuYW1lIGZvciB0aGUgYHVzZXJgIG1vZGVsLCB0aGVuIHlvdSBjYW4gdXNlIHRoaXMgZnVuY3Rpb24gdG8gZ2V0IHRoZSBhY3R1YWwgZmllbGQgbmFtZSBmcm9tIHRoZSBzY2hlbWEuXG5cdCovXG5cdGZ1bmN0aW9uIGdldEZpZWxkTmFtZSh7IG1vZGVsOiBtb2RlbE5hbWUsIGZpZWxkOiBmaWVsZE5hbWUgfSkge1xuXHRcdGNvbnN0IG1vZGVsID0gZ2V0RGVmYXVsdE1vZGVsTmFtZShtb2RlbE5hbWUpO1xuXHRcdGNvbnN0IGZpZWxkID0gZ2V0RGVmYXVsdEZpZWxkTmFtZSh7XG5cdFx0XHRtb2RlbCxcblx0XHRcdGZpZWxkOiBmaWVsZE5hbWVcblx0XHR9KTtcblx0XHRyZXR1cm4gc2NoZW1hW21vZGVsXT8uZmllbGRzW2ZpZWxkXT8uZmllbGROYW1lIHx8IGZpZWxkO1xuXHR9XG5cdHJldHVybiBnZXRGaWVsZE5hbWU7XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvZGIvYWRhcHRlci9nZXQtbW9kZWwtbmFtZS50c1xuY29uc3QgaW5pdEdldE1vZGVsTmFtZSA9ICh7IHVzZVBsdXJhbCwgc2NoZW1hIH0pID0+IHtcblx0Y29uc3QgZ2V0RGVmYXVsdE1vZGVsTmFtZSA9IGluaXRHZXREZWZhdWx0TW9kZWxOYW1lKHtcblx0XHRzY2hlbWEsXG5cdFx0dXNlUGx1cmFsXG5cdH0pO1xuXHQvKipcblx0KiBVc2VycyBjYW4gb3ZlcndyaXRlIHRoZSBkZWZhdWx0IG1vZGVsIG9mIHNvbWUgdGFibGVzLiBUaGlzIGZ1bmN0aW9uIGhlbHBzIGZpbmQgdGhlIGNvcnJlY3QgbW9kZWwgbmFtZS5cblx0KiBGdXJ0aGVybW9yZSwgaWYgdGhlIHVzZXIgcGFzc2VzIGB1c2VQbHVyYWxgIGFzIHRydWUgaW4gdGhlaXIgYWRhcHRlciBjb25maWcsXG5cdCogdGhlbiB3ZSBzaG91bGQgcmV0dXJuIHRoZSBtb2RlbCBuYW1lIGVuZGluZyB3aXRoIGFuIGBzYC5cblx0Ki9cblx0Y29uc3QgZ2V0TW9kZWxOYW1lID0gKG1vZGVsKSA9PiB7XG5cdFx0Y29uc3QgZGVmYXVsdE1vZGVsS2V5ID0gZ2V0RGVmYXVsdE1vZGVsTmFtZShtb2RlbCk7XG5cdFx0aWYgKHNjaGVtYSAmJiBzY2hlbWFbZGVmYXVsdE1vZGVsS2V5XSAmJiBzY2hlbWFbZGVmYXVsdE1vZGVsS2V5XS5tb2RlbE5hbWUgIT09IG1vZGVsKSByZXR1cm4gdXNlUGx1cmFsID8gYCR7c2NoZW1hW2RlZmF1bHRNb2RlbEtleV0ubW9kZWxOYW1lfXNgIDogc2NoZW1hW2RlZmF1bHRNb2RlbEtleV0ubW9kZWxOYW1lO1xuXHRcdHJldHVybiB1c2VQbHVyYWwgPyBgJHttb2RlbH1zYCA6IG1vZGVsO1xuXHR9O1xuXHRyZXR1cm4gZ2V0TW9kZWxOYW1lO1xufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2RiL2FkYXB0ZXIvdXRpbHMudHNcbmZ1bmN0aW9uIHdpdGhBcHBseURlZmF1bHQodmFsdWUsIGZpZWxkLCBhY3Rpb24pIHtcblx0aWYgKGFjdGlvbiA9PT0gXCJ1cGRhdGVcIikge1xuXHRcdGlmICh2YWx1ZSA9PT0gdm9pZCAwICYmIGZpZWxkLm9uVXBkYXRlICE9PSB2b2lkIDApIHtcblx0XHRcdGlmICh0eXBlb2YgZmllbGQub25VcGRhdGUgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIGZpZWxkLm9uVXBkYXRlKCk7XG5cdFx0XHRyZXR1cm4gZmllbGQub25VcGRhdGU7XG5cdFx0fVxuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxuXHRpZiAoYWN0aW9uID09PSBcImNyZWF0ZVwiKSB7XG5cdFx0aWYgKHZhbHVlID09PSB2b2lkIDAgfHwgZmllbGQucmVxdWlyZWQgPT09IHRydWUgJiYgdmFsdWUgPT09IG51bGwpIHtcblx0XHRcdGlmIChmaWVsZC5kZWZhdWx0VmFsdWUgIT09IHZvaWQgMCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIGZpZWxkLmRlZmF1bHRWYWx1ZSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gZmllbGQuZGVmYXVsdFZhbHVlKCk7XG5cdFx0XHRcdHJldHVybiBmaWVsZC5kZWZhdWx0VmFsdWU7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGlzT2JqZWN0KGl0ZW0pIHtcblx0cmV0dXJuIGl0ZW0gIT09IG51bGwgJiYgdHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkoaXRlbSk7XG59XG5mdW5jdGlvbiBkZWVwbWVyZ2UodGFyZ2V0LCBzb3VyY2UpIHtcblx0aWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0KSAmJiBBcnJheS5pc0FycmF5KHNvdXJjZSkpIHJldHVybiBbLi4udGFyZ2V0LCAuLi5zb3VyY2VdO1xuXHRlbHNlIGlmIChpc09iamVjdCh0YXJnZXQpICYmIGlzT2JqZWN0KHNvdXJjZSkpIHtcblx0XHRjb25zdCByZXN1bHQgPSB7IC4uLnRhcmdldCB9O1xuXHRcdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNvdXJjZSkpIHtcblx0XHRcdGlmICh2YWx1ZSA9PT0gdm9pZCAwKSBjb250aW51ZTtcblx0XHRcdGlmIChrZXkgaW4gdGFyZ2V0KSByZXN1bHRba2V5XSA9IGRlZXBtZXJnZSh0YXJnZXRba2V5XSwgdmFsdWUpO1xuXHRcdFx0ZWxzZSByZXN1bHRba2V5XSA9IHZhbHVlO1xuXHRcdH1cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9XG5cdHJldHVybiBzb3VyY2U7XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9kYi9hZGFwdGVyL2ZhY3RvcnkudHNcbmxldCBkZWJ1Z0xvZ3MgPSBbXTtcbmxldCB0cmFuc2FjdGlvbklkID0gLTE7XG5jb25zdCBjcmVhdGVBc0lzVHJhbnNhY3Rpb24gPSAoYWRhcHRlcikgPT4gKGZuKSA9PiBmbihhZGFwdGVyKTtcbmNvbnN0IGNyZWF0ZUFkYXB0ZXJGYWN0b3J5ID0gKHsgYWRhcHRlcjogY3VzdG9tQWRhcHRlciwgY29uZmlnOiBjZmcgfSkgPT4gKG9wdGlvbnMpID0+IHtcblx0Y29uc3QgdW5pcXVlQWRhcHRlckZhY3RvcnlJbnN0YW5jZUlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDE1KTtcblx0Y29uc3QgY29uZmlnID0ge1xuXHRcdC4uLmNmZyxcblx0XHRzdXBwb3J0c0Jvb2xlYW5zOiBjZmcuc3VwcG9ydHNCb29sZWFucyA/PyB0cnVlLFxuXHRcdHN1cHBvcnRzRGF0ZXM6IGNmZy5zdXBwb3J0c0RhdGVzID8/IHRydWUsXG5cdFx0c3VwcG9ydHNKU09OOiBjZmcuc3VwcG9ydHNKU09OID8/IGZhbHNlLFxuXHRcdGFkYXB0ZXJOYW1lOiBjZmcuYWRhcHRlck5hbWUgPz8gY2ZnLmFkYXB0ZXJJZCxcblx0XHRzdXBwb3J0c051bWVyaWNJZHM6IGNmZy5zdXBwb3J0c051bWVyaWNJZHMgPz8gdHJ1ZSxcblx0XHRzdXBwb3J0c1VVSURzOiBjZmcuc3VwcG9ydHNVVUlEcyA/PyBmYWxzZSxcblx0XHRzdXBwb3J0c0FycmF5czogY2ZnLnN1cHBvcnRzQXJyYXlzID8/IGZhbHNlLFxuXHRcdHRyYW5zYWN0aW9uOiBjZmcudHJhbnNhY3Rpb24gPz8gZmFsc2UsXG5cdFx0ZGlzYWJsZVRyYW5zZm9ybUlucHV0OiBjZmcuZGlzYWJsZVRyYW5zZm9ybUlucHV0ID8/IGZhbHNlLFxuXHRcdGRpc2FibGVUcmFuc2Zvcm1PdXRwdXQ6IGNmZy5kaXNhYmxlVHJhbnNmb3JtT3V0cHV0ID8/IGZhbHNlLFxuXHRcdGRpc2FibGVUcmFuc2Zvcm1Kb2luOiBjZmcuZGlzYWJsZVRyYW5zZm9ybUpvaW4gPz8gZmFsc2Vcblx0fTtcblx0aWYgKChvcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8udXNlTnVtYmVySWQgPT09IHRydWUgfHwgb3B0aW9ucy5hZHZhbmNlZD8uZGF0YWJhc2U/LmdlbmVyYXRlSWQgPT09IFwic2VyaWFsXCIpICYmIGNvbmZpZy5zdXBwb3J0c051bWVyaWNJZHMgPT09IGZhbHNlKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBbJHtjb25maWcuYWRhcHRlck5hbWV9XSBZb3VyIGRhdGFiYXNlIG9yIGRhdGFiYXNlIGFkYXB0ZXIgZG9lcyBub3Qgc3VwcG9ydCBudW1lcmljIGlkcy4gUGxlYXNlIGRpc2FibGUgXCJ1c2VOdW1iZXJJZFwiIGluIHlvdXIgY29uZmlnLmApO1xuXHRjb25zdCBzY2hlbWEgPSBnZXRBdXRoVGFibGVzKG9wdGlvbnMpO1xuXHRjb25zdCBkZWJ1Z0xvZyA9ICguLi5hcmdzKSA9PiB7XG5cdFx0aWYgKGNvbmZpZy5kZWJ1Z0xvZ3MgPT09IHRydWUgfHwgdHlwZW9mIGNvbmZpZy5kZWJ1Z0xvZ3MgPT09IFwib2JqZWN0XCIpIHtcblx0XHRcdGNvbnN0IGxvZ2dlciQyID0gY3JlYXRlTG9nZ2VyKHsgbGV2ZWw6IFwiaW5mb1wiIH0pO1xuXHRcdFx0aWYgKHR5cGVvZiBjb25maWcuZGVidWdMb2dzID09PSBcIm9iamVjdFwiICYmIFwiaXNSdW5uaW5nQWRhcHRlclRlc3RzXCIgaW4gY29uZmlnLmRlYnVnTG9ncykge1xuXHRcdFx0XHRpZiAoY29uZmlnLmRlYnVnTG9ncy5pc1J1bm5pbmdBZGFwdGVyVGVzdHMpIHtcblx0XHRcdFx0XHRhcmdzLnNoaWZ0KCk7XG5cdFx0XHRcdFx0ZGVidWdMb2dzLnB1c2goe1xuXHRcdFx0XHRcdFx0aW5zdGFuY2U6IHVuaXF1ZUFkYXB0ZXJGYWN0b3J5SW5zdGFuY2VJZCxcblx0XHRcdFx0XHRcdGFyZ3Ncblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRpZiAodHlwZW9mIGNvbmZpZy5kZWJ1Z0xvZ3MgPT09IFwib2JqZWN0XCIgJiYgY29uZmlnLmRlYnVnTG9ncy5sb2dDb25kaXRpb24gJiYgIWNvbmZpZy5kZWJ1Z0xvZ3MubG9nQ29uZGl0aW9uPy4oKSkgcmV0dXJuO1xuXHRcdFx0aWYgKHR5cGVvZiBhcmdzWzBdID09PSBcIm9iamVjdFwiICYmIFwibWV0aG9kXCIgaW4gYXJnc1swXSkge1xuXHRcdFx0XHRjb25zdCBtZXRob2QgPSBhcmdzLnNoaWZ0KCkubWV0aG9kO1xuXHRcdFx0XHRpZiAodHlwZW9mIGNvbmZpZy5kZWJ1Z0xvZ3MgPT09IFwib2JqZWN0XCIpIHtcblx0XHRcdFx0XHRpZiAobWV0aG9kID09PSBcImNyZWF0ZVwiICYmICFjb25maWcuZGVidWdMb2dzLmNyZWF0ZSkgcmV0dXJuO1xuXHRcdFx0XHRcdGVsc2UgaWYgKG1ldGhvZCA9PT0gXCJ1cGRhdGVcIiAmJiAhY29uZmlnLmRlYnVnTG9ncy51cGRhdGUpIHJldHVybjtcblx0XHRcdFx0XHRlbHNlIGlmIChtZXRob2QgPT09IFwidXBkYXRlTWFueVwiICYmICFjb25maWcuZGVidWdMb2dzLnVwZGF0ZU1hbnkpIHJldHVybjtcblx0XHRcdFx0XHRlbHNlIGlmIChtZXRob2QgPT09IFwiZmluZE9uZVwiICYmICFjb25maWcuZGVidWdMb2dzLmZpbmRPbmUpIHJldHVybjtcblx0XHRcdFx0XHRlbHNlIGlmIChtZXRob2QgPT09IFwiZmluZE1hbnlcIiAmJiAhY29uZmlnLmRlYnVnTG9ncy5maW5kTWFueSkgcmV0dXJuO1xuXHRcdFx0XHRcdGVsc2UgaWYgKG1ldGhvZCA9PT0gXCJkZWxldGVcIiAmJiAhY29uZmlnLmRlYnVnTG9ncy5kZWxldGUpIHJldHVybjtcblx0XHRcdFx0XHRlbHNlIGlmIChtZXRob2QgPT09IFwiZGVsZXRlTWFueVwiICYmICFjb25maWcuZGVidWdMb2dzLmRlbGV0ZU1hbnkpIHJldHVybjtcblx0XHRcdFx0XHRlbHNlIGlmIChtZXRob2QgPT09IFwiY291bnRcIiAmJiAhY29uZmlnLmRlYnVnTG9ncy5jb3VudCkgcmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGxvZ2dlciQyLmluZm8oYFske2NvbmZpZy5hZGFwdGVyTmFtZX1dYCwgLi4uYXJncyk7XG5cdFx0XHR9IGVsc2UgbG9nZ2VyJDIuaW5mbyhgWyR7Y29uZmlnLmFkYXB0ZXJOYW1lfV1gLCAuLi5hcmdzKTtcblx0XHR9XG5cdH07XG5cdGNvbnN0IGxvZ2dlciQxID0gY3JlYXRlTG9nZ2VyKG9wdGlvbnMubG9nZ2VyKTtcblx0Y29uc3QgZ2V0RGVmYXVsdE1vZGVsTmFtZSA9IGluaXRHZXREZWZhdWx0TW9kZWxOYW1lKHtcblx0XHR1c2VQbHVyYWw6IGNvbmZpZy51c2VQbHVyYWwsXG5cdFx0c2NoZW1hXG5cdH0pO1xuXHRjb25zdCBnZXREZWZhdWx0RmllbGROYW1lID0gaW5pdEdldERlZmF1bHRGaWVsZE5hbWUoe1xuXHRcdHVzZVBsdXJhbDogY29uZmlnLnVzZVBsdXJhbCxcblx0XHRzY2hlbWFcblx0fSk7XG5cdGNvbnN0IGdldE1vZGVsTmFtZSA9IGluaXRHZXRNb2RlbE5hbWUoe1xuXHRcdHVzZVBsdXJhbDogY29uZmlnLnVzZVBsdXJhbCxcblx0XHRzY2hlbWFcblx0fSk7XG5cdGNvbnN0IGdldEZpZWxkTmFtZSA9IGluaXRHZXRGaWVsZE5hbWUoe1xuXHRcdHNjaGVtYSxcblx0XHR1c2VQbHVyYWw6IGNvbmZpZy51c2VQbHVyYWxcblx0fSk7XG5cdGNvbnN0IGlkRmllbGQgPSBpbml0R2V0SWRGaWVsZCh7XG5cdFx0c2NoZW1hLFxuXHRcdG9wdGlvbnMsXG5cdFx0dXNlUGx1cmFsOiBjb25maWcudXNlUGx1cmFsLFxuXHRcdGRpc2FibGVJZEdlbmVyYXRpb246IGNvbmZpZy5kaXNhYmxlSWRHZW5lcmF0aW9uLFxuXHRcdGN1c3RvbUlkR2VuZXJhdG9yOiBjb25maWcuY3VzdG9tSWRHZW5lcmF0b3IsXG5cdFx0c3VwcG9ydHNVVUlEczogY29uZmlnLnN1cHBvcnRzVVVJRHNcblx0fSk7XG5cdGNvbnN0IGdldEZpZWxkQXR0cmlidXRlcyA9IGluaXRHZXRGaWVsZEF0dHJpYnV0ZXMoe1xuXHRcdHNjaGVtYSxcblx0XHRvcHRpb25zLFxuXHRcdHVzZVBsdXJhbDogY29uZmlnLnVzZVBsdXJhbCxcblx0XHRkaXNhYmxlSWRHZW5lcmF0aW9uOiBjb25maWcuZGlzYWJsZUlkR2VuZXJhdGlvbixcblx0XHRjdXN0b21JZEdlbmVyYXRvcjogY29uZmlnLmN1c3RvbUlkR2VuZXJhdG9yXG5cdH0pO1xuXHRjb25zdCB0cmFuc2Zvcm1JbnB1dCA9IGFzeW5jIChkYXRhLCBkZWZhdWx0TW9kZWxOYW1lLCBhY3Rpb24sIGZvcmNlQWxsb3dJZCkgPT4ge1xuXHRcdGNvbnN0IHRyYW5zZm9ybWVkRGF0YSA9IHt9O1xuXHRcdGNvbnN0IGZpZWxkcyA9IHNjaGVtYVtkZWZhdWx0TW9kZWxOYW1lXS5maWVsZHM7XG5cdFx0Y29uc3QgbmV3TWFwcGVkS2V5cyA9IGNvbmZpZy5tYXBLZXlzVHJhbnNmb3JtSW5wdXQgPz8ge307XG5cdFx0Y29uc3QgdXNlTnVtYmVySWQgPSBvcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8udXNlTnVtYmVySWQgfHwgb3B0aW9ucy5hZHZhbmNlZD8uZGF0YWJhc2U/LmdlbmVyYXRlSWQgPT09IFwic2VyaWFsXCI7XG5cdFx0ZmllbGRzLmlkID0gaWRGaWVsZCh7XG5cdFx0XHRjdXN0b21Nb2RlbE5hbWU6IGRlZmF1bHRNb2RlbE5hbWUsXG5cdFx0XHRmb3JjZUFsbG93SWQ6IGZvcmNlQWxsb3dJZCAmJiBcImlkXCIgaW4gZGF0YVxuXHRcdH0pO1xuXHRcdGZvciAoY29uc3QgZmllbGQgaW4gZmllbGRzKSB7XG5cdFx0XHRsZXQgdmFsdWUgPSBkYXRhW2ZpZWxkXTtcblx0XHRcdGNvbnN0IGZpZWxkQXR0cmlidXRlcyA9IGZpZWxkc1tmaWVsZF07XG5cdFx0XHRsZXQgbmV3RmllbGROYW1lID0gbmV3TWFwcGVkS2V5c1tmaWVsZF0gfHwgZmllbGRzW2ZpZWxkXS5maWVsZE5hbWUgfHwgZmllbGQ7XG5cdFx0XHRpZiAodmFsdWUgPT09IHZvaWQgMCAmJiAoZmllbGRBdHRyaWJ1dGVzLmRlZmF1bHRWYWx1ZSA9PT0gdm9pZCAwICYmICFmaWVsZEF0dHJpYnV0ZXMudHJhbnNmb3JtPy5pbnB1dCAmJiAhKGFjdGlvbiA9PT0gXCJ1cGRhdGVcIiAmJiBmaWVsZEF0dHJpYnV0ZXMub25VcGRhdGUpIHx8IGFjdGlvbiA9PT0gXCJ1cGRhdGVcIiAmJiAhZmllbGRBdHRyaWJ1dGVzLm9uVXBkYXRlKSkgY29udGludWU7XG5cdFx0XHRpZiAoZmllbGRBdHRyaWJ1dGVzICYmIGZpZWxkQXR0cmlidXRlcy50eXBlID09PSBcImRhdGVcIiAmJiAhKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkgJiYgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB0cnkge1xuXHRcdFx0XHR2YWx1ZSA9IG5ldyBEYXRlKHZhbHVlKTtcblx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRsb2dnZXIkMS5lcnJvcihcIltBZGFwdGVyIEZhY3RvcnldIEZhaWxlZCB0byBjb252ZXJ0IHN0cmluZyB0byBkYXRlXCIsIHtcblx0XHRcdFx0XHR2YWx1ZSxcblx0XHRcdFx0XHRmaWVsZFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdGxldCBuZXdWYWx1ZSA9IHdpdGhBcHBseURlZmF1bHQodmFsdWUsIGZpZWxkQXR0cmlidXRlcywgYWN0aW9uKTtcblx0XHRcdGlmIChmaWVsZEF0dHJpYnV0ZXMudHJhbnNmb3JtPy5pbnB1dCkgbmV3VmFsdWUgPSBhd2FpdCBmaWVsZEF0dHJpYnV0ZXMudHJhbnNmb3JtLmlucHV0KG5ld1ZhbHVlKTtcblx0XHRcdGlmIChmaWVsZEF0dHJpYnV0ZXMucmVmZXJlbmNlcz8uZmllbGQgPT09IFwiaWRcIiAmJiB1c2VOdW1iZXJJZCkgaWYgKEFycmF5LmlzQXJyYXkobmV3VmFsdWUpKSBuZXdWYWx1ZSA9IG5ld1ZhbHVlLm1hcCgoeCkgPT4geCAhPT0gbnVsbCA/IE51bWJlcih4KSA6IG51bGwpO1xuXHRcdFx0ZWxzZSBuZXdWYWx1ZSA9IG5ld1ZhbHVlICE9PSBudWxsID8gTnVtYmVyKG5ld1ZhbHVlKSA6IG51bGw7XG5cdFx0XHRlbHNlIGlmIChjb25maWcuc3VwcG9ydHNKU09OID09PSBmYWxzZSAmJiB0eXBlb2YgbmV3VmFsdWUgPT09IFwib2JqZWN0XCIgJiYgZmllbGRBdHRyaWJ1dGVzLnR5cGUgPT09IFwianNvblwiKSBuZXdWYWx1ZSA9IEpTT04uc3RyaW5naWZ5KG5ld1ZhbHVlKTtcblx0XHRcdGVsc2UgaWYgKGNvbmZpZy5zdXBwb3J0c0FycmF5cyA9PT0gZmFsc2UgJiYgQXJyYXkuaXNBcnJheShuZXdWYWx1ZSkgJiYgKGZpZWxkQXR0cmlidXRlcy50eXBlID09PSBcInN0cmluZ1tdXCIgfHwgZmllbGRBdHRyaWJ1dGVzLnR5cGUgPT09IFwibnVtYmVyW11cIikpIG5ld1ZhbHVlID0gSlNPTi5zdHJpbmdpZnkobmV3VmFsdWUpO1xuXHRcdFx0ZWxzZSBpZiAoY29uZmlnLnN1cHBvcnRzRGF0ZXMgPT09IGZhbHNlICYmIG5ld1ZhbHVlIGluc3RhbmNlb2YgRGF0ZSAmJiBmaWVsZEF0dHJpYnV0ZXMudHlwZSA9PT0gXCJkYXRlXCIpIG5ld1ZhbHVlID0gbmV3VmFsdWUudG9JU09TdHJpbmcoKTtcblx0XHRcdGVsc2UgaWYgKGNvbmZpZy5zdXBwb3J0c0Jvb2xlYW5zID09PSBmYWxzZSAmJiB0eXBlb2YgbmV3VmFsdWUgPT09IFwiYm9vbGVhblwiKSBuZXdWYWx1ZSA9IG5ld1ZhbHVlID8gMSA6IDA7XG5cdFx0XHRpZiAoY29uZmlnLmN1c3RvbVRyYW5zZm9ybUlucHV0KSBuZXdWYWx1ZSA9IGNvbmZpZy5jdXN0b21UcmFuc2Zvcm1JbnB1dCh7XG5cdFx0XHRcdGRhdGE6IG5ld1ZhbHVlLFxuXHRcdFx0XHRhY3Rpb24sXG5cdFx0XHRcdGZpZWxkOiBuZXdGaWVsZE5hbWUsXG5cdFx0XHRcdGZpZWxkQXR0cmlidXRlcyxcblx0XHRcdFx0bW9kZWw6IGdldE1vZGVsTmFtZShkZWZhdWx0TW9kZWxOYW1lKSxcblx0XHRcdFx0c2NoZW1hLFxuXHRcdFx0XHRvcHRpb25zXG5cdFx0XHR9KTtcblx0XHRcdGlmIChuZXdWYWx1ZSAhPT0gdm9pZCAwKSB0cmFuc2Zvcm1lZERhdGFbbmV3RmllbGROYW1lXSA9IG5ld1ZhbHVlO1xuXHRcdH1cblx0XHRyZXR1cm4gdHJhbnNmb3JtZWREYXRhO1xuXHR9O1xuXHRjb25zdCB0cmFuc2Zvcm1PdXRwdXQgPSBhc3luYyAoZGF0YSwgdW5zYWZlX21vZGVsLCBzZWxlY3QgPSBbXSwgam9pbikgPT4ge1xuXHRcdGNvbnN0IHRyYW5zZm9ybVNpbmdsZU91dHB1dCA9IGFzeW5jIChkYXRhJDEsIHVuc2FmZV9tb2RlbCQxLCBzZWxlY3QkMSA9IFtdKSA9PiB7XG5cdFx0XHRpZiAoIWRhdGEkMSkgcmV0dXJuIG51bGw7XG5cdFx0XHRjb25zdCBuZXdNYXBwZWRLZXlzID0gY29uZmlnLm1hcEtleXNUcmFuc2Zvcm1PdXRwdXQgPz8ge307XG5cdFx0XHRjb25zdCB0cmFuc2Zvcm1lZERhdGEkMSA9IHt9O1xuXHRcdFx0Y29uc3QgdGFibGVTY2hlbWEgPSBzY2hlbWFbZ2V0RGVmYXVsdE1vZGVsTmFtZSh1bnNhZmVfbW9kZWwkMSldLmZpZWxkcztcblx0XHRcdGNvbnN0IGlkS2V5ID0gT2JqZWN0LmVudHJpZXMobmV3TWFwcGVkS2V5cykuZmluZCgoW18sIHZdKSA9PiB2ID09PSBcImlkXCIpPy5bMF07XG5cdFx0XHR0YWJsZVNjaGVtYVtpZEtleSA/PyBcImlkXCJdID0geyB0eXBlOiBvcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8udXNlTnVtYmVySWQgfHwgb3B0aW9ucy5hZHZhbmNlZD8uZGF0YWJhc2U/LmdlbmVyYXRlSWQgPT09IFwic2VyaWFsXCIgPyBcIm51bWJlclwiIDogXCJzdHJpbmdcIiB9O1xuXHRcdFx0Zm9yIChjb25zdCBrZXkgaW4gdGFibGVTY2hlbWEpIHtcblx0XHRcdFx0aWYgKHNlbGVjdCQxLmxlbmd0aCAmJiAhc2VsZWN0JDEuaW5jbHVkZXMoa2V5KSkgY29udGludWU7XG5cdFx0XHRcdGNvbnN0IGZpZWxkID0gdGFibGVTY2hlbWFba2V5XTtcblx0XHRcdFx0aWYgKGZpZWxkKSB7XG5cdFx0XHRcdFx0Y29uc3Qgb3JpZ2luYWxLZXkgPSBmaWVsZC5maWVsZE5hbWUgfHwga2V5O1xuXHRcdFx0XHRcdGxldCBuZXdWYWx1ZSA9IGRhdGEkMVtPYmplY3QuZW50cmllcyhuZXdNYXBwZWRLZXlzKS5maW5kKChbXywgdl0pID0+IHYgPT09IG9yaWdpbmFsS2V5KT8uWzBdIHx8IG9yaWdpbmFsS2V5XTtcblx0XHRcdFx0XHRpZiAoZmllbGQudHJhbnNmb3JtPy5vdXRwdXQpIG5ld1ZhbHVlID0gYXdhaXQgZmllbGQudHJhbnNmb3JtLm91dHB1dChuZXdWYWx1ZSk7XG5cdFx0XHRcdFx0bGV0IG5ld0ZpZWxkTmFtZSA9IG5ld01hcHBlZEtleXNba2V5XSB8fCBrZXk7XG5cdFx0XHRcdFx0aWYgKG9yaWdpbmFsS2V5ID09PSBcImlkXCIgfHwgZmllbGQucmVmZXJlbmNlcz8uZmllbGQgPT09IFwiaWRcIikge1xuXHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBuZXdWYWx1ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBuZXdWYWx1ZSAhPT0gbnVsbCkgbmV3VmFsdWUgPSBTdHJpbmcobmV3VmFsdWUpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoY29uZmlnLnN1cHBvcnRzSlNPTiA9PT0gZmFsc2UgJiYgdHlwZW9mIG5ld1ZhbHVlID09PSBcInN0cmluZ1wiICYmIGZpZWxkLnR5cGUgPT09IFwianNvblwiKSBuZXdWYWx1ZSA9IHNhZmVKU09OUGFyc2UobmV3VmFsdWUpO1xuXHRcdFx0XHRcdGVsc2UgaWYgKGNvbmZpZy5zdXBwb3J0c0FycmF5cyA9PT0gZmFsc2UgJiYgdHlwZW9mIG5ld1ZhbHVlID09PSBcInN0cmluZ1wiICYmIChmaWVsZC50eXBlID09PSBcInN0cmluZ1tdXCIgfHwgZmllbGQudHlwZSA9PT0gXCJudW1iZXJbXVwiKSkgbmV3VmFsdWUgPSBzYWZlSlNPTlBhcnNlKG5ld1ZhbHVlKTtcblx0XHRcdFx0XHRlbHNlIGlmIChjb25maWcuc3VwcG9ydHNEYXRlcyA9PT0gZmFsc2UgJiYgdHlwZW9mIG5ld1ZhbHVlID09PSBcInN0cmluZ1wiICYmIGZpZWxkLnR5cGUgPT09IFwiZGF0ZVwiKSBuZXdWYWx1ZSA9IG5ldyBEYXRlKG5ld1ZhbHVlKTtcblx0XHRcdFx0XHRlbHNlIGlmIChjb25maWcuc3VwcG9ydHNCb29sZWFucyA9PT0gZmFsc2UgJiYgdHlwZW9mIG5ld1ZhbHVlID09PSBcIm51bWJlclwiICYmIGZpZWxkLnR5cGUgPT09IFwiYm9vbGVhblwiKSBuZXdWYWx1ZSA9IG5ld1ZhbHVlID09PSAxO1xuXHRcdFx0XHRcdGlmIChjb25maWcuY3VzdG9tVHJhbnNmb3JtT3V0cHV0KSBuZXdWYWx1ZSA9IGNvbmZpZy5jdXN0b21UcmFuc2Zvcm1PdXRwdXQoe1xuXHRcdFx0XHRcdFx0ZGF0YTogbmV3VmFsdWUsXG5cdFx0XHRcdFx0XHRmaWVsZDogbmV3RmllbGROYW1lLFxuXHRcdFx0XHRcdFx0ZmllbGRBdHRyaWJ1dGVzOiBmaWVsZCxcblx0XHRcdFx0XHRcdHNlbGVjdDogc2VsZWN0JDEsXG5cdFx0XHRcdFx0XHRtb2RlbDogZ2V0TW9kZWxOYW1lKHVuc2FmZV9tb2RlbCQxKSxcblx0XHRcdFx0XHRcdHNjaGVtYSxcblx0XHRcdFx0XHRcdG9wdGlvbnNcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR0cmFuc2Zvcm1lZERhdGEkMVtuZXdGaWVsZE5hbWVdID0gbmV3VmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0cmFuc2Zvcm1lZERhdGEkMTtcblx0XHR9O1xuXHRcdGlmICgham9pbiB8fCBPYmplY3Qua2V5cyhqb2luKS5sZW5ndGggPT09IDApIHJldHVybiBhd2FpdCB0cmFuc2Zvcm1TaW5nbGVPdXRwdXQoZGF0YSwgdW5zYWZlX21vZGVsLCBzZWxlY3QpO1xuXHRcdHVuc2FmZV9tb2RlbCA9IGdldERlZmF1bHRNb2RlbE5hbWUodW5zYWZlX21vZGVsKTtcblx0XHRsZXQgdHJhbnNmb3JtZWREYXRhID0gYXdhaXQgdHJhbnNmb3JtU2luZ2xlT3V0cHV0KGRhdGEsIHVuc2FmZV9tb2RlbCwgc2VsZWN0KTtcblx0XHRjb25zdCByZXF1aXJlZE1vZGVscyA9IE9iamVjdC5lbnRyaWVzKGpvaW4pLm1hcCgoW21vZGVsLCBqb2luQ29uZmlnXSkgPT4gKHtcblx0XHRcdG1vZGVsTmFtZTogZ2V0TW9kZWxOYW1lKG1vZGVsKSxcblx0XHRcdGRlZmF1bHRNb2RlbE5hbWU6IGdldERlZmF1bHRNb2RlbE5hbWUobW9kZWwpLFxuXHRcdFx0am9pbkNvbmZpZ1xuXHRcdH0pKTtcblx0XHRpZiAoIWRhdGEpIHJldHVybiBudWxsO1xuXHRcdGZvciAoY29uc3QgeyBtb2RlbE5hbWUsIGRlZmF1bHRNb2RlbE5hbWUsIGpvaW5Db25maWcgfSBvZiByZXF1aXJlZE1vZGVscykge1xuXHRcdFx0bGV0IGpvaW5lZERhdGEgPSBhd2FpdCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRpZiAob3B0aW9ucy5leHBlcmltZW50YWw/LmpvaW5zKSByZXR1cm4gZGF0YVttb2RlbE5hbWVdO1xuXHRcdFx0XHRlbHNlIHJldHVybiBhd2FpdCBoYW5kbGVGYWxsYmFja0pvaW4oe1xuXHRcdFx0XHRcdGJhc2VNb2RlbDogdW5zYWZlX21vZGVsLFxuXHRcdFx0XHRcdGJhc2VEYXRhOiB0cmFuc2Zvcm1lZERhdGEsXG5cdFx0XHRcdFx0am9pbk1vZGVsOiBtb2RlbE5hbWUsXG5cdFx0XHRcdFx0c3BlY2lmaWNKb2luQ29uZmlnOiBqb2luQ29uZmlnXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSkoKTtcblx0XHRcdGlmIChqb2luZWREYXRhID09PSB2b2lkIDAgfHwgam9pbmVkRGF0YSA9PT0gbnVsbCkgam9pbmVkRGF0YSA9IGpvaW5Db25maWcucmVsYXRpb24gPT09IFwib25lLXRvLW9uZVwiID8gbnVsbCA6IFtdO1xuXHRcdFx0aWYgKGpvaW5Db25maWcucmVsYXRpb24gPT09IFwib25lLXRvLW1hbnlcIiAmJiAhQXJyYXkuaXNBcnJheShqb2luZWREYXRhKSkgam9pbmVkRGF0YSA9IFtqb2luZWREYXRhXTtcblx0XHRcdGxldCB0cmFuc2Zvcm1lZCA9IFtdO1xuXHRcdFx0aWYgKEFycmF5LmlzQXJyYXkoam9pbmVkRGF0YSkpIGZvciAoY29uc3QgaXRlbSBvZiBqb2luZWREYXRhKSB7XG5cdFx0XHRcdGNvbnN0IHRyYW5zZm9ybWVkSXRlbSA9IGF3YWl0IHRyYW5zZm9ybVNpbmdsZU91dHB1dChpdGVtLCBtb2RlbE5hbWUsIFtdKTtcblx0XHRcdFx0dHJhbnNmb3JtZWQucHVzaCh0cmFuc2Zvcm1lZEl0ZW0pO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGNvbnN0IHRyYW5zZm9ybWVkSXRlbSA9IGF3YWl0IHRyYW5zZm9ybVNpbmdsZU91dHB1dChqb2luZWREYXRhLCBtb2RlbE5hbWUsIFtdKTtcblx0XHRcdFx0dHJhbnNmb3JtZWQucHVzaCh0cmFuc2Zvcm1lZEl0ZW0pO1xuXHRcdFx0fVxuXHRcdFx0dHJhbnNmb3JtZWREYXRhW2RlZmF1bHRNb2RlbE5hbWVdID0gKGpvaW5Db25maWcucmVsYXRpb24gPT09IFwib25lLXRvLW9uZVwiID8gdHJhbnNmb3JtZWRbMF0gOiB0cmFuc2Zvcm1lZCkgPz8gbnVsbDtcblx0XHR9XG5cdFx0cmV0dXJuIHRyYW5zZm9ybWVkRGF0YTtcblx0fTtcblx0Y29uc3QgdHJhbnNmb3JtV2hlcmVDbGF1c2UgPSAoeyBtb2RlbCwgd2hlcmUsIGFjdGlvbiB9KSA9PiB7XG5cdFx0aWYgKCF3aGVyZSkgcmV0dXJuIHZvaWQgMDtcblx0XHRjb25zdCBuZXdNYXBwZWRLZXlzID0gY29uZmlnLm1hcEtleXNUcmFuc2Zvcm1JbnB1dCA/PyB7fTtcblx0XHRyZXR1cm4gd2hlcmUubWFwKCh3KSA9PiB7XG5cdFx0XHRjb25zdCB7IGZpZWxkOiB1bnNhZmVfZmllbGQsIHZhbHVlLCBvcGVyYXRvciA9IFwiZXFcIiwgY29ubmVjdG9yID0gXCJBTkRcIiB9ID0gdztcblx0XHRcdGlmIChvcGVyYXRvciA9PT0gXCJpblwiKSB7XG5cdFx0XHRcdGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJWYWx1ZSBtdXN0IGJlIGFuIGFycmF5XCIpO1xuXHRcdFx0fVxuXHRcdFx0bGV0IG5ld1ZhbHVlID0gdmFsdWU7XG5cdFx0XHRjb25zdCBkZWZhdWx0TW9kZWxOYW1lID0gZ2V0RGVmYXVsdE1vZGVsTmFtZShtb2RlbCk7XG5cdFx0XHRjb25zdCBkZWZhdWx0RmllbGROYW1lID0gZ2V0RGVmYXVsdEZpZWxkTmFtZSh7XG5cdFx0XHRcdGZpZWxkOiB1bnNhZmVfZmllbGQsXG5cdFx0XHRcdG1vZGVsXG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IGZpZWxkTmFtZSA9IG5ld01hcHBlZEtleXNbZGVmYXVsdEZpZWxkTmFtZV0gfHwgZ2V0RmllbGROYW1lKHtcblx0XHRcdFx0ZmllbGQ6IGRlZmF1bHRGaWVsZE5hbWUsXG5cdFx0XHRcdG1vZGVsOiBkZWZhdWx0TW9kZWxOYW1lXG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IGZpZWxkQXR0ciA9IGdldEZpZWxkQXR0cmlidXRlcyh7XG5cdFx0XHRcdGZpZWxkOiBkZWZhdWx0RmllbGROYW1lLFxuXHRcdFx0XHRtb2RlbDogZGVmYXVsdE1vZGVsTmFtZVxuXHRcdFx0fSk7XG5cdFx0XHRjb25zdCB1c2VOdW1iZXJJZCA9IG9wdGlvbnMuYWR2YW5jZWQ/LmRhdGFiYXNlPy51c2VOdW1iZXJJZCB8fCBvcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8uZ2VuZXJhdGVJZCA9PT0gXCJzZXJpYWxcIjtcblx0XHRcdGlmIChkZWZhdWx0RmllbGROYW1lID09PSBcImlkXCIgfHwgZmllbGRBdHRyLnJlZmVyZW5jZXM/LmZpZWxkID09PSBcImlkXCIpIHtcblx0XHRcdFx0aWYgKHVzZU51bWJlcklkKSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIG5ld1ZhbHVlID0gdmFsdWUubWFwKE51bWJlcik7XG5cdFx0XHRcdGVsc2UgbmV3VmFsdWUgPSBOdW1iZXIodmFsdWUpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGZpZWxkQXR0ci50eXBlID09PSBcImRhdGVcIiAmJiB2YWx1ZSBpbnN0YW5jZW9mIERhdGUgJiYgIWNvbmZpZy5zdXBwb3J0c0RhdGVzKSBuZXdWYWx1ZSA9IHZhbHVlLnRvSVNPU3RyaW5nKCk7XG5cdFx0XHRpZiAoZmllbGRBdHRyLnR5cGUgPT09IFwiYm9vbGVhblwiICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCIgJiYgIWNvbmZpZy5zdXBwb3J0c0Jvb2xlYW5zKSBuZXdWYWx1ZSA9IHZhbHVlID8gMSA6IDA7XG5cdFx0XHRpZiAoZmllbGRBdHRyLnR5cGUgPT09IFwianNvblwiICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiAhY29uZmlnLnN1cHBvcnRzSlNPTikgdHJ5IHtcblx0XHRcdFx0bmV3VmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzdHJpbmdpZnkgSlNPTiB2YWx1ZSBmb3IgZmllbGQgJHtmaWVsZE5hbWV9YCwgeyBjYXVzZTogZXJyb3IgfSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoY29uZmlnLmN1c3RvbVRyYW5zZm9ybUlucHV0KSBuZXdWYWx1ZSA9IGNvbmZpZy5jdXN0b21UcmFuc2Zvcm1JbnB1dCh7XG5cdFx0XHRcdGRhdGE6IG5ld1ZhbHVlLFxuXHRcdFx0XHRmaWVsZEF0dHJpYnV0ZXM6IGZpZWxkQXR0cixcblx0XHRcdFx0ZmllbGQ6IGZpZWxkTmFtZSxcblx0XHRcdFx0bW9kZWw6IGdldE1vZGVsTmFtZShtb2RlbCksXG5cdFx0XHRcdHNjaGVtYSxcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0YWN0aW9uXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdG9wZXJhdG9yLFxuXHRcdFx0XHRjb25uZWN0b3IsXG5cdFx0XHRcdGZpZWxkOiBmaWVsZE5hbWUsXG5cdFx0XHRcdHZhbHVlOiBuZXdWYWx1ZVxuXHRcdFx0fTtcblx0XHR9KTtcblx0fTtcblx0Y29uc3QgdHJhbnNmb3JtSm9pbkNsYXVzZSA9IChiYXNlTW9kZWwsIHVuc2FuaXRpemVkSm9pbiwgc2VsZWN0KSA9PiB7XG5cdFx0aWYgKCF1bnNhbml0aXplZEpvaW4pIHJldHVybiB2b2lkIDA7XG5cdFx0aWYgKE9iamVjdC5rZXlzKHVuc2FuaXRpemVkSm9pbikubGVuZ3RoID09PSAwKSByZXR1cm4gdm9pZCAwO1xuXHRcdGNvbnN0IHRyYW5zZm9ybWVkSm9pbiA9IHt9O1xuXHRcdGZvciAoY29uc3QgW21vZGVsLCBqb2luXSBvZiBPYmplY3QuZW50cmllcyh1bnNhbml0aXplZEpvaW4pKSB7XG5cdFx0XHRpZiAoIWpvaW4pIGNvbnRpbnVlO1xuXHRcdFx0Y29uc3QgZGVmYXVsdE1vZGVsTmFtZSA9IGdldERlZmF1bHRNb2RlbE5hbWUobW9kZWwpO1xuXHRcdFx0Y29uc3QgZGVmYXVsdEJhc2VNb2RlbE5hbWUgPSBnZXREZWZhdWx0TW9kZWxOYW1lKGJhc2VNb2RlbCk7XG5cdFx0XHRsZXQgZm9yZWlnbktleXMgPSBPYmplY3QuZW50cmllcyhzY2hlbWFbZGVmYXVsdE1vZGVsTmFtZV0uZmllbGRzKS5maWx0ZXIoKFtmaWVsZCwgZmllbGRBdHRyaWJ1dGVzXSkgPT4gZmllbGRBdHRyaWJ1dGVzLnJlZmVyZW5jZXMgJiYgZ2V0RGVmYXVsdE1vZGVsTmFtZShmaWVsZEF0dHJpYnV0ZXMucmVmZXJlbmNlcy5tb2RlbCkgPT09IGRlZmF1bHRCYXNlTW9kZWxOYW1lKTtcblx0XHRcdGxldCBpc0ZvcndhcmRKb2luID0gdHJ1ZTtcblx0XHRcdGlmICghZm9yZWlnbktleXMubGVuZ3RoKSB7XG5cdFx0XHRcdGZvcmVpZ25LZXlzID0gT2JqZWN0LmVudHJpZXMoc2NoZW1hW2RlZmF1bHRCYXNlTW9kZWxOYW1lXS5maWVsZHMpLmZpbHRlcigoW2ZpZWxkLCBmaWVsZEF0dHJpYnV0ZXNdKSA9PiBmaWVsZEF0dHJpYnV0ZXMucmVmZXJlbmNlcyAmJiBnZXREZWZhdWx0TW9kZWxOYW1lKGZpZWxkQXR0cmlidXRlcy5yZWZlcmVuY2VzLm1vZGVsKSA9PT0gZGVmYXVsdE1vZGVsTmFtZSk7XG5cdFx0XHRcdGlzRm9yd2FyZEpvaW4gPSBmYWxzZTtcblx0XHRcdH1cblx0XHRcdGlmICghZm9yZWlnbktleXMubGVuZ3RoKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBObyBmb3JlaWduIGtleSBmb3VuZCBmb3IgbW9kZWwgJHttb2RlbH0gYW5kIGJhc2UgbW9kZWwgJHtiYXNlTW9kZWx9IHdoaWxlIHBlcmZvcm1pbmcgam9pbiBvcGVyYXRpb24uYCk7XG5cdFx0XHRlbHNlIGlmIChmb3JlaWduS2V5cy5sZW5ndGggPiAxKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBNdWx0aXBsZSBmb3JlaWduIGtleXMgZm91bmQgZm9yIG1vZGVsICR7bW9kZWx9IGFuZCBiYXNlIG1vZGVsICR7YmFzZU1vZGVsfSB3aGlsZSBwZXJmb3JtaW5nIGpvaW4gb3BlcmF0aW9uLiBPbmx5IG9uZSBmb3JlaWduIGtleSBpcyBzdXBwb3J0ZWQuYCk7XG5cdFx0XHRjb25zdCBbZm9yZWlnbktleSwgZm9yZWlnbktleUF0dHJpYnV0ZXNdID0gZm9yZWlnbktleXNbMF07XG5cdFx0XHRpZiAoIWZvcmVpZ25LZXlBdHRyaWJ1dGVzLnJlZmVyZW5jZXMpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYE5vIHJlZmVyZW5jZXMgZm91bmQgZm9yIGZvcmVpZ24ga2V5ICR7Zm9yZWlnbktleX0gb24gbW9kZWwgJHttb2RlbH0gd2hpbGUgcGVyZm9ybWluZyBqb2luIG9wZXJhdGlvbi5gKTtcblx0XHRcdGxldCBmcm9tO1xuXHRcdFx0bGV0IHRvO1xuXHRcdFx0bGV0IHJlcXVpcmVkU2VsZWN0RmllbGQ7XG5cdFx0XHRpZiAoaXNGb3J3YXJkSm9pbikge1xuXHRcdFx0XHRyZXF1aXJlZFNlbGVjdEZpZWxkID0gZm9yZWlnbktleUF0dHJpYnV0ZXMucmVmZXJlbmNlcy5maWVsZDtcblx0XHRcdFx0ZnJvbSA9IGdldEZpZWxkTmFtZSh7XG5cdFx0XHRcdFx0bW9kZWw6IGJhc2VNb2RlbCxcblx0XHRcdFx0XHRmaWVsZDogcmVxdWlyZWRTZWxlY3RGaWVsZFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0dG8gPSBnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRcdGZpZWxkOiBmb3JlaWduS2V5XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVxdWlyZWRTZWxlY3RGaWVsZCA9IGZvcmVpZ25LZXk7XG5cdFx0XHRcdGZyb20gPSBnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRcdG1vZGVsOiBiYXNlTW9kZWwsXG5cdFx0XHRcdFx0ZmllbGQ6IHJlcXVpcmVkU2VsZWN0RmllbGRcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHRvID0gZ2V0RmllbGROYW1lKHtcblx0XHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0XHRmaWVsZDogZm9yZWlnbktleUF0dHJpYnV0ZXMucmVmZXJlbmNlcy5maWVsZFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdGlmIChzZWxlY3QgJiYgIXNlbGVjdC5pbmNsdWRlcyhyZXF1aXJlZFNlbGVjdEZpZWxkKSkgc2VsZWN0LnB1c2gocmVxdWlyZWRTZWxlY3RGaWVsZCk7XG5cdFx0XHRjb25zdCBpc1VuaXF1ZSA9IHRvID09PSBcImlkXCIgPyB0cnVlIDogZm9yZWlnbktleUF0dHJpYnV0ZXMudW5pcXVlID8/IGZhbHNlO1xuXHRcdFx0bGV0IGxpbWl0ID0gb3B0aW9ucy5hZHZhbmNlZD8uZGF0YWJhc2U/LmRlZmF1bHRGaW5kTWFueUxpbWl0ID8/IDEwMDtcblx0XHRcdGlmIChpc1VuaXF1ZSkgbGltaXQgPSAxO1xuXHRcdFx0ZWxzZSBpZiAodHlwZW9mIGpvaW4gPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGpvaW4ubGltaXQgPT09IFwibnVtYmVyXCIpIGxpbWl0ID0gam9pbi5saW1pdDtcblx0XHRcdHRyYW5zZm9ybWVkSm9pbltnZXRNb2RlbE5hbWUobW9kZWwpXSA9IHtcblx0XHRcdFx0b246IHtcblx0XHRcdFx0XHRmcm9tLFxuXHRcdFx0XHRcdHRvXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGxpbWl0LFxuXHRcdFx0XHRyZWxhdGlvbjogaXNVbmlxdWUgPyBcIm9uZS10by1vbmVcIiA6IFwib25lLXRvLW1hbnlcIlxuXHRcdFx0fTtcblx0XHR9XG5cdFx0cmV0dXJuIHtcblx0XHRcdGpvaW46IHRyYW5zZm9ybWVkSm9pbixcblx0XHRcdHNlbGVjdFxuXHRcdH07XG5cdH07XG5cdC8qKlxuXHQqIEhhbmRsZSBqb2lucyBieSBtYWtpbmcgc2VwYXJhdGUgcXVlcmllcyBhbmQgY29tYmluaW5nIHJlc3VsdHMgKGZhbGxiYWNrIGZvciBhZGFwdGVycyB0aGF0IGRvbid0IHN1cHBvcnQgbmF0aXZlIGpvaW5zKS5cblx0Ki9cblx0Y29uc3QgaGFuZGxlRmFsbGJhY2tKb2luID0gYXN5bmMgKHsgYmFzZU1vZGVsLCBiYXNlRGF0YSwgam9pbk1vZGVsLCBzcGVjaWZpY0pvaW5Db25maWc6IGpvaW5Db25maWcgfSkgPT4ge1xuXHRcdGlmICghYmFzZURhdGEpIHJldHVybiBiYXNlRGF0YTtcblx0XHRjb25zdCBtb2RlbE5hbWUgPSBnZXRNb2RlbE5hbWUoam9pbk1vZGVsKTtcblx0XHRjb25zdCBmaWVsZCA9IGpvaW5Db25maWcub24udG87XG5cdFx0Y29uc3QgdmFsdWUgPSBiYXNlRGF0YVtnZXREZWZhdWx0RmllbGROYW1lKHtcblx0XHRcdGZpZWxkOiBqb2luQ29uZmlnLm9uLmZyb20sXG5cdFx0XHRtb2RlbDogYmFzZU1vZGVsXG5cdFx0fSldO1xuXHRcdGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdm9pZCAwKSByZXR1cm4gam9pbkNvbmZpZy5yZWxhdGlvbiA9PT0gXCJvbmUtdG8tb25lXCIgPyBudWxsIDogW107XG5cdFx0bGV0IHJlc3VsdDtcblx0XHRjb25zdCB3aGVyZSA9IHRyYW5zZm9ybVdoZXJlQ2xhdXNlKHtcblx0XHRcdG1vZGVsOiBtb2RlbE5hbWUsXG5cdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0ZmllbGQsXG5cdFx0XHRcdHZhbHVlLFxuXHRcdFx0XHRvcGVyYXRvcjogXCJlcVwiLFxuXHRcdFx0XHRjb25uZWN0b3I6IFwiQU5EXCJcblx0XHRcdH1dLFxuXHRcdFx0YWN0aW9uOiBcImZpbmRPbmVcIlxuXHRcdH0pO1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAoam9pbkNvbmZpZy5yZWxhdGlvbiA9PT0gXCJvbmUtdG8tb25lXCIpIHJlc3VsdCA9IGF3YWl0IGFkYXB0ZXJJbnN0YW5jZS5maW5kT25lKHtcblx0XHRcdFx0bW9kZWw6IG1vZGVsTmFtZSxcblx0XHRcdFx0d2hlcmVcblx0XHRcdH0pO1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGNvbnN0IGxpbWl0ID0gam9pbkNvbmZpZy5saW1pdCA/PyBvcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8uZGVmYXVsdEZpbmRNYW55TGltaXQgPz8gMTAwO1xuXHRcdFx0XHRyZXN1bHQgPSBhd2FpdCBhZGFwdGVySW5zdGFuY2UuZmluZE1hbnkoe1xuXHRcdFx0XHRcdG1vZGVsOiBtb2RlbE5hbWUsXG5cdFx0XHRcdFx0d2hlcmUsXG5cdFx0XHRcdFx0bGltaXRcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGxvZ2dlciQxLmVycm9yKGBGYWlsZWQgdG8gcXVlcnkgZmFsbGJhY2sgam9pbiBmb3IgbW9kZWwgJHttb2RlbE5hbWV9OmAsIHtcblx0XHRcdFx0d2hlcmUsXG5cdFx0XHRcdGxpbWl0OiBqb2luQ29uZmlnLmxpbWl0XG5cdFx0XHR9KTtcblx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH07XG5cdGNvbnN0IGFkYXB0ZXJJbnN0YW5jZSA9IGN1c3RvbUFkYXB0ZXIoe1xuXHRcdG9wdGlvbnMsXG5cdFx0c2NoZW1hLFxuXHRcdGRlYnVnTG9nLFxuXHRcdGdldEZpZWxkTmFtZSxcblx0XHRnZXRNb2RlbE5hbWUsXG5cdFx0Z2V0RGVmYXVsdE1vZGVsTmFtZSxcblx0XHRnZXREZWZhdWx0RmllbGROYW1lLFxuXHRcdGdldEZpZWxkQXR0cmlidXRlcyxcblx0XHR0cmFuc2Zvcm1JbnB1dCxcblx0XHR0cmFuc2Zvcm1PdXRwdXQsXG5cdFx0dHJhbnNmb3JtV2hlcmVDbGF1c2Vcblx0fSk7XG5cdGxldCBsYXp5TG9hZFRyYW5zYWN0aW9uID0gbnVsbDtcblx0Y29uc3QgYWRhcHRlciA9IHtcblx0XHR0cmFuc2FjdGlvbjogYXN5bmMgKGNiKSA9PiB7XG5cdFx0XHRpZiAoIWxhenlMb2FkVHJhbnNhY3Rpb24pIGlmICghY29uZmlnLnRyYW5zYWN0aW9uKSBsYXp5TG9hZFRyYW5zYWN0aW9uID0gY3JlYXRlQXNJc1RyYW5zYWN0aW9uKGFkYXB0ZXIpO1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGxvZ2dlciQxLmRlYnVnKGBbJHtjb25maWcuYWRhcHRlck5hbWV9XSAtIFVzaW5nIHByb3ZpZGVkIHRyYW5zYWN0aW9uIGltcGxlbWVudGF0aW9uLmApO1xuXHRcdFx0XHRsYXp5TG9hZFRyYW5zYWN0aW9uID0gY29uZmlnLnRyYW5zYWN0aW9uO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGxhenlMb2FkVHJhbnNhY3Rpb24oY2IpO1xuXHRcdH0sXG5cdFx0Y3JlYXRlOiBhc3luYyAoeyBkYXRhOiB1bnNhZmVEYXRhLCBtb2RlbDogdW5zYWZlTW9kZWwsIHNlbGVjdCwgZm9yY2VBbGxvd0lkID0gZmFsc2UgfSkgPT4ge1xuXHRcdFx0dHJhbnNhY3Rpb25JZCsrO1xuXHRcdFx0bGV0IHRoaXNUcmFuc2FjdGlvbklkID0gdHJhbnNhY3Rpb25JZDtcblx0XHRcdGNvbnN0IG1vZGVsID0gZ2V0TW9kZWxOYW1lKHVuc2FmZU1vZGVsKTtcblx0XHRcdHVuc2FmZU1vZGVsID0gZ2V0RGVmYXVsdE1vZGVsTmFtZSh1bnNhZmVNb2RlbCk7XG5cdFx0XHRpZiAoXCJpZFwiIGluIHVuc2FmZURhdGEgJiYgdHlwZW9mIHVuc2FmZURhdGEuaWQgIT09IFwidW5kZWZpbmVkXCIgJiYgIWZvcmNlQWxsb3dJZCkge1xuXHRcdFx0XHRsb2dnZXIkMS53YXJuKGBbJHtjb25maWcuYWRhcHRlck5hbWV9XSAtIFlvdSBhcmUgdHJ5aW5nIHRvIGNyZWF0ZSBhIHJlY29yZCB3aXRoIGFuIGlkLiBUaGlzIGlzIG5vdCBhbGxvd2VkIGFzIHdlIGhhbmRsZSBpZCBnZW5lcmF0aW9uIGZvciB5b3UsIHVubGVzcyB5b3UgcGFzcyBpbiB0aGUgXFxgZm9yY2VBbGxvd0lkXFxgIHBhcmFtZXRlci4gVGhlIGlkIHdpbGwgYmUgaWdub3JlZC5gKTtcblx0XHRcdFx0Y29uc3Qgc3RhY2sgPSAoLyogQF9fUFVSRV9fICovIG5ldyBFcnJvcigpKS5zdGFjaz8uc3BsaXQoXCJcXG5cIikuZmlsdGVyKChfLCBpKSA9PiBpICE9PSAxKS5qb2luKFwiXFxuXCIpLnJlcGxhY2UoXCJFcnJvcjpcIiwgXCJDcmVhdGUgbWV0aG9kIHdpdGggYGlkYCBiZWluZyBjYWxsZWQgYXQ6XCIpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhzdGFjayk7XG5cdFx0XHRcdHVuc2FmZURhdGEuaWQgPSB2b2lkIDA7XG5cdFx0XHR9XG5cdFx0XHRkZWJ1Z0xvZyh7IG1ldGhvZDogXCJjcmVhdGVcIiB9LCBgJHtmb3JtYXRUcmFuc2FjdGlvbklkKHRoaXNUcmFuc2FjdGlvbklkKX0gJHtmb3JtYXRTdGVwKDEsIDQpfWAsIGAke2Zvcm1hdE1ldGhvZChcImNyZWF0ZVwiKX0gJHtmb3JtYXRBY3Rpb24oXCJVbnNhZmUgSW5wdXRcIil9OmAsIHtcblx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdGRhdGE6IHVuc2FmZURhdGFcblx0XHRcdH0pO1xuXHRcdFx0bGV0IGRhdGEgPSB1bnNhZmVEYXRhO1xuXHRcdFx0aWYgKCFjb25maWcuZGlzYWJsZVRyYW5zZm9ybUlucHV0KSBkYXRhID0gYXdhaXQgdHJhbnNmb3JtSW5wdXQodW5zYWZlRGF0YSwgdW5zYWZlTW9kZWwsIFwiY3JlYXRlXCIsIGZvcmNlQWxsb3dJZCk7XG5cdFx0XHRkZWJ1Z0xvZyh7IG1ldGhvZDogXCJjcmVhdGVcIiB9LCBgJHtmb3JtYXRUcmFuc2FjdGlvbklkKHRoaXNUcmFuc2FjdGlvbklkKX0gJHtmb3JtYXRTdGVwKDIsIDQpfWAsIGAke2Zvcm1hdE1ldGhvZChcImNyZWF0ZVwiKX0gJHtmb3JtYXRBY3Rpb24oXCJQYXJzZWQgSW5wdXRcIil9OmAsIHtcblx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdGRhdGFcblx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgcmVzID0gYXdhaXQgYWRhcHRlckluc3RhbmNlLmNyZWF0ZSh7XG5cdFx0XHRcdGRhdGEsXG5cdFx0XHRcdG1vZGVsXG5cdFx0XHR9KTtcblx0XHRcdGRlYnVnTG9nKHsgbWV0aG9kOiBcImNyZWF0ZVwiIH0sIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoMywgNCl9YCwgYCR7Zm9ybWF0TWV0aG9kKFwiY3JlYXRlXCIpfSAke2Zvcm1hdEFjdGlvbihcIkRCIFJlc3VsdFwiKX06YCwge1xuXHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0cmVzXG5cdFx0XHR9KTtcblx0XHRcdGxldCB0cmFuc2Zvcm1lZCA9IHJlcztcblx0XHRcdGlmICghY29uZmlnLmRpc2FibGVUcmFuc2Zvcm1PdXRwdXQpIHRyYW5zZm9ybWVkID0gYXdhaXQgdHJhbnNmb3JtT3V0cHV0KHJlcywgdW5zYWZlTW9kZWwsIHNlbGVjdCwgdm9pZCAwKTtcblx0XHRcdGRlYnVnTG9nKHsgbWV0aG9kOiBcImNyZWF0ZVwiIH0sIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoNCwgNCl9YCwgYCR7Zm9ybWF0TWV0aG9kKFwiY3JlYXRlXCIpfSAke2Zvcm1hdEFjdGlvbihcIlBhcnNlZCBSZXN1bHRcIil9OmAsIHtcblx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdGRhdGE6IHRyYW5zZm9ybWVkXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiB0cmFuc2Zvcm1lZDtcblx0XHR9LFxuXHRcdHVwZGF0ZTogYXN5bmMgKHsgbW9kZWw6IHVuc2FmZU1vZGVsLCB3aGVyZTogdW5zYWZlV2hlcmUsIHVwZGF0ZTogdW5zYWZlRGF0YSB9KSA9PiB7XG5cdFx0XHR0cmFuc2FjdGlvbklkKys7XG5cdFx0XHRsZXQgdGhpc1RyYW5zYWN0aW9uSWQgPSB0cmFuc2FjdGlvbklkO1xuXHRcdFx0dW5zYWZlTW9kZWwgPSBnZXREZWZhdWx0TW9kZWxOYW1lKHVuc2FmZU1vZGVsKTtcblx0XHRcdGNvbnN0IG1vZGVsID0gZ2V0TW9kZWxOYW1lKHVuc2FmZU1vZGVsKTtcblx0XHRcdGNvbnN0IHdoZXJlID0gdHJhbnNmb3JtV2hlcmVDbGF1c2Uoe1xuXHRcdFx0XHRtb2RlbDogdW5zYWZlTW9kZWwsXG5cdFx0XHRcdHdoZXJlOiB1bnNhZmVXaGVyZSxcblx0XHRcdFx0YWN0aW9uOiBcInVwZGF0ZVwiXG5cdFx0XHR9KTtcblx0XHRcdGRlYnVnTG9nKHsgbWV0aG9kOiBcInVwZGF0ZVwiIH0sIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoMSwgNCl9YCwgYCR7Zm9ybWF0TWV0aG9kKFwidXBkYXRlXCIpfSAke2Zvcm1hdEFjdGlvbihcIlVuc2FmZSBJbnB1dFwiKX06YCwge1xuXHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0ZGF0YTogdW5zYWZlRGF0YVxuXHRcdFx0fSk7XG5cdFx0XHRsZXQgZGF0YSA9IHVuc2FmZURhdGE7XG5cdFx0XHRpZiAoIWNvbmZpZy5kaXNhYmxlVHJhbnNmb3JtSW5wdXQpIGRhdGEgPSBhd2FpdCB0cmFuc2Zvcm1JbnB1dCh1bnNhZmVEYXRhLCB1bnNhZmVNb2RlbCwgXCJ1cGRhdGVcIik7XG5cdFx0XHRkZWJ1Z0xvZyh7IG1ldGhvZDogXCJ1cGRhdGVcIiB9LCBgJHtmb3JtYXRUcmFuc2FjdGlvbklkKHRoaXNUcmFuc2FjdGlvbklkKX0gJHtmb3JtYXRTdGVwKDIsIDQpfWAsIGAke2Zvcm1hdE1ldGhvZChcInVwZGF0ZVwiKX0gJHtmb3JtYXRBY3Rpb24oXCJQYXJzZWQgSW5wdXRcIil9OmAsIHtcblx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdGRhdGFcblx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgcmVzID0gYXdhaXQgYWRhcHRlckluc3RhbmNlLnVwZGF0ZSh7XG5cdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHR3aGVyZSxcblx0XHRcdFx0dXBkYXRlOiBkYXRhXG5cdFx0XHR9KTtcblx0XHRcdGRlYnVnTG9nKHsgbWV0aG9kOiBcInVwZGF0ZVwiIH0sIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoMywgNCl9YCwgYCR7Zm9ybWF0TWV0aG9kKFwidXBkYXRlXCIpfSAke2Zvcm1hdEFjdGlvbihcIkRCIFJlc3VsdFwiKX06YCwge1xuXHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0ZGF0YTogcmVzXG5cdFx0XHR9KTtcblx0XHRcdGxldCB0cmFuc2Zvcm1lZCA9IHJlcztcblx0XHRcdGlmICghY29uZmlnLmRpc2FibGVUcmFuc2Zvcm1PdXRwdXQpIHRyYW5zZm9ybWVkID0gYXdhaXQgdHJhbnNmb3JtT3V0cHV0KHJlcywgdW5zYWZlTW9kZWwsIHZvaWQgMCwgdm9pZCAwKTtcblx0XHRcdGRlYnVnTG9nKHsgbWV0aG9kOiBcInVwZGF0ZVwiIH0sIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoNCwgNCl9YCwgYCR7Zm9ybWF0TWV0aG9kKFwidXBkYXRlXCIpfSAke2Zvcm1hdEFjdGlvbihcIlBhcnNlZCBSZXN1bHRcIil9OmAsIHtcblx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdGRhdGE6IHRyYW5zZm9ybWVkXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiB0cmFuc2Zvcm1lZDtcblx0XHR9LFxuXHRcdHVwZGF0ZU1hbnk6IGFzeW5jICh7IG1vZGVsOiB1bnNhZmVNb2RlbCwgd2hlcmU6IHVuc2FmZVdoZXJlLCB1cGRhdGU6IHVuc2FmZURhdGEgfSkgPT4ge1xuXHRcdFx0dHJhbnNhY3Rpb25JZCsrO1xuXHRcdFx0bGV0IHRoaXNUcmFuc2FjdGlvbklkID0gdHJhbnNhY3Rpb25JZDtcblx0XHRcdGNvbnN0IG1vZGVsID0gZ2V0TW9kZWxOYW1lKHVuc2FmZU1vZGVsKTtcblx0XHRcdGNvbnN0IHdoZXJlID0gdHJhbnNmb3JtV2hlcmVDbGF1c2Uoe1xuXHRcdFx0XHRtb2RlbDogdW5zYWZlTW9kZWwsXG5cdFx0XHRcdHdoZXJlOiB1bnNhZmVXaGVyZSxcblx0XHRcdFx0YWN0aW9uOiBcInVwZGF0ZU1hbnlcIlxuXHRcdFx0fSk7XG5cdFx0XHR1bnNhZmVNb2RlbCA9IGdldERlZmF1bHRNb2RlbE5hbWUodW5zYWZlTW9kZWwpO1xuXHRcdFx0ZGVidWdMb2coeyBtZXRob2Q6IFwidXBkYXRlTWFueVwiIH0sIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoMSwgNCl9YCwgYCR7Zm9ybWF0TWV0aG9kKFwidXBkYXRlTWFueVwiKX0gJHtmb3JtYXRBY3Rpb24oXCJVbnNhZmUgSW5wdXRcIil9OmAsIHtcblx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdGRhdGE6IHVuc2FmZURhdGFcblx0XHRcdH0pO1xuXHRcdFx0bGV0IGRhdGEgPSB1bnNhZmVEYXRhO1xuXHRcdFx0aWYgKCFjb25maWcuZGlzYWJsZVRyYW5zZm9ybUlucHV0KSBkYXRhID0gYXdhaXQgdHJhbnNmb3JtSW5wdXQodW5zYWZlRGF0YSwgdW5zYWZlTW9kZWwsIFwidXBkYXRlXCIpO1xuXHRcdFx0ZGVidWdMb2coeyBtZXRob2Q6IFwidXBkYXRlTWFueVwiIH0sIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoMiwgNCl9YCwgYCR7Zm9ybWF0TWV0aG9kKFwidXBkYXRlTWFueVwiKX0gJHtmb3JtYXRBY3Rpb24oXCJQYXJzZWQgSW5wdXRcIil9OmAsIHtcblx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdGRhdGFcblx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgdXBkYXRlZENvdW50ID0gYXdhaXQgYWRhcHRlckluc3RhbmNlLnVwZGF0ZU1hbnkoe1xuXHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0d2hlcmUsXG5cdFx0XHRcdHVwZGF0ZTogZGF0YVxuXHRcdFx0fSk7XG5cdFx0XHRkZWJ1Z0xvZyh7IG1ldGhvZDogXCJ1cGRhdGVNYW55XCIgfSwgYCR7Zm9ybWF0VHJhbnNhY3Rpb25JZCh0aGlzVHJhbnNhY3Rpb25JZCl9ICR7Zm9ybWF0U3RlcCgzLCA0KX1gLCBgJHtmb3JtYXRNZXRob2QoXCJ1cGRhdGVNYW55XCIpfSAke2Zvcm1hdEFjdGlvbihcIkRCIFJlc3VsdFwiKX06YCwge1xuXHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0ZGF0YTogdXBkYXRlZENvdW50XG5cdFx0XHR9KTtcblx0XHRcdGRlYnVnTG9nKHsgbWV0aG9kOiBcInVwZGF0ZU1hbnlcIiB9LCBgJHtmb3JtYXRUcmFuc2FjdGlvbklkKHRoaXNUcmFuc2FjdGlvbklkKX0gJHtmb3JtYXRTdGVwKDQsIDQpfWAsIGAke2Zvcm1hdE1ldGhvZChcInVwZGF0ZU1hbnlcIil9ICR7Zm9ybWF0QWN0aW9uKFwiUGFyc2VkIFJlc3VsdFwiKX06YCwge1xuXHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0ZGF0YTogdXBkYXRlZENvdW50XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiB1cGRhdGVkQ291bnQ7XG5cdFx0fSxcblx0XHRmaW5kT25lOiBhc3luYyAoeyBtb2RlbDogdW5zYWZlTW9kZWwsIHdoZXJlOiB1bnNhZmVXaGVyZSwgc2VsZWN0LCBqb2luOiB1bnNhZmVKb2luIH0pID0+IHtcblx0XHRcdHRyYW5zYWN0aW9uSWQrKztcblx0XHRcdGxldCB0aGlzVHJhbnNhY3Rpb25JZCA9IHRyYW5zYWN0aW9uSWQ7XG5cdFx0XHRjb25zdCBtb2RlbCA9IGdldE1vZGVsTmFtZSh1bnNhZmVNb2RlbCk7XG5cdFx0XHRjb25zdCB3aGVyZSA9IHRyYW5zZm9ybVdoZXJlQ2xhdXNlKHtcblx0XHRcdFx0bW9kZWw6IHVuc2FmZU1vZGVsLFxuXHRcdFx0XHR3aGVyZTogdW5zYWZlV2hlcmUsXG5cdFx0XHRcdGFjdGlvbjogXCJmaW5kT25lXCJcblx0XHRcdH0pO1xuXHRcdFx0dW5zYWZlTW9kZWwgPSBnZXREZWZhdWx0TW9kZWxOYW1lKHVuc2FmZU1vZGVsKTtcblx0XHRcdGxldCBqb2luO1xuXHRcdFx0bGV0IHBhc3NKb2luVG9BZGFwdGVyID0gdHJ1ZTtcblx0XHRcdGlmICghY29uZmlnLmRpc2FibGVUcmFuc2Zvcm1Kb2luKSB7XG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IHRyYW5zZm9ybUpvaW5DbGF1c2UodW5zYWZlTW9kZWwsIHVuc2FmZUpvaW4sIHNlbGVjdCk7XG5cdFx0XHRcdGlmIChyZXN1bHQpIHtcblx0XHRcdFx0XHRqb2luID0gcmVzdWx0LmpvaW47XG5cdFx0XHRcdFx0c2VsZWN0ID0gcmVzdWx0LnNlbGVjdDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIW9wdGlvbnMuZXhwZXJpbWVudGFsPy5qb2lucyAmJiBqb2luICYmIE9iamVjdC5rZXlzKGpvaW4pLmxlbmd0aCA+IDApIHBhc3NKb2luVG9BZGFwdGVyID0gZmFsc2U7XG5cdFx0XHR9IGVsc2Ugam9pbiA9IHVuc2FmZUpvaW47XG5cdFx0XHRkZWJ1Z0xvZyh7IG1ldGhvZDogXCJmaW5kT25lXCIgfSwgYCR7Zm9ybWF0VHJhbnNhY3Rpb25JZCh0aGlzVHJhbnNhY3Rpb25JZCl9ICR7Zm9ybWF0U3RlcCgxLCAzKX1gLCBgJHtmb3JtYXRNZXRob2QoXCJmaW5kT25lXCIpfTpgLCB7XG5cdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHR3aGVyZSxcblx0XHRcdFx0c2VsZWN0LFxuXHRcdFx0XHRqb2luXG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IHJlcyA9IGF3YWl0IGFkYXB0ZXJJbnN0YW5jZS5maW5kT25lKHtcblx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdHdoZXJlLFxuXHRcdFx0XHRzZWxlY3QsXG5cdFx0XHRcdGpvaW46IHBhc3NKb2luVG9BZGFwdGVyID8gam9pbiA6IHZvaWQgMFxuXHRcdFx0fSk7XG5cdFx0XHRkZWJ1Z0xvZyh7IG1ldGhvZDogXCJmaW5kT25lXCIgfSwgYCR7Zm9ybWF0VHJhbnNhY3Rpb25JZCh0aGlzVHJhbnNhY3Rpb25JZCl9ICR7Zm9ybWF0U3RlcCgyLCAzKX1gLCBgJHtmb3JtYXRNZXRob2QoXCJmaW5kT25lXCIpfSAke2Zvcm1hdEFjdGlvbihcIkRCIFJlc3VsdFwiKX06YCwge1xuXHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0ZGF0YTogcmVzXG5cdFx0XHR9KTtcblx0XHRcdGxldCB0cmFuc2Zvcm1lZCA9IHJlcztcblx0XHRcdGlmICghY29uZmlnLmRpc2FibGVUcmFuc2Zvcm1PdXRwdXQpIHRyYW5zZm9ybWVkID0gYXdhaXQgdHJhbnNmb3JtT3V0cHV0KHJlcywgdW5zYWZlTW9kZWwsIHNlbGVjdCwgam9pbik7XG5cdFx0XHRkZWJ1Z0xvZyh7IG1ldGhvZDogXCJmaW5kT25lXCIgfSwgYCR7Zm9ybWF0VHJhbnNhY3Rpb25JZCh0aGlzVHJhbnNhY3Rpb25JZCl9ICR7Zm9ybWF0U3RlcCgzLCAzKX1gLCBgJHtmb3JtYXRNZXRob2QoXCJmaW5kT25lXCIpfSAke2Zvcm1hdEFjdGlvbihcIlBhcnNlZCBSZXN1bHRcIil9OmAsIHtcblx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdGRhdGE6IHRyYW5zZm9ybWVkXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiB0cmFuc2Zvcm1lZDtcblx0XHR9LFxuXHRcdGZpbmRNYW55OiBhc3luYyAoeyBtb2RlbDogdW5zYWZlTW9kZWwsIHdoZXJlOiB1bnNhZmVXaGVyZSwgbGltaXQ6IHVuc2FmZUxpbWl0LCBzb3J0QnksIG9mZnNldCwgam9pbjogdW5zYWZlSm9pbiB9KSA9PiB7XG5cdFx0XHR0cmFuc2FjdGlvbklkKys7XG5cdFx0XHRsZXQgdGhpc1RyYW5zYWN0aW9uSWQgPSB0cmFuc2FjdGlvbklkO1xuXHRcdFx0Y29uc3QgbGltaXQgPSB1bnNhZmVMaW1pdCA/PyBvcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8uZGVmYXVsdEZpbmRNYW55TGltaXQgPz8gMTAwO1xuXHRcdFx0Y29uc3QgbW9kZWwgPSBnZXRNb2RlbE5hbWUodW5zYWZlTW9kZWwpO1xuXHRcdFx0Y29uc3Qgd2hlcmUgPSB0cmFuc2Zvcm1XaGVyZUNsYXVzZSh7XG5cdFx0XHRcdG1vZGVsOiB1bnNhZmVNb2RlbCxcblx0XHRcdFx0d2hlcmU6IHVuc2FmZVdoZXJlLFxuXHRcdFx0XHRhY3Rpb246IFwiZmluZE1hbnlcIlxuXHRcdFx0fSk7XG5cdFx0XHR1bnNhZmVNb2RlbCA9IGdldERlZmF1bHRNb2RlbE5hbWUodW5zYWZlTW9kZWwpO1xuXHRcdFx0bGV0IGpvaW47XG5cdFx0XHRsZXQgcGFzc0pvaW5Ub0FkYXB0ZXIgPSB0cnVlO1xuXHRcdFx0aWYgKCFjb25maWcuZGlzYWJsZVRyYW5zZm9ybUpvaW4pIHtcblx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gdHJhbnNmb3JtSm9pbkNsYXVzZSh1bnNhZmVNb2RlbCwgdW5zYWZlSm9pbiwgdm9pZCAwKTtcblx0XHRcdFx0aWYgKHJlc3VsdCkgam9pbiA9IHJlc3VsdC5qb2luO1xuXHRcdFx0XHRpZiAoIW9wdGlvbnMuZXhwZXJpbWVudGFsPy5qb2lucyAmJiBqb2luICYmIE9iamVjdC5rZXlzKGpvaW4pLmxlbmd0aCA+IDApIHBhc3NKb2luVG9BZGFwdGVyID0gZmFsc2U7XG5cdFx0XHR9IGVsc2Ugam9pbiA9IHVuc2FmZUpvaW47XG5cdFx0XHRkZWJ1Z0xvZyh7IG1ldGhvZDogXCJmaW5kTWFueVwiIH0sIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoMSwgMyl9YCwgYCR7Zm9ybWF0TWV0aG9kKFwiZmluZE1hbnlcIil9OmAsIHtcblx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdHdoZXJlLFxuXHRcdFx0XHRsaW1pdCxcblx0XHRcdFx0c29ydEJ5LFxuXHRcdFx0XHRvZmZzZXQsXG5cdFx0XHRcdGpvaW5cblx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgcmVzID0gYXdhaXQgYWRhcHRlckluc3RhbmNlLmZpbmRNYW55KHtcblx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdHdoZXJlLFxuXHRcdFx0XHRsaW1pdCxcblx0XHRcdFx0c29ydEJ5LFxuXHRcdFx0XHRvZmZzZXQsXG5cdFx0XHRcdGpvaW46IHBhc3NKb2luVG9BZGFwdGVyID8gam9pbiA6IHZvaWQgMFxuXHRcdFx0fSk7XG5cdFx0XHRkZWJ1Z0xvZyh7IG1ldGhvZDogXCJmaW5kTWFueVwiIH0sIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoMiwgMyl9YCwgYCR7Zm9ybWF0TWV0aG9kKFwiZmluZE1hbnlcIil9ICR7Zm9ybWF0QWN0aW9uKFwiREIgUmVzdWx0XCIpfTpgLCB7XG5cdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRkYXRhOiByZXNcblx0XHRcdH0pO1xuXHRcdFx0bGV0IHRyYW5zZm9ybWVkID0gcmVzO1xuXHRcdFx0aWYgKCFjb25maWcuZGlzYWJsZVRyYW5zZm9ybU91dHB1dCkgdHJhbnNmb3JtZWQgPSBhd2FpdCBQcm9taXNlLmFsbChyZXMubWFwKGFzeW5jIChyKSA9PiB7XG5cdFx0XHRcdHJldHVybiBhd2FpdCB0cmFuc2Zvcm1PdXRwdXQociwgdW5zYWZlTW9kZWwsIHZvaWQgMCwgam9pbik7XG5cdFx0XHR9KSk7XG5cdFx0XHRkZWJ1Z0xvZyh7IG1ldGhvZDogXCJmaW5kTWFueVwiIH0sIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoMywgMyl9YCwgYCR7Zm9ybWF0TWV0aG9kKFwiZmluZE1hbnlcIil9ICR7Zm9ybWF0QWN0aW9uKFwiUGFyc2VkIFJlc3VsdFwiKX06YCwge1xuXHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0ZGF0YTogdHJhbnNmb3JtZWRcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIHRyYW5zZm9ybWVkO1xuXHRcdH0sXG5cdFx0ZGVsZXRlOiBhc3luYyAoeyBtb2RlbDogdW5zYWZlTW9kZWwsIHdoZXJlOiB1bnNhZmVXaGVyZSB9KSA9PiB7XG5cdFx0XHR0cmFuc2FjdGlvbklkKys7XG5cdFx0XHRsZXQgdGhpc1RyYW5zYWN0aW9uSWQgPSB0cmFuc2FjdGlvbklkO1xuXHRcdFx0Y29uc3QgbW9kZWwgPSBnZXRNb2RlbE5hbWUodW5zYWZlTW9kZWwpO1xuXHRcdFx0Y29uc3Qgd2hlcmUgPSB0cmFuc2Zvcm1XaGVyZUNsYXVzZSh7XG5cdFx0XHRcdG1vZGVsOiB1bnNhZmVNb2RlbCxcblx0XHRcdFx0d2hlcmU6IHVuc2FmZVdoZXJlLFxuXHRcdFx0XHRhY3Rpb246IFwiZGVsZXRlXCJcblx0XHRcdH0pO1xuXHRcdFx0dW5zYWZlTW9kZWwgPSBnZXREZWZhdWx0TW9kZWxOYW1lKHVuc2FmZU1vZGVsKTtcblx0XHRcdGRlYnVnTG9nKHsgbWV0aG9kOiBcImRlbGV0ZVwiIH0sIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoMSwgMil9YCwgYCR7Zm9ybWF0TWV0aG9kKFwiZGVsZXRlXCIpfTpgLCB7XG5cdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHR3aGVyZVxuXHRcdFx0fSk7XG5cdFx0XHRhd2FpdCBhZGFwdGVySW5zdGFuY2UuZGVsZXRlKHtcblx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdHdoZXJlXG5cdFx0XHR9KTtcblx0XHRcdGRlYnVnTG9nKHsgbWV0aG9kOiBcImRlbGV0ZVwiIH0sIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoMiwgMil9YCwgYCR7Zm9ybWF0TWV0aG9kKFwiZGVsZXRlXCIpfSAke2Zvcm1hdEFjdGlvbihcIkRCIFJlc3VsdFwiKX06YCwgeyBtb2RlbCB9KTtcblx0XHR9LFxuXHRcdGRlbGV0ZU1hbnk6IGFzeW5jICh7IG1vZGVsOiB1bnNhZmVNb2RlbCwgd2hlcmU6IHVuc2FmZVdoZXJlIH0pID0+IHtcblx0XHRcdHRyYW5zYWN0aW9uSWQrKztcblx0XHRcdGxldCB0aGlzVHJhbnNhY3Rpb25JZCA9IHRyYW5zYWN0aW9uSWQ7XG5cdFx0XHRjb25zdCBtb2RlbCA9IGdldE1vZGVsTmFtZSh1bnNhZmVNb2RlbCk7XG5cdFx0XHRjb25zdCB3aGVyZSA9IHRyYW5zZm9ybVdoZXJlQ2xhdXNlKHtcblx0XHRcdFx0bW9kZWw6IHVuc2FmZU1vZGVsLFxuXHRcdFx0XHR3aGVyZTogdW5zYWZlV2hlcmUsXG5cdFx0XHRcdGFjdGlvbjogXCJkZWxldGVNYW55XCJcblx0XHRcdH0pO1xuXHRcdFx0dW5zYWZlTW9kZWwgPSBnZXREZWZhdWx0TW9kZWxOYW1lKHVuc2FmZU1vZGVsKTtcblx0XHRcdGRlYnVnTG9nKHsgbWV0aG9kOiBcImRlbGV0ZU1hbnlcIiB9LCBgJHtmb3JtYXRUcmFuc2FjdGlvbklkKHRoaXNUcmFuc2FjdGlvbklkKX0gJHtmb3JtYXRTdGVwKDEsIDIpfWAsIGAke2Zvcm1hdE1ldGhvZChcImRlbGV0ZU1hbnlcIil9ICR7Zm9ybWF0QWN0aW9uKFwiRGVsZXRlTWFueVwiKX06YCwge1xuXHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0d2hlcmVcblx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgcmVzID0gYXdhaXQgYWRhcHRlckluc3RhbmNlLmRlbGV0ZU1hbnkoe1xuXHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0d2hlcmVcblx0XHRcdH0pO1xuXHRcdFx0ZGVidWdMb2coeyBtZXRob2Q6IFwiZGVsZXRlTWFueVwiIH0sIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoMiwgMil9YCwgYCR7Zm9ybWF0TWV0aG9kKFwiZGVsZXRlTWFueVwiKX0gJHtmb3JtYXRBY3Rpb24oXCJEQiBSZXN1bHRcIil9OmAsIHtcblx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdGRhdGE6IHJlc1xuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gcmVzO1xuXHRcdH0sXG5cdFx0Y291bnQ6IGFzeW5jICh7IG1vZGVsOiB1bnNhZmVNb2RlbCwgd2hlcmU6IHVuc2FmZVdoZXJlIH0pID0+IHtcblx0XHRcdHRyYW5zYWN0aW9uSWQrKztcblx0XHRcdGxldCB0aGlzVHJhbnNhY3Rpb25JZCA9IHRyYW5zYWN0aW9uSWQ7XG5cdFx0XHRjb25zdCBtb2RlbCA9IGdldE1vZGVsTmFtZSh1bnNhZmVNb2RlbCk7XG5cdFx0XHRjb25zdCB3aGVyZSA9IHRyYW5zZm9ybVdoZXJlQ2xhdXNlKHtcblx0XHRcdFx0bW9kZWw6IHVuc2FmZU1vZGVsLFxuXHRcdFx0XHR3aGVyZTogdW5zYWZlV2hlcmUsXG5cdFx0XHRcdGFjdGlvbjogXCJjb3VudFwiXG5cdFx0XHR9KTtcblx0XHRcdHVuc2FmZU1vZGVsID0gZ2V0RGVmYXVsdE1vZGVsTmFtZSh1bnNhZmVNb2RlbCk7XG5cdFx0XHRkZWJ1Z0xvZyh7IG1ldGhvZDogXCJjb3VudFwiIH0sIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoMSwgMil9YCwgYCR7Zm9ybWF0TWV0aG9kKFwiY291bnRcIil9OmAsIHtcblx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdHdoZXJlXG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IHJlcyA9IGF3YWl0IGFkYXB0ZXJJbnN0YW5jZS5jb3VudCh7XG5cdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHR3aGVyZVxuXHRcdFx0fSk7XG5cdFx0XHRkZWJ1Z0xvZyh7IG1ldGhvZDogXCJjb3VudFwiIH0sIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoMiwgMil9YCwgYCR7Zm9ybWF0TWV0aG9kKFwiY291bnRcIil9OmAsIHtcblx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdGRhdGE6IHJlc1xuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gcmVzO1xuXHRcdH0sXG5cdFx0Y3JlYXRlU2NoZW1hOiBhZGFwdGVySW5zdGFuY2UuY3JlYXRlU2NoZW1hID8gYXN5bmMgKF8sIGZpbGUpID0+IHtcblx0XHRcdGNvbnN0IHRhYmxlcyA9IGdldEF1dGhUYWJsZXMob3B0aW9ucyk7XG5cdFx0XHRpZiAob3B0aW9ucy5zZWNvbmRhcnlTdG9yYWdlICYmICFvcHRpb25zLnNlc3Npb24/LnN0b3JlU2Vzc2lvbkluRGF0YWJhc2UpIGRlbGV0ZSB0YWJsZXMuc2Vzc2lvbjtcblx0XHRcdGlmIChvcHRpb25zLnJhdGVMaW1pdCAmJiBvcHRpb25zLnJhdGVMaW1pdC5zdG9yYWdlID09PSBcImRhdGFiYXNlXCIgJiYgKHR5cGVvZiBvcHRpb25zLnJhdGVMaW1pdC5lbmFibGVkID09PSBcInVuZGVmaW5lZFwiIHx8IG9wdGlvbnMucmF0ZUxpbWl0LmVuYWJsZWQgPT09IHRydWUpKSB0YWJsZXMucmF0ZWxpbWl0ID0ge1xuXHRcdFx0XHRtb2RlbE5hbWU6IG9wdGlvbnMucmF0ZUxpbWl0Lm1vZGVsTmFtZSA/PyBcInJhdGVsaW1pdFwiLFxuXHRcdFx0XHRmaWVsZHM6IHtcblx0XHRcdFx0XHRrZXk6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHR1bmlxdWU6IHRydWUsXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHRcdGZpZWxkTmFtZTogb3B0aW9ucy5yYXRlTGltaXQuZmllbGRzPy5rZXkgPz8gXCJrZXlcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Y291bnQ6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwibnVtYmVyXCIsXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHRcdGZpZWxkTmFtZTogb3B0aW9ucy5yYXRlTGltaXQuZmllbGRzPy5jb3VudCA/PyBcImNvdW50XCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGxhc3RSZXF1ZXN0OiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcIm51bWJlclwiLFxuXHRcdFx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdFx0XHRiaWdpbnQ6IHRydWUsXG5cdFx0XHRcdFx0XHRkZWZhdWx0VmFsdWU6ICgpID0+IERhdGUubm93KCksXG5cdFx0XHRcdFx0XHRmaWVsZE5hbWU6IG9wdGlvbnMucmF0ZUxpbWl0LmZpZWxkcz8ubGFzdFJlcXVlc3QgPz8gXCJsYXN0UmVxdWVzdFwiXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0cmV0dXJuIGFkYXB0ZXJJbnN0YW5jZS5jcmVhdGVTY2hlbWEoe1xuXHRcdFx0XHRmaWxlLFxuXHRcdFx0XHR0YWJsZXNcblx0XHRcdH0pO1xuXHRcdH0gOiB2b2lkIDAsXG5cdFx0b3B0aW9uczoge1xuXHRcdFx0YWRhcHRlckNvbmZpZzogY29uZmlnLFxuXHRcdFx0Li4uYWRhcHRlckluc3RhbmNlLm9wdGlvbnMgPz8ge31cblx0XHR9LFxuXHRcdGlkOiBjb25maWcuYWRhcHRlcklkLFxuXHRcdC4uLmNvbmZpZy5kZWJ1Z0xvZ3M/LmlzUnVubmluZ0FkYXB0ZXJUZXN0cyA/IHsgYWRhcHRlclRlc3REZWJ1Z0xvZ3M6IHtcblx0XHRcdHJlc2V0RGVidWdMb2dzKCkge1xuXHRcdFx0XHRkZWJ1Z0xvZ3MgPSBkZWJ1Z0xvZ3MuZmlsdGVyKChsb2cpID0+IGxvZy5pbnN0YW5jZSAhPT0gdW5pcXVlQWRhcHRlckZhY3RvcnlJbnN0YW5jZUlkKTtcblx0XHRcdH0sXG5cdFx0XHRwcmludERlYnVnTG9ncygpIHtcblx0XHRcdFx0Y29uc3Qgc2VwYXJhdG9yID0gYOKUgGAucmVwZWF0KDgwKTtcblx0XHRcdFx0Y29uc3QgbG9ncyA9IGRlYnVnTG9ncy5maWx0ZXIoKGxvZyQxKSA9PiBsb2ckMS5pbnN0YW5jZSA9PT0gdW5pcXVlQWRhcHRlckZhY3RvcnlJbnN0YW5jZUlkKTtcblx0XHRcdFx0aWYgKGxvZ3MubGVuZ3RoID09PSAwKSByZXR1cm47XG5cdFx0XHRcdGxldCBsb2cgPSBsb2dzLnJldmVyc2UoKS5tYXAoKGxvZyQxKSA9PiB7XG5cdFx0XHRcdFx0bG9nJDEuYXJnc1swXSA9IGBcXG4ke2xvZyQxLmFyZ3NbMF19YDtcblx0XHRcdFx0XHRyZXR1cm4gWy4uLmxvZyQxLmFyZ3MsIFwiXFxuXCJdO1xuXHRcdFx0XHR9KS5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gWy4uLmN1cnIsIC4uLnByZXZdO1xuXHRcdFx0XHR9LCBbYFxcbiR7c2VwYXJhdG9yfWBdKTtcblx0XHRcdFx0Y29uc29sZS5sb2coLi4ubG9nKTtcblx0XHRcdH1cblx0XHR9IH0gOiB7fVxuXHR9O1xuXHRyZXR1cm4gYWRhcHRlcjtcbn07XG5mdW5jdGlvbiBmb3JtYXRUcmFuc2FjdGlvbklkKHRyYW5zYWN0aW9uSWQkMSkge1xuXHRpZiAoZ2V0Q29sb3JEZXB0aCgpIDwgOCkgcmV0dXJuIGAjJHt0cmFuc2FjdGlvbklkJDF9YDtcblx0cmV0dXJuIGAke1RUWV9DT0xPUlMuZmcubWFnZW50YX0jJHt0cmFuc2FjdGlvbklkJDF9JHtUVFlfQ09MT1JTLnJlc2V0fWA7XG59XG5mdW5jdGlvbiBmb3JtYXRTdGVwKHN0ZXAsIHRvdGFsKSB7XG5cdHJldHVybiBgJHtUVFlfQ09MT1JTLmJnLmJsYWNrfSR7VFRZX0NPTE9SUy5mZy55ZWxsb3d9WyR7c3RlcH0vJHt0b3RhbH1dJHtUVFlfQ09MT1JTLnJlc2V0fWA7XG59XG5mdW5jdGlvbiBmb3JtYXRNZXRob2QobWV0aG9kKSB7XG5cdHJldHVybiBgJHtUVFlfQ09MT1JTLmJyaWdodH0ke21ldGhvZH0ke1RUWV9DT0xPUlMucmVzZXR9YDtcbn1cbmZ1bmN0aW9uIGZvcm1hdEFjdGlvbihhY3Rpb24pIHtcblx0cmV0dXJuIGAke1RUWV9DT0xPUlMuZGltfSgke2FjdGlvbn0pJHtUVFlfQ09MT1JTLnJlc2V0fWA7XG59XG4vKipcbiogQGRlcHJlY2F0ZWQgVXNlIGBjcmVhdGVBZGFwdGVyRmFjdG9yeWAgaW5zdGVhZC4gVGhpcyBleHBvcnQgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24uXG4qIEBhbGlhc1xuKi9cbmNvbnN0IGNyZWF0ZUFkYXB0ZXIgPSBjcmVhdGVBZGFwdGVyRmFjdG9yeTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVBZGFwdGVyLCBjcmVhdGVBZGFwdGVyRmFjdG9yeSwgZGVlcG1lcmdlLCBpbml0R2V0RGVmYXVsdEZpZWxkTmFtZSwgaW5pdEdldERlZmF1bHRNb2RlbE5hbWUsIGluaXRHZXRGaWVsZEF0dHJpYnV0ZXMsIGluaXRHZXRGaWVsZE5hbWUsIGluaXRHZXRJZEZpZWxkLCBpbml0R2V0TW9kZWxOYW1lLCB3aXRoQXBwbHlEZWZhdWx0IH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/db/adapter/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/db/index.mjs":
/*!******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/db/index.mjs ***!
  \******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   accountSchema: () => (/* binding */ accountSchema),\n/* harmony export */   coreSchema: () => (/* binding */ coreSchema),\n/* harmony export */   getAuthTables: () => (/* reexport safe */ _get_tables_CMc_Emww_mjs__WEBPACK_IMPORTED_MODULE_0__.t),\n/* harmony export */   rateLimitSchema: () => (/* binding */ rateLimitSchema),\n/* harmony export */   sessionSchema: () => (/* binding */ sessionSchema),\n/* harmony export */   userSchema: () => (/* binding */ userSchema),\n/* harmony export */   verificationSchema: () => (/* binding */ verificationSchema)\n/* harmony export */ });\n/* harmony import */ var _get_tables_CMc_Emww_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../get-tables-CMc_Emww.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/get-tables-CMc_Emww.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@4.3.4/node_modules/zod/v4/classic/external.js\");\n\n\n\n//#region src/db/schema/shared.ts\nconst coreSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n\tid: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n\tcreatedAt: zod__WEBPACK_IMPORTED_MODULE_1__.date().default(() => /* @__PURE__ */ new Date()),\n\tupdatedAt: zod__WEBPACK_IMPORTED_MODULE_1__.date().default(() => /* @__PURE__ */ new Date())\n});\n\n//#endregion\n//#region src/db/schema/account.ts\nconst accountSchema = coreSchema.extend({\n\tproviderId: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n\taccountId: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n\tuserId: zod__WEBPACK_IMPORTED_MODULE_1__.coerce.string(),\n\taccessToken: zod__WEBPACK_IMPORTED_MODULE_1__.string().nullish(),\n\trefreshToken: zod__WEBPACK_IMPORTED_MODULE_1__.string().nullish(),\n\tidToken: zod__WEBPACK_IMPORTED_MODULE_1__.string().nullish(),\n\taccessTokenExpiresAt: zod__WEBPACK_IMPORTED_MODULE_1__.date().nullish(),\n\trefreshTokenExpiresAt: zod__WEBPACK_IMPORTED_MODULE_1__.date().nullish(),\n\tscope: zod__WEBPACK_IMPORTED_MODULE_1__.string().nullish(),\n\tpassword: zod__WEBPACK_IMPORTED_MODULE_1__.string().nullish()\n});\n\n//#endregion\n//#region src/db/schema/rate-limit.ts\nconst rateLimitSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n\tkey: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n\tcount: zod__WEBPACK_IMPORTED_MODULE_1__.number(),\n\tlastRequest: zod__WEBPACK_IMPORTED_MODULE_1__.number()\n});\n\n//#endregion\n//#region src/db/schema/session.ts\nconst sessionSchema = coreSchema.extend({\n\tuserId: zod__WEBPACK_IMPORTED_MODULE_1__.coerce.string(),\n\texpiresAt: zod__WEBPACK_IMPORTED_MODULE_1__.date(),\n\ttoken: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n\tipAddress: zod__WEBPACK_IMPORTED_MODULE_1__.string().nullish(),\n\tuserAgent: zod__WEBPACK_IMPORTED_MODULE_1__.string().nullish()\n});\n\n//#endregion\n//#region src/db/schema/user.ts\nconst userSchema = coreSchema.extend({\n\temail: zod__WEBPACK_IMPORTED_MODULE_1__.string().transform((val) => val.toLowerCase()),\n\temailVerified: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().default(false),\n\tname: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n\timage: zod__WEBPACK_IMPORTED_MODULE_1__.string().nullish()\n});\n\n//#endregion\n//#region src/db/schema/verification.ts\nconst verificationSchema = coreSchema.extend({\n\tvalue: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n\texpiresAt: zod__WEBPACK_IMPORTED_MODULE_1__.date(),\n\tidentifier: zod__WEBPACK_IMPORTED_MODULE_1__.string()\n});\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L2RiL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBZ0U7QUFDdkM7O0FBRXpCO0FBQ0EsbUJBQW1CLHVDQUFRO0FBQzNCLEtBQUssdUNBQVE7QUFDYixZQUFZLHFDQUFNO0FBQ2xCLFlBQVkscUNBQU07QUFDbEIsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxhQUFhLHVDQUFRO0FBQ3JCLFlBQVksdUNBQVE7QUFDcEIsU0FBUyw4Q0FBZTtBQUN4QixjQUFjLHVDQUFRO0FBQ3RCLGVBQWUsdUNBQVE7QUFDdkIsVUFBVSx1Q0FBUTtBQUNsQix1QkFBdUIscUNBQU07QUFDN0Isd0JBQXdCLHFDQUFNO0FBQzlCLFFBQVEsdUNBQVE7QUFDaEIsV0FBVyx1Q0FBUTtBQUNuQixDQUFDOztBQUVEO0FBQ0E7QUFDQSx3QkFBd0IsdUNBQVE7QUFDaEMsTUFBTSx1Q0FBUTtBQUNkLFFBQVEsdUNBQVE7QUFDaEIsY0FBYyx1Q0FBUTtBQUN0QixDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLFNBQVMsOENBQWU7QUFDeEIsWUFBWSxxQ0FBTTtBQUNsQixRQUFRLHVDQUFRO0FBQ2hCLFlBQVksdUNBQVE7QUFDcEIsWUFBWSx1Q0FBUTtBQUNwQixDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUNBQVE7QUFDaEIsZ0JBQWdCLHdDQUFTO0FBQ3pCLE9BQU8sdUNBQVE7QUFDZixRQUFRLHVDQUFRO0FBQ2hCLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1Q0FBUTtBQUNoQixZQUFZLHFDQUFNO0FBQ2xCLGFBQWEsdUNBQVE7QUFDckIsQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsiRDpcXGhhY2thdGhvbmUyXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFwucG5wbVxcQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkXFxub2RlX21vZHVsZXNcXEBiZXR0ZXItYXV0aFxcY29yZVxcZGlzdFxcZGJcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0IGFzIGdldEF1dGhUYWJsZXMgfSBmcm9tIFwiLi4vZ2V0LXRhYmxlcy1DTWNfRW13dy5tanNcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuXG4vLyNyZWdpb24gc3JjL2RiL3NjaGVtYS9zaGFyZWQudHNcbmNvbnN0IGNvcmVTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdGlkOiB6LnN0cmluZygpLFxuXHRjcmVhdGVkQXQ6IHouZGF0ZSgpLmRlZmF1bHQoKCkgPT4gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLFxuXHR1cGRhdGVkQXQ6IHouZGF0ZSgpLmRlZmF1bHQoKCkgPT4gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpXG59KTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2RiL3NjaGVtYS9hY2NvdW50LnRzXG5jb25zdCBhY2NvdW50U2NoZW1hID0gY29yZVNjaGVtYS5leHRlbmQoe1xuXHRwcm92aWRlcklkOiB6LnN0cmluZygpLFxuXHRhY2NvdW50SWQ6IHouc3RyaW5nKCksXG5cdHVzZXJJZDogei5jb2VyY2Uuc3RyaW5nKCksXG5cdGFjY2Vzc1Rva2VuOiB6LnN0cmluZygpLm51bGxpc2goKSxcblx0cmVmcmVzaFRva2VuOiB6LnN0cmluZygpLm51bGxpc2goKSxcblx0aWRUb2tlbjogei5zdHJpbmcoKS5udWxsaXNoKCksXG5cdGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiB6LmRhdGUoKS5udWxsaXNoKCksXG5cdHJlZnJlc2hUb2tlbkV4cGlyZXNBdDogei5kYXRlKCkubnVsbGlzaCgpLFxuXHRzY29wZTogei5zdHJpbmcoKS5udWxsaXNoKCksXG5cdHBhc3N3b3JkOiB6LnN0cmluZygpLm51bGxpc2goKVxufSk7XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9kYi9zY2hlbWEvcmF0ZS1saW1pdC50c1xuY29uc3QgcmF0ZUxpbWl0U2NoZW1hID0gei5vYmplY3Qoe1xuXHRrZXk6IHouc3RyaW5nKCksXG5cdGNvdW50OiB6Lm51bWJlcigpLFxuXHRsYXN0UmVxdWVzdDogei5udW1iZXIoKVxufSk7XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9kYi9zY2hlbWEvc2Vzc2lvbi50c1xuY29uc3Qgc2Vzc2lvblNjaGVtYSA9IGNvcmVTY2hlbWEuZXh0ZW5kKHtcblx0dXNlcklkOiB6LmNvZXJjZS5zdHJpbmcoKSxcblx0ZXhwaXJlc0F0OiB6LmRhdGUoKSxcblx0dG9rZW46IHouc3RyaW5nKCksXG5cdGlwQWRkcmVzczogei5zdHJpbmcoKS5udWxsaXNoKCksXG5cdHVzZXJBZ2VudDogei5zdHJpbmcoKS5udWxsaXNoKClcbn0pO1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvZGIvc2NoZW1hL3VzZXIudHNcbmNvbnN0IHVzZXJTY2hlbWEgPSBjb3JlU2NoZW1hLmV4dGVuZCh7XG5cdGVtYWlsOiB6LnN0cmluZygpLnRyYW5zZm9ybSgodmFsKSA9PiB2YWwudG9Mb3dlckNhc2UoKSksXG5cdGVtYWlsVmVyaWZpZWQ6IHouYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpLFxuXHRuYW1lOiB6LnN0cmluZygpLFxuXHRpbWFnZTogei5zdHJpbmcoKS5udWxsaXNoKClcbn0pO1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvZGIvc2NoZW1hL3ZlcmlmaWNhdGlvbi50c1xuY29uc3QgdmVyaWZpY2F0aW9uU2NoZW1hID0gY29yZVNjaGVtYS5leHRlbmQoe1xuXHR2YWx1ZTogei5zdHJpbmcoKSxcblx0ZXhwaXJlc0F0OiB6LmRhdGUoKSxcblx0aWRlbnRpZmllcjogei5zdHJpbmcoKVxufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgYWNjb3VudFNjaGVtYSwgY29yZVNjaGVtYSwgZ2V0QXV0aFRhYmxlcywgcmF0ZUxpbWl0U2NoZW1hLCBzZXNzaW9uU2NoZW1hLCB1c2VyU2NoZW1hLCB2ZXJpZmljYXRpb25TY2hlbWEgfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/db/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env-DbssmzoK.mjs":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env-DbssmzoK.mjs ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ shouldPublishLog),\n/* harmony export */   c: () => (/* binding */ env),\n/* harmony export */   d: () => (/* binding */ isDevelopment),\n/* harmony export */   f: () => (/* binding */ isProduction),\n/* harmony export */   i: () => (/* binding */ logger),\n/* harmony export */   l: () => (/* binding */ getBooleanEnvVar),\n/* harmony export */   m: () => (/* binding */ nodeENV),\n/* harmony export */   n: () => (/* binding */ createLogger),\n/* harmony export */   o: () => (/* binding */ getColorDepth),\n/* harmony export */   p: () => (/* binding */ isTest),\n/* harmony export */   r: () => (/* binding */ levels),\n/* harmony export */   s: () => (/* binding */ ENV),\n/* harmony export */   t: () => (/* binding */ TTY_COLORS),\n/* harmony export */   u: () => (/* binding */ getEnvVar)\n/* harmony export */ });\n//#region src/env/env-impl.ts\nconst _envShim = Object.create(null);\nconst _getEnv = (useShim) => globalThis.process?.env || globalThis.Deno?.env.toObject() || globalThis.__env__ || (useShim ? _envShim : globalThis);\nconst env = new Proxy(_envShim, {\n\tget(_, prop) {\n\t\treturn _getEnv()[prop] ?? _envShim[prop];\n\t},\n\thas(_, prop) {\n\t\treturn prop in _getEnv() || prop in _envShim;\n\t},\n\tset(_, prop, value) {\n\t\tconst env$1 = _getEnv(true);\n\t\tenv$1[prop] = value;\n\t\treturn true;\n\t},\n\tdeleteProperty(_, prop) {\n\t\tif (!prop) return false;\n\t\tconst env$1 = _getEnv(true);\n\t\tdelete env$1[prop];\n\t\treturn true;\n\t},\n\townKeys() {\n\t\tconst env$1 = _getEnv(true);\n\t\treturn Object.keys(env$1);\n\t}\n});\nfunction toBoolean(val) {\n\treturn val ? val !== \"false\" : false;\n}\nconst nodeENV = typeof process !== \"undefined\" && process.env && \"development\" || \"\";\n/** Detect if `NODE_ENV` environment variable is `production` */\nconst isProduction = nodeENV === \"production\";\n/** Detect if `NODE_ENV` environment variable is `dev` or `development` */\nconst isDevelopment = () => nodeENV === \"dev\" || nodeENV === \"development\";\n/** Detect if `NODE_ENV` environment variable is `test` */\nconst isTest = () => nodeENV === \"test\" || toBoolean(env.TEST);\n/**\n* Get environment variable with fallback\n*/\nfunction getEnvVar(key, fallback) {\n\tif (typeof process !== \"undefined\" && process.env) return process.env[key] ?? fallback;\n\tif (typeof Deno !== \"undefined\") return Deno.env.get(key) ?? fallback;\n\tif (typeof Bun !== \"undefined\") return Bun.env[key] ?? fallback;\n\treturn fallback;\n}\n/**\n* Get boolean environment variable\n*/\nfunction getBooleanEnvVar(key, fallback = true) {\n\tconst value = getEnvVar(key);\n\tif (!value) return fallback;\n\treturn value !== \"0\" && value.toLowerCase() !== \"false\" && value !== \"\";\n}\n/**\n* Common environment variables used in Better Auth\n*/\nconst ENV = Object.freeze({\n\tget BETTER_AUTH_SECRET() {\n\t\treturn getEnvVar(\"BETTER_AUTH_SECRET\");\n\t},\n\tget AUTH_SECRET() {\n\t\treturn getEnvVar(\"AUTH_SECRET\");\n\t},\n\tget BETTER_AUTH_TELEMETRY() {\n\t\treturn getEnvVar(\"BETTER_AUTH_TELEMETRY\");\n\t},\n\tget BETTER_AUTH_TELEMETRY_ID() {\n\t\treturn getEnvVar(\"BETTER_AUTH_TELEMETRY_ID\");\n\t},\n\tget NODE_ENV() {\n\t\treturn getEnvVar(\"NODE_ENV\", \"development\");\n\t},\n\tget PACKAGE_VERSION() {\n\t\treturn getEnvVar(\"PACKAGE_VERSION\", \"0.0.0\");\n\t},\n\tget BETTER_AUTH_TELEMETRY_ENDPOINT() {\n\t\treturn getEnvVar(\"BETTER_AUTH_TELEMETRY_ENDPOINT\", \"https://telemetry.better-auth.com/v1/track\");\n\t}\n});\n\n//#endregion\n//#region src/env/color-depth.ts\nconst COLORS_2 = 1;\nconst COLORS_16 = 4;\nconst COLORS_256 = 8;\nconst COLORS_16m = 24;\nconst TERM_ENVS = {\n\teterm: COLORS_16,\n\tcons25: COLORS_16,\n\tconsole: COLORS_16,\n\tcygwin: COLORS_16,\n\tdtterm: COLORS_16,\n\tgnome: COLORS_16,\n\thurd: COLORS_16,\n\tjfbterm: COLORS_16,\n\tkonsole: COLORS_16,\n\tkterm: COLORS_16,\n\tmlterm: COLORS_16,\n\tmosh: COLORS_16m,\n\tputty: COLORS_16,\n\tst: COLORS_16,\n\t\"rxvt-unicode-24bit\": COLORS_16m,\n\tterminator: COLORS_16m,\n\t\"xterm-kitty\": COLORS_16m\n};\nconst CI_ENVS_MAP = new Map(Object.entries({\n\tAPPVEYOR: COLORS_256,\n\tBUILDKITE: COLORS_256,\n\tCIRCLECI: COLORS_16m,\n\tDRONE: COLORS_256,\n\tGITEA_ACTIONS: COLORS_16m,\n\tGITHUB_ACTIONS: COLORS_16m,\n\tGITLAB_CI: COLORS_256,\n\tTRAVIS: COLORS_256\n}));\nconst TERM_ENVS_REG_EXP = [\n\t/ansi/,\n\t/color/,\n\t/linux/,\n\t/direct/,\n\t/^con[0-9]*x[0-9]/,\n\t/^rxvt/,\n\t/^screen/,\n\t/^xterm/,\n\t/^vt100/,\n\t/^vt220/\n];\nfunction getColorDepth() {\n\tif (getEnvVar(\"FORCE_COLOR\") !== void 0) switch (getEnvVar(\"FORCE_COLOR\")) {\n\t\tcase \"\":\n\t\tcase \"1\":\n\t\tcase \"true\": return COLORS_16;\n\t\tcase \"2\": return COLORS_256;\n\t\tcase \"3\": return COLORS_16m;\n\t\tdefault: return COLORS_2;\n\t}\n\tif (getEnvVar(\"NODE_DISABLE_COLORS\") !== void 0 && getEnvVar(\"NODE_DISABLE_COLORS\") !== \"\" || getEnvVar(\"NO_COLOR\") !== void 0 && getEnvVar(\"NO_COLOR\") !== \"\" || getEnvVar(\"TERM\") === \"dumb\") return COLORS_2;\n\tif (getEnvVar(\"TMUX\")) return COLORS_16m;\n\tif (\"TF_BUILD\" in env && \"AGENT_NAME\" in env) return COLORS_16;\n\tif (\"CI\" in env) {\n\t\tfor (const { 0: envName, 1: colors } of CI_ENVS_MAP) if (envName in env) return colors;\n\t\tif (getEnvVar(\"CI_NAME\") === \"codeship\") return COLORS_256;\n\t\treturn COLORS_2;\n\t}\n\tif (\"TEAMCITY_VERSION\" in env) return /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.exec(getEnvVar(\"TEAMCITY_VERSION\")) !== null ? COLORS_16 : COLORS_2;\n\tswitch (getEnvVar(\"TERM_PROGRAM\")) {\n\t\tcase \"iTerm.app\":\n\t\t\tif (!getEnvVar(\"TERM_PROGRAM_VERSION\") || /^[0-2]\\./.exec(getEnvVar(\"TERM_PROGRAM_VERSION\")) !== null) return COLORS_256;\n\t\t\treturn COLORS_16m;\n\t\tcase \"HyperTerm\":\n\t\tcase \"MacTerm\": return COLORS_16m;\n\t\tcase \"Apple_Terminal\": return COLORS_256;\n\t}\n\tif (getEnvVar(\"COLORTERM\") === \"truecolor\" || getEnvVar(\"COLORTERM\") === \"24bit\") return COLORS_16m;\n\tif (getEnvVar(\"TERM\")) {\n\t\tif (/truecolor/.exec(getEnvVar(\"TERM\")) !== null) return COLORS_16m;\n\t\tif (/^xterm-256/.exec(getEnvVar(\"TERM\")) !== null) return COLORS_256;\n\t\tconst termEnv = getEnvVar(\"TERM\").toLowerCase();\n\t\tif (TERM_ENVS[termEnv]) return TERM_ENVS[termEnv];\n\t\tif (TERM_ENVS_REG_EXP.some((term) => term.exec(termEnv) !== null)) return COLORS_16;\n\t}\n\tif (getEnvVar(\"COLORTERM\")) return COLORS_16;\n\treturn COLORS_2;\n}\n\n//#endregion\n//#region src/env/logger.ts\nconst TTY_COLORS = {\n\treset: \"\\x1B[0m\",\n\tbright: \"\\x1B[1m\",\n\tdim: \"\\x1B[2m\",\n\tundim: \"\\x1B[22m\",\n\tunderscore: \"\\x1B[4m\",\n\tblink: \"\\x1B[5m\",\n\treverse: \"\\x1B[7m\",\n\thidden: \"\\x1B[8m\",\n\tfg: {\n\t\tblack: \"\\x1B[30m\",\n\t\tred: \"\\x1B[31m\",\n\t\tgreen: \"\\x1B[32m\",\n\t\tyellow: \"\\x1B[33m\",\n\t\tblue: \"\\x1B[34m\",\n\t\tmagenta: \"\\x1B[35m\",\n\t\tcyan: \"\\x1B[36m\",\n\t\twhite: \"\\x1B[37m\"\n\t},\n\tbg: {\n\t\tblack: \"\\x1B[40m\",\n\t\tred: \"\\x1B[41m\",\n\t\tgreen: \"\\x1B[42m\",\n\t\tyellow: \"\\x1B[43m\",\n\t\tblue: \"\\x1B[44m\",\n\t\tmagenta: \"\\x1B[45m\",\n\t\tcyan: \"\\x1B[46m\",\n\t\twhite: \"\\x1B[47m\"\n\t}\n};\nconst levels = [\n\t\"debug\",\n\t\"info\",\n\t\"success\",\n\t\"warn\",\n\t\"error\"\n];\nfunction shouldPublishLog(currentLogLevel, logLevel) {\n\treturn levels.indexOf(logLevel) >= levels.indexOf(currentLogLevel);\n}\nconst levelColors = {\n\tinfo: TTY_COLORS.fg.blue,\n\tsuccess: TTY_COLORS.fg.green,\n\twarn: TTY_COLORS.fg.yellow,\n\terror: TTY_COLORS.fg.red,\n\tdebug: TTY_COLORS.fg.magenta\n};\nconst formatMessage = (level, message, colorsEnabled) => {\n\tconst timestamp = (/* @__PURE__ */ new Date()).toISOString();\n\tif (colorsEnabled) return `${TTY_COLORS.dim}${timestamp}${TTY_COLORS.reset} ${levelColors[level]}${level.toUpperCase()}${TTY_COLORS.reset} ${TTY_COLORS.bright}[Better Auth]:${TTY_COLORS.reset} ${message}`;\n\treturn `${timestamp} ${level.toUpperCase()} [Better Auth]: ${message}`;\n};\nconst createLogger = (options) => {\n\tconst enabled = options?.disabled !== true;\n\tconst logLevel = options?.level ?? \"error\";\n\tconst colorsEnabled = options?.disableColors !== void 0 ? !options.disableColors : getColorDepth() !== 1;\n\tconst LogFunc = (level, message, args = []) => {\n\t\tif (!enabled || !shouldPublishLog(logLevel, level)) return;\n\t\tconst formattedMessage = formatMessage(level, message, colorsEnabled);\n\t\tif (!options || typeof options.log !== \"function\") {\n\t\t\tif (level === \"error\") console.error(formattedMessage, ...args);\n\t\t\telse if (level === \"warn\") console.warn(formattedMessage, ...args);\n\t\t\telse console.log(formattedMessage, ...args);\n\t\t\treturn;\n\t\t}\n\t\toptions.log(level === \"success\" ? \"info\" : level, message, ...args);\n\t};\n\treturn {\n\t\t...Object.fromEntries(levels.map((level) => [level, (...[message, ...args]) => LogFunc(level, message, args)])),\n\t\tget level() {\n\t\t\treturn logLevel;\n\t\t}\n\t};\n};\nconst logger = createLogger();\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L2Vudi1EYnNzbXpvSy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxhQUFvQjtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx3QkFBd0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsK0RBQStELEdBQUc7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsZUFBZSxFQUFFLFVBQVUsRUFBRSxrQkFBa0IsRUFBRSxtQkFBbUIsRUFBRSxvQkFBb0IsRUFBRSxrQkFBa0IsRUFBRSxrQkFBa0IsZ0JBQWdCLGtCQUFrQixFQUFFLFFBQVE7QUFDNU0sV0FBVyxXQUFXLEVBQUUscUJBQXFCLGlCQUFpQixRQUFRO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiRDpcXGhhY2thdGhvbmUyXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFwucG5wbVxcQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkXFxub2RlX21vZHVsZXNcXEBiZXR0ZXItYXV0aFxcY29yZVxcZGlzdFxcZW52LURic3Ntem9LLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2Vudi9lbnYtaW1wbC50c1xuY29uc3QgX2VudlNoaW0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuY29uc3QgX2dldEVudiA9ICh1c2VTaGltKSA9PiBnbG9iYWxUaGlzLnByb2Nlc3M/LmVudiB8fCBnbG9iYWxUaGlzLkRlbm8/LmVudi50b09iamVjdCgpIHx8IGdsb2JhbFRoaXMuX19lbnZfXyB8fCAodXNlU2hpbSA/IF9lbnZTaGltIDogZ2xvYmFsVGhpcyk7XG5jb25zdCBlbnYgPSBuZXcgUHJveHkoX2VudlNoaW0sIHtcblx0Z2V0KF8sIHByb3ApIHtcblx0XHRyZXR1cm4gX2dldEVudigpW3Byb3BdID8/IF9lbnZTaGltW3Byb3BdO1xuXHR9LFxuXHRoYXMoXywgcHJvcCkge1xuXHRcdHJldHVybiBwcm9wIGluIF9nZXRFbnYoKSB8fCBwcm9wIGluIF9lbnZTaGltO1xuXHR9LFxuXHRzZXQoXywgcHJvcCwgdmFsdWUpIHtcblx0XHRjb25zdCBlbnYkMSA9IF9nZXRFbnYodHJ1ZSk7XG5cdFx0ZW52JDFbcHJvcF0gPSB2YWx1ZTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblx0ZGVsZXRlUHJvcGVydHkoXywgcHJvcCkge1xuXHRcdGlmICghcHJvcCkgcmV0dXJuIGZhbHNlO1xuXHRcdGNvbnN0IGVudiQxID0gX2dldEVudih0cnVlKTtcblx0XHRkZWxldGUgZW52JDFbcHJvcF07XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0sXG5cdG93bktleXMoKSB7XG5cdFx0Y29uc3QgZW52JDEgPSBfZ2V0RW52KHRydWUpO1xuXHRcdHJldHVybiBPYmplY3Qua2V5cyhlbnYkMSk7XG5cdH1cbn0pO1xuZnVuY3Rpb24gdG9Cb29sZWFuKHZhbCkge1xuXHRyZXR1cm4gdmFsID8gdmFsICE9PSBcImZhbHNlXCIgOiBmYWxzZTtcbn1cbmNvbnN0IG5vZGVFTlYgPSB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudiAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCBcIlwiO1xuLyoqIERldGVjdCBpZiBgTk9ERV9FTlZgIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIGBwcm9kdWN0aW9uYCAqL1xuY29uc3QgaXNQcm9kdWN0aW9uID0gbm9kZUVOViA9PT0gXCJwcm9kdWN0aW9uXCI7XG4vKiogRGV0ZWN0IGlmIGBOT0RFX0VOVmAgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgYGRldmAgb3IgYGRldmVsb3BtZW50YCAqL1xuY29uc3QgaXNEZXZlbG9wbWVudCA9ICgpID0+IG5vZGVFTlYgPT09IFwiZGV2XCIgfHwgbm9kZUVOViA9PT0gXCJkZXZlbG9wbWVudFwiO1xuLyoqIERldGVjdCBpZiBgTk9ERV9FTlZgIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIGB0ZXN0YCAqL1xuY29uc3QgaXNUZXN0ID0gKCkgPT4gbm9kZUVOViA9PT0gXCJ0ZXN0XCIgfHwgdG9Cb29sZWFuKGVudi5URVNUKTtcbi8qKlxuKiBHZXQgZW52aXJvbm1lbnQgdmFyaWFibGUgd2l0aCBmYWxsYmFja1xuKi9cbmZ1bmN0aW9uIGdldEVudlZhcihrZXksIGZhbGxiYWNrKSB7XG5cdGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudikgcmV0dXJuIHByb2Nlc3MuZW52W2tleV0gPz8gZmFsbGJhY2s7XG5cdGlmICh0eXBlb2YgRGVubyAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIERlbm8uZW52LmdldChrZXkpID8/IGZhbGxiYWNrO1xuXHRpZiAodHlwZW9mIEJ1biAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIEJ1bi5lbnZba2V5XSA/PyBmYWxsYmFjaztcblx0cmV0dXJuIGZhbGxiYWNrO1xufVxuLyoqXG4qIEdldCBib29sZWFuIGVudmlyb25tZW50IHZhcmlhYmxlXG4qL1xuZnVuY3Rpb24gZ2V0Qm9vbGVhbkVudlZhcihrZXksIGZhbGxiYWNrID0gdHJ1ZSkge1xuXHRjb25zdCB2YWx1ZSA9IGdldEVudlZhcihrZXkpO1xuXHRpZiAoIXZhbHVlKSByZXR1cm4gZmFsbGJhY2s7XG5cdHJldHVybiB2YWx1ZSAhPT0gXCIwXCIgJiYgdmFsdWUudG9Mb3dlckNhc2UoKSAhPT0gXCJmYWxzZVwiICYmIHZhbHVlICE9PSBcIlwiO1xufVxuLyoqXG4qIENvbW1vbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMgdXNlZCBpbiBCZXR0ZXIgQXV0aFxuKi9cbmNvbnN0IEVOViA9IE9iamVjdC5mcmVlemUoe1xuXHRnZXQgQkVUVEVSX0FVVEhfU0VDUkVUKCkge1xuXHRcdHJldHVybiBnZXRFbnZWYXIoXCJCRVRURVJfQVVUSF9TRUNSRVRcIik7XG5cdH0sXG5cdGdldCBBVVRIX1NFQ1JFVCgpIHtcblx0XHRyZXR1cm4gZ2V0RW52VmFyKFwiQVVUSF9TRUNSRVRcIik7XG5cdH0sXG5cdGdldCBCRVRURVJfQVVUSF9URUxFTUVUUlkoKSB7XG5cdFx0cmV0dXJuIGdldEVudlZhcihcIkJFVFRFUl9BVVRIX1RFTEVNRVRSWVwiKTtcblx0fSxcblx0Z2V0IEJFVFRFUl9BVVRIX1RFTEVNRVRSWV9JRCgpIHtcblx0XHRyZXR1cm4gZ2V0RW52VmFyKFwiQkVUVEVSX0FVVEhfVEVMRU1FVFJZX0lEXCIpO1xuXHR9LFxuXHRnZXQgTk9ERV9FTlYoKSB7XG5cdFx0cmV0dXJuIGdldEVudlZhcihcIk5PREVfRU5WXCIsIFwiZGV2ZWxvcG1lbnRcIik7XG5cdH0sXG5cdGdldCBQQUNLQUdFX1ZFUlNJT04oKSB7XG5cdFx0cmV0dXJuIGdldEVudlZhcihcIlBBQ0tBR0VfVkVSU0lPTlwiLCBcIjAuMC4wXCIpO1xuXHR9LFxuXHRnZXQgQkVUVEVSX0FVVEhfVEVMRU1FVFJZX0VORFBPSU5UKCkge1xuXHRcdHJldHVybiBnZXRFbnZWYXIoXCJCRVRURVJfQVVUSF9URUxFTUVUUllfRU5EUE9JTlRcIiwgXCJodHRwczovL3RlbGVtZXRyeS5iZXR0ZXItYXV0aC5jb20vdjEvdHJhY2tcIik7XG5cdH1cbn0pO1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvZW52L2NvbG9yLWRlcHRoLnRzXG5jb25zdCBDT0xPUlNfMiA9IDE7XG5jb25zdCBDT0xPUlNfMTYgPSA0O1xuY29uc3QgQ09MT1JTXzI1NiA9IDg7XG5jb25zdCBDT0xPUlNfMTZtID0gMjQ7XG5jb25zdCBURVJNX0VOVlMgPSB7XG5cdGV0ZXJtOiBDT0xPUlNfMTYsXG5cdGNvbnMyNTogQ09MT1JTXzE2LFxuXHRjb25zb2xlOiBDT0xPUlNfMTYsXG5cdGN5Z3dpbjogQ09MT1JTXzE2LFxuXHRkdHRlcm06IENPTE9SU18xNixcblx0Z25vbWU6IENPTE9SU18xNixcblx0aHVyZDogQ09MT1JTXzE2LFxuXHRqZmJ0ZXJtOiBDT0xPUlNfMTYsXG5cdGtvbnNvbGU6IENPTE9SU18xNixcblx0a3Rlcm06IENPTE9SU18xNixcblx0bWx0ZXJtOiBDT0xPUlNfMTYsXG5cdG1vc2g6IENPTE9SU18xNm0sXG5cdHB1dHR5OiBDT0xPUlNfMTYsXG5cdHN0OiBDT0xPUlNfMTYsXG5cdFwicnh2dC11bmljb2RlLTI0Yml0XCI6IENPTE9SU18xNm0sXG5cdHRlcm1pbmF0b3I6IENPTE9SU18xNm0sXG5cdFwieHRlcm0ta2l0dHlcIjogQ09MT1JTXzE2bVxufTtcbmNvbnN0IENJX0VOVlNfTUFQID0gbmV3IE1hcChPYmplY3QuZW50cmllcyh7XG5cdEFQUFZFWU9SOiBDT0xPUlNfMjU2LFxuXHRCVUlMREtJVEU6IENPTE9SU18yNTYsXG5cdENJUkNMRUNJOiBDT0xPUlNfMTZtLFxuXHREUk9ORTogQ09MT1JTXzI1Nixcblx0R0lURUFfQUNUSU9OUzogQ09MT1JTXzE2bSxcblx0R0lUSFVCX0FDVElPTlM6IENPTE9SU18xNm0sXG5cdEdJVExBQl9DSTogQ09MT1JTXzI1Nixcblx0VFJBVklTOiBDT0xPUlNfMjU2XG59KSk7XG5jb25zdCBURVJNX0VOVlNfUkVHX0VYUCA9IFtcblx0L2Fuc2kvLFxuXHQvY29sb3IvLFxuXHQvbGludXgvLFxuXHQvZGlyZWN0Lyxcblx0L15jb25bMC05XSp4WzAtOV0vLFxuXHQvXnJ4dnQvLFxuXHQvXnNjcmVlbi8sXG5cdC9eeHRlcm0vLFxuXHQvXnZ0MTAwLyxcblx0L152dDIyMC9cbl07XG5mdW5jdGlvbiBnZXRDb2xvckRlcHRoKCkge1xuXHRpZiAoZ2V0RW52VmFyKFwiRk9SQ0VfQ09MT1JcIikgIT09IHZvaWQgMCkgc3dpdGNoIChnZXRFbnZWYXIoXCJGT1JDRV9DT0xPUlwiKSkge1xuXHRcdGNhc2UgXCJcIjpcblx0XHRjYXNlIFwiMVwiOlxuXHRcdGNhc2UgXCJ0cnVlXCI6IHJldHVybiBDT0xPUlNfMTY7XG5cdFx0Y2FzZSBcIjJcIjogcmV0dXJuIENPTE9SU18yNTY7XG5cdFx0Y2FzZSBcIjNcIjogcmV0dXJuIENPTE9SU18xNm07XG5cdFx0ZGVmYXVsdDogcmV0dXJuIENPTE9SU18yO1xuXHR9XG5cdGlmIChnZXRFbnZWYXIoXCJOT0RFX0RJU0FCTEVfQ09MT1JTXCIpICE9PSB2b2lkIDAgJiYgZ2V0RW52VmFyKFwiTk9ERV9ESVNBQkxFX0NPTE9SU1wiKSAhPT0gXCJcIiB8fCBnZXRFbnZWYXIoXCJOT19DT0xPUlwiKSAhPT0gdm9pZCAwICYmIGdldEVudlZhcihcIk5PX0NPTE9SXCIpICE9PSBcIlwiIHx8IGdldEVudlZhcihcIlRFUk1cIikgPT09IFwiZHVtYlwiKSByZXR1cm4gQ09MT1JTXzI7XG5cdGlmIChnZXRFbnZWYXIoXCJUTVVYXCIpKSByZXR1cm4gQ09MT1JTXzE2bTtcblx0aWYgKFwiVEZfQlVJTERcIiBpbiBlbnYgJiYgXCJBR0VOVF9OQU1FXCIgaW4gZW52KSByZXR1cm4gQ09MT1JTXzE2O1xuXHRpZiAoXCJDSVwiIGluIGVudikge1xuXHRcdGZvciAoY29uc3QgeyAwOiBlbnZOYW1lLCAxOiBjb2xvcnMgfSBvZiBDSV9FTlZTX01BUCkgaWYgKGVudk5hbWUgaW4gZW52KSByZXR1cm4gY29sb3JzO1xuXHRcdGlmIChnZXRFbnZWYXIoXCJDSV9OQU1FXCIpID09PSBcImNvZGVzaGlwXCIpIHJldHVybiBDT0xPUlNfMjU2O1xuXHRcdHJldHVybiBDT0xPUlNfMjtcblx0fVxuXHRpZiAoXCJURUFNQ0lUWV9WRVJTSU9OXCIgaW4gZW52KSByZXR1cm4gL14oOVxcLigwKlsxLTldXFxkKilcXC58XFxkezIsfVxcLikvLmV4ZWMoZ2V0RW52VmFyKFwiVEVBTUNJVFlfVkVSU0lPTlwiKSkgIT09IG51bGwgPyBDT0xPUlNfMTYgOiBDT0xPUlNfMjtcblx0c3dpdGNoIChnZXRFbnZWYXIoXCJURVJNX1BST0dSQU1cIikpIHtcblx0XHRjYXNlIFwiaVRlcm0uYXBwXCI6XG5cdFx0XHRpZiAoIWdldEVudlZhcihcIlRFUk1fUFJPR1JBTV9WRVJTSU9OXCIpIHx8IC9eWzAtMl1cXC4vLmV4ZWMoZ2V0RW52VmFyKFwiVEVSTV9QUk9HUkFNX1ZFUlNJT05cIikpICE9PSBudWxsKSByZXR1cm4gQ09MT1JTXzI1Njtcblx0XHRcdHJldHVybiBDT0xPUlNfMTZtO1xuXHRcdGNhc2UgXCJIeXBlclRlcm1cIjpcblx0XHRjYXNlIFwiTWFjVGVybVwiOiByZXR1cm4gQ09MT1JTXzE2bTtcblx0XHRjYXNlIFwiQXBwbGVfVGVybWluYWxcIjogcmV0dXJuIENPTE9SU18yNTY7XG5cdH1cblx0aWYgKGdldEVudlZhcihcIkNPTE9SVEVSTVwiKSA9PT0gXCJ0cnVlY29sb3JcIiB8fCBnZXRFbnZWYXIoXCJDT0xPUlRFUk1cIikgPT09IFwiMjRiaXRcIikgcmV0dXJuIENPTE9SU18xNm07XG5cdGlmIChnZXRFbnZWYXIoXCJURVJNXCIpKSB7XG5cdFx0aWYgKC90cnVlY29sb3IvLmV4ZWMoZ2V0RW52VmFyKFwiVEVSTVwiKSkgIT09IG51bGwpIHJldHVybiBDT0xPUlNfMTZtO1xuXHRcdGlmICgvXnh0ZXJtLTI1Ni8uZXhlYyhnZXRFbnZWYXIoXCJURVJNXCIpKSAhPT0gbnVsbCkgcmV0dXJuIENPTE9SU18yNTY7XG5cdFx0Y29uc3QgdGVybUVudiA9IGdldEVudlZhcihcIlRFUk1cIikudG9Mb3dlckNhc2UoKTtcblx0XHRpZiAoVEVSTV9FTlZTW3Rlcm1FbnZdKSByZXR1cm4gVEVSTV9FTlZTW3Rlcm1FbnZdO1xuXHRcdGlmIChURVJNX0VOVlNfUkVHX0VYUC5zb21lKCh0ZXJtKSA9PiB0ZXJtLmV4ZWModGVybUVudikgIT09IG51bGwpKSByZXR1cm4gQ09MT1JTXzE2O1xuXHR9XG5cdGlmIChnZXRFbnZWYXIoXCJDT0xPUlRFUk1cIikpIHJldHVybiBDT0xPUlNfMTY7XG5cdHJldHVybiBDT0xPUlNfMjtcbn1cblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2Vudi9sb2dnZXIudHNcbmNvbnN0IFRUWV9DT0xPUlMgPSB7XG5cdHJlc2V0OiBcIlxceDFCWzBtXCIsXG5cdGJyaWdodDogXCJcXHgxQlsxbVwiLFxuXHRkaW06IFwiXFx4MUJbMm1cIixcblx0dW5kaW06IFwiXFx4MUJbMjJtXCIsXG5cdHVuZGVyc2NvcmU6IFwiXFx4MUJbNG1cIixcblx0Ymxpbms6IFwiXFx4MUJbNW1cIixcblx0cmV2ZXJzZTogXCJcXHgxQls3bVwiLFxuXHRoaWRkZW46IFwiXFx4MUJbOG1cIixcblx0Zmc6IHtcblx0XHRibGFjazogXCJcXHgxQlszMG1cIixcblx0XHRyZWQ6IFwiXFx4MUJbMzFtXCIsXG5cdFx0Z3JlZW46IFwiXFx4MUJbMzJtXCIsXG5cdFx0eWVsbG93OiBcIlxceDFCWzMzbVwiLFxuXHRcdGJsdWU6IFwiXFx4MUJbMzRtXCIsXG5cdFx0bWFnZW50YTogXCJcXHgxQlszNW1cIixcblx0XHRjeWFuOiBcIlxceDFCWzM2bVwiLFxuXHRcdHdoaXRlOiBcIlxceDFCWzM3bVwiXG5cdH0sXG5cdGJnOiB7XG5cdFx0YmxhY2s6IFwiXFx4MUJbNDBtXCIsXG5cdFx0cmVkOiBcIlxceDFCWzQxbVwiLFxuXHRcdGdyZWVuOiBcIlxceDFCWzQybVwiLFxuXHRcdHllbGxvdzogXCJcXHgxQls0M21cIixcblx0XHRibHVlOiBcIlxceDFCWzQ0bVwiLFxuXHRcdG1hZ2VudGE6IFwiXFx4MUJbNDVtXCIsXG5cdFx0Y3lhbjogXCJcXHgxQls0Nm1cIixcblx0XHR3aGl0ZTogXCJcXHgxQls0N21cIlxuXHR9XG59O1xuY29uc3QgbGV2ZWxzID0gW1xuXHRcImRlYnVnXCIsXG5cdFwiaW5mb1wiLFxuXHRcInN1Y2Nlc3NcIixcblx0XCJ3YXJuXCIsXG5cdFwiZXJyb3JcIlxuXTtcbmZ1bmN0aW9uIHNob3VsZFB1Ymxpc2hMb2coY3VycmVudExvZ0xldmVsLCBsb2dMZXZlbCkge1xuXHRyZXR1cm4gbGV2ZWxzLmluZGV4T2YobG9nTGV2ZWwpID49IGxldmVscy5pbmRleE9mKGN1cnJlbnRMb2dMZXZlbCk7XG59XG5jb25zdCBsZXZlbENvbG9ycyA9IHtcblx0aW5mbzogVFRZX0NPTE9SUy5mZy5ibHVlLFxuXHRzdWNjZXNzOiBUVFlfQ09MT1JTLmZnLmdyZWVuLFxuXHR3YXJuOiBUVFlfQ09MT1JTLmZnLnllbGxvdyxcblx0ZXJyb3I6IFRUWV9DT0xPUlMuZmcucmVkLFxuXHRkZWJ1ZzogVFRZX0NPTE9SUy5mZy5tYWdlbnRhXG59O1xuY29uc3QgZm9ybWF0TWVzc2FnZSA9IChsZXZlbCwgbWVzc2FnZSwgY29sb3JzRW5hYmxlZCkgPT4ge1xuXHRjb25zdCB0aW1lc3RhbXAgPSAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCk7XG5cdGlmIChjb2xvcnNFbmFibGVkKSByZXR1cm4gYCR7VFRZX0NPTE9SUy5kaW19JHt0aW1lc3RhbXB9JHtUVFlfQ09MT1JTLnJlc2V0fSAke2xldmVsQ29sb3JzW2xldmVsXX0ke2xldmVsLnRvVXBwZXJDYXNlKCl9JHtUVFlfQ09MT1JTLnJlc2V0fSAke1RUWV9DT0xPUlMuYnJpZ2h0fVtCZXR0ZXIgQXV0aF06JHtUVFlfQ09MT1JTLnJlc2V0fSAke21lc3NhZ2V9YDtcblx0cmV0dXJuIGAke3RpbWVzdGFtcH0gJHtsZXZlbC50b1VwcGVyQ2FzZSgpfSBbQmV0dGVyIEF1dGhdOiAke21lc3NhZ2V9YDtcbn07XG5jb25zdCBjcmVhdGVMb2dnZXIgPSAob3B0aW9ucykgPT4ge1xuXHRjb25zdCBlbmFibGVkID0gb3B0aW9ucz8uZGlzYWJsZWQgIT09IHRydWU7XG5cdGNvbnN0IGxvZ0xldmVsID0gb3B0aW9ucz8ubGV2ZWwgPz8gXCJlcnJvclwiO1xuXHRjb25zdCBjb2xvcnNFbmFibGVkID0gb3B0aW9ucz8uZGlzYWJsZUNvbG9ycyAhPT0gdm9pZCAwID8gIW9wdGlvbnMuZGlzYWJsZUNvbG9ycyA6IGdldENvbG9yRGVwdGgoKSAhPT0gMTtcblx0Y29uc3QgTG9nRnVuYyA9IChsZXZlbCwgbWVzc2FnZSwgYXJncyA9IFtdKSA9PiB7XG5cdFx0aWYgKCFlbmFibGVkIHx8ICFzaG91bGRQdWJsaXNoTG9nKGxvZ0xldmVsLCBsZXZlbCkpIHJldHVybjtcblx0XHRjb25zdCBmb3JtYXR0ZWRNZXNzYWdlID0gZm9ybWF0TWVzc2FnZShsZXZlbCwgbWVzc2FnZSwgY29sb3JzRW5hYmxlZCk7XG5cdFx0aWYgKCFvcHRpb25zIHx8IHR5cGVvZiBvcHRpb25zLmxvZyAhPT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRpZiAobGV2ZWwgPT09IFwiZXJyb3JcIikgY29uc29sZS5lcnJvcihmb3JtYXR0ZWRNZXNzYWdlLCAuLi5hcmdzKTtcblx0XHRcdGVsc2UgaWYgKGxldmVsID09PSBcIndhcm5cIikgY29uc29sZS53YXJuKGZvcm1hdHRlZE1lc3NhZ2UsIC4uLmFyZ3MpO1xuXHRcdFx0ZWxzZSBjb25zb2xlLmxvZyhmb3JtYXR0ZWRNZXNzYWdlLCAuLi5hcmdzKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0b3B0aW9ucy5sb2cobGV2ZWwgPT09IFwic3VjY2Vzc1wiID8gXCJpbmZvXCIgOiBsZXZlbCwgbWVzc2FnZSwgLi4uYXJncyk7XG5cdH07XG5cdHJldHVybiB7XG5cdFx0Li4uT2JqZWN0LmZyb21FbnRyaWVzKGxldmVscy5tYXAoKGxldmVsKSA9PiBbbGV2ZWwsICguLi5bbWVzc2FnZSwgLi4uYXJnc10pID0+IExvZ0Z1bmMobGV2ZWwsIG1lc3NhZ2UsIGFyZ3MpXSkpLFxuXHRcdGdldCBsZXZlbCgpIHtcblx0XHRcdHJldHVybiBsb2dMZXZlbDtcblx0XHR9XG5cdH07XG59O1xuY29uc3QgbG9nZ2VyID0gY3JlYXRlTG9nZ2VyKCk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgc2hvdWxkUHVibGlzaExvZyBhcyBhLCBlbnYgYXMgYywgaXNEZXZlbG9wbWVudCBhcyBkLCBpc1Byb2R1Y3Rpb24gYXMgZiwgbG9nZ2VyIGFzIGksIGdldEJvb2xlYW5FbnZWYXIgYXMgbCwgbm9kZUVOViBhcyBtLCBjcmVhdGVMb2dnZXIgYXMgbiwgZ2V0Q29sb3JEZXB0aCBhcyBvLCBpc1Rlc3QgYXMgcCwgbGV2ZWxzIGFzIHIsIEVOViBhcyBzLCBUVFlfQ09MT1JTIGFzIHQsIGdldEVudlZhciBhcyB1IH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env-DbssmzoK.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env/index.mjs":
/*!*******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env/index.mjs ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ENV: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.s),\n/* harmony export */   TTY_COLORS: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.t),\n/* harmony export */   createLogger: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.n),\n/* harmony export */   env: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.c),\n/* harmony export */   getBooleanEnvVar: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.l),\n/* harmony export */   getColorDepth: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.o),\n/* harmony export */   getEnvVar: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.u),\n/* harmony export */   isDevelopment: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.d),\n/* harmony export */   isProduction: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.f),\n/* harmony export */   isTest: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.p),\n/* harmony export */   levels: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.r),\n/* harmony export */   logger: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i),\n/* harmony export */   nodeENV: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.m),\n/* harmony export */   shouldPublishLog: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.a)\n/* harmony export */ });\n/* harmony import */ var _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../env-DbssmzoK.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env-DbssmzoK.mjs\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L2Vudi9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTJRIiwic291cmNlcyI6WyJEOlxcaGFja2F0aG9uZTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXC5wbnBtXFxAYmV0dGVyLWF1dGgrY29yZUAxLjQuMTBfQGJfZTBjN2UxODYwNzk2NWE2MjJjMDEzMTNmZjk0NmY1NGRcXG5vZGVfbW9kdWxlc1xcQGJldHRlci1hdXRoXFxjb3JlXFxkaXN0XFxlbnZcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhIGFzIHNob3VsZFB1Ymxpc2hMb2csIGMgYXMgZW52LCBkIGFzIGlzRGV2ZWxvcG1lbnQsIGYgYXMgaXNQcm9kdWN0aW9uLCBpIGFzIGxvZ2dlciwgbCBhcyBnZXRCb29sZWFuRW52VmFyLCBtIGFzIG5vZGVFTlYsIG4gYXMgY3JlYXRlTG9nZ2VyLCBvIGFzIGdldENvbG9yRGVwdGgsIHAgYXMgaXNUZXN0LCByIGFzIGxldmVscywgcyBhcyBFTlYsIHQgYXMgVFRZX0NPTE9SUywgdSBhcyBnZXRFbnZWYXIgfSBmcm9tIFwiLi4vZW52LURic3Ntem9LLm1qc1wiO1xuXG5leHBvcnQgeyBFTlYsIFRUWV9DT0xPUlMsIGNyZWF0ZUxvZ2dlciwgZW52LCBnZXRCb29sZWFuRW52VmFyLCBnZXRDb2xvckRlcHRoLCBnZXRFbnZWYXIsIGlzRGV2ZWxvcG1lbnQsIGlzUHJvZHVjdGlvbiwgaXNUZXN0LCBsZXZlbHMsIGxvZ2dlciwgbm9kZUVOViwgc2hvdWxkUHVibGlzaExvZyB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/error-RtKwr3Pu.mjs":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/error-RtKwr3Pu.mjs ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   n: () => (/* binding */ BASE_ERROR_CODES),\n/* harmony export */   t: () => (/* binding */ BetterAuthError)\n/* harmony export */ });\n/* harmony import */ var _utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils-NloIXYE0.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils-NloIXYE0.mjs\");\n\n\n//#region src/error/codes.ts\nconst BASE_ERROR_CODES = (0,_utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_0__.i)({\n\tUSER_NOT_FOUND: \"User not found\",\n\tFAILED_TO_CREATE_USER: \"Failed to create user\",\n\tFAILED_TO_CREATE_SESSION: \"Failed to create session\",\n\tFAILED_TO_UPDATE_USER: \"Failed to update user\",\n\tFAILED_TO_GET_SESSION: \"Failed to get session\",\n\tINVALID_PASSWORD: \"Invalid password\",\n\tINVALID_EMAIL: \"Invalid email\",\n\tINVALID_EMAIL_OR_PASSWORD: \"Invalid email or password\",\n\tSOCIAL_ACCOUNT_ALREADY_LINKED: \"Social account already linked\",\n\tPROVIDER_NOT_FOUND: \"Provider not found\",\n\tINVALID_TOKEN: \"Invalid token\",\n\tID_TOKEN_NOT_SUPPORTED: \"id_token not supported\",\n\tFAILED_TO_GET_USER_INFO: \"Failed to get user info\",\n\tUSER_EMAIL_NOT_FOUND: \"User email not found\",\n\tEMAIL_NOT_VERIFIED: \"Email not verified\",\n\tPASSWORD_TOO_SHORT: \"Password too short\",\n\tPASSWORD_TOO_LONG: \"Password too long\",\n\tUSER_ALREADY_EXISTS: \"User already exists.\",\n\tUSER_ALREADY_EXISTS_USE_ANOTHER_EMAIL: \"User already exists. Use another email.\",\n\tEMAIL_CAN_NOT_BE_UPDATED: \"Email can not be updated\",\n\tCREDENTIAL_ACCOUNT_NOT_FOUND: \"Credential account not found\",\n\tSESSION_EXPIRED: \"Session expired. Re-authenticate to perform this action.\",\n\tFAILED_TO_UNLINK_LAST_ACCOUNT: \"You can't unlink your last account\",\n\tACCOUNT_NOT_FOUND: \"Account not found\",\n\tUSER_ALREADY_HAS_PASSWORD: \"User already has a password. Provide that to delete the account.\",\n\tCROSS_SITE_NAVIGATION_LOGIN_BLOCKED: \"Cross-site navigation login blocked. This request appears to be a CSRF attack.\",\n\tVERIFICATION_EMAIL_NOT_ENABLED: \"Verification email isn't enabled\",\n\tEMAIL_ALREADY_VERIFIED: \"Email is already verified\",\n\tEMAIL_MISMATCH: \"Email mismatch\",\n\tSESSION_NOT_FRESH: \"Session is not fresh\",\n\tLINKED_ACCOUNT_ALREADY_EXISTS: \"Linked account already exists\",\n\tINVALID_ORIGIN: \"Invalid origin\",\n\tINVALID_CALLBACK_URL: \"Invalid callbackURL\",\n\tINVALID_REDIRECT_URL: \"Invalid redirectURL\",\n\tINVALID_ERROR_CALLBACK_URL: \"Invalid errorCallbackURL\",\n\tINVALID_NEW_USER_CALLBACK_URL: \"Invalid newUserCallbackURL\",\n\tMISSING_OR_NULL_ORIGIN: \"Missing or null Origin\",\n\tCALLBACK_URL_REQUIRED: \"callbackURL is required\",\n\tFAILED_TO_CREATE_VERIFICATION: \"Unable to create verification\",\n\tFIELD_NOT_ALLOWED: \"Field not allowed to be set\",\n\tASYNC_VALIDATION_NOT_SUPPORTED: \"Async validation is not supported\",\n\tVALIDATION_ERROR: \"Validation Error\",\n\tMISSING_FIELD: \"Field is required\"\n});\n\n//#endregion\n//#region src/error/index.ts\nvar BetterAuthError = class extends Error {\n\tconstructor(message, cause) {\n\t\tsuper(message);\n\t\tthis.name = \"BetterAuthError\";\n\t\tthis.message = message;\n\t\tthis.cause = cause;\n\t\tthis.stack = \"\";\n\t}\n};\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L2Vycm9yLVJ0S3dyM1B1Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkQ7O0FBRTdEO0FBQ0EseUJBQXlCLHNEQUFnQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiRDpcXGhhY2thdGhvbmUyXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFwucG5wbVxcQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkXFxub2RlX21vZHVsZXNcXEBiZXR0ZXItYXV0aFxcY29yZVxcZGlzdFxcZXJyb3ItUnRLd3IzUHUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGkgYXMgZGVmaW5lRXJyb3JDb2RlcyB9IGZyb20gXCIuL3V0aWxzLU5sb0lYWUUwLm1qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2Vycm9yL2NvZGVzLnRzXG5jb25zdCBCQVNFX0VSUk9SX0NPREVTID0gZGVmaW5lRXJyb3JDb2Rlcyh7XG5cdFVTRVJfTk9UX0ZPVU5EOiBcIlVzZXIgbm90IGZvdW5kXCIsXG5cdEZBSUxFRF9UT19DUkVBVEVfVVNFUjogXCJGYWlsZWQgdG8gY3JlYXRlIHVzZXJcIixcblx0RkFJTEVEX1RPX0NSRUFURV9TRVNTSU9OOiBcIkZhaWxlZCB0byBjcmVhdGUgc2Vzc2lvblwiLFxuXHRGQUlMRURfVE9fVVBEQVRFX1VTRVI6IFwiRmFpbGVkIHRvIHVwZGF0ZSB1c2VyXCIsXG5cdEZBSUxFRF9UT19HRVRfU0VTU0lPTjogXCJGYWlsZWQgdG8gZ2V0IHNlc3Npb25cIixcblx0SU5WQUxJRF9QQVNTV09SRDogXCJJbnZhbGlkIHBhc3N3b3JkXCIsXG5cdElOVkFMSURfRU1BSUw6IFwiSW52YWxpZCBlbWFpbFwiLFxuXHRJTlZBTElEX0VNQUlMX09SX1BBU1NXT1JEOiBcIkludmFsaWQgZW1haWwgb3IgcGFzc3dvcmRcIixcblx0U09DSUFMX0FDQ09VTlRfQUxSRUFEWV9MSU5LRUQ6IFwiU29jaWFsIGFjY291bnQgYWxyZWFkeSBsaW5rZWRcIixcblx0UFJPVklERVJfTk9UX0ZPVU5EOiBcIlByb3ZpZGVyIG5vdCBmb3VuZFwiLFxuXHRJTlZBTElEX1RPS0VOOiBcIkludmFsaWQgdG9rZW5cIixcblx0SURfVE9LRU5fTk9UX1NVUFBPUlRFRDogXCJpZF90b2tlbiBub3Qgc3VwcG9ydGVkXCIsXG5cdEZBSUxFRF9UT19HRVRfVVNFUl9JTkZPOiBcIkZhaWxlZCB0byBnZXQgdXNlciBpbmZvXCIsXG5cdFVTRVJfRU1BSUxfTk9UX0ZPVU5EOiBcIlVzZXIgZW1haWwgbm90IGZvdW5kXCIsXG5cdEVNQUlMX05PVF9WRVJJRklFRDogXCJFbWFpbCBub3QgdmVyaWZpZWRcIixcblx0UEFTU1dPUkRfVE9PX1NIT1JUOiBcIlBhc3N3b3JkIHRvbyBzaG9ydFwiLFxuXHRQQVNTV09SRF9UT09fTE9ORzogXCJQYXNzd29yZCB0b28gbG9uZ1wiLFxuXHRVU0VSX0FMUkVBRFlfRVhJU1RTOiBcIlVzZXIgYWxyZWFkeSBleGlzdHMuXCIsXG5cdFVTRVJfQUxSRUFEWV9FWElTVFNfVVNFX0FOT1RIRVJfRU1BSUw6IFwiVXNlciBhbHJlYWR5IGV4aXN0cy4gVXNlIGFub3RoZXIgZW1haWwuXCIsXG5cdEVNQUlMX0NBTl9OT1RfQkVfVVBEQVRFRDogXCJFbWFpbCBjYW4gbm90IGJlIHVwZGF0ZWRcIixcblx0Q1JFREVOVElBTF9BQ0NPVU5UX05PVF9GT1VORDogXCJDcmVkZW50aWFsIGFjY291bnQgbm90IGZvdW5kXCIsXG5cdFNFU1NJT05fRVhQSVJFRDogXCJTZXNzaW9uIGV4cGlyZWQuIFJlLWF1dGhlbnRpY2F0ZSB0byBwZXJmb3JtIHRoaXMgYWN0aW9uLlwiLFxuXHRGQUlMRURfVE9fVU5MSU5LX0xBU1RfQUNDT1VOVDogXCJZb3UgY2FuJ3QgdW5saW5rIHlvdXIgbGFzdCBhY2NvdW50XCIsXG5cdEFDQ09VTlRfTk9UX0ZPVU5EOiBcIkFjY291bnQgbm90IGZvdW5kXCIsXG5cdFVTRVJfQUxSRUFEWV9IQVNfUEFTU1dPUkQ6IFwiVXNlciBhbHJlYWR5IGhhcyBhIHBhc3N3b3JkLiBQcm92aWRlIHRoYXQgdG8gZGVsZXRlIHRoZSBhY2NvdW50LlwiLFxuXHRDUk9TU19TSVRFX05BVklHQVRJT05fTE9HSU5fQkxPQ0tFRDogXCJDcm9zcy1zaXRlIG5hdmlnYXRpb24gbG9naW4gYmxvY2tlZC4gVGhpcyByZXF1ZXN0IGFwcGVhcnMgdG8gYmUgYSBDU1JGIGF0dGFjay5cIixcblx0VkVSSUZJQ0FUSU9OX0VNQUlMX05PVF9FTkFCTEVEOiBcIlZlcmlmaWNhdGlvbiBlbWFpbCBpc24ndCBlbmFibGVkXCIsXG5cdEVNQUlMX0FMUkVBRFlfVkVSSUZJRUQ6IFwiRW1haWwgaXMgYWxyZWFkeSB2ZXJpZmllZFwiLFxuXHRFTUFJTF9NSVNNQVRDSDogXCJFbWFpbCBtaXNtYXRjaFwiLFxuXHRTRVNTSU9OX05PVF9GUkVTSDogXCJTZXNzaW9uIGlzIG5vdCBmcmVzaFwiLFxuXHRMSU5LRURfQUNDT1VOVF9BTFJFQURZX0VYSVNUUzogXCJMaW5rZWQgYWNjb3VudCBhbHJlYWR5IGV4aXN0c1wiLFxuXHRJTlZBTElEX09SSUdJTjogXCJJbnZhbGlkIG9yaWdpblwiLFxuXHRJTlZBTElEX0NBTExCQUNLX1VSTDogXCJJbnZhbGlkIGNhbGxiYWNrVVJMXCIsXG5cdElOVkFMSURfUkVESVJFQ1RfVVJMOiBcIkludmFsaWQgcmVkaXJlY3RVUkxcIixcblx0SU5WQUxJRF9FUlJPUl9DQUxMQkFDS19VUkw6IFwiSW52YWxpZCBlcnJvckNhbGxiYWNrVVJMXCIsXG5cdElOVkFMSURfTkVXX1VTRVJfQ0FMTEJBQ0tfVVJMOiBcIkludmFsaWQgbmV3VXNlckNhbGxiYWNrVVJMXCIsXG5cdE1JU1NJTkdfT1JfTlVMTF9PUklHSU46IFwiTWlzc2luZyBvciBudWxsIE9yaWdpblwiLFxuXHRDQUxMQkFDS19VUkxfUkVRVUlSRUQ6IFwiY2FsbGJhY2tVUkwgaXMgcmVxdWlyZWRcIixcblx0RkFJTEVEX1RPX0NSRUFURV9WRVJJRklDQVRJT046IFwiVW5hYmxlIHRvIGNyZWF0ZSB2ZXJpZmljYXRpb25cIixcblx0RklFTERfTk9UX0FMTE9XRUQ6IFwiRmllbGQgbm90IGFsbG93ZWQgdG8gYmUgc2V0XCIsXG5cdEFTWU5DX1ZBTElEQVRJT05fTk9UX1NVUFBPUlRFRDogXCJBc3luYyB2YWxpZGF0aW9uIGlzIG5vdCBzdXBwb3J0ZWRcIixcblx0VkFMSURBVElPTl9FUlJPUjogXCJWYWxpZGF0aW9uIEVycm9yXCIsXG5cdE1JU1NJTkdfRklFTEQ6IFwiRmllbGQgaXMgcmVxdWlyZWRcIlxufSk7XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9lcnJvci9pbmRleC50c1xudmFyIEJldHRlckF1dGhFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuXHRjb25zdHJ1Y3RvcihtZXNzYWdlLCBjYXVzZSkge1xuXHRcdHN1cGVyKG1lc3NhZ2UpO1xuXHRcdHRoaXMubmFtZSA9IFwiQmV0dGVyQXV0aEVycm9yXCI7XG5cdFx0dGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcblx0XHR0aGlzLmNhdXNlID0gY2F1c2U7XG5cdFx0dGhpcy5zdGFjayA9IFwiXCI7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQkFTRV9FUlJPUl9DT0RFUyBhcyBuLCBCZXR0ZXJBdXRoRXJyb3IgYXMgdCB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/error-RtKwr3Pu.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/error/index.mjs":
/*!*********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/error/index.mjs ***!
  \*********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BASE_ERROR_CODES: () => (/* reexport safe */ _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.n),\n/* harmony export */   BetterAuthError: () => (/* reexport safe */ _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t)\n/* harmony export */ });\n/* harmony import */ var _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../env-DbssmzoK.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env-DbssmzoK.mjs\");\n/* harmony import */ var _utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils-NloIXYE0.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils-NloIXYE0.mjs\");\n/* harmony import */ var _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../error-RtKwr3Pu.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/error-RtKwr3Pu.mjs\");\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L2Vycm9yL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE2QjtBQUNFO0FBQ3FEIiwic291cmNlcyI6WyJEOlxcaGFja2F0aG9uZTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXC5wbnBtXFxAYmV0dGVyLWF1dGgrY29yZUAxLjQuMTBfQGJfZTBjN2UxODYwNzk2NWE2MjJjMDEzMTNmZjk0NmY1NGRcXG5vZGVfbW9kdWxlc1xcQGJldHRlci1hdXRoXFxjb3JlXFxkaXN0XFxlcnJvclxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcIi4uL2Vudi1EYnNzbXpvSy5tanNcIjtcbmltcG9ydCBcIi4uL3V0aWxzLU5sb0lYWUUwLm1qc1wiO1xuaW1wb3J0IHsgbiBhcyBCQVNFX0VSUk9SX0NPREVTLCB0IGFzIEJldHRlckF1dGhFcnJvciB9IGZyb20gXCIuLi9lcnJvci1SdEt3cjNQdS5tanNcIjtcblxuZXhwb3J0IHsgQkFTRV9FUlJPUl9DT0RFUywgQmV0dGVyQXV0aEVycm9yIH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/error/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/get-tables-CMc_Emww.mjs":
/*!*****************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/get-tables-CMc_Emww.mjs ***!
  \*****************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   t: () => (/* binding */ getAuthTables)\n/* harmony export */ });\n//#region src/db/get-tables.ts\nconst getAuthTables = (options) => {\n\tconst pluginSchema = (options.plugins ?? []).reduce((acc, plugin) => {\n\t\tconst schema = plugin.schema;\n\t\tif (!schema) return acc;\n\t\tfor (const [key, value] of Object.entries(schema)) acc[key] = {\n\t\t\tfields: {\n\t\t\t\t...acc[key]?.fields,\n\t\t\t\t...value.fields\n\t\t\t},\n\t\t\tmodelName: value.modelName || key\n\t\t};\n\t\treturn acc;\n\t}, {});\n\tconst shouldAddRateLimitTable = options.rateLimit?.storage === \"database\";\n\tconst rateLimitTable = { rateLimit: {\n\t\tmodelName: options.rateLimit?.modelName || \"rateLimit\",\n\t\tfields: {\n\t\t\tkey: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tfieldName: options.rateLimit?.fields?.key || \"key\"\n\t\t\t},\n\t\t\tcount: {\n\t\t\t\ttype: \"number\",\n\t\t\t\tfieldName: options.rateLimit?.fields?.count || \"count\"\n\t\t\t},\n\t\t\tlastRequest: {\n\t\t\t\ttype: \"number\",\n\t\t\t\tbigint: true,\n\t\t\t\tfieldName: options.rateLimit?.fields?.lastRequest || \"lastRequest\"\n\t\t\t}\n\t\t}\n\t} };\n\tconst { user, session, account, verification, ...pluginTables } = pluginSchema;\n\tconst sessionTable = { session: {\n\t\tmodelName: options.session?.modelName || \"session\",\n\t\tfields: {\n\t\t\texpiresAt: {\n\t\t\t\ttype: \"date\",\n\t\t\t\trequired: true,\n\t\t\t\tfieldName: options.session?.fields?.expiresAt || \"expiresAt\"\n\t\t\t},\n\t\t\ttoken: {\n\t\t\t\ttype: \"string\",\n\t\t\t\trequired: true,\n\t\t\t\tfieldName: options.session?.fields?.token || \"token\",\n\t\t\t\tunique: true\n\t\t\t},\n\t\t\tcreatedAt: {\n\t\t\t\ttype: \"date\",\n\t\t\t\trequired: true,\n\t\t\t\tfieldName: options.session?.fields?.createdAt || \"createdAt\",\n\t\t\t\tdefaultValue: () => /* @__PURE__ */ new Date()\n\t\t\t},\n\t\t\tupdatedAt: {\n\t\t\t\ttype: \"date\",\n\t\t\t\trequired: true,\n\t\t\t\tfieldName: options.session?.fields?.updatedAt || \"updatedAt\",\n\t\t\t\tonUpdate: () => /* @__PURE__ */ new Date()\n\t\t\t},\n\t\t\tipAddress: {\n\t\t\t\ttype: \"string\",\n\t\t\t\trequired: false,\n\t\t\t\tfieldName: options.session?.fields?.ipAddress || \"ipAddress\"\n\t\t\t},\n\t\t\tuserAgent: {\n\t\t\t\ttype: \"string\",\n\t\t\t\trequired: false,\n\t\t\t\tfieldName: options.session?.fields?.userAgent || \"userAgent\"\n\t\t\t},\n\t\t\tuserId: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tfieldName: options.session?.fields?.userId || \"userId\",\n\t\t\t\treferences: {\n\t\t\t\t\tmodel: options.user?.modelName || \"user\",\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tonDelete: \"cascade\"\n\t\t\t\t},\n\t\t\t\trequired: true,\n\t\t\t\tindex: true\n\t\t\t},\n\t\t\t...session?.fields,\n\t\t\t...options.session?.additionalFields\n\t\t},\n\t\torder: 2\n\t} };\n\treturn {\n\t\tuser: {\n\t\t\tmodelName: options.user?.modelName || \"user\",\n\t\t\tfields: {\n\t\t\t\tname: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.user?.fields?.name || \"name\",\n\t\t\t\t\tsortable: true\n\t\t\t\t},\n\t\t\t\temail: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tunique: true,\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.user?.fields?.email || \"email\",\n\t\t\t\t\tsortable: true\n\t\t\t\t},\n\t\t\t\temailVerified: {\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tdefaultValue: false,\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.user?.fields?.emailVerified || \"emailVerified\",\n\t\t\t\t\tinput: false\n\t\t\t\t},\n\t\t\t\timage: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options.user?.fields?.image || \"image\"\n\t\t\t\t},\n\t\t\t\tcreatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\tdefaultValue: () => /* @__PURE__ */ new Date(),\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.user?.fields?.createdAt || \"createdAt\"\n\t\t\t\t},\n\t\t\t\tupdatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\tdefaultValue: () => /* @__PURE__ */ new Date(),\n\t\t\t\t\tonUpdate: () => /* @__PURE__ */ new Date(),\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.user?.fields?.updatedAt || \"updatedAt\"\n\t\t\t\t},\n\t\t\t\t...user?.fields,\n\t\t\t\t...options.user?.additionalFields\n\t\t\t},\n\t\t\torder: 1\n\t\t},\n\t\t...!options.secondaryStorage || options.session?.storeSessionInDatabase ? sessionTable : {},\n\t\taccount: {\n\t\t\tmodelName: options.account?.modelName || \"account\",\n\t\t\tfields: {\n\t\t\t\taccountId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.account?.fields?.accountId || \"accountId\"\n\t\t\t\t},\n\t\t\t\tproviderId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.account?.fields?.providerId || \"providerId\"\n\t\t\t\t},\n\t\t\t\tuserId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\treferences: {\n\t\t\t\t\t\tmodel: options.user?.modelName || \"user\",\n\t\t\t\t\t\tfield: \"id\",\n\t\t\t\t\t\tonDelete: \"cascade\"\n\t\t\t\t\t},\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.account?.fields?.userId || \"userId\",\n\t\t\t\t\tindex: true\n\t\t\t\t},\n\t\t\t\taccessToken: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options.account?.fields?.accessToken || \"accessToken\"\n\t\t\t\t},\n\t\t\t\trefreshToken: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options.account?.fields?.refreshToken || \"refreshToken\"\n\t\t\t\t},\n\t\t\t\tidToken: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options.account?.fields?.idToken || \"idToken\"\n\t\t\t\t},\n\t\t\t\taccessTokenExpiresAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options.account?.fields?.accessTokenExpiresAt || \"accessTokenExpiresAt\"\n\t\t\t\t},\n\t\t\t\trefreshTokenExpiresAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options.account?.fields?.refreshTokenExpiresAt || \"refreshTokenExpiresAt\"\n\t\t\t\t},\n\t\t\t\tscope: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options.account?.fields?.scope || \"scope\"\n\t\t\t\t},\n\t\t\t\tpassword: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options.account?.fields?.password || \"password\"\n\t\t\t\t},\n\t\t\t\tcreatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.account?.fields?.createdAt || \"createdAt\",\n\t\t\t\t\tdefaultValue: () => /* @__PURE__ */ new Date()\n\t\t\t\t},\n\t\t\t\tupdatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.account?.fields?.updatedAt || \"updatedAt\",\n\t\t\t\t\tonUpdate: () => /* @__PURE__ */ new Date()\n\t\t\t\t},\n\t\t\t\t...account?.fields,\n\t\t\t\t...options.account?.additionalFields\n\t\t\t},\n\t\t\torder: 3\n\t\t},\n\t\tverification: {\n\t\t\tmodelName: options.verification?.modelName || \"verification\",\n\t\t\tfields: {\n\t\t\t\tidentifier: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.verification?.fields?.identifier || \"identifier\",\n\t\t\t\t\tindex: true\n\t\t\t\t},\n\t\t\t\tvalue: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.verification?.fields?.value || \"value\"\n\t\t\t\t},\n\t\t\t\texpiresAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.verification?.fields?.expiresAt || \"expiresAt\"\n\t\t\t\t},\n\t\t\t\tcreatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tdefaultValue: () => /* @__PURE__ */ new Date(),\n\t\t\t\t\tfieldName: options.verification?.fields?.createdAt || \"createdAt\"\n\t\t\t\t},\n\t\t\t\tupdatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tdefaultValue: () => /* @__PURE__ */ new Date(),\n\t\t\t\t\tonUpdate: () => /* @__PURE__ */ new Date(),\n\t\t\t\t\tfieldName: options.verification?.fields?.updatedAt || \"updatedAt\"\n\t\t\t\t},\n\t\t\t\t...verification?.fields,\n\t\t\t\t...options.verification?.additionalFields\n\t\t\t},\n\t\t\torder: 4\n\t\t},\n\t\t...pluginTables,\n\t\t...shouldAddRateLimitTable ? rateLimitTable : {}\n\t};\n};\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L2dldC10YWJsZXMtQ01jX0Vtd3cubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsRUFBRSxJQUFJO0FBQ047QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHdEQUF3RDtBQUNqRSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7QUFDSCw2RkFBNkY7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIkQ6XFxoYWNrYXRob25lMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcLnBucG1cXEBiZXR0ZXItYXV0aCtjb3JlQDEuNC4xMF9AYl9lMGM3ZTE4NjA3OTY1YTYyMmMwMTMxM2ZmOTQ2ZjU0ZFxcbm9kZV9tb2R1bGVzXFxAYmV0dGVyLWF1dGhcXGNvcmVcXGRpc3RcXGdldC10YWJsZXMtQ01jX0Vtd3cubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvZGIvZ2V0LXRhYmxlcy50c1xuY29uc3QgZ2V0QXV0aFRhYmxlcyA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IHBsdWdpblNjaGVtYSA9IChvcHRpb25zLnBsdWdpbnMgPz8gW10pLnJlZHVjZSgoYWNjLCBwbHVnaW4pID0+IHtcblx0XHRjb25zdCBzY2hlbWEgPSBwbHVnaW4uc2NoZW1hO1xuXHRcdGlmICghc2NoZW1hKSByZXR1cm4gYWNjO1xuXHRcdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNjaGVtYSkpIGFjY1trZXldID0ge1xuXHRcdFx0ZmllbGRzOiB7XG5cdFx0XHRcdC4uLmFjY1trZXldPy5maWVsZHMsXG5cdFx0XHRcdC4uLnZhbHVlLmZpZWxkc1xuXHRcdFx0fSxcblx0XHRcdG1vZGVsTmFtZTogdmFsdWUubW9kZWxOYW1lIHx8IGtleVxuXHRcdH07XG5cdFx0cmV0dXJuIGFjYztcblx0fSwge30pO1xuXHRjb25zdCBzaG91bGRBZGRSYXRlTGltaXRUYWJsZSA9IG9wdGlvbnMucmF0ZUxpbWl0Py5zdG9yYWdlID09PSBcImRhdGFiYXNlXCI7XG5cdGNvbnN0IHJhdGVMaW1pdFRhYmxlID0geyByYXRlTGltaXQ6IHtcblx0XHRtb2RlbE5hbWU6IG9wdGlvbnMucmF0ZUxpbWl0Py5tb2RlbE5hbWUgfHwgXCJyYXRlTGltaXRcIixcblx0XHRmaWVsZHM6IHtcblx0XHRcdGtleToge1xuXHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRmaWVsZE5hbWU6IG9wdGlvbnMucmF0ZUxpbWl0Py5maWVsZHM/LmtleSB8fCBcImtleVwiXG5cdFx0XHR9LFxuXHRcdFx0Y291bnQ6IHtcblx0XHRcdFx0dHlwZTogXCJudW1iZXJcIixcblx0XHRcdFx0ZmllbGROYW1lOiBvcHRpb25zLnJhdGVMaW1pdD8uZmllbGRzPy5jb3VudCB8fCBcImNvdW50XCJcblx0XHRcdH0sXG5cdFx0XHRsYXN0UmVxdWVzdDoge1xuXHRcdFx0XHR0eXBlOiBcIm51bWJlclwiLFxuXHRcdFx0XHRiaWdpbnQ6IHRydWUsXG5cdFx0XHRcdGZpZWxkTmFtZTogb3B0aW9ucy5yYXRlTGltaXQ/LmZpZWxkcz8ubGFzdFJlcXVlc3QgfHwgXCJsYXN0UmVxdWVzdFwiXG5cdFx0XHR9XG5cdFx0fVxuXHR9IH07XG5cdGNvbnN0IHsgdXNlciwgc2Vzc2lvbiwgYWNjb3VudCwgdmVyaWZpY2F0aW9uLCAuLi5wbHVnaW5UYWJsZXMgfSA9IHBsdWdpblNjaGVtYTtcblx0Y29uc3Qgc2Vzc2lvblRhYmxlID0geyBzZXNzaW9uOiB7XG5cdFx0bW9kZWxOYW1lOiBvcHRpb25zLnNlc3Npb24/Lm1vZGVsTmFtZSB8fCBcInNlc3Npb25cIixcblx0XHRmaWVsZHM6IHtcblx0XHRcdGV4cGlyZXNBdDoge1xuXHRcdFx0XHR0eXBlOiBcImRhdGVcIixcblx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdGZpZWxkTmFtZTogb3B0aW9ucy5zZXNzaW9uPy5maWVsZHM/LmV4cGlyZXNBdCB8fCBcImV4cGlyZXNBdFwiXG5cdFx0XHR9LFxuXHRcdFx0dG9rZW46IHtcblx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdGZpZWxkTmFtZTogb3B0aW9ucy5zZXNzaW9uPy5maWVsZHM/LnRva2VuIHx8IFwidG9rZW5cIixcblx0XHRcdFx0dW5pcXVlOiB0cnVlXG5cdFx0XHR9LFxuXHRcdFx0Y3JlYXRlZEF0OiB7XG5cdFx0XHRcdHR5cGU6IFwiZGF0ZVwiLFxuXHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0ZmllbGROYW1lOiBvcHRpb25zLnNlc3Npb24/LmZpZWxkcz8uY3JlYXRlZEF0IHx8IFwiY3JlYXRlZEF0XCIsXG5cdFx0XHRcdGRlZmF1bHRWYWx1ZTogKCkgPT4gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcblx0XHRcdH0sXG5cdFx0XHR1cGRhdGVkQXQ6IHtcblx0XHRcdFx0dHlwZTogXCJkYXRlXCIsXG5cdFx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0XHRmaWVsZE5hbWU6IG9wdGlvbnMuc2Vzc2lvbj8uZmllbGRzPy51cGRhdGVkQXQgfHwgXCJ1cGRhdGVkQXRcIixcblx0XHRcdFx0b25VcGRhdGU6ICgpID0+IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG5cdFx0XHR9LFxuXHRcdFx0aXBBZGRyZXNzOiB7XG5cdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRcdFx0ZmllbGROYW1lOiBvcHRpb25zLnNlc3Npb24/LmZpZWxkcz8uaXBBZGRyZXNzIHx8IFwiaXBBZGRyZXNzXCJcblx0XHRcdH0sXG5cdFx0XHR1c2VyQWdlbnQ6IHtcblx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRmaWVsZE5hbWU6IG9wdGlvbnMuc2Vzc2lvbj8uZmllbGRzPy51c2VyQWdlbnQgfHwgXCJ1c2VyQWdlbnRcIlxuXHRcdFx0fSxcblx0XHRcdHVzZXJJZDoge1xuXHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRmaWVsZE5hbWU6IG9wdGlvbnMuc2Vzc2lvbj8uZmllbGRzPy51c2VySWQgfHwgXCJ1c2VySWRcIixcblx0XHRcdFx0cmVmZXJlbmNlczoge1xuXHRcdFx0XHRcdG1vZGVsOiBvcHRpb25zLnVzZXI/Lm1vZGVsTmFtZSB8fCBcInVzZXJcIixcblx0XHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHRcdG9uRGVsZXRlOiBcImNhc2NhZGVcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0aW5kZXg6IHRydWVcblx0XHRcdH0sXG5cdFx0XHQuLi5zZXNzaW9uPy5maWVsZHMsXG5cdFx0XHQuLi5vcHRpb25zLnNlc3Npb24/LmFkZGl0aW9uYWxGaWVsZHNcblx0XHR9LFxuXHRcdG9yZGVyOiAyXG5cdH0gfTtcblx0cmV0dXJuIHtcblx0XHR1c2VyOiB7XG5cdFx0XHRtb2RlbE5hbWU6IG9wdGlvbnMudXNlcj8ubW9kZWxOYW1lIHx8IFwidXNlclwiLFxuXHRcdFx0ZmllbGRzOiB7XG5cdFx0XHRcdG5hbWU6IHtcblx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0XHRcdGZpZWxkTmFtZTogb3B0aW9ucy51c2VyPy5maWVsZHM/Lm5hbWUgfHwgXCJuYW1lXCIsXG5cdFx0XHRcdFx0c29ydGFibGU6IHRydWVcblx0XHRcdFx0fSxcblx0XHRcdFx0ZW1haWw6IHtcblx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdHVuaXF1ZTogdHJ1ZSxcblx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHRmaWVsZE5hbWU6IG9wdGlvbnMudXNlcj8uZmllbGRzPy5lbWFpbCB8fCBcImVtYWlsXCIsXG5cdFx0XHRcdFx0c29ydGFibGU6IHRydWVcblx0XHRcdFx0fSxcblx0XHRcdFx0ZW1haWxWZXJpZmllZDoge1xuXHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdGRlZmF1bHRWYWx1ZTogZmFsc2UsXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdFx0ZmllbGROYW1lOiBvcHRpb25zLnVzZXI/LmZpZWxkcz8uZW1haWxWZXJpZmllZCB8fCBcImVtYWlsVmVyaWZpZWRcIixcblx0XHRcdFx0XHRpbnB1dDogZmFsc2Vcblx0XHRcdFx0fSxcblx0XHRcdFx0aW1hZ2U6IHtcblx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRcdFx0XHRmaWVsZE5hbWU6IG9wdGlvbnMudXNlcj8uZmllbGRzPy5pbWFnZSB8fCBcImltYWdlXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0Y3JlYXRlZEF0OiB7XG5cdFx0XHRcdFx0dHlwZTogXCJkYXRlXCIsXG5cdFx0XHRcdFx0ZGVmYXVsdFZhbHVlOiAoKSA9PiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHRmaWVsZE5hbWU6IG9wdGlvbnMudXNlcj8uZmllbGRzPy5jcmVhdGVkQXQgfHwgXCJjcmVhdGVkQXRcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHR1cGRhdGVkQXQ6IHtcblx0XHRcdFx0XHR0eXBlOiBcImRhdGVcIixcblx0XHRcdFx0XHRkZWZhdWx0VmFsdWU6ICgpID0+IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHRcdG9uVXBkYXRlOiAoKSA9PiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHRmaWVsZE5hbWU6IG9wdGlvbnMudXNlcj8uZmllbGRzPy51cGRhdGVkQXQgfHwgXCJ1cGRhdGVkQXRcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHQuLi51c2VyPy5maWVsZHMsXG5cdFx0XHRcdC4uLm9wdGlvbnMudXNlcj8uYWRkaXRpb25hbEZpZWxkc1xuXHRcdFx0fSxcblx0XHRcdG9yZGVyOiAxXG5cdFx0fSxcblx0XHQuLi4hb3B0aW9ucy5zZWNvbmRhcnlTdG9yYWdlIHx8IG9wdGlvbnMuc2Vzc2lvbj8uc3RvcmVTZXNzaW9uSW5EYXRhYmFzZSA/IHNlc3Npb25UYWJsZSA6IHt9LFxuXHRcdGFjY291bnQ6IHtcblx0XHRcdG1vZGVsTmFtZTogb3B0aW9ucy5hY2NvdW50Py5tb2RlbE5hbWUgfHwgXCJhY2NvdW50XCIsXG5cdFx0XHRmaWVsZHM6IHtcblx0XHRcdFx0YWNjb3VudElkOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHRmaWVsZE5hbWU6IG9wdGlvbnMuYWNjb3VudD8uZmllbGRzPy5hY2NvdW50SWQgfHwgXCJhY2NvdW50SWRcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRwcm92aWRlcklkOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHRmaWVsZE5hbWU6IG9wdGlvbnMuYWNjb3VudD8uZmllbGRzPy5wcm92aWRlcklkIHx8IFwicHJvdmlkZXJJZFwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHVzZXJJZDoge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0cmVmZXJlbmNlczoge1xuXHRcdFx0XHRcdFx0bW9kZWw6IG9wdGlvbnMudXNlcj8ubW9kZWxOYW1lIHx8IFwidXNlclwiLFxuXHRcdFx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0XHRcdG9uRGVsZXRlOiBcImNhc2NhZGVcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdFx0ZmllbGROYW1lOiBvcHRpb25zLmFjY291bnQ/LmZpZWxkcz8udXNlcklkIHx8IFwidXNlcklkXCIsXG5cdFx0XHRcdFx0aW5kZXg6IHRydWVcblx0XHRcdFx0fSxcblx0XHRcdFx0YWNjZXNzVG9rZW46IHtcblx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRcdFx0XHRmaWVsZE5hbWU6IG9wdGlvbnMuYWNjb3VudD8uZmllbGRzPy5hY2Nlc3NUb2tlbiB8fCBcImFjY2Vzc1Rva2VuXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0cmVmcmVzaFRva2VuOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdFx0ZmllbGROYW1lOiBvcHRpb25zLmFjY291bnQ/LmZpZWxkcz8ucmVmcmVzaFRva2VuIHx8IFwicmVmcmVzaFRva2VuXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0aWRUb2tlbjoge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdGZpZWxkTmFtZTogb3B0aW9ucy5hY2NvdW50Py5maWVsZHM/LmlkVG9rZW4gfHwgXCJpZFRva2VuXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQ6IHtcblx0XHRcdFx0XHR0eXBlOiBcImRhdGVcIixcblx0XHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdFx0ZmllbGROYW1lOiBvcHRpb25zLmFjY291bnQ/LmZpZWxkcz8uYWNjZXNzVG9rZW5FeHBpcmVzQXQgfHwgXCJhY2Nlc3NUb2tlbkV4cGlyZXNBdFwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlZnJlc2hUb2tlbkV4cGlyZXNBdDoge1xuXHRcdFx0XHRcdHR5cGU6IFwiZGF0ZVwiLFxuXHRcdFx0XHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRcdFx0XHRmaWVsZE5hbWU6IG9wdGlvbnMuYWNjb3VudD8uZmllbGRzPy5yZWZyZXNoVG9rZW5FeHBpcmVzQXQgfHwgXCJyZWZyZXNoVG9rZW5FeHBpcmVzQXRcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzY29wZToge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdGZpZWxkTmFtZTogb3B0aW9ucy5hY2NvdW50Py5maWVsZHM/LnNjb3BlIHx8IFwic2NvcGVcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRwYXNzd29yZDoge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdGZpZWxkTmFtZTogb3B0aW9ucy5hY2NvdW50Py5maWVsZHM/LnBhc3N3b3JkIHx8IFwicGFzc3dvcmRcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRjcmVhdGVkQXQ6IHtcblx0XHRcdFx0XHR0eXBlOiBcImRhdGVcIixcblx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHRmaWVsZE5hbWU6IG9wdGlvbnMuYWNjb3VudD8uZmllbGRzPy5jcmVhdGVkQXQgfHwgXCJjcmVhdGVkQXRcIixcblx0XHRcdFx0XHRkZWZhdWx0VmFsdWU6ICgpID0+IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHVwZGF0ZWRBdDoge1xuXHRcdFx0XHRcdHR5cGU6IFwiZGF0ZVwiLFxuXHRcdFx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0XHRcdGZpZWxkTmFtZTogb3B0aW9ucy5hY2NvdW50Py5maWVsZHM/LnVwZGF0ZWRBdCB8fCBcInVwZGF0ZWRBdFwiLFxuXHRcdFx0XHRcdG9uVXBkYXRlOiAoKSA9PiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuXHRcdFx0XHR9LFxuXHRcdFx0XHQuLi5hY2NvdW50Py5maWVsZHMsXG5cdFx0XHRcdC4uLm9wdGlvbnMuYWNjb3VudD8uYWRkaXRpb25hbEZpZWxkc1xuXHRcdFx0fSxcblx0XHRcdG9yZGVyOiAzXG5cdFx0fSxcblx0XHR2ZXJpZmljYXRpb246IHtcblx0XHRcdG1vZGVsTmFtZTogb3B0aW9ucy52ZXJpZmljYXRpb24/Lm1vZGVsTmFtZSB8fCBcInZlcmlmaWNhdGlvblwiLFxuXHRcdFx0ZmllbGRzOiB7XG5cdFx0XHRcdGlkZW50aWZpZXI6IHtcblx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0XHRcdGZpZWxkTmFtZTogb3B0aW9ucy52ZXJpZmljYXRpb24/LmZpZWxkcz8uaWRlbnRpZmllciB8fCBcImlkZW50aWZpZXJcIixcblx0XHRcdFx0XHRpbmRleDogdHJ1ZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR2YWx1ZToge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdFx0ZmllbGROYW1lOiBvcHRpb25zLnZlcmlmaWNhdGlvbj8uZmllbGRzPy52YWx1ZSB8fCBcInZhbHVlXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0ZXhwaXJlc0F0OiB7XG5cdFx0XHRcdFx0dHlwZTogXCJkYXRlXCIsXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdFx0ZmllbGROYW1lOiBvcHRpb25zLnZlcmlmaWNhdGlvbj8uZmllbGRzPy5leHBpcmVzQXQgfHwgXCJleHBpcmVzQXRcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRjcmVhdGVkQXQ6IHtcblx0XHRcdFx0XHR0eXBlOiBcImRhdGVcIixcblx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHRkZWZhdWx0VmFsdWU6ICgpID0+IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHRcdGZpZWxkTmFtZTogb3B0aW9ucy52ZXJpZmljYXRpb24/LmZpZWxkcz8uY3JlYXRlZEF0IHx8IFwiY3JlYXRlZEF0XCJcblx0XHRcdFx0fSxcblx0XHRcdFx0dXBkYXRlZEF0OiB7XG5cdFx0XHRcdFx0dHlwZTogXCJkYXRlXCIsXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdFx0ZGVmYXVsdFZhbHVlOiAoKSA9PiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0XHRvblVwZGF0ZTogKCkgPT4gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdFx0ZmllbGROYW1lOiBvcHRpb25zLnZlcmlmaWNhdGlvbj8uZmllbGRzPy51cGRhdGVkQXQgfHwgXCJ1cGRhdGVkQXRcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHQuLi52ZXJpZmljYXRpb24/LmZpZWxkcyxcblx0XHRcdFx0Li4ub3B0aW9ucy52ZXJpZmljYXRpb24/LmFkZGl0aW9uYWxGaWVsZHNcblx0XHRcdH0sXG5cdFx0XHRvcmRlcjogNFxuXHRcdH0sXG5cdFx0Li4ucGx1Z2luVGFibGVzLFxuXHRcdC4uLnNob3VsZEFkZFJhdGVMaW1pdFRhYmxlID8gcmF0ZUxpbWl0VGFibGUgOiB7fVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRBdXRoVGFibGVzIGFzIHQgfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/get-tables-CMc_Emww.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/index.mjs":
/*!***************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/index.mjs ***!
  \***************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);


/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/oauth2-BjWM15hm.mjs":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/oauth2-BjWM15hm.mjs ***!
  \*************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ validateAuthorizationCode),\n/* harmony export */   c: () => (/* binding */ refreshAccessToken),\n/* harmony export */   d: () => (/* binding */ getOAuth2Tokens),\n/* harmony export */   f: () => (/* binding */ clientCredentialsToken),\n/* harmony export */   i: () => (/* binding */ createAuthorizationCodeRequest),\n/* harmony export */   l: () => (/* binding */ createAuthorizationURL),\n/* harmony export */   n: () => (/* binding */ verifyAccessToken),\n/* harmony export */   o: () => (/* binding */ validateToken),\n/* harmony export */   p: () => (/* binding */ createClientCredentialsTokenRequest),\n/* harmony export */   r: () => (/* binding */ verifyJwsAccessToken),\n/* harmony export */   s: () => (/* binding */ createRefreshAccessTokenRequest),\n/* harmony export */   t: () => (/* binding */ getJwks),\n/* harmony export */   u: () => (/* binding */ generateCodeChallenge)\n/* harmony export */ });\n/* harmony import */ var _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./env-DbssmzoK.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env-DbssmzoK.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/.pnpm/@better-fetch+fetch@1.1.21/node_modules/@better-fetch/fetch/dist/index.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/jwks/local.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/util/decode_protected_header.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/jwt/unsecured.js\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/.pnpm/better-call@1.1.7_zod@4.3.4/node_modules/better-call/dist/index.mjs\");\n\n\n\n\n\n\n//#region src/oauth2/client-credentials-token.ts\nfunction createClientCredentialsTokenRequest({ options, scope, authentication, resource }) {\n\tconst body = new URLSearchParams();\n\tconst headers = {\n\t\t\"content-type\": \"application/x-www-form-urlencoded\",\n\t\taccept: \"application/json\"\n\t};\n\tbody.set(\"grant_type\", \"client_credentials\");\n\tscope && body.set(\"scope\", scope);\n\tif (resource) if (typeof resource === \"string\") body.append(\"resource\", resource);\n\telse for (const _resource of resource) body.append(\"resource\", _resource);\n\tif (authentication === \"basic\") {\n\t\tconst primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n\t\theaders[\"authorization\"] = `Basic ${_better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_1__.base64Url.encode(`${primaryClientId}:${options.clientSecret}`)}`;\n\t} else {\n\t\tconst primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n\t\tbody.set(\"client_id\", primaryClientId);\n\t\tbody.set(\"client_secret\", options.clientSecret);\n\t}\n\treturn {\n\t\tbody,\n\t\theaders\n\t};\n}\nasync function clientCredentialsToken({ options, tokenEndpoint, scope, authentication, resource }) {\n\tconst { body, headers } = createClientCredentialsTokenRequest({\n\t\toptions,\n\t\tscope,\n\t\tauthentication,\n\t\tresource\n\t});\n\tconst { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_2__.betterFetch)(tokenEndpoint, {\n\t\tmethod: \"POST\",\n\t\tbody,\n\t\theaders\n\t});\n\tif (error) throw error;\n\tconst tokens = {\n\t\taccessToken: data.access_token,\n\t\ttokenType: data.token_type,\n\t\tscopes: data.scope?.split(\" \")\n\t};\n\tif (data.expires_in) {\n\t\tconst now = /* @__PURE__ */ new Date();\n\t\ttokens.accessTokenExpiresAt = new Date(now.getTime() + data.expires_in * 1e3);\n\t}\n\treturn tokens;\n}\n\n//#endregion\n//#region src/oauth2/utils.ts\nfunction getOAuth2Tokens(data) {\n\tconst getDate = (seconds) => {\n\t\tconst now = /* @__PURE__ */ new Date();\n\t\treturn new Date(now.getTime() + seconds * 1e3);\n\t};\n\treturn {\n\t\ttokenType: data.token_type,\n\t\taccessToken: data.access_token,\n\t\trefreshToken: data.refresh_token,\n\t\taccessTokenExpiresAt: data.expires_in ? getDate(data.expires_in) : void 0,\n\t\trefreshTokenExpiresAt: data.refresh_token_expires_in ? getDate(data.refresh_token_expires_in) : void 0,\n\t\tscopes: data?.scope ? typeof data.scope === \"string\" ? data.scope.split(\" \") : data.scope : [],\n\t\tidToken: data.id_token,\n\t\traw: data\n\t};\n}\nasync function generateCodeChallenge(codeVerifier) {\n\tconst data = new TextEncoder().encode(codeVerifier);\n\tconst hash = await crypto.subtle.digest(\"SHA-256\", data);\n\treturn _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_1__.base64Url.encode(new Uint8Array(hash), { padding: false });\n}\n\n//#endregion\n//#region src/oauth2/create-authorization-url.ts\nasync function createAuthorizationURL({ id, options, authorizationEndpoint, state, codeVerifier, scopes, claims, redirectURI, duration, prompt, accessType, responseType, display, loginHint, hd, responseMode, additionalParams, scopeJoiner }) {\n\tconst url = new URL(authorizationEndpoint);\n\turl.searchParams.set(\"response_type\", responseType || \"code\");\n\tconst primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n\turl.searchParams.set(\"client_id\", primaryClientId);\n\turl.searchParams.set(\"state\", state);\n\tif (scopes) url.searchParams.set(\"scope\", scopes.join(scopeJoiner || \" \"));\n\turl.searchParams.set(\"redirect_uri\", options.redirectURI || redirectURI);\n\tduration && url.searchParams.set(\"duration\", duration);\n\tdisplay && url.searchParams.set(\"display\", display);\n\tloginHint && url.searchParams.set(\"login_hint\", loginHint);\n\tprompt && url.searchParams.set(\"prompt\", prompt);\n\thd && url.searchParams.set(\"hd\", hd);\n\taccessType && url.searchParams.set(\"access_type\", accessType);\n\tresponseMode && url.searchParams.set(\"response_mode\", responseMode);\n\tif (codeVerifier) {\n\t\tconst codeChallenge = await generateCodeChallenge(codeVerifier);\n\t\turl.searchParams.set(\"code_challenge_method\", \"S256\");\n\t\turl.searchParams.set(\"code_challenge\", codeChallenge);\n\t}\n\tif (claims) {\n\t\tconst claimsObj = claims.reduce((acc, claim) => {\n\t\t\tacc[claim] = null;\n\t\t\treturn acc;\n\t\t}, {});\n\t\turl.searchParams.set(\"claims\", JSON.stringify({ id_token: {\n\t\t\temail: null,\n\t\t\temail_verified: null,\n\t\t\t...claimsObj\n\t\t} }));\n\t}\n\tif (additionalParams) Object.entries(additionalParams).forEach(([key, value]) => {\n\t\turl.searchParams.set(key, value);\n\t});\n\treturn url;\n}\n\n//#endregion\n//#region src/oauth2/refresh-access-token.ts\nfunction createRefreshAccessTokenRequest({ refreshToken, options, authentication, extraParams, resource }) {\n\tconst body = new URLSearchParams();\n\tconst headers = {\n\t\t\"content-type\": \"application/x-www-form-urlencoded\",\n\t\taccept: \"application/json\"\n\t};\n\tbody.set(\"grant_type\", \"refresh_token\");\n\tbody.set(\"refresh_token\", refreshToken);\n\tif (authentication === \"basic\") {\n\t\tconst primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n\t\tif (primaryClientId) headers[\"authorization\"] = \"Basic \" + _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_1__.base64.encode(`${primaryClientId}:${options.clientSecret ?? \"\"}`);\n\t\telse headers[\"authorization\"] = \"Basic \" + _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_1__.base64.encode(`:${options.clientSecret ?? \"\"}`);\n\t} else {\n\t\tconst primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n\t\tbody.set(\"client_id\", primaryClientId);\n\t\tif (options.clientSecret) body.set(\"client_secret\", options.clientSecret);\n\t}\n\tif (resource) if (typeof resource === \"string\") body.append(\"resource\", resource);\n\telse for (const _resource of resource) body.append(\"resource\", _resource);\n\tif (extraParams) for (const [key, value] of Object.entries(extraParams)) body.set(key, value);\n\treturn {\n\t\tbody,\n\t\theaders\n\t};\n}\nasync function refreshAccessToken({ refreshToken, options, tokenEndpoint, authentication, extraParams }) {\n\tconst { body, headers } = createRefreshAccessTokenRequest({\n\t\trefreshToken,\n\t\toptions,\n\t\tauthentication,\n\t\textraParams\n\t});\n\tconst { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_2__.betterFetch)(tokenEndpoint, {\n\t\tmethod: \"POST\",\n\t\tbody,\n\t\theaders\n\t});\n\tif (error) throw error;\n\tconst tokens = {\n\t\taccessToken: data.access_token,\n\t\trefreshToken: data.refresh_token,\n\t\ttokenType: data.token_type,\n\t\tscopes: data.scope?.split(\" \"),\n\t\tidToken: data.id_token\n\t};\n\tif (data.expires_in) {\n\t\tconst now = /* @__PURE__ */ new Date();\n\t\ttokens.accessTokenExpiresAt = new Date(now.getTime() + data.expires_in * 1e3);\n\t}\n\treturn tokens;\n}\n\n//#endregion\n//#region src/oauth2/validate-authorization-code.ts\nfunction createAuthorizationCodeRequest({ code, codeVerifier, redirectURI, options, authentication, deviceId, headers, additionalParams = {}, resource }) {\n\tconst body = new URLSearchParams();\n\tconst requestHeaders = {\n\t\t\"content-type\": \"application/x-www-form-urlencoded\",\n\t\taccept: \"application/json\",\n\t\t...headers\n\t};\n\tbody.set(\"grant_type\", \"authorization_code\");\n\tbody.set(\"code\", code);\n\tcodeVerifier && body.set(\"code_verifier\", codeVerifier);\n\toptions.clientKey && body.set(\"client_key\", options.clientKey);\n\tdeviceId && body.set(\"device_id\", deviceId);\n\tbody.set(\"redirect_uri\", options.redirectURI || redirectURI);\n\tif (resource) if (typeof resource === \"string\") body.append(\"resource\", resource);\n\telse for (const _resource of resource) body.append(\"resource\", _resource);\n\tif (authentication === \"basic\") {\n\t\tconst primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n\t\trequestHeaders[\"authorization\"] = `Basic ${_better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_1__.base64.encode(`${primaryClientId}:${options.clientSecret ?? \"\"}`)}`;\n\t} else {\n\t\tconst primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n\t\tbody.set(\"client_id\", primaryClientId);\n\t\tif (options.clientSecret) body.set(\"client_secret\", options.clientSecret);\n\t}\n\tfor (const [key, value] of Object.entries(additionalParams)) if (!body.has(key)) body.append(key, value);\n\treturn {\n\t\tbody,\n\t\theaders: requestHeaders\n\t};\n}\nasync function validateAuthorizationCode({ code, codeVerifier, redirectURI, options, tokenEndpoint, authentication, deviceId, headers, additionalParams = {}, resource }) {\n\tconst { body, headers: requestHeaders } = createAuthorizationCodeRequest({\n\t\tcode,\n\t\tcodeVerifier,\n\t\tredirectURI,\n\t\toptions,\n\t\tauthentication,\n\t\tdeviceId,\n\t\theaders,\n\t\tadditionalParams,\n\t\tresource\n\t});\n\tconst { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_2__.betterFetch)(tokenEndpoint, {\n\t\tmethod: \"POST\",\n\t\tbody,\n\t\theaders: requestHeaders\n\t});\n\tif (error) throw error;\n\treturn getOAuth2Tokens(data);\n}\nasync function validateToken(token, jwksEndpoint) {\n\tconst { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_2__.betterFetch)(jwksEndpoint, {\n\t\tmethod: \"GET\",\n\t\theaders: { accept: \"application/json\" }\n\t});\n\tif (error) throw error;\n\tconst keys = data[\"keys\"];\n\tconst header = JSON.parse(atob(token.split(\".\")[0]));\n\tconst key = keys.find((key$1) => key$1.kid === header.kid);\n\tif (!key) throw new Error(\"Key not found\");\n\treturn await (0,jose__WEBPACK_IMPORTED_MODULE_4__.jwtVerify)(token, key);\n}\n\n//#endregion\n//#region src/oauth2/verify.ts\n/** Last fetched jwks used locally in getJwks @internal */\nlet jwks;\n/**\n* Performs local verification of an access token for your APIs.\n*\n* Can also be configured for remote verification.\n*/\nasync function verifyJwsAccessToken(token, opts) {\n\ttry {\n\t\tconst jwt = await (0,jose__WEBPACK_IMPORTED_MODULE_4__.jwtVerify)(token, (0,jose__WEBPACK_IMPORTED_MODULE_5__.createLocalJWKSet)(await getJwks(token, opts)), opts.verifyOptions);\n\t\tif (jwt.payload.azp) jwt.payload.client_id = jwt.payload.azp;\n\t\treturn jwt.payload;\n\t} catch (error) {\n\t\tif (error instanceof Error) throw error;\n\t\tthrow new Error(error);\n\t}\n}\nasync function getJwks(token, opts) {\n\tlet jwtHeaders;\n\ttry {\n\t\tjwtHeaders = (0,jose__WEBPACK_IMPORTED_MODULE_6__.decodeProtectedHeader)(token);\n\t} catch (error) {\n\t\tif (error instanceof Error) throw error;\n\t\tthrow new Error(error);\n\t}\n\tif (!jwtHeaders.kid) throw new Error(\"Missing jwt kid\");\n\tif (!jwks || !jwks.keys.find((jwk) => jwk.kid === jwtHeaders.kid)) {\n\t\tjwks = typeof opts.jwksFetch === \"string\" ? await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_2__.betterFetch)(opts.jwksFetch, { headers: { Accept: \"application/json\" } }).then(async (res) => {\n\t\t\tif (res.error) throw new Error(`Jwks failed: ${res.error.message ?? res.error.statusText}`);\n\t\t\treturn res.data;\n\t\t}) : await opts.jwksFetch();\n\t\tif (!jwks) throw new Error(\"No jwks found\");\n\t}\n\treturn jwks;\n}\n/**\n* Performs local verification of an access token for your API.\n*\n* Can also be configured for remote verification.\n*/\nasync function verifyAccessToken(token, opts) {\n\tlet payload;\n\tif (opts.jwksUrl && !opts?.remoteVerify?.force) try {\n\t\tpayload = await verifyJwsAccessToken(token, {\n\t\t\tjwksFetch: opts.jwksUrl,\n\t\t\tverifyOptions: opts.verifyOptions\n\t\t});\n\t} catch (error) {\n\t\tif (error instanceof Error) if (error.name === \"TypeError\" || error.name === \"JWSInvalid\") {} else if (error.name === \"JWTExpired\") throw new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"UNAUTHORIZED\", { message: \"token expired\" });\n\t\telse if (error.name === \"JWTInvalid\") throw new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"UNAUTHORIZED\", { message: \"token invalid\" });\n\t\telse throw error;\n\t\telse throw new Error(error);\n\t}\n\tif (opts?.remoteVerify) {\n\t\tconst { data: introspect, error: introspectError } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_2__.betterFetch)(opts.remoteVerify.introspectUrl, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\tAccept: \"application/json\",\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\"\n\t\t\t},\n\t\t\tbody: new URLSearchParams({\n\t\t\t\tclient_id: opts.remoteVerify.clientId,\n\t\t\t\tclient_secret: opts.remoteVerify.clientSecret,\n\t\t\t\ttoken,\n\t\t\t\ttoken_type_hint: \"access_token\"\n\t\t\t}).toString()\n\t\t});\n\t\tif (introspectError) _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(`Introspection failed: ${introspectError.message ?? introspectError.statusText}`);\n\t\tif (!introspect) throw new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"INTERNAL_SERVER_ERROR\", { message: \"introspection failed\" });\n\t\tif (!introspect.active) throw new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"UNAUTHORIZED\", { message: \"token inactive\" });\n\t\ttry {\n\t\t\tconst unsecuredJwt = new jose__WEBPACK_IMPORTED_MODULE_7__.UnsecuredJWT(introspect).encode();\n\t\t\tconst { audience: _audience, ...verifyOptions } = opts.verifyOptions;\n\t\t\tpayload = (introspect.aud ? jose__WEBPACK_IMPORTED_MODULE_7__.UnsecuredJWT.decode(unsecuredJwt, opts.verifyOptions) : jose__WEBPACK_IMPORTED_MODULE_7__.UnsecuredJWT.decode(unsecuredJwt, verifyOptions)).payload;\n\t\t} catch (error) {\n\t\t\tthrow new Error(error);\n\t\t}\n\t}\n\tif (!payload) throw new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"UNAUTHORIZED\", { message: `no token payload` });\n\tif (opts.scopes) {\n\t\tconst validScopes = new Set(payload.scope?.split(\" \"));\n\t\tfor (const sc of opts.scopes) if (!validScopes.has(sc)) throw new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: `invalid scope ${sc}` });\n\t}\n\treturn payload;\n}\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L29hdXRoMi1CaldNMTVobS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWlEO0FBQ2E7QUFDWjtBQUN1QztBQUNsRDs7QUFFdkM7QUFDQSwrQ0FBK0MsMENBQTBDO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsZ0VBQVMsV0FBVyxnQkFBZ0IsR0FBRyxxQkFBcUIsR0FBRztBQUNyRyxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLHlEQUF5RDtBQUNqRyxTQUFTLGdCQUFnQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixTQUFTLGNBQWMsUUFBUSxnRUFBVztBQUMxQztBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsZ0VBQVMsZ0NBQWdDLGdCQUFnQjtBQUNqRTs7QUFFQTtBQUNBO0FBQ0Esd0NBQXdDLHVNQUF1TTtBQUMvTztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxJQUFJO0FB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MEJBQTBCLEdBQUcsR0FBRztBQUM1SDtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIkQ6XFxoYWNrYXRob25lMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcLnBucG1cXEBiZXR0ZXItYXV0aCtjb3JlQDEuNC4xMF9AYl9lMGM3ZTE4NjA3OTY1YTYyMmMwMTMxM2ZmOTQ2ZjU0ZFxcbm9kZV9tb2R1bGVzXFxAYmV0dGVyLWF1dGhcXGNvcmVcXGRpc3RcXG9hdXRoMi1CaldNMTVobS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaSBhcyBsb2dnZXIgfSBmcm9tIFwiLi9lbnYtRGJzc216b0subWpzXCI7XG5pbXBvcnQgeyBiYXNlNjQsIGJhc2U2NFVybCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvdXRpbHMvYmFzZTY0XCI7XG5pbXBvcnQgeyBiZXR0ZXJGZXRjaCB9IGZyb20gXCJAYmV0dGVyLWZldGNoL2ZldGNoXCI7XG5pbXBvcnQgeyBVbnNlY3VyZWRKV1QsIGNyZWF0ZUxvY2FsSldLU2V0LCBkZWNvZGVQcm90ZWN0ZWRIZWFkZXIsIGp3dFZlcmlmeSB9IGZyb20gXCJqb3NlXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuXG4vLyNyZWdpb24gc3JjL29hdXRoMi9jbGllbnQtY3JlZGVudGlhbHMtdG9rZW4udHNcbmZ1bmN0aW9uIGNyZWF0ZUNsaWVudENyZWRlbnRpYWxzVG9rZW5SZXF1ZXN0KHsgb3B0aW9ucywgc2NvcGUsIGF1dGhlbnRpY2F0aW9uLCByZXNvdXJjZSB9KSB7XG5cdGNvbnN0IGJvZHkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG5cdGNvbnN0IGhlYWRlcnMgPSB7XG5cdFx0XCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIixcblx0XHRhY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiXG5cdH07XG5cdGJvZHkuc2V0KFwiZ3JhbnRfdHlwZVwiLCBcImNsaWVudF9jcmVkZW50aWFsc1wiKTtcblx0c2NvcGUgJiYgYm9keS5zZXQoXCJzY29wZVwiLCBzY29wZSk7XG5cdGlmIChyZXNvdXJjZSkgaWYgKHR5cGVvZiByZXNvdXJjZSA9PT0gXCJzdHJpbmdcIikgYm9keS5hcHBlbmQoXCJyZXNvdXJjZVwiLCByZXNvdXJjZSk7XG5cdGVsc2UgZm9yIChjb25zdCBfcmVzb3VyY2Ugb2YgcmVzb3VyY2UpIGJvZHkuYXBwZW5kKFwicmVzb3VyY2VcIiwgX3Jlc291cmNlKTtcblx0aWYgKGF1dGhlbnRpY2F0aW9uID09PSBcImJhc2ljXCIpIHtcblx0XHRjb25zdCBwcmltYXJ5Q2xpZW50SWQgPSBBcnJheS5pc0FycmF5KG9wdGlvbnMuY2xpZW50SWQpID8gb3B0aW9ucy5jbGllbnRJZFswXSA6IG9wdGlvbnMuY2xpZW50SWQ7XG5cdFx0aGVhZGVyc1tcImF1dGhvcml6YXRpb25cIl0gPSBgQmFzaWMgJHtiYXNlNjRVcmwuZW5jb2RlKGAke3ByaW1hcnlDbGllbnRJZH06JHtvcHRpb25zLmNsaWVudFNlY3JldH1gKX1gO1xuXHR9IGVsc2Uge1xuXHRcdGNvbnN0IHByaW1hcnlDbGllbnRJZCA9IEFycmF5LmlzQXJyYXkob3B0aW9ucy5jbGllbnRJZCkgPyBvcHRpb25zLmNsaWVudElkWzBdIDogb3B0aW9ucy5jbGllbnRJZDtcblx0XHRib2R5LnNldChcImNsaWVudF9pZFwiLCBwcmltYXJ5Q2xpZW50SWQpO1xuXHRcdGJvZHkuc2V0KFwiY2xpZW50X3NlY3JldFwiLCBvcHRpb25zLmNsaWVudFNlY3JldCk7XG5cdH1cblx0cmV0dXJuIHtcblx0XHRib2R5LFxuXHRcdGhlYWRlcnNcblx0fTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNsaWVudENyZWRlbnRpYWxzVG9rZW4oeyBvcHRpb25zLCB0b2tlbkVuZHBvaW50LCBzY29wZSwgYXV0aGVudGljYXRpb24sIHJlc291cmNlIH0pIHtcblx0Y29uc3QgeyBib2R5LCBoZWFkZXJzIH0gPSBjcmVhdGVDbGllbnRDcmVkZW50aWFsc1Rva2VuUmVxdWVzdCh7XG5cdFx0b3B0aW9ucyxcblx0XHRzY29wZSxcblx0XHRhdXRoZW50aWNhdGlvbixcblx0XHRyZXNvdXJjZVxuXHR9KTtcblx0Y29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2godG9rZW5FbmRwb2ludCwge1xuXHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0Ym9keSxcblx0XHRoZWFkZXJzXG5cdH0pO1xuXHRpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuXHRjb25zdCB0b2tlbnMgPSB7XG5cdFx0YWNjZXNzVG9rZW46IGRhdGEuYWNjZXNzX3Rva2VuLFxuXHRcdHRva2VuVHlwZTogZGF0YS50b2tlbl90eXBlLFxuXHRcdHNjb3BlczogZGF0YS5zY29wZT8uc3BsaXQoXCIgXCIpXG5cdH07XG5cdGlmIChkYXRhLmV4cGlyZXNfaW4pIHtcblx0XHRjb25zdCBub3cgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcblx0XHR0b2tlbnMuYWNjZXNzVG9rZW5FeHBpcmVzQXQgPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpICsgZGF0YS5leHBpcmVzX2luICogMWUzKTtcblx0fVxuXHRyZXR1cm4gdG9rZW5zO1xufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvb2F1dGgyL3V0aWxzLnRzXG5mdW5jdGlvbiBnZXRPQXV0aDJUb2tlbnMoZGF0YSkge1xuXHRjb25zdCBnZXREYXRlID0gKHNlY29uZHMpID0+IHtcblx0XHRjb25zdCBub3cgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcblx0XHRyZXR1cm4gbmV3IERhdGUobm93LmdldFRpbWUoKSArIHNlY29uZHMgKiAxZTMpO1xuXHR9O1xuXHRyZXR1cm4ge1xuXHRcdHRva2VuVHlwZTogZGF0YS50b2tlbl90eXBlLFxuXHRcdGFjY2Vzc1Rva2VuOiBkYXRhLmFjY2Vzc190b2tlbixcblx0XHRyZWZyZXNoVG9rZW46IGRhdGEucmVmcmVzaF90b2tlbixcblx0XHRhY2Nlc3NUb2tlbkV4cGlyZXNBdDogZGF0YS5leHBpcmVzX2luID8gZ2V0RGF0ZShkYXRhLmV4cGlyZXNfaW4pIDogdm9pZCAwLFxuXHRcdHJlZnJlc2hUb2tlbkV4cGlyZXNBdDogZGF0YS5yZWZyZXNoX3Rva2VuX2V4cGlyZXNfaW4gPyBnZXREYXRlKGRhdGEucmVmcmVzaF90b2tlbl9leHBpcmVzX2luKSA6IHZvaWQgMCxcblx0XHRzY29wZXM6IGRhdGE/LnNjb3BlID8gdHlwZW9mIGRhdGEuc2NvcGUgPT09IFwic3RyaW5nXCIgPyBkYXRhLnNjb3BlLnNwbGl0KFwiIFwiKSA6IGRhdGEuc2NvcGUgOiBbXSxcblx0XHRpZFRva2VuOiBkYXRhLmlkX3Rva2VuLFxuXHRcdHJhdzogZGF0YVxuXHR9O1xufVxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVDb2RlQ2hhbGxlbmdlKGNvZGVWZXJpZmllcikge1xuXHRjb25zdCBkYXRhID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGNvZGVWZXJpZmllcik7XG5cdGNvbnN0IGhhc2ggPSBhd2FpdCBjcnlwdG8uc3VidGxlLmRpZ2VzdChcIlNIQS0yNTZcIiwgZGF0YSk7XG5cdHJldHVybiBiYXNlNjRVcmwuZW5jb2RlKG5ldyBVaW50OEFycmF5KGhhc2gpLCB7IHBhZGRpbmc6IGZhbHNlIH0pO1xufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvb2F1dGgyL2NyZWF0ZS1hdXRob3JpemF0aW9uLXVybC50c1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IGlkLCBvcHRpb25zLCBhdXRob3JpemF0aW9uRW5kcG9pbnQsIHN0YXRlLCBjb2RlVmVyaWZpZXIsIHNjb3BlcywgY2xhaW1zLCByZWRpcmVjdFVSSSwgZHVyYXRpb24sIHByb21wdCwgYWNjZXNzVHlwZSwgcmVzcG9uc2VUeXBlLCBkaXNwbGF5LCBsb2dpbkhpbnQsIGhkLCByZXNwb25zZU1vZGUsIGFkZGl0aW9uYWxQYXJhbXMsIHNjb3BlSm9pbmVyIH0pIHtcblx0Y29uc3QgdXJsID0gbmV3IFVSTChhdXRob3JpemF0aW9uRW5kcG9pbnQpO1xuXHR1cmwuc2VhcmNoUGFyYW1zLnNldChcInJlc3BvbnNlX3R5cGVcIiwgcmVzcG9uc2VUeXBlIHx8IFwiY29kZVwiKTtcblx0Y29uc3QgcHJpbWFyeUNsaWVudElkID0gQXJyYXkuaXNBcnJheShvcHRpb25zLmNsaWVudElkKSA/IG9wdGlvbnMuY2xpZW50SWRbMF0gOiBvcHRpb25zLmNsaWVudElkO1xuXHR1cmwuc2VhcmNoUGFyYW1zLnNldChcImNsaWVudF9pZFwiLCBwcmltYXJ5Q2xpZW50SWQpO1xuXHR1cmwuc2VhcmNoUGFyYW1zLnNldChcInN0YXRlXCIsIHN0YXRlKTtcblx0aWYgKHNjb3BlcykgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJzY29wZVwiLCBzY29wZXMuam9pbihzY29wZUpvaW5lciB8fCBcIiBcIikpO1xuXHR1cmwuc2VhcmNoUGFyYW1zLnNldChcInJlZGlyZWN0X3VyaVwiLCBvcHRpb25zLnJlZGlyZWN0VVJJIHx8IHJlZGlyZWN0VVJJKTtcblx0ZHVyYXRpb24gJiYgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJkdXJhdGlvblwiLCBkdXJhdGlvbik7XG5cdGRpc3BsYXkgJiYgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJkaXNwbGF5XCIsIGRpc3BsYXkpO1xuXHRsb2dpbkhpbnQgJiYgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJsb2dpbl9oaW50XCIsIGxvZ2luSGludCk7XG5cdHByb21wdCAmJiB1cmwuc2VhcmNoUGFyYW1zLnNldChcInByb21wdFwiLCBwcm9tcHQpO1xuXHRoZCAmJiB1cmwuc2VhcmNoUGFyYW1zLnNldChcImhkXCIsIGhkKTtcblx0YWNjZXNzVHlwZSAmJiB1cmwuc2VhcmNoUGFyYW1zLnNldChcImFjY2Vzc190eXBlXCIsIGFjY2Vzc1R5cGUpO1xuXHRyZXNwb25zZU1vZGUgJiYgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJyZXNwb25zZV9tb2RlXCIsIHJlc3BvbnNlTW9kZSk7XG5cdGlmIChjb2RlVmVyaWZpZXIpIHtcblx0XHRjb25zdCBjb2RlQ2hhbGxlbmdlID0gYXdhaXQgZ2VuZXJhdGVDb2RlQ2hhbGxlbmdlKGNvZGVWZXJpZmllcik7XG5cdFx0dXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJjb2RlX2NoYWxsZW5nZV9tZXRob2RcIiwgXCJTMjU2XCIpO1xuXHRcdHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiY29kZV9jaGFsbGVuZ2VcIiwgY29kZUNoYWxsZW5nZSk7XG5cdH1cblx0aWYgKGNsYWltcykge1xuXHRcdGNvbnN0IGNsYWltc09iaiA9IGNsYWltcy5yZWR1Y2UoKGFjYywgY2xhaW0pID0+IHtcblx0XHRcdGFjY1tjbGFpbV0gPSBudWxsO1xuXHRcdFx0cmV0dXJuIGFjYztcblx0XHR9LCB7fSk7XG5cdFx0dXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJjbGFpbXNcIiwgSlNPTi5zdHJpbmdpZnkoeyBpZF90b2tlbjoge1xuXHRcdFx0ZW1haWw6IG51bGwsXG5cdFx0XHRlbWFpbF92ZXJpZmllZDogbnVsbCxcblx0XHRcdC4uLmNsYWltc09ialxuXHRcdH0gfSkpO1xuXHR9XG5cdGlmIChhZGRpdGlvbmFsUGFyYW1zKSBPYmplY3QuZW50cmllcyhhZGRpdGlvbmFsUGFyYW1zKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcblx0XHR1cmwuc2VhcmNoUGFyYW1zLnNldChrZXksIHZhbHVlKTtcblx0fSk7XG5cdHJldHVybiB1cmw7XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9vYXV0aDIvcmVmcmVzaC1hY2Nlc3MtdG9rZW4udHNcbmZ1bmN0aW9uIGNyZWF0ZVJlZnJlc2hBY2Nlc3NUb2tlblJlcXVlc3QoeyByZWZyZXNoVG9rZW4sIG9wdGlvbnMsIGF1dGhlbnRpY2F0aW9uLCBleHRyYVBhcmFtcywgcmVzb3VyY2UgfSkge1xuXHRjb25zdCBib2R5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuXHRjb25zdCBoZWFkZXJzID0ge1xuXHRcdFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsXG5cdFx0YWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIlxuXHR9O1xuXHRib2R5LnNldChcImdyYW50X3R5cGVcIiwgXCJyZWZyZXNoX3Rva2VuXCIpO1xuXHRib2R5LnNldChcInJlZnJlc2hfdG9rZW5cIiwgcmVmcmVzaFRva2VuKTtcblx0aWYgKGF1dGhlbnRpY2F0aW9uID09PSBcImJhc2ljXCIpIHtcblx0XHRjb25zdCBwcmltYXJ5Q2xpZW50SWQgPSBBcnJheS5pc0FycmF5KG9wdGlvbnMuY2xpZW50SWQpID8gb3B0aW9ucy5jbGllbnRJZFswXSA6IG9wdGlvbnMuY2xpZW50SWQ7XG5cdFx0aWYgKHByaW1hcnlDbGllbnRJZCkgaGVhZGVyc1tcImF1dGhvcml6YXRpb25cIl0gPSBcIkJhc2ljIFwiICsgYmFzZTY0LmVuY29kZShgJHtwcmltYXJ5Q2xpZW50SWR9OiR7b3B0aW9ucy5jbGllbnRTZWNyZXQgPz8gXCJcIn1gKTtcblx0XHRlbHNlIGhlYWRlcnNbXCJhdXRob3JpemF0aW9uXCJdID0gXCJCYXNpYyBcIiArIGJhc2U2NC5lbmNvZGUoYDoke29wdGlvbnMuY2xpZW50U2VjcmV0ID8/IFwiXCJ9YCk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc3QgcHJpbWFyeUNsaWVudElkID0gQXJyYXkuaXNBcnJheShvcHRpb25zLmNsaWVudElkKSA/IG9wdGlvbnMuY2xpZW50SWRbMF0gOiBvcHRpb25zLmNsaWVudElkO1xuXHRcdGJvZHkuc2V0KFwiY2xpZW50X2lkXCIsIHByaW1hcnlDbGllbnRJZCk7XG5cdFx0aWYgKG9wdGlvbnMuY2xpZW50U2VjcmV0KSBib2R5LnNldChcImNsaWVudF9zZWNyZXRcIiwgb3B0aW9ucy5jbGllbnRTZWNyZXQpO1xuXHR9XG5cdGlmIChyZXNvdXJjZSkgaWYgKHR5cGVvZiByZXNvdXJjZSA9PT0gXCJzdHJpbmdcIikgYm9keS5hcHBlbmQoXCJyZXNvdXJjZVwiLCByZXNvdXJjZSk7XG5cdGVsc2UgZm9yIChjb25zdCBfcmVzb3VyY2Ugb2YgcmVzb3VyY2UpIGJvZHkuYXBwZW5kKFwicmVzb3VyY2VcIiwgX3Jlc291cmNlKTtcblx0aWYgKGV4dHJhUGFyYW1zKSBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhleHRyYVBhcmFtcykpIGJvZHkuc2V0KGtleSwgdmFsdWUpO1xuXHRyZXR1cm4ge1xuXHRcdGJvZHksXG5cdFx0aGVhZGVyc1xuXHR9O1xufVxuYXN5bmMgZnVuY3Rpb24gcmVmcmVzaEFjY2Vzc1Rva2VuKHsgcmVmcmVzaFRva2VuLCBvcHRpb25zLCB0b2tlbkVuZHBvaW50LCBhdXRoZW50aWNhdGlvbiwgZXh0cmFQYXJhbXMgfSkge1xuXHRjb25zdCB7IGJvZHksIGhlYWRlcnMgfSA9IGNyZWF0ZVJlZnJlc2hBY2Nlc3NUb2tlblJlcXVlc3Qoe1xuXHRcdHJlZnJlc2hUb2tlbixcblx0XHRvcHRpb25zLFxuXHRcdGF1dGhlbnRpY2F0aW9uLFxuXHRcdGV4dHJhUGFyYW1zXG5cdH0pO1xuXHRjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaCh0b2tlbkVuZHBvaW50LCB7XG5cdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRib2R5LFxuXHRcdGhlYWRlcnNcblx0fSk7XG5cdGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG5cdGNvbnN0IHRva2VucyA9IHtcblx0XHRhY2Nlc3NUb2tlbjogZGF0YS5hY2Nlc3NfdG9rZW4sXG5cdFx0cmVmcmVzaFRva2VuOiBkYXRhLnJlZnJlc2hfdG9rZW4sXG5cdFx0dG9rZW5UeXBlOiBkYXRhLnRva2VuX3R5cGUsXG5cdFx0c2NvcGVzOiBkYXRhLnNjb3BlPy5zcGxpdChcIiBcIiksXG5cdFx0aWRUb2tlbjogZGF0YS5pZF90b2tlblxuXHR9O1xuXHRpZiAoZGF0YS5leHBpcmVzX2luKSB7XG5cdFx0Y29uc3Qgbm93ID0gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG5cdFx0dG9rZW5zLmFjY2Vzc1Rva2VuRXhwaXJlc0F0ID0gbmV3IERhdGUobm93LmdldFRpbWUoKSArIGRhdGEuZXhwaXJlc19pbiAqIDFlMyk7XG5cdH1cblx0cmV0dXJuIHRva2Vucztcbn1cblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL29hdXRoMi92YWxpZGF0ZS1hdXRob3JpemF0aW9uLWNvZGUudHNcbmZ1bmN0aW9uIGNyZWF0ZUF1dGhvcml6YXRpb25Db2RlUmVxdWVzdCh7IGNvZGUsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkksIG9wdGlvbnMsIGF1dGhlbnRpY2F0aW9uLCBkZXZpY2VJZCwgaGVhZGVycywgYWRkaXRpb25hbFBhcmFtcyA9IHt9LCByZXNvdXJjZSB9KSB7XG5cdGNvbnN0IGJvZHkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG5cdGNvbnN0IHJlcXVlc3RIZWFkZXJzID0ge1xuXHRcdFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsXG5cdFx0YWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcblx0XHQuLi5oZWFkZXJzXG5cdH07XG5cdGJvZHkuc2V0KFwiZ3JhbnRfdHlwZVwiLCBcImF1dGhvcml6YXRpb25fY29kZVwiKTtcblx0Ym9keS5zZXQoXCJjb2RlXCIsIGNvZGUpO1xuXHRjb2RlVmVyaWZpZXIgJiYgYm9keS5zZXQoXCJjb2RlX3ZlcmlmaWVyXCIsIGNvZGVWZXJpZmllcik7XG5cdG9wdGlvbnMuY2xpZW50S2V5ICYmIGJvZHkuc2V0KFwiY2xpZW50X2tleVwiLCBvcHRpb25zLmNsaWVudEtleSk7XG5cdGRldmljZUlkICYmIGJvZHkuc2V0KFwiZGV2aWNlX2lkXCIsIGRldmljZUlkKTtcblx0Ym9keS5zZXQoXCJyZWRpcmVjdF91cmlcIiwgb3B0aW9ucy5yZWRpcmVjdFVSSSB8fCByZWRpcmVjdFVSSSk7XG5cdGlmIChyZXNvdXJjZSkgaWYgKHR5cGVvZiByZXNvdXJjZSA9PT0gXCJzdHJpbmdcIikgYm9keS5hcHBlbmQoXCJyZXNvdXJjZVwiLCByZXNvdXJjZSk7XG5cdGVsc2UgZm9yIChjb25zdCBfcmVzb3VyY2Ugb2YgcmVzb3VyY2UpIGJvZHkuYXBwZW5kKFwicmVzb3VyY2VcIiwgX3Jlc291cmNlKTtcblx0aWYgKGF1dGhlbnRpY2F0aW9uID09PSBcImJhc2ljXCIpIHtcblx0XHRjb25zdCBwcmltYXJ5Q2xpZW50SWQgPSBBcnJheS5pc0FycmF5KG9wdGlvbnMuY2xpZW50SWQpID8gb3B0aW9ucy5jbGllbnRJZFswXSA6IG9wdGlvbnMuY2xpZW50SWQ7XG5cdFx0cmVxdWVzdEhlYWRlcnNbXCJhdXRob3JpemF0aW9uXCJdID0gYEJhc2ljICR7YmFzZTY0LmVuY29kZShgJHtwcmltYXJ5Q2xpZW50SWR9OiR7b3B0aW9ucy5jbGllbnRTZWNyZXQgPz8gXCJcIn1gKX1gO1xuXHR9IGVsc2Uge1xuXHRcdGNvbnN0IHByaW1hcnlDbGllbnRJZCA9IEFycmF5LmlzQXJyYXkob3B0aW9ucy5jbGllbnRJZCkgPyBvcHRpb25zLmNsaWVudElkWzBdIDogb3B0aW9ucy5jbGllbnRJZDtcblx0XHRib2R5LnNldChcImNsaWVudF9pZFwiLCBwcmltYXJ5Q2xpZW50SWQpO1xuXHRcdGlmIChvcHRpb25zLmNsaWVudFNlY3JldCkgYm9keS5zZXQoXCJjbGllbnRfc2VjcmV0XCIsIG9wdGlvbnMuY2xpZW50U2VjcmV0KTtcblx0fVxuXHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhhZGRpdGlvbmFsUGFyYW1zKSkgaWYgKCFib2R5LmhhcyhrZXkpKSBib2R5LmFwcGVuZChrZXksIHZhbHVlKTtcblx0cmV0dXJuIHtcblx0XHRib2R5LFxuXHRcdGhlYWRlcnM6IHJlcXVlc3RIZWFkZXJzXG5cdH07XG59XG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHsgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSwgb3B0aW9ucywgdG9rZW5FbmRwb2ludCwgYXV0aGVudGljYXRpb24sIGRldmljZUlkLCBoZWFkZXJzLCBhZGRpdGlvbmFsUGFyYW1zID0ge30sIHJlc291cmNlIH0pIHtcblx0Y29uc3QgeyBib2R5LCBoZWFkZXJzOiByZXF1ZXN0SGVhZGVycyB9ID0gY3JlYXRlQXV0aG9yaXphdGlvbkNvZGVSZXF1ZXN0KHtcblx0XHRjb2RlLFxuXHRcdGNvZGVWZXJpZmllcixcblx0XHRyZWRpcmVjdFVSSSxcblx0XHRvcHRpb25zLFxuXHRcdGF1dGhlbnRpY2F0aW9uLFxuXHRcdGRldmljZUlkLFxuXHRcdGhlYWRlcnMsXG5cdFx0YWRkaXRpb25hbFBhcmFtcyxcblx0XHRyZXNvdXJjZVxuXHR9KTtcblx0Y29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2godG9rZW5FbmRwb2ludCwge1xuXHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0Ym9keSxcblx0XHRoZWFkZXJzOiByZXF1ZXN0SGVhZGVyc1xuXHR9KTtcblx0aWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcblx0cmV0dXJuIGdldE9BdXRoMlRva2VucyhkYXRhKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlVG9rZW4odG9rZW4sIGp3a3NFbmRwb2ludCkge1xuXHRjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChqd2tzRW5kcG9pbnQsIHtcblx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0aGVhZGVyczogeyBhY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiIH1cblx0fSk7XG5cdGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG5cdGNvbnN0IGtleXMgPSBkYXRhW1wia2V5c1wiXTtcblx0Y29uc3QgaGVhZGVyID0gSlNPTi5wYXJzZShhdG9iKHRva2VuLnNwbGl0KFwiLlwiKVswXSkpO1xuXHRjb25zdCBrZXkgPSBrZXlzLmZpbmQoKGtleSQxKSA9PiBrZXkkMS5raWQgPT09IGhlYWRlci5raWQpO1xuXHRpZiAoIWtleSkgdGhyb3cgbmV3IEVycm9yKFwiS2V5IG5vdCBmb3VuZFwiKTtcblx0cmV0dXJuIGF3YWl0IGp3dFZlcmlmeSh0b2tlbiwga2V5KTtcbn1cblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL29hdXRoMi92ZXJpZnkudHNcbi8qKiBMYXN0IGZldGNoZWQgandrcyB1c2VkIGxvY2FsbHkgaW4gZ2V0SndrcyBAaW50ZXJuYWwgKi9cbmxldCBqd2tzO1xuLyoqXG4qIFBlcmZvcm1zIGxvY2FsIHZlcmlmaWNhdGlvbiBvZiBhbiBhY2Nlc3MgdG9rZW4gZm9yIHlvdXIgQVBJcy5cbipcbiogQ2FuIGFsc28gYmUgY29uZmlndXJlZCBmb3IgcmVtb3RlIHZlcmlmaWNhdGlvbi5cbiovXG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlKd3NBY2Nlc3NUb2tlbih0b2tlbiwgb3B0cykge1xuXHR0cnkge1xuXHRcdGNvbnN0IGp3dCA9IGF3YWl0IGp3dFZlcmlmeSh0b2tlbiwgY3JlYXRlTG9jYWxKV0tTZXQoYXdhaXQgZ2V0Sndrcyh0b2tlbiwgb3B0cykpLCBvcHRzLnZlcmlmeU9wdGlvbnMpO1xuXHRcdGlmIChqd3QucGF5bG9hZC5henApIGp3dC5wYXlsb2FkLmNsaWVudF9pZCA9IGp3dC5wYXlsb2FkLmF6cDtcblx0XHRyZXR1cm4gand0LnBheWxvYWQ7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0aWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHRocm93IGVycm9yO1xuXHRcdHRocm93IG5ldyBFcnJvcihlcnJvcik7XG5cdH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGdldEp3a3ModG9rZW4sIG9wdHMpIHtcblx0bGV0IGp3dEhlYWRlcnM7XG5cdHRyeSB7XG5cdFx0and0SGVhZGVycyA9IGRlY29kZVByb3RlY3RlZEhlYWRlcih0b2tlbik7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0aWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHRocm93IGVycm9yO1xuXHRcdHRocm93IG5ldyBFcnJvcihlcnJvcik7XG5cdH1cblx0aWYgKCFqd3RIZWFkZXJzLmtpZCkgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBqd3Qga2lkXCIpO1xuXHRpZiAoIWp3a3MgfHwgIWp3a3Mua2V5cy5maW5kKChqd2spID0+IGp3ay5raWQgPT09IGp3dEhlYWRlcnMua2lkKSkge1xuXHRcdGp3a3MgPSB0eXBlb2Ygb3B0cy5qd2tzRmV0Y2ggPT09IFwic3RyaW5nXCIgPyBhd2FpdCBiZXR0ZXJGZXRjaChvcHRzLmp3a3NGZXRjaCwgeyBoZWFkZXJzOiB7IEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSB9KS50aGVuKGFzeW5jIChyZXMpID0+IHtcblx0XHRcdGlmIChyZXMuZXJyb3IpIHRocm93IG5ldyBFcnJvcihgSndrcyBmYWlsZWQ6ICR7cmVzLmVycm9yLm1lc3NhZ2UgPz8gcmVzLmVycm9yLnN0YXR1c1RleHR9YCk7XG5cdFx0XHRyZXR1cm4gcmVzLmRhdGE7XG5cdFx0fSkgOiBhd2FpdCBvcHRzLmp3a3NGZXRjaCgpO1xuXHRcdGlmICghandrcykgdGhyb3cgbmV3IEVycm9yKFwiTm8gandrcyBmb3VuZFwiKTtcblx0fVxuXHRyZXR1cm4gandrcztcbn1cbi8qKlxuKiBQZXJmb3JtcyBsb2NhbCB2ZXJpZmljYXRpb24gb2YgYW4gYWNjZXNzIHRva2VuIGZvciB5b3VyIEFQSS5cbipcbiogQ2FuIGFsc28gYmUgY29uZmlndXJlZCBmb3IgcmVtb3RlIHZlcmlmaWNhdGlvbi5cbiovXG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlBY2Nlc3NUb2tlbih0b2tlbiwgb3B0cykge1xuXHRsZXQgcGF5bG9hZDtcblx0aWYgKG9wdHMuandrc1VybCAmJiAhb3B0cz8ucmVtb3RlVmVyaWZ5Py5mb3JjZSkgdHJ5IHtcblx0XHRwYXlsb2FkID0gYXdhaXQgdmVyaWZ5SndzQWNjZXNzVG9rZW4odG9rZW4sIHtcblx0XHRcdGp3a3NGZXRjaDogb3B0cy5qd2tzVXJsLFxuXHRcdFx0dmVyaWZ5T3B0aW9uczogb3B0cy52ZXJpZnlPcHRpb25zXG5cdFx0fSk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0aWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIGlmIChlcnJvci5uYW1lID09PSBcIlR5cGVFcnJvclwiIHx8IGVycm9yLm5hbWUgPT09IFwiSldTSW52YWxpZFwiKSB7fSBlbHNlIGlmIChlcnJvci5uYW1lID09PSBcIkpXVEV4cGlyZWRcIikgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogXCJ0b2tlbiBleHBpcmVkXCIgfSk7XG5cdFx0ZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gXCJKV1RJbnZhbGlkXCIpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IFwidG9rZW4gaW52YWxpZFwiIH0pO1xuXHRcdGVsc2UgdGhyb3cgZXJyb3I7XG5cdFx0ZWxzZSB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuXHR9XG5cdGlmIChvcHRzPy5yZW1vdGVWZXJpZnkpIHtcblx0XHRjb25zdCB7IGRhdGE6IGludHJvc3BlY3QsIGVycm9yOiBpbnRyb3NwZWN0RXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKG9wdHMucmVtb3RlVmVyaWZ5LmludHJvc3BlY3RVcmwsIHtcblx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG5cdFx0XHRcdFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJcblx0XHRcdH0sXG5cdFx0XHRib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcblx0XHRcdFx0Y2xpZW50X2lkOiBvcHRzLnJlbW90ZVZlcmlmeS5jbGllbnRJZCxcblx0XHRcdFx0Y2xpZW50X3NlY3JldDogb3B0cy5yZW1vdGVWZXJpZnkuY2xpZW50U2VjcmV0LFxuXHRcdFx0XHR0b2tlbixcblx0XHRcdFx0dG9rZW5fdHlwZV9oaW50OiBcImFjY2Vzc190b2tlblwiXG5cdFx0XHR9KS50b1N0cmluZygpXG5cdFx0fSk7XG5cdFx0aWYgKGludHJvc3BlY3RFcnJvcikgbG9nZ2VyLmVycm9yKGBJbnRyb3NwZWN0aW9uIGZhaWxlZDogJHtpbnRyb3NwZWN0RXJyb3IubWVzc2FnZSA/PyBpbnRyb3NwZWN0RXJyb3Iuc3RhdHVzVGV4dH1gKTtcblx0XHRpZiAoIWludHJvc3BlY3QpIHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7IG1lc3NhZ2U6IFwiaW50cm9zcGVjdGlvbiBmYWlsZWRcIiB9KTtcblx0XHRpZiAoIWludHJvc3BlY3QuYWN0aXZlKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBcInRva2VuIGluYWN0aXZlXCIgfSk7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHVuc2VjdXJlZEp3dCA9IG5ldyBVbnNlY3VyZWRKV1QoaW50cm9zcGVjdCkuZW5jb2RlKCk7XG5cdFx0XHRjb25zdCB7IGF1ZGllbmNlOiBfYXVkaWVuY2UsIC4uLnZlcmlmeU9wdGlvbnMgfSA9IG9wdHMudmVyaWZ5T3B0aW9ucztcblx0XHRcdHBheWxvYWQgPSAoaW50cm9zcGVjdC5hdWQgPyBVbnNlY3VyZWRKV1QuZGVjb2RlKHVuc2VjdXJlZEp3dCwgb3B0cy52ZXJpZnlPcHRpb25zKSA6IFVuc2VjdXJlZEpXVC5kZWNvZGUodW5zZWN1cmVkSnd0LCB2ZXJpZnlPcHRpb25zKSkucGF5bG9hZDtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGVycm9yKTtcblx0XHR9XG5cdH1cblx0aWYgKCFwYXlsb2FkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBgbm8gdG9rZW4gcGF5bG9hZGAgfSk7XG5cdGlmIChvcHRzLnNjb3Blcykge1xuXHRcdGNvbnN0IHZhbGlkU2NvcGVzID0gbmV3IFNldChwYXlsb2FkLnNjb3BlPy5zcGxpdChcIiBcIikpO1xuXHRcdGZvciAoY29uc3Qgc2Mgb2Ygb3B0cy5zY29wZXMpIGlmICghdmFsaWRTY29wZXMuaGFzKHNjKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogYGludmFsaWQgc2NvcGUgJHtzY31gIH0pO1xuXHR9XG5cdHJldHVybiBwYXlsb2FkO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUgYXMgYSwgcmVmcmVzaEFjY2Vzc1Rva2VuIGFzIGMsIGdldE9BdXRoMlRva2VucyBhcyBkLCBjbGllbnRDcmVkZW50aWFsc1Rva2VuIGFzIGYsIGNyZWF0ZUF1dGhvcml6YXRpb25Db2RlUmVxdWVzdCBhcyBpLCBjcmVhdGVBdXRob3JpemF0aW9uVVJMIGFzIGwsIHZlcmlmeUFjY2Vzc1Rva2VuIGFzIG4sIHZhbGlkYXRlVG9rZW4gYXMgbywgY3JlYXRlQ2xpZW50Q3JlZGVudGlhbHNUb2tlblJlcXVlc3QgYXMgcCwgdmVyaWZ5SndzQWNjZXNzVG9rZW4gYXMgciwgY3JlYXRlUmVmcmVzaEFjY2Vzc1Rva2VuUmVxdWVzdCBhcyBzLCBnZXRKd2tzIGFzIHQsIGdlbmVyYXRlQ29kZUNoYWxsZW5nZSBhcyB1IH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/oauth2-BjWM15hm.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/oauth2/index.mjs":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/oauth2/index.mjs ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientCredentialsToken: () => (/* reexport safe */ _oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_1__.f),\n/* harmony export */   createAuthorizationCodeRequest: () => (/* reexport safe */ _oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_1__.i),\n/* harmony export */   createAuthorizationURL: () => (/* reexport safe */ _oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_1__.l),\n/* harmony export */   createClientCredentialsTokenRequest: () => (/* reexport safe */ _oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_1__.p),\n/* harmony export */   createRefreshAccessTokenRequest: () => (/* reexport safe */ _oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_1__.s),\n/* harmony export */   generateCodeChallenge: () => (/* reexport safe */ _oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_1__.u),\n/* harmony export */   getJwks: () => (/* reexport safe */ _oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_1__.t),\n/* harmony export */   getOAuth2Tokens: () => (/* reexport safe */ _oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_1__.d),\n/* harmony export */   refreshAccessToken: () => (/* reexport safe */ _oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_1__.c),\n/* harmony export */   validateAuthorizationCode: () => (/* reexport safe */ _oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_1__.a),\n/* harmony export */   validateToken: () => (/* reexport safe */ _oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_1__.o),\n/* harmony export */   verifyAccessToken: () => (/* reexport safe */ _oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_1__.n),\n/* harmony export */   verifyJwsAccessToken: () => (/* reexport safe */ _oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_1__.r)\n/* harmony export */ });\n/* harmony import */ var _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../env-DbssmzoK.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env-DbssmzoK.mjs\");\n/* harmony import */ var _oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../oauth2-BjWM15hm.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/oauth2-BjWM15hm.mjs\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L29hdXRoMi9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTZCO0FBQzBYIiwic291cmNlcyI6WyJEOlxcaGFja2F0aG9uZTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXC5wbnBtXFxAYmV0dGVyLWF1dGgrY29yZUAxLjQuMTBfQGJfZTBjN2UxODYwNzk2NWE2MjJjMDEzMTNmZjk0NmY1NGRcXG5vZGVfbW9kdWxlc1xcQGJldHRlci1hdXRoXFxjb3JlXFxkaXN0XFxvYXV0aDJcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXCIuLi9lbnYtRGJzc216b0subWpzXCI7XG5pbXBvcnQgeyBhIGFzIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUsIGMgYXMgcmVmcmVzaEFjY2Vzc1Rva2VuLCBkIGFzIGdldE9BdXRoMlRva2VucywgZiBhcyBjbGllbnRDcmVkZW50aWFsc1Rva2VuLCBpIGFzIGNyZWF0ZUF1dGhvcml6YXRpb25Db2RlUmVxdWVzdCwgbCBhcyBjcmVhdGVBdXRob3JpemF0aW9uVVJMLCBuIGFzIHZlcmlmeUFjY2Vzc1Rva2VuLCBvIGFzIHZhbGlkYXRlVG9rZW4sIHAgYXMgY3JlYXRlQ2xpZW50Q3JlZGVudGlhbHNUb2tlblJlcXVlc3QsIHIgYXMgdmVyaWZ5SndzQWNjZXNzVG9rZW4sIHMgYXMgY3JlYXRlUmVmcmVzaEFjY2Vzc1Rva2VuUmVxdWVzdCwgdCBhcyBnZXRKd2tzLCB1IGFzIGdlbmVyYXRlQ29kZUNoYWxsZW5nZSB9IGZyb20gXCIuLi9vYXV0aDItQmpXTTE1aG0ubWpzXCI7XG5cbmV4cG9ydCB7IGNsaWVudENyZWRlbnRpYWxzVG9rZW4sIGNyZWF0ZUF1dGhvcml6YXRpb25Db2RlUmVxdWVzdCwgY3JlYXRlQXV0aG9yaXphdGlvblVSTCwgY3JlYXRlQ2xpZW50Q3JlZGVudGlhbHNUb2tlblJlcXVlc3QsIGNyZWF0ZVJlZnJlc2hBY2Nlc3NUb2tlblJlcXVlc3QsIGdlbmVyYXRlQ29kZUNoYWxsZW5nZSwgZ2V0SndrcywgZ2V0T0F1dGgyVG9rZW5zLCByZWZyZXNoQWNjZXNzVG9rZW4sIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUsIHZhbGlkYXRlVG9rZW4sIHZlcmlmeUFjY2Vzc1Rva2VuLCB2ZXJpZnlKd3NBY2Nlc3NUb2tlbiB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/oauth2/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/social-providers/index.mjs":
/*!********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/social-providers/index.mjs ***!
  \********************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SocialProviderListEnum: () => (/* binding */ SocialProviderListEnum),\n/* harmony export */   apple: () => (/* binding */ apple),\n/* harmony export */   atlassian: () => (/* binding */ atlassian),\n/* harmony export */   cognito: () => (/* binding */ cognito),\n/* harmony export */   discord: () => (/* binding */ discord),\n/* harmony export */   dropbox: () => (/* binding */ dropbox),\n/* harmony export */   facebook: () => (/* binding */ facebook),\n/* harmony export */   figma: () => (/* binding */ figma),\n/* harmony export */   getApplePublicKey: () => (/* binding */ getApplePublicKey),\n/* harmony export */   getCognitoPublicKey: () => (/* binding */ getCognitoPublicKey),\n/* harmony export */   getGooglePublicKey: () => (/* binding */ getGooglePublicKey),\n/* harmony export */   github: () => (/* binding */ github),\n/* harmony export */   gitlab: () => (/* binding */ gitlab),\n/* harmony export */   google: () => (/* binding */ google),\n/* harmony export */   huggingface: () => (/* binding */ huggingface),\n/* harmony export */   kakao: () => (/* binding */ kakao),\n/* harmony export */   kick: () => (/* binding */ kick),\n/* harmony export */   line: () => (/* binding */ line),\n/* harmony export */   linear: () => (/* binding */ linear),\n/* harmony export */   linkedin: () => (/* binding */ linkedin),\n/* harmony export */   microsoft: () => (/* binding */ microsoft),\n/* harmony export */   naver: () => (/* binding */ naver),\n/* harmony export */   notion: () => (/* binding */ notion),\n/* harmony export */   paybin: () => (/* binding */ paybin),\n/* harmony export */   paypal: () => (/* binding */ paypal),\n/* harmony export */   polar: () => (/* binding */ polar),\n/* harmony export */   reddit: () => (/* binding */ reddit),\n/* harmony export */   roblox: () => (/* binding */ roblox),\n/* harmony export */   salesforce: () => (/* binding */ salesforce),\n/* harmony export */   slack: () => (/* binding */ slack),\n/* harmony export */   socialProviderList: () => (/* binding */ socialProviderList),\n/* harmony export */   socialProviders: () => (/* binding */ socialProviders),\n/* harmony export */   spotify: () => (/* binding */ spotify),\n/* harmony export */   tiktok: () => (/* binding */ tiktok),\n/* harmony export */   twitch: () => (/* binding */ twitch),\n/* harmony export */   twitter: () => (/* binding */ twitter),\n/* harmony export */   vercel: () => (/* binding */ vercel),\n/* harmony export */   vk: () => (/* binding */ vk),\n/* harmony export */   zoom: () => (/* binding */ zoom)\n/* harmony export */ });\n/* harmony import */ var _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../env-DbssmzoK.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env-DbssmzoK.mjs\");\n/* harmony import */ var _utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils-NloIXYE0.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils-NloIXYE0.mjs\");\n/* harmony import */ var _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../error-RtKwr3Pu.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/error-RtKwr3Pu.mjs\");\n/* harmony import */ var _oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../oauth2-BjWM15hm.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/oauth2-BjWM15hm.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@4.3.4/node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/.pnpm/@better-fetch+fetch@1.1.21/node_modules/@better-fetch/fetch/dist/index.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/util/decode_protected_header.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/util/decode_jwt.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/key/import.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/jwks/remote.js\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/.pnpm/better-call@1.1.7_zod@4.3.4/node_modules/better-call/dist/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n//#region src/social-providers/apple.ts\nconst apple = (options) => {\n\tconst tokenEndpoint = \"https://appleid.apple.com/auth/token\";\n\treturn {\n\t\tid: \"apple\",\n\t\tname: \"Apple\",\n\t\tasync createAuthorizationURL({ state, scopes, redirectURI }) {\n\t\t\tconst _scope = options.disableDefaultScope ? [] : [\"email\", \"name\"];\n\t\t\tif (options.scope) _scope.push(...options.scope);\n\t\t\tif (scopes) _scope.push(...scopes);\n\t\t\treturn await (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"apple\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://appleid.apple.com/auth/authorize\",\n\t\t\t\tscopes: _scope,\n\t\t\t\tstate,\n\t\t\t\tredirectURI,\n\t\t\t\tresponseMode: \"form_post\",\n\t\t\t\tresponseType: \"code id_token\"\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\tasync verifyIdToken(token, nonce) {\n\t\t\tif (options.disableIdTokenSignIn) return false;\n\t\t\tif (options.verifyIdToken) return options.verifyIdToken(token, nonce);\n\t\t\tconst { kid, alg: jwtAlg } = (0,jose__WEBPACK_IMPORTED_MODULE_7__.decodeProtectedHeader)(token);\n\t\t\tif (!kid || !jwtAlg) return false;\n\t\t\tconst { payload: jwtClaims } = await (0,jose__WEBPACK_IMPORTED_MODULE_8__.jwtVerify)(token, await getApplePublicKey(kid), {\n\t\t\t\talgorithms: [jwtAlg],\n\t\t\t\tissuer: \"https://appleid.apple.com\",\n\t\t\t\taudience: options.audience && options.audience.length ? options.audience : options.appBundleIdentifier ? options.appBundleIdentifier : options.clientId,\n\t\t\t\tmaxTokenAge: \"1h\"\n\t\t\t});\n\t\t\t[\"email_verified\", \"is_private_email\"].forEach((field) => {\n\t\t\t\tif (jwtClaims[field] !== void 0) jwtClaims[field] = Boolean(jwtClaims[field]);\n\t\t\t});\n\t\t\tif (nonce && jwtClaims.nonce !== nonce) return false;\n\t\t\treturn !!jwtClaims;\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: \"https://appleid.apple.com/auth/token\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tif (!token.idToken) return null;\n\t\t\tconst profile = (0,jose__WEBPACK_IMPORTED_MODULE_9__.decodeJwt)(token.idToken);\n\t\t\tif (!profile) return null;\n\t\t\tconst name = token.user ? `${token.user.name?.firstName} ${token.user.name?.lastName}` : profile.name || profile.email;\n\t\t\tconst emailVerified = typeof profile.email_verified === \"boolean\" ? profile.email_verified : profile.email_verified === \"true\";\n\t\t\tconst enrichedProfile = {\n\t\t\t\t...profile,\n\t\t\t\tname\n\t\t\t};\n\t\t\tconst userMap = await options.mapProfileToUser?.(enrichedProfile);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile.sub,\n\t\t\t\t\tname: enrichedProfile.name,\n\t\t\t\t\temailVerified,\n\t\t\t\t\temail: profile.email,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: enrichedProfile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\nconst getApplePublicKey = async (kid) => {\n\tconst { data } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(`https://appleid.apple.com/auth/keys`);\n\tif (!data?.keys) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Keys not found\" });\n\tconst jwk = data.keys.find((key) => key.kid === kid);\n\tif (!jwk) throw new Error(`JWK with kid ${kid} not found`);\n\treturn await (0,jose__WEBPACK_IMPORTED_MODULE_10__.importJWK)(jwk, jwk.alg);\n};\n\n//#endregion\n//#region src/social-providers/atlassian.ts\nconst atlassian = (options) => {\n\treturn {\n\t\tid: \"atlassian\",\n\t\tname: \"Atlassian\",\n\t\tasync createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n\t\t\tif (!options.clientId || !options.clientSecret) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Client Id and Secret are required for Atlassian\");\n\t\t\t\tthrow new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n\t\t\t}\n\t\t\tif (!codeVerifier) throw new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t(\"codeVerifier is required for Atlassian\");\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\"read:jira-user\", \"offline_access\"];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"atlassian\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://auth.atlassian.com/authorize\",\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\tadditionalParams: { audience: \"api.atlassian.com\" },\n\t\t\t\tprompt: options.prompt\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint: \"https://auth.atlassian.com/oauth/token\"\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: \"https://auth.atlassian.com/oauth/token\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tif (!token.accessToken) return null;\n\t\t\ttry {\n\t\t\t\tconst { data: profile } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://api.atlassian.com/me\", { headers: { Authorization: `Bearer ${token.accessToken}` } });\n\t\t\t\tif (!profile) return null;\n\t\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\t\treturn {\n\t\t\t\t\tuser: {\n\t\t\t\t\t\tid: profile.account_id,\n\t\t\t\t\t\tname: profile.name,\n\t\t\t\t\t\temail: profile.email,\n\t\t\t\t\t\timage: profile.picture,\n\t\t\t\t\t\temailVerified: false,\n\t\t\t\t\t\t...userMap\n\t\t\t\t\t},\n\t\t\t\t\tdata: profile\n\t\t\t\t};\n\t\t\t} catch (error) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Failed to fetch user info from Figma:\", error);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/cognito.ts\nconst cognito = (options) => {\n\tif (!options.domain || !options.region || !options.userPoolId) {\n\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Domain, region and userPoolId are required for Amazon Cognito. Make sure to provide them in the options.\");\n\t\tthrow new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t(\"DOMAIN_AND_REGION_REQUIRED\");\n\t}\n\tconst cleanDomain = options.domain.replace(/^https?:\\/\\//, \"\");\n\tconst authorizationEndpoint = `https://${cleanDomain}/oauth2/authorize`;\n\tconst tokenEndpoint = `https://${cleanDomain}/oauth2/token`;\n\tconst userInfoEndpoint = `https://${cleanDomain}/oauth2/userinfo`;\n\treturn {\n\t\tid: \"cognito\",\n\t\tname: \"Cognito\",\n\t\tasync createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n\t\t\tif (!options.clientId) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"ClientId is required for Amazon Cognito. Make sure to provide them in the options.\");\n\t\t\t\tthrow new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n\t\t\t}\n\t\t\tif (options.requireClientSecret && !options.clientSecret) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Client Secret is required when requireClientSecret is true. Make sure to provide it in the options.\");\n\t\t\t\tthrow new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t(\"CLIENT_SECRET_REQUIRED\");\n\t\t\t}\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\n\t\t\t\t\"openid\",\n\t\t\t\t\"profile\",\n\t\t\t\t\"email\"\n\t\t\t];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\tconst url = await (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"cognito\",\n\t\t\t\toptions: { ...options },\n\t\t\t\tauthorizationEndpoint,\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\tprompt: options.prompt\n\t\t\t});\n\t\t\tconst scopeValue = url.searchParams.get(\"scope\");\n\t\t\tif (scopeValue) {\n\t\t\t\turl.searchParams.delete(\"scope\");\n\t\t\t\tconst encodedScope = encodeURIComponent(scopeValue);\n\t\t\t\tconst urlString = url.toString();\n\t\t\t\tconst separator = urlString.includes(\"?\") ? \"&\" : \"?\";\n\t\t\t\treturn new URL(`${urlString}${separator}scope=${encodedScope}`);\n\t\t\t}\n\t\t\treturn url;\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\tasync verifyIdToken(token, nonce) {\n\t\t\tif (options.disableIdTokenSignIn) return false;\n\t\t\tif (options.verifyIdToken) return options.verifyIdToken(token, nonce);\n\t\t\ttry {\n\t\t\t\tconst { kid, alg: jwtAlg } = (0,jose__WEBPACK_IMPORTED_MODULE_7__.decodeProtectedHeader)(token);\n\t\t\t\tif (!kid || !jwtAlg) return false;\n\t\t\t\tconst publicKey = await getCognitoPublicKey(kid, options.region, options.userPoolId);\n\t\t\t\tconst expectedIssuer = `https://cognito-idp.${options.region}.amazonaws.com/${options.userPoolId}`;\n\t\t\t\tconst { payload: jwtClaims } = await (0,jose__WEBPACK_IMPORTED_MODULE_8__.jwtVerify)(token, publicKey, {\n\t\t\t\t\talgorithms: [jwtAlg],\n\t\t\t\t\tissuer: expectedIssuer,\n\t\t\t\t\taudience: options.clientId,\n\t\t\t\t\tmaxTokenAge: \"1h\"\n\t\t\t\t});\n\t\t\t\tif (nonce && jwtClaims.nonce !== nonce) return false;\n\t\t\t\treturn true;\n\t\t\t} catch (error) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Failed to verify ID token:\", error);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tif (token.idToken) try {\n\t\t\t\tconst profile = (0,jose__WEBPACK_IMPORTED_MODULE_9__.decodeJwt)(token.idToken);\n\t\t\t\tif (!profile) return null;\n\t\t\t\tconst name = profile.name || profile.given_name || profile.username || profile.email;\n\t\t\t\tconst enrichedProfile = {\n\t\t\t\t\t...profile,\n\t\t\t\t\tname\n\t\t\t\t};\n\t\t\t\tconst userMap = await options.mapProfileToUser?.(enrichedProfile);\n\t\t\t\treturn {\n\t\t\t\t\tuser: {\n\t\t\t\t\t\tid: profile.sub,\n\t\t\t\t\t\tname: enrichedProfile.name,\n\t\t\t\t\t\temail: profile.email,\n\t\t\t\t\t\timage: profile.picture,\n\t\t\t\t\t\temailVerified: profile.email_verified,\n\t\t\t\t\t\t...userMap\n\t\t\t\t\t},\n\t\t\t\t\tdata: enrichedProfile\n\t\t\t\t};\n\t\t\t} catch (error) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Failed to decode ID token:\", error);\n\t\t\t}\n\t\t\tif (token.accessToken) try {\n\t\t\t\tconst { data: userInfo } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(userInfoEndpoint, { headers: { Authorization: `Bearer ${token.accessToken}` } });\n\t\t\t\tif (userInfo) {\n\t\t\t\t\tconst userMap = await options.mapProfileToUser?.(userInfo);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\tid: userInfo.sub,\n\t\t\t\t\t\t\tname: userInfo.name || userInfo.given_name || userInfo.username,\n\t\t\t\t\t\t\temail: userInfo.email,\n\t\t\t\t\t\t\timage: userInfo.picture,\n\t\t\t\t\t\t\temailVerified: userInfo.email_verified,\n\t\t\t\t\t\t\t...userMap\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdata: userInfo\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Failed to fetch user info from Cognito:\", error);\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\toptions\n\t};\n};\nconst getCognitoPublicKey = async (kid, region, userPoolId) => {\n\tconst COGNITO_JWKS_URI = `https://cognito-idp.${region}.amazonaws.com/${userPoolId}/.well-known/jwks.json`;\n\ttry {\n\t\tconst { data } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(COGNITO_JWKS_URI);\n\t\tif (!data?.keys) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Keys not found\" });\n\t\tconst jwk = data.keys.find((key) => key.kid === kid);\n\t\tif (!jwk) throw new Error(`JWK with kid ${kid} not found`);\n\t\treturn await (0,jose__WEBPACK_IMPORTED_MODULE_10__.importJWK)(jwk, jwk.alg);\n\t} catch (error) {\n\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Failed to fetch Cognito public key:\", error);\n\t\tthrow error;\n\t}\n};\n\n//#endregion\n//#region src/social-providers/discord.ts\nconst discord = (options) => {\n\treturn {\n\t\tid: \"discord\",\n\t\tname: \"Discord\",\n\t\tcreateAuthorizationURL({ state, scopes, redirectURI }) {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\"identify\", \"email\"];\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tconst permissionsParam = _scopes.includes(\"bot\") && options.permissions !== void 0 ? `&permissions=${options.permissions}` : \"\";\n\t\t\treturn new URL(`https://discord.com/api/oauth2/authorize?scope=${_scopes.join(\"+\")}&response_type=code&client_id=${options.clientId}&redirect_uri=${encodeURIComponent(options.redirectURI || redirectURI)}&state=${state}&prompt=${options.prompt || \"none\"}${permissionsParam}`);\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint: \"https://discord.com/api/oauth2/token\"\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: \"https://discord.com/api/oauth2/token\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://discord.com/api/users/@me\", { headers: { authorization: `Bearer ${token.accessToken}` } });\n\t\t\tif (error) return null;\n\t\t\tif (profile.avatar === null) profile.image_url = `https://cdn.discordapp.com/embed/avatars/${profile.discriminator === \"0\" ? Number(BigInt(profile.id) >> BigInt(22)) % 6 : parseInt(profile.discriminator) % 5}.png`;\n\t\t\telse {\n\t\t\t\tconst format = profile.avatar.startsWith(\"a_\") ? \"gif\" : \"png\";\n\t\t\t\tprofile.image_url = `https://cdn.discordapp.com/avatars/${profile.id}/${profile.avatar}.${format}`;\n\t\t\t}\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile.id,\n\t\t\t\t\tname: profile.global_name || profile.username || \"\",\n\t\t\t\t\temail: profile.email,\n\t\t\t\t\temailVerified: profile.verified,\n\t\t\t\t\timage: profile.image_url,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/dropbox.ts\nconst dropbox = (options) => {\n\tconst tokenEndpoint = \"https://api.dropboxapi.com/oauth2/token\";\n\treturn {\n\t\tid: \"dropbox\",\n\t\tname: \"Dropbox\",\n\t\tcreateAuthorizationURL: async ({ state, scopes, codeVerifier, redirectURI }) => {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\"account_info.read\"];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\tconst additionalParams = {};\n\t\t\tif (options.accessType) additionalParams.token_access_type = options.accessType;\n\t\t\treturn await (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"dropbox\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://www.dropbox.com/oauth2/authorize\",\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tredirectURI,\n\t\t\t\tcodeVerifier,\n\t\t\t\tadditionalParams\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n\t\t\treturn await (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: \"https://api.dropbox.com/oauth2/token\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://api.dropboxapi.com/2/users/get_current_account\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: { Authorization: `Bearer ${token.accessToken}` }\n\t\t\t});\n\t\t\tif (error) return null;\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile.account_id,\n\t\t\t\t\tname: profile.name?.display_name,\n\t\t\t\t\temail: profile.email,\n\t\t\t\t\temailVerified: profile.email_verified || false,\n\t\t\t\t\timage: profile.profile_photo_url,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/facebook.ts\nconst facebook = (options) => {\n\treturn {\n\t\tid: \"facebook\",\n\t\tname: \"Facebook\",\n\t\tasync createAuthorizationURL({ state, scopes, redirectURI, loginHint }) {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\"email\", \"public_profile\"];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn await (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"facebook\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://www.facebook.com/v21.0/dialog/oauth\",\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tredirectURI,\n\t\t\t\tloginHint,\n\t\t\t\tadditionalParams: options.configId ? { config_id: options.configId } : {}\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint: \"https://graph.facebook.com/oauth/access_token\"\n\t\t\t});\n\t\t},\n\t\tasync verifyIdToken(token, nonce) {\n\t\t\tif (options.disableIdTokenSignIn) return false;\n\t\t\tif (options.verifyIdToken) return options.verifyIdToken(token, nonce);\n\t\t\tif (token.split(\".\").length === 3) try {\n\t\t\t\tconst { payload: jwtClaims } = await (0,jose__WEBPACK_IMPORTED_MODULE_8__.jwtVerify)(token, (0,jose__WEBPACK_IMPORTED_MODULE_11__.createRemoteJWKSet)(new URL(\"https://limited.facebook.com/.well-known/oauth/openid/jwks/\")), {\n\t\t\t\t\talgorithms: [\"RS256\"],\n\t\t\t\t\taudience: options.clientId,\n\t\t\t\t\tissuer: \"https://www.facebook.com\"\n\t\t\t\t});\n\t\t\t\tif (nonce && jwtClaims.nonce !== nonce) return false;\n\t\t\t\treturn !!jwtClaims;\n\t\t\t} catch {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: \"https://graph.facebook.com/v18.0/oauth/access_token\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tif (token.idToken && token.idToken.split(\".\").length === 3) {\n\t\t\t\tconst profile$1 = (0,jose__WEBPACK_IMPORTED_MODULE_9__.decodeJwt)(token.idToken);\n\t\t\t\tconst user = {\n\t\t\t\t\tid: profile$1.sub,\n\t\t\t\t\tname: profile$1.name,\n\t\t\t\t\temail: profile$1.email,\n\t\t\t\t\tpicture: { data: {\n\t\t\t\t\t\turl: profile$1.picture,\n\t\t\t\t\t\theight: 100,\n\t\t\t\t\t\twidth: 100,\n\t\t\t\t\t\tis_silhouette: false\n\t\t\t\t\t} }\n\t\t\t\t};\n\t\t\t\tconst userMap$1 = await options.mapProfileToUser?.({\n\t\t\t\t\t...user,\n\t\t\t\t\temail_verified: false\n\t\t\t\t});\n\t\t\t\treturn {\n\t\t\t\t\tuser: {\n\t\t\t\t\t\t...user,\n\t\t\t\t\t\temailVerified: false,\n\t\t\t\t\t\t...userMap$1\n\t\t\t\t\t},\n\t\t\t\t\tdata: profile$1\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://graph.facebook.com/me?fields=\" + [\n\t\t\t\t\"id\",\n\t\t\t\t\"name\",\n\t\t\t\t\"email\",\n\t\t\t\t\"picture\",\n\t\t\t\t...options?.fields || []\n\t\t\t].join(\",\"), { auth: {\n\t\t\t\ttype: \"Bearer\",\n\t\t\t\ttoken: token.accessToken\n\t\t\t} });\n\t\t\tif (error) return null;\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile.id,\n\t\t\t\t\tname: profile.name,\n\t\t\t\t\temail: profile.email,\n\t\t\t\t\timage: profile.picture.data.url,\n\t\t\t\t\temailVerified: profile.email_verified,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/figma.ts\nconst figma = (options) => {\n\treturn {\n\t\tid: \"figma\",\n\t\tname: \"Figma\",\n\t\tasync createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n\t\t\tif (!options.clientId || !options.clientSecret) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Client Id and Client Secret are required for Figma. Make sure to provide them in the options.\");\n\t\t\t\tthrow new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n\t\t\t}\n\t\t\tif (!codeVerifier) throw new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t(\"codeVerifier is required for Figma\");\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\"file_read\"];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn await (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"figma\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://www.figma.com/oauth\",\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint: \"https://www.figma.com/api/oauth/token\"\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: \"https://www.figma.com/api/oauth/token\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\ttry {\n\t\t\t\tconst { data: profile } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://api.figma.com/v1/me\", { headers: { Authorization: `Bearer ${token.accessToken}` } });\n\t\t\t\tif (!profile) {\n\t\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Failed to fetch user from Figma\");\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\t\treturn {\n\t\t\t\t\tuser: {\n\t\t\t\t\t\tid: profile.id,\n\t\t\t\t\t\tname: profile.handle,\n\t\t\t\t\t\temail: profile.email,\n\t\t\t\t\t\timage: profile.img_url,\n\t\t\t\t\t\temailVerified: false,\n\t\t\t\t\t\t...userMap\n\t\t\t\t\t},\n\t\t\t\t\tdata: profile\n\t\t\t\t};\n\t\t\t} catch (error) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Failed to fetch user info from Figma:\", error);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/github.ts\nconst github = (options) => {\n\tconst tokenEndpoint = \"https://github.com/login/oauth/access_token\";\n\treturn {\n\t\tid: \"github\",\n\t\tname: \"GitHub\",\n\t\tcreateAuthorizationURL({ state, scopes, loginHint, codeVerifier, redirectURI }) {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\"read:user\", \"user:email\"];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"github\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://github.com/login/oauth/authorize\",\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\tloginHint,\n\t\t\t\tprompt: options.prompt\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: \"https://github.com/login/oauth/access_token\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://api.github.com/user\", { headers: {\n\t\t\t\t\"User-Agent\": \"better-auth\",\n\t\t\t\tauthorization: `Bearer ${token.accessToken}`\n\t\t\t} });\n\t\t\tif (error) return null;\n\t\t\tconst { data: emails } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://api.github.com/user/emails\", { headers: {\n\t\t\t\tAuthorization: `Bearer ${token.accessToken}`,\n\t\t\t\t\"User-Agent\": \"better-auth\"\n\t\t\t} });\n\t\t\tif (!profile.email && emails) profile.email = (emails.find((e) => e.primary) ?? emails[0])?.email;\n\t\t\tconst emailVerified = emails?.find((e) => e.email === profile.email)?.verified ?? false;\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile.id,\n\t\t\t\t\tname: profile.name || profile.login,\n\t\t\t\t\temail: profile.email,\n\t\t\t\t\timage: profile.avatar_url,\n\t\t\t\t\temailVerified,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/gitlab.ts\nconst cleanDoubleSlashes = (input = \"\") => {\n\treturn input.split(\"://\").map((str) => str.replace(/\\/{2,}/g, \"/\")).join(\"://\");\n};\nconst issuerToEndpoints = (issuer) => {\n\tlet baseUrl = issuer || \"https://gitlab.com\";\n\treturn {\n\t\tauthorizationEndpoint: cleanDoubleSlashes(`${baseUrl}/oauth/authorize`),\n\t\ttokenEndpoint: cleanDoubleSlashes(`${baseUrl}/oauth/token`),\n\t\tuserinfoEndpoint: cleanDoubleSlashes(`${baseUrl}/api/v4/user`)\n\t};\n};\nconst gitlab = (options) => {\n\tconst { authorizationEndpoint, tokenEndpoint, userinfoEndpoint } = issuerToEndpoints(options.issuer);\n\tconst issuerId = \"gitlab\";\n\treturn {\n\t\tid: issuerId,\n\t\tname: \"Gitlab\",\n\t\tcreateAuthorizationURL: async ({ state, scopes, codeVerifier, loginHint, redirectURI }) => {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\"read_user\"];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn await (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: issuerId,\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint,\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tredirectURI,\n\t\t\t\tcodeVerifier,\n\t\t\t\tloginHint\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, redirectURI, codeVerifier }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\tcodeVerifier,\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(userinfoEndpoint, { headers: { authorization: `Bearer ${token.accessToken}` } });\n\t\t\tif (error || profile.state !== \"active\" || profile.locked) return null;\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile.id,\n\t\t\t\t\tname: profile.name ?? profile.username,\n\t\t\t\t\temail: profile.email,\n\t\t\t\t\timage: profile.avatar_url,\n\t\t\t\t\temailVerified: profile.email_verified ?? false,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/google.ts\nconst google = (options) => {\n\treturn {\n\t\tid: \"google\",\n\t\tname: \"Google\",\n\t\tasync createAuthorizationURL({ state, scopes, codeVerifier, redirectURI, loginHint, display }) {\n\t\t\tif (!options.clientId || !options.clientSecret) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Client Id and Client Secret is required for Google. Make sure to provide them in the options.\");\n\t\t\t\tthrow new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n\t\t\t}\n\t\t\tif (!codeVerifier) throw new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t(\"codeVerifier is required for Google\");\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\n\t\t\t\t\"email\",\n\t\t\t\t\"profile\",\n\t\t\t\t\"openid\"\n\t\t\t];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn await (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"google\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://accounts.google.com/o/oauth2/auth\",\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\tprompt: options.prompt,\n\t\t\t\taccessType: options.accessType,\n\t\t\t\tdisplay: display || options.display,\n\t\t\t\tloginHint,\n\t\t\t\thd: options.hd,\n\t\t\t\tadditionalParams: { include_granted_scopes: \"true\" }\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint: \"https://oauth2.googleapis.com/token\"\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: \"https://www.googleapis.com/oauth2/v4/token\"\n\t\t\t});\n\t\t},\n\t\tasync verifyIdToken(token, nonce) {\n\t\t\tif (options.disableIdTokenSignIn) return false;\n\t\t\tif (options.verifyIdToken) return options.verifyIdToken(token, nonce);\n\t\t\tconst { kid, alg: jwtAlg } = (0,jose__WEBPACK_IMPORTED_MODULE_7__.decodeProtectedHeader)(token);\n\t\t\tif (!kid || !jwtAlg) return false;\n\t\t\tconst { payload: jwtClaims } = await (0,jose__WEBPACK_IMPORTED_MODULE_8__.jwtVerify)(token, await getGooglePublicKey(kid), {\n\t\t\t\talgorithms: [jwtAlg],\n\t\t\t\tissuer: [\"https://accounts.google.com\", \"accounts.google.com\"],\n\t\t\t\taudience: options.clientId,\n\t\t\t\tmaxTokenAge: \"1h\"\n\t\t\t});\n\t\t\tif (nonce && jwtClaims.nonce !== nonce) return false;\n\t\t\treturn true;\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tif (!token.idToken) return null;\n\t\t\tconst user = (0,jose__WEBPACK_IMPORTED_MODULE_9__.decodeJwt)(token.idToken);\n\t\t\tconst userMap = await options.mapProfileToUser?.(user);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: user.sub,\n\t\t\t\t\tname: user.name,\n\t\t\t\t\temail: user.email,\n\t\t\t\t\timage: user.picture,\n\t\t\t\t\temailVerified: user.email_verified,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: user\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\nconst getGooglePublicKey = async (kid) => {\n\tconst { data } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://www.googleapis.com/oauth2/v3/certs\");\n\tif (!data?.keys) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Keys not found\" });\n\tconst jwk = data.keys.find((key) => key.kid === kid);\n\tif (!jwk) throw new Error(`JWK with kid ${kid} not found`);\n\treturn await (0,jose__WEBPACK_IMPORTED_MODULE_10__.importJWK)(jwk, jwk.alg);\n};\n\n//#endregion\n//#region src/social-providers/huggingface.ts\nconst huggingface = (options) => {\n\treturn {\n\t\tid: \"huggingface\",\n\t\tname: \"Hugging Face\",\n\t\tcreateAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\n\t\t\t\t\"openid\",\n\t\t\t\t\"profile\",\n\t\t\t\t\"email\"\n\t\t\t];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"huggingface\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://huggingface.co/oauth/authorize\",\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint: \"https://huggingface.co/oauth/token\"\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: \"https://huggingface.co/oauth/token\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://huggingface.co/oauth/userinfo\", {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: { Authorization: `Bearer ${token.accessToken}` }\n\t\t\t});\n\t\t\tif (error) return null;\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile.sub,\n\t\t\t\t\tname: profile.name || profile.preferred_username,\n\t\t\t\t\temail: profile.email,\n\t\t\t\t\timage: profile.picture,\n\t\t\t\t\temailVerified: profile.email_verified ?? false,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/kakao.ts\nconst kakao = (options) => {\n\treturn {\n\t\tid: \"kakao\",\n\t\tname: \"Kakao\",\n\t\tcreateAuthorizationURL({ state, scopes, redirectURI }) {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\n\t\t\t\t\"account_email\",\n\t\t\t\t\"profile_image\",\n\t\t\t\t\"profile_nickname\"\n\t\t\t];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"kakao\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://kauth.kakao.com/oauth/authorize\",\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tredirectURI\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint: \"https://kauth.kakao.com/oauth/token\"\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: \"https://kauth.kakao.com/oauth/token\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://kapi.kakao.com/v2/user/me\", { headers: { Authorization: `Bearer ${token.accessToken}` } });\n\t\t\tif (error || !profile) return null;\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\tconst account = profile.kakao_account || {};\n\t\t\tconst kakaoProfile = account.profile || {};\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: String(profile.id),\n\t\t\t\t\tname: kakaoProfile.nickname || account.name || void 0,\n\t\t\t\t\temail: account.email,\n\t\t\t\t\timage: kakaoProfile.profile_image_url || kakaoProfile.thumbnail_image_url,\n\t\t\t\t\temailVerified: !!account.is_email_valid && !!account.is_email_verified,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/kick.ts\nconst kick = (options) => {\n\treturn {\n\t\tid: \"kick\",\n\t\tname: \"Kick\",\n\t\tcreateAuthorizationURL({ state, scopes, redirectURI, codeVerifier }) {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\"user:read\"];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"kick\",\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://id.kick.com/oauth/authorize\",\n\t\t\t\tscopes: _scopes,\n\t\t\t\tcodeVerifier,\n\t\t\t\tstate\n\t\t\t});\n\t\t},\n\t\tasync validateAuthorizationCode({ code, redirectURI, codeVerifier }) {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint: \"https://id.kick.com/oauth/token\",\n\t\t\t\tcodeVerifier\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: \"https://id.kick.com/oauth/token\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://api.kick.com/public/v1/users\", {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: { Authorization: `Bearer ${token.accessToken}` }\n\t\t\t});\n\t\t\tif (error) return null;\n\t\t\tconst profile = data.data[0];\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile.user_id,\n\t\t\t\t\tname: profile.name,\n\t\t\t\t\temail: profile.email,\n\t\t\t\t\timage: profile.profile_picture,\n\t\t\t\t\temailVerified: false,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/line.ts\n/**\n* LINE Login v2.1\n* - Authorization endpoint: https://access.line.me/oauth2/v2.1/authorize\n* - Token endpoint: https://api.line.me/oauth2/v2.1/token\n* - UserInfo endpoint: https://api.line.me/oauth2/v2.1/userinfo\n* - Verify ID token: https://api.line.me/oauth2/v2.1/verify\n*\n* Docs: https://developers.line.biz/en/reference/line-login/#issue-access-token\n*/\nconst line = (options) => {\n\tconst authorizationEndpoint = \"https://access.line.me/oauth2/v2.1/authorize\";\n\tconst tokenEndpoint = \"https://api.line.me/oauth2/v2.1/token\";\n\tconst userInfoEndpoint = \"https://api.line.me/oauth2/v2.1/userinfo\";\n\tconst verifyIdTokenEndpoint = \"https://api.line.me/oauth2/v2.1/verify\";\n\treturn {\n\t\tid: \"line\",\n\t\tname: \"LINE\",\n\t\tasync createAuthorizationURL({ state, scopes, codeVerifier, redirectURI, loginHint }) {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\n\t\t\t\t\"openid\",\n\t\t\t\t\"profile\",\n\t\t\t\t\"email\"\n\t\t\t];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn await (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"line\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint,\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\tloginHint\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\tasync verifyIdToken(token, nonce) {\n\t\t\tif (options.disableIdTokenSignIn) return false;\n\t\t\tif (options.verifyIdToken) return options.verifyIdToken(token, nonce);\n\t\t\tconst body = new URLSearchParams();\n\t\t\tbody.set(\"id_token\", token);\n\t\t\tbody.set(\"client_id\", options.clientId);\n\t\t\tif (nonce) body.set(\"nonce\", nonce);\n\t\t\tconst { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(verifyIdTokenEndpoint, {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: { \"content-type\": \"application/x-www-form-urlencoded\" },\n\t\t\t\tbody\n\t\t\t});\n\t\t\tif (error || !data) return false;\n\t\t\tif (data.aud !== options.clientId) return false;\n\t\t\tif (data.nonce && data.nonce !== nonce) return false;\n\t\t\treturn true;\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tlet profile = null;\n\t\t\tif (token.idToken) try {\n\t\t\t\tprofile = (0,jose__WEBPACK_IMPORTED_MODULE_9__.decodeJwt)(token.idToken);\n\t\t\t} catch {}\n\t\t\tif (!profile) {\n\t\t\t\tconst { data } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(userInfoEndpoint, { headers: { authorization: `Bearer ${token.accessToken}` } });\n\t\t\t\tprofile = data || null;\n\t\t\t}\n\t\t\tif (!profile) return null;\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\tconst id = profile.sub || profile.userId;\n\t\t\tconst name = profile.name || profile.displayName;\n\t\t\tconst image = profile.picture || profile.pictureUrl || void 0;\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid,\n\t\t\t\t\tname,\n\t\t\t\t\temail: profile.email,\n\t\t\t\t\timage,\n\t\t\t\t\temailVerified: false,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/linear.ts\nconst linear = (options) => {\n\tconst tokenEndpoint = \"https://api.linear.app/oauth/token\";\n\treturn {\n\t\tid: \"linear\",\n\t\tname: \"Linear\",\n\t\tcreateAuthorizationURL({ state, scopes, loginHint, redirectURI }) {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\"read\"];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"linear\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://linear.app/oauth/authorize\",\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tredirectURI,\n\t\t\t\tloginHint\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://api.linear.app/graphql\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\tAuthorization: `Bearer ${token.accessToken}`\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({ query: `\n\t\t\t\t\t\t\tquery {\n\t\t\t\t\t\t\t\tviewer {\n\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\temail\n\t\t\t\t\t\t\t\t\tavatarUrl\n\t\t\t\t\t\t\t\t\tactive\n\t\t\t\t\t\t\t\t\tcreatedAt\n\t\t\t\t\t\t\t\t\tupdatedAt\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t` })\n\t\t\t});\n\t\t\tif (error || !profile?.data?.viewer) return null;\n\t\t\tconst userData = profile.data.viewer;\n\t\t\tconst userMap = await options.mapProfileToUser?.(userData);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile.data.viewer.id,\n\t\t\t\t\tname: profile.data.viewer.name,\n\t\t\t\t\temail: profile.data.viewer.email,\n\t\t\t\t\timage: profile.data.viewer.avatarUrl,\n\t\t\t\t\temailVerified: false,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: userData\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/linkedin.ts\nconst linkedin = (options) => {\n\tconst authorizationEndpoint = \"https://www.linkedin.com/oauth/v2/authorization\";\n\tconst tokenEndpoint = \"https://www.linkedin.com/oauth/v2/accessToken\";\n\treturn {\n\t\tid: \"linkedin\",\n\t\tname: \"Linkedin\",\n\t\tcreateAuthorizationURL: async ({ state, scopes, redirectURI, loginHint }) => {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\n\t\t\t\t\"profile\",\n\t\t\t\t\"email\",\n\t\t\t\t\"openid\"\n\t\t\t];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn await (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"linkedin\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint,\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tloginHint,\n\t\t\t\tredirectURI\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, redirectURI }) => {\n\t\t\treturn await (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://api.linkedin.com/v2/userinfo\", {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: { Authorization: `Bearer ${token.accessToken}` }\n\t\t\t});\n\t\t\tif (error) return null;\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile.sub,\n\t\t\t\t\tname: profile.name,\n\t\t\t\t\temail: profile.email,\n\t\t\t\t\temailVerified: profile.email_verified || false,\n\t\t\t\t\timage: profile.picture,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/microsoft-entra-id.ts\nconst microsoft = (options) => {\n\tconst tenant = options.tenantId || \"common\";\n\tconst authority = options.authority || \"https://login.microsoftonline.com\";\n\tconst authorizationEndpoint = `${authority}/${tenant}/oauth2/v2.0/authorize`;\n\tconst tokenEndpoint = `${authority}/${tenant}/oauth2/v2.0/token`;\n\treturn {\n\t\tid: \"microsoft\",\n\t\tname: \"Microsoft EntraID\",\n\t\tcreateAuthorizationURL(data) {\n\t\t\tconst scopes = options.disableDefaultScope ? [] : [\n\t\t\t\t\"openid\",\n\t\t\t\t\"profile\",\n\t\t\t\t\"email\",\n\t\t\t\t\"User.Read\",\n\t\t\t\t\"offline_access\"\n\t\t\t];\n\t\t\tif (options.scope) scopes.push(...options.scope);\n\t\t\tif (data.scopes) scopes.push(...data.scopes);\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"microsoft\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint,\n\t\t\t\tstate: data.state,\n\t\t\t\tcodeVerifier: data.codeVerifier,\n\t\t\t\tscopes,\n\t\t\t\tredirectURI: data.redirectURI,\n\t\t\t\tprompt: options.prompt,\n\t\t\t\tloginHint: data.loginHint\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode({ code, codeVerifier, redirectURI }) {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tif (!token.idToken) return null;\n\t\t\tconst user = (0,jose__WEBPACK_IMPORTED_MODULE_9__.decodeJwt)(token.idToken);\n\t\t\tconst profilePhotoSize = options.profilePhotoSize || 48;\n\t\t\tawait (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(`https://graph.microsoft.com/v1.0/me/photos/${profilePhotoSize}x${profilePhotoSize}/$value`, {\n\t\t\t\theaders: { Authorization: `Bearer ${token.accessToken}` },\n\t\t\t\tasync onResponse(context) {\n\t\t\t\t\tif (options.disableProfilePhoto || !context.response.ok) return;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst pictureBuffer = await context.response.clone().arrayBuffer();\n\t\t\t\t\t\tuser.picture = `data:image/jpeg;base64, ${_better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_4__.base64.encode(pictureBuffer)}`;\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(e && typeof e === \"object\" && \"name\" in e ? e.name : \"\", e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst userMap = await options.mapProfileToUser?.(user);\n\t\t\tconst emailVerified = user.email_verified !== void 0 ? user.email_verified : user.email && (user.verified_primary_email?.includes(user.email) || user.verified_secondary_email?.includes(user.email)) ? true : false;\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: user.sub,\n\t\t\t\t\tname: user.name,\n\t\t\t\t\temail: user.email,\n\t\t\t\t\timage: user.picture,\n\t\t\t\t\temailVerified,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: user\n\t\t\t};\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\tconst scopes = options.disableDefaultScope ? [] : [\n\t\t\t\t\"openid\",\n\t\t\t\t\"profile\",\n\t\t\t\t\"email\",\n\t\t\t\t\"User.Read\",\n\t\t\t\t\"offline_access\"\n\t\t\t];\n\t\t\tif (options.scope) scopes.push(...options.scope);\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\textraParams: { scope: scopes.join(\" \") },\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/naver.ts\nconst naver = (options) => {\n\treturn {\n\t\tid: \"naver\",\n\t\tname: \"Naver\",\n\t\tcreateAuthorizationURL({ state, scopes, redirectURI }) {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\"profile\", \"email\"];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"naver\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://nid.naver.com/oauth2.0/authorize\",\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tredirectURI\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint: \"https://nid.naver.com/oauth2.0/token\"\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: \"https://nid.naver.com/oauth2.0/token\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://openapi.naver.com/v1/nid/me\", { headers: { Authorization: `Bearer ${token.accessToken}` } });\n\t\t\tif (error || !profile || profile.resultcode !== \"00\") return null;\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\tconst res = profile.response || {};\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: res.id,\n\t\t\t\t\tname: res.name || res.nickname,\n\t\t\t\t\temail: res.email,\n\t\t\t\t\timage: res.profile_image,\n\t\t\t\t\temailVerified: false,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/notion.ts\nconst notion = (options) => {\n\tconst tokenEndpoint = \"https://api.notion.com/v1/oauth/token\";\n\treturn {\n\t\tid: \"notion\",\n\t\tname: \"Notion\",\n\t\tcreateAuthorizationURL({ state, scopes, loginHint, redirectURI }) {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"notion\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://api.notion.com/v1/oauth/authorize\",\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tredirectURI,\n\t\t\t\tloginHint,\n\t\t\t\tadditionalParams: { owner: \"user\" }\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint,\n\t\t\t\tauthentication: \"basic\"\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://api.notion.com/v1/users/me\", { headers: {\n\t\t\t\tAuthorization: `Bearer ${token.accessToken}`,\n\t\t\t\t\"Notion-Version\": \"2022-06-28\"\n\t\t\t} });\n\t\t\tif (error || !profile) return null;\n\t\t\tconst userProfile = profile.bot?.owner?.user;\n\t\t\tif (!userProfile) return null;\n\t\t\tconst userMap = await options.mapProfileToUser?.(userProfile);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: userProfile.id,\n\t\t\t\t\tname: userProfile.name || \"Notion User\",\n\t\t\t\t\temail: userProfile.person?.email || null,\n\t\t\t\t\timage: userProfile.avatar_url,\n\t\t\t\t\temailVerified: false,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: userProfile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/paybin.ts\nconst paybin = (options) => {\n\tconst issuer = options.issuer || \"https://idp.paybin.io\";\n\tconst authorizationEndpoint = `${issuer}/oauth2/authorize`;\n\tconst tokenEndpoint = `${issuer}/oauth2/token`;\n\treturn {\n\t\tid: \"paybin\",\n\t\tname: \"Paybin\",\n\t\tasync createAuthorizationURL({ state, scopes, codeVerifier, redirectURI, loginHint }) {\n\t\t\tif (!options.clientId || !options.clientSecret) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Client Id and Client Secret is required for Paybin. Make sure to provide them in the options.\");\n\t\t\t\tthrow new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n\t\t\t}\n\t\t\tif (!codeVerifier) throw new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t(\"codeVerifier is required for Paybin\");\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\n\t\t\t\t\"openid\",\n\t\t\t\t\"email\",\n\t\t\t\t\"profile\"\n\t\t\t];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn await (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"paybin\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint,\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\tprompt: options.prompt,\n\t\t\t\tloginHint\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tif (!token.idToken) return null;\n\t\t\tconst user = (0,jose__WEBPACK_IMPORTED_MODULE_9__.decodeJwt)(token.idToken);\n\t\t\tconst userMap = await options.mapProfileToUser?.(user);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: user.sub,\n\t\t\t\t\tname: user.name || user.preferred_username || (user.email ? user.email.split(\"@\")[0] : \"User\") || \"User\",\n\t\t\t\t\temail: user.email,\n\t\t\t\t\timage: user.picture,\n\t\t\t\t\temailVerified: user.email_verified || false,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: user\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/paypal.ts\nconst paypal = (options) => {\n\tconst isSandbox = (options.environment || \"sandbox\") === \"sandbox\";\n\tconst authorizationEndpoint = isSandbox ? \"https://www.sandbox.paypal.com/signin/authorize\" : \"https://www.paypal.com/signin/authorize\";\n\tconst tokenEndpoint = isSandbox ? \"https://api-m.sandbox.paypal.com/v1/oauth2/token\" : \"https://api-m.paypal.com/v1/oauth2/token\";\n\tconst userInfoEndpoint = isSandbox ? \"https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo\" : \"https://api-m.paypal.com/v1/identity/oauth2/userinfo\";\n\treturn {\n\t\tid: \"paypal\",\n\t\tname: \"PayPal\",\n\t\tasync createAuthorizationURL({ state, codeVerifier, redirectURI }) {\n\t\t\tif (!options.clientId || !options.clientSecret) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Client Id and Client Secret is required for PayPal. Make sure to provide them in the options.\");\n\t\t\t\tthrow new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n\t\t\t}\n\t\t\treturn await (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"paypal\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint,\n\t\t\t\tscopes: [],\n\t\t\t\tstate,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\tprompt: options.prompt\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, redirectURI }) => {\n\t\t\t/**\n\t\t\t* PayPal requires Basic Auth for token exchange\n\t\t\t**/\n\t\t\tconst credentials = _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_4__.base64.encode(`${options.clientId}:${options.clientSecret}`);\n\t\t\ttry {\n\t\t\t\tconst response = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(tokenEndpoint, {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: `Basic ${credentials}`,\n\t\t\t\t\t\tAccept: \"application/json\",\n\t\t\t\t\t\t\"Accept-Language\": \"en_US\",\n\t\t\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\"\n\t\t\t\t\t},\n\t\t\t\t\tbody: new URLSearchParams({\n\t\t\t\t\t\tgrant_type: \"authorization_code\",\n\t\t\t\t\t\tcode,\n\t\t\t\t\t\tredirect_uri: redirectURI\n\t\t\t\t\t}).toString()\n\t\t\t\t});\n\t\t\t\tif (!response.data) throw new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t(\"FAILED_TO_GET_ACCESS_TOKEN\");\n\t\t\t\tconst data = response.data;\n\t\t\t\treturn {\n\t\t\t\t\taccessToken: data.access_token,\n\t\t\t\t\trefreshToken: data.refresh_token,\n\t\t\t\t\taccessTokenExpiresAt: data.expires_in ? new Date(Date.now() + data.expires_in * 1e3) : void 0,\n\t\t\t\t\tidToken: data.id_token\n\t\t\t\t};\n\t\t\t} catch (error) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"PayPal token exchange failed:\", error);\n\t\t\t\tthrow new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t(\"FAILED_TO_GET_ACCESS_TOKEN\");\n\t\t\t}\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\tconst credentials = _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_4__.base64.encode(`${options.clientId}:${options.clientSecret}`);\n\t\t\ttry {\n\t\t\t\tconst response = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(tokenEndpoint, {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: `Basic ${credentials}`,\n\t\t\t\t\t\tAccept: \"application/json\",\n\t\t\t\t\t\t\"Accept-Language\": \"en_US\",\n\t\t\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\"\n\t\t\t\t\t},\n\t\t\t\t\tbody: new URLSearchParams({\n\t\t\t\t\t\tgrant_type: \"refresh_token\",\n\t\t\t\t\t\trefresh_token: refreshToken\n\t\t\t\t\t}).toString()\n\t\t\t\t});\n\t\t\t\tif (!response.data) throw new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t(\"FAILED_TO_REFRESH_ACCESS_TOKEN\");\n\t\t\t\tconst data = response.data;\n\t\t\t\treturn {\n\t\t\t\t\taccessToken: data.access_token,\n\t\t\t\t\trefreshToken: data.refresh_token,\n\t\t\t\t\taccessTokenExpiresAt: data.expires_in ? new Date(Date.now() + data.expires_in * 1e3) : void 0\n\t\t\t\t};\n\t\t\t} catch (error) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"PayPal token refresh failed:\", error);\n\t\t\t\tthrow new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t(\"FAILED_TO_REFRESH_ACCESS_TOKEN\");\n\t\t\t}\n\t\t},\n\t\tasync verifyIdToken(token, nonce) {\n\t\t\tif (options.disableIdTokenSignIn) return false;\n\t\t\tif (options.verifyIdToken) return options.verifyIdToken(token, nonce);\n\t\t\ttry {\n\t\t\t\treturn !!(0,jose__WEBPACK_IMPORTED_MODULE_9__.decodeJwt)(token).sub;\n\t\t\t} catch (error) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Failed to verify PayPal ID token:\", error);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tif (!token.accessToken) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Access token is required to fetch PayPal user info\");\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tconst response = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(`${userInfoEndpoint}?schema=paypalv1.1`, { headers: {\n\t\t\t\t\tAuthorization: `Bearer ${token.accessToken}`,\n\t\t\t\t\tAccept: \"application/json\"\n\t\t\t\t} });\n\t\t\t\tif (!response.data) {\n\t\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Failed to fetch user info from PayPal\");\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tconst userInfo = response.data;\n\t\t\t\tconst userMap = await options.mapProfileToUser?.(userInfo);\n\t\t\t\treturn {\n\t\t\t\t\tuser: {\n\t\t\t\t\t\tid: userInfo.user_id,\n\t\t\t\t\t\tname: userInfo.name,\n\t\t\t\t\t\temail: userInfo.email,\n\t\t\t\t\t\timage: userInfo.picture,\n\t\t\t\t\t\temailVerified: userInfo.email_verified,\n\t\t\t\t\t\t...userMap\n\t\t\t\t\t},\n\t\t\t\t\tdata: userInfo\n\t\t\t\t};\n\t\t\t} catch (error) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Failed to fetch user info from PayPal:\", error);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/polar.ts\nconst polar = (options) => {\n\treturn {\n\t\tid: \"polar\",\n\t\tname: \"Polar\",\n\t\tcreateAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\n\t\t\t\t\"openid\",\n\t\t\t\t\"profile\",\n\t\t\t\t\"email\"\n\t\t\t];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"polar\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://polar.sh/oauth2/authorize\",\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\tprompt: options.prompt\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint: \"https://api.polar.sh/v1/oauth2/token\"\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: \"https://api.polar.sh/v1/oauth2/token\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://api.polar.sh/v1/oauth2/userinfo\", { headers: { Authorization: `Bearer ${token.accessToken}` } });\n\t\t\tif (error) return null;\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile.id,\n\t\t\t\t\tname: profile.public_name || profile.username,\n\t\t\t\t\temail: profile.email,\n\t\t\t\t\timage: profile.avatar_url,\n\t\t\t\t\temailVerified: profile.email_verified ?? false,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/reddit.ts\nconst reddit = (options) => {\n\treturn {\n\t\tid: \"reddit\",\n\t\tname: \"Reddit\",\n\t\tcreateAuthorizationURL({ state, scopes, redirectURI }) {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\"identity\"];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"reddit\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://www.reddit.com/api/v1/authorize\",\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tredirectURI,\n\t\t\t\tduration: options.duration\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, redirectURI }) => {\n\t\t\tconst body = new URLSearchParams({\n\t\t\t\tgrant_type: \"authorization_code\",\n\t\t\t\tcode,\n\t\t\t\tredirect_uri: options.redirectURI || redirectURI\n\t\t\t});\n\t\t\tconst { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://www.reddit.com/api/v1/access_token\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"content-type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t\taccept: \"text/plain\",\n\t\t\t\t\t\"user-agent\": \"better-auth\",\n\t\t\t\t\tAuthorization: `Basic ${_better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_4__.base64.encode(`${options.clientId}:${options.clientSecret}`)}`\n\t\t\t\t},\n\t\t\t\tbody: body.toString()\n\t\t\t});\n\t\t\tif (error) throw error;\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.d)(data);\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\tauthentication: \"basic\",\n\t\t\t\ttokenEndpoint: \"https://www.reddit.com/api/v1/access_token\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://oauth.reddit.com/api/v1/me\", { headers: {\n\t\t\t\tAuthorization: `Bearer ${token.accessToken}`,\n\t\t\t\t\"User-Agent\": \"better-auth\"\n\t\t\t} });\n\t\t\tif (error) return null;\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile.id,\n\t\t\t\t\tname: profile.name,\n\t\t\t\t\temail: profile.oauth_client_id,\n\t\t\t\t\temailVerified: profile.has_verified_email,\n\t\t\t\t\timage: profile.icon_img?.split(\"?\")[0],\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/roblox.ts\nconst roblox = (options) => {\n\treturn {\n\t\tid: \"roblox\",\n\t\tname: \"Roblox\",\n\t\tcreateAuthorizationURL({ state, scopes, redirectURI }) {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\"];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn new URL(`https://apis.roblox.com/oauth/v1/authorize?scope=${_scopes.join(\"+\")}&response_type=code&client_id=${options.clientId}&redirect_uri=${encodeURIComponent(options.redirectURI || redirectURI)}&state=${state}&prompt=${options.prompt || \"select_account consent\"}`);\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tredirectURI: options.redirectURI || redirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint: \"https://apis.roblox.com/oauth/v1/token\",\n\t\t\t\tauthentication: \"post\"\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: \"https://apis.roblox.com/oauth/v1/token\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://apis.roblox.com/oauth/v1/userinfo\", { headers: { authorization: `Bearer ${token.accessToken}` } });\n\t\t\tif (error) return null;\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile.sub,\n\t\t\t\t\tname: profile.nickname || profile.preferred_username || \"\",\n\t\t\t\t\timage: profile.picture,\n\t\t\t\t\temail: profile.preferred_username || null,\n\t\t\t\t\temailVerified: false,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: { ...profile }\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/salesforce.ts\nconst salesforce = (options) => {\n\tconst isSandbox = (options.environment ?? \"production\") === \"sandbox\";\n\tconst authorizationEndpoint = options.loginUrl ? `https://${options.loginUrl}/services/oauth2/authorize` : isSandbox ? \"https://test.salesforce.com/services/oauth2/authorize\" : \"https://login.salesforce.com/services/oauth2/authorize\";\n\tconst tokenEndpoint = options.loginUrl ? `https://${options.loginUrl}/services/oauth2/token` : isSandbox ? \"https://test.salesforce.com/services/oauth2/token\" : \"https://login.salesforce.com/services/oauth2/token\";\n\tconst userInfoEndpoint = options.loginUrl ? `https://${options.loginUrl}/services/oauth2/userinfo` : isSandbox ? \"https://test.salesforce.com/services/oauth2/userinfo\" : \"https://login.salesforce.com/services/oauth2/userinfo\";\n\treturn {\n\t\tid: \"salesforce\",\n\t\tname: \"Salesforce\",\n\t\tasync createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n\t\t\tif (!options.clientId || !options.clientSecret) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Client Id and Client Secret are required for Salesforce. Make sure to provide them in the options.\");\n\t\t\t\tthrow new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n\t\t\t}\n\t\t\tif (!codeVerifier) throw new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t(\"codeVerifier is required for Salesforce\");\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\n\t\t\t\t\"openid\",\n\t\t\t\t\"email\",\n\t\t\t\t\"profile\"\n\t\t\t];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"salesforce\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint,\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI: options.redirectURI || redirectURI\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI: options.redirectURI || redirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\ttry {\n\t\t\t\tconst { data: user } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(userInfoEndpoint, { headers: { Authorization: `Bearer ${token.accessToken}` } });\n\t\t\t\tif (!user) {\n\t\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Failed to fetch user info from Salesforce\");\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tconst userMap = await options.mapProfileToUser?.(user);\n\t\t\t\treturn {\n\t\t\t\t\tuser: {\n\t\t\t\t\t\tid: user.user_id,\n\t\t\t\t\t\tname: user.name,\n\t\t\t\t\t\temail: user.email,\n\t\t\t\t\t\timage: user.photos?.picture || user.photos?.thumbnail,\n\t\t\t\t\t\temailVerified: user.email_verified ?? false,\n\t\t\t\t\t\t...userMap\n\t\t\t\t\t},\n\t\t\t\t\tdata: user\n\t\t\t\t};\n\t\t\t} catch (error) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Failed to fetch user info from Salesforce:\", error);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/slack.ts\nconst slack = (options) => {\n\treturn {\n\t\tid: \"slack\",\n\t\tname: \"Slack\",\n\t\tcreateAuthorizationURL({ state, scopes, redirectURI }) {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\n\t\t\t\t\"openid\",\n\t\t\t\t\"profile\",\n\t\t\t\t\"email\"\n\t\t\t];\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tconst url = new URL(\"https://slack.com/openid/connect/authorize\");\n\t\t\turl.searchParams.set(\"scope\", _scopes.join(\" \"));\n\t\t\turl.searchParams.set(\"response_type\", \"code\");\n\t\t\turl.searchParams.set(\"client_id\", options.clientId);\n\t\t\turl.searchParams.set(\"redirect_uri\", options.redirectURI || redirectURI);\n\t\t\turl.searchParams.set(\"state\", state);\n\t\t\treturn url;\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint: \"https://slack.com/api/openid.connect.token\"\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: \"https://slack.com/api/openid.connect.token\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://slack.com/api/openid.connect.userInfo\", { headers: { authorization: `Bearer ${token.accessToken}` } });\n\t\t\tif (error) return null;\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile[\"https://slack.com/user_id\"],\n\t\t\t\t\tname: profile.name || \"\",\n\t\t\t\t\temail: profile.email,\n\t\t\t\t\temailVerified: profile.email_verified,\n\t\t\t\t\timage: profile.picture || profile[\"https://slack.com/user_image_512\"],\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/spotify.ts\nconst spotify = (options) => {\n\treturn {\n\t\tid: \"spotify\",\n\t\tname: \"Spotify\",\n\t\tcreateAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\"user-read-email\"];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"spotify\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://accounts.spotify.com/authorize\",\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint: \"https://accounts.spotify.com/api/token\"\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: \"https://accounts.spotify.com/api/token\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://api.spotify.com/v1/me\", {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: { Authorization: `Bearer ${token.accessToken}` }\n\t\t\t});\n\t\t\tif (error) return null;\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile.id,\n\t\t\t\t\tname: profile.display_name,\n\t\t\t\t\temail: profile.email,\n\t\t\t\t\timage: profile.images[0]?.url,\n\t\t\t\t\temailVerified: false,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/tiktok.ts\nconst tiktok = (options) => {\n\treturn {\n\t\tid: \"tiktok\",\n\t\tname: \"TikTok\",\n\t\tcreateAuthorizationURL({ state, scopes, redirectURI }) {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\"user.info.profile\"];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn new URL(`https://www.tiktok.com/v2/auth/authorize?scope=${_scopes.join(\",\")}&response_type=code&client_key=${options.clientKey}&redirect_uri=${encodeURIComponent(options.redirectURI || redirectURI)}&state=${state}`);\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tredirectURI: options.redirectURI || redirectURI,\n\t\t\t\toptions: {\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: \"https://open.tiktokapis.com/v2/oauth/token/\"\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: { clientSecret: options.clientSecret },\n\t\t\t\ttokenEndpoint: \"https://open.tiktokapis.com/v2/oauth/token/\",\n\t\t\t\tauthentication: \"post\",\n\t\t\t\textraParams: { client_key: options.clientKey }\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(`https://open.tiktokapis.com/v2/user/info/?fields=${[\n\t\t\t\t\"open_id\",\n\t\t\t\t\"avatar_large_url\",\n\t\t\t\t\"display_name\",\n\t\t\t\t\"username\"\n\t\t\t].join(\",\")}`, { headers: { authorization: `Bearer ${token.accessToken}` } });\n\t\t\tif (error) return null;\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\temail: profile.data.user.email || profile.data.user.username,\n\t\t\t\t\tid: profile.data.user.open_id,\n\t\t\t\t\tname: profile.data.user.display_name || profile.data.user.username,\n\t\t\t\t\timage: profile.data.user.avatar_large_url,\n\t\t\t\t\temailVerified: false\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/twitch.ts\nconst twitch = (options) => {\n\treturn {\n\t\tid: \"twitch\",\n\t\tname: \"Twitch\",\n\t\tcreateAuthorizationURL({ state, scopes, redirectURI }) {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\"user:read:email\", \"openid\"];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"twitch\",\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://id.twitch.tv/oauth2/authorize\",\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tclaims: options.claims || [\n\t\t\t\t\t\"email\",\n\t\t\t\t\t\"email_verified\",\n\t\t\t\t\t\"preferred_username\",\n\t\t\t\t\t\"picture\"\n\t\t\t\t]\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint: \"https://id.twitch.tv/oauth2/token\"\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: \"https://id.twitch.tv/oauth2/token\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst idToken = token.idToken;\n\t\t\tif (!idToken) {\n\t\t\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"No idToken found in token\");\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst profile = (0,jose__WEBPACK_IMPORTED_MODULE_9__.decodeJwt)(idToken);\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile.sub,\n\t\t\t\t\tname: profile.preferred_username,\n\t\t\t\t\temail: profile.email,\n\t\t\t\t\timage: profile.picture,\n\t\t\t\t\temailVerified: profile.email_verified,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/twitter.ts\nconst twitter = (options) => {\n\treturn {\n\t\tid: \"twitter\",\n\t\tname: \"Twitter\",\n\t\tcreateAuthorizationURL(data) {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\n\t\t\t\t\"users.read\",\n\t\t\t\t\"tweet.read\",\n\t\t\t\t\"offline.access\",\n\t\t\t\t\"users.email\"\n\t\t\t];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (data.scopes) _scopes.push(...data.scopes);\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"twitter\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://x.com/i/oauth2/authorize\",\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate: data.state,\n\t\t\t\tcodeVerifier: data.codeVerifier,\n\t\t\t\tredirectURI: data.redirectURI\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tcodeVerifier,\n\t\t\t\tauthentication: \"basic\",\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint: \"https://api.x.com/2/oauth2/token\"\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\tauthentication: \"basic\",\n\t\t\t\ttokenEndpoint: \"https://api.x.com/2/oauth2/token\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data: profile, error: profileError } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://api.x.com/2/users/me?user.fields=profile_image_url\", {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: { Authorization: `Bearer ${token.accessToken}` }\n\t\t\t});\n\t\t\tif (profileError) return null;\n\t\t\tconst { data: emailData, error: emailError } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://api.x.com/2/users/me?user.fields=confirmed_email\", {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: { Authorization: `Bearer ${token.accessToken}` }\n\t\t\t});\n\t\t\tlet emailVerified = false;\n\t\t\tif (!emailError && emailData?.data?.confirmed_email) {\n\t\t\t\tprofile.data.email = emailData.data.confirmed_email;\n\t\t\t\temailVerified = true;\n\t\t\t}\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile.data.id,\n\t\t\t\t\tname: profile.data.name,\n\t\t\t\t\temail: profile.data.email || profile.data.username || null,\n\t\t\t\t\timage: profile.data.profile_image_url,\n\t\t\t\t\temailVerified,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/vercel.ts\nconst vercel = (options) => {\n\treturn {\n\t\tid: \"vercel\",\n\t\tname: \"Vercel\",\n\t\tcreateAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n\t\t\tif (!codeVerifier) throw new _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t(\"codeVerifier is required for Vercel\");\n\t\t\tlet _scopes = void 0;\n\t\t\tif (options.scope !== void 0 || scopes !== void 0) {\n\t\t\t\t_scopes = [];\n\t\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\t}\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"vercel\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://vercel.com/oauth/authorize\",\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint: \"https://api.vercel.com/login/oauth/token\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://api.vercel.com/login/oauth/userinfo\", { headers: { Authorization: `Bearer ${token.accessToken}` } });\n\t\t\tif (error || !profile) return null;\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile.sub,\n\t\t\t\t\tname: profile.name ?? profile.preferred_username,\n\t\t\t\t\temail: profile.email,\n\t\t\t\t\timage: profile.picture,\n\t\t\t\t\temailVerified: profile.email_verified ?? false,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/vk.ts\nconst vk = (options) => {\n\treturn {\n\t\tid: \"vk\",\n\t\tname: \"VK\",\n\t\tasync createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n\t\t\tconst _scopes = options.disableDefaultScope ? [] : [\"email\", \"phone\"];\n\t\t\tif (options.scope) _scopes.push(...options.scope);\n\t\t\tif (scopes) _scopes.push(...scopes);\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.l)({\n\t\t\t\tid: \"vk\",\n\t\t\t\toptions,\n\t\t\t\tauthorizationEndpoint: \"https://id.vk.com/authorize\",\n\t\t\t\tscopes: _scopes,\n\t\t\t\tstate,\n\t\t\t\tredirectURI,\n\t\t\t\tcodeVerifier\n\t\t\t});\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, codeVerifier, redirectURI, deviceId }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tcodeVerifier,\n\t\t\t\tredirectURI: options.redirectURI || redirectURI,\n\t\t\t\toptions,\n\t\t\t\tdeviceId,\n\t\t\t\ttokenEndpoint: \"https://id.vk.com/oauth2/auth\"\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\t\trefreshToken,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\tclientKey: options.clientKey,\n\t\t\t\t\tclientSecret: options.clientSecret\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: \"https://id.vk.com/oauth2/auth\"\n\t\t\t});\n\t\t},\n\t\tasync getUserInfo(data) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(data);\n\t\t\tif (!data.accessToken) return null;\n\t\t\tconst formBody = new URLSearchParams({\n\t\t\t\taccess_token: data.accessToken,\n\t\t\t\tclient_id: options.clientId\n\t\t\t}).toString();\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://id.vk.com/oauth2/user_info\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n\t\t\t\tbody: formBody\n\t\t\t});\n\t\t\tif (error) return null;\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\tif (!profile.user.email && !userMap?.email) return null;\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile.user.user_id,\n\t\t\t\t\tfirst_name: profile.user.first_name,\n\t\t\t\t\tlast_name: profile.user.last_name,\n\t\t\t\t\temail: profile.user.email,\n\t\t\t\t\timage: profile.user.avatar,\n\t\t\t\t\temailVerified: false,\n\t\t\t\t\tbirthday: profile.user.birthday,\n\t\t\t\t\tsex: profile.user.sex,\n\t\t\t\t\tname: `${profile.user.first_name} ${profile.user.last_name}`,\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: profile\n\t\t\t};\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n//#region src/social-providers/zoom.ts\nconst zoom = (userOptions) => {\n\tconst options = {\n\t\tpkce: true,\n\t\t...userOptions\n\t};\n\treturn {\n\t\tid: \"zoom\",\n\t\tname: \"Zoom\",\n\t\tcreateAuthorizationURL: async ({ state, redirectURI, codeVerifier }) => {\n\t\t\tconst params = new URLSearchParams({\n\t\t\t\tresponse_type: \"code\",\n\t\t\t\tredirect_uri: options.redirectURI ? options.redirectURI : redirectURI,\n\t\t\t\tclient_id: options.clientId,\n\t\t\t\tstate\n\t\t\t});\n\t\t\tif (options.pkce) {\n\t\t\t\tconst codeChallenge = await (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.u)(codeVerifier);\n\t\t\t\tparams.set(\"code_challenge_method\", \"S256\");\n\t\t\t\tparams.set(\"code_challenge\", codeChallenge);\n\t\t\t}\n\t\t\tconst url = new URL(\"https://zoom.us/oauth/authorize\");\n\t\t\turl.search = params.toString();\n\t\t\treturn url;\n\t\t},\n\t\tvalidateAuthorizationCode: async ({ code, redirectURI, codeVerifier }) => {\n\t\t\treturn (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n\t\t\t\tcode,\n\t\t\t\tredirectURI: options.redirectURI || redirectURI,\n\t\t\t\tcodeVerifier,\n\t\t\t\toptions,\n\t\t\t\ttokenEndpoint: \"https://zoom.us/oauth/token\",\n\t\t\t\tauthentication: \"post\"\n\t\t\t});\n\t\t},\n\t\trefreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => (0,_oauth2_BjWM15hm_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n\t\t\trefreshToken,\n\t\t\toptions: {\n\t\t\t\tclientId: options.clientId,\n\t\t\t\tclientKey: options.clientKey,\n\t\t\t\tclientSecret: options.clientSecret\n\t\t\t},\n\t\t\ttokenEndpoint: \"https://zoom.us/oauth/token\"\n\t\t}),\n\t\tasync getUserInfo(token) {\n\t\t\tif (options.getUserInfo) return options.getUserInfo(token);\n\t\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.betterFetch)(\"https://api.zoom.us/v2/users/me\", { headers: { authorization: `Bearer ${token.accessToken}` } });\n\t\t\tif (error) return null;\n\t\t\tconst userMap = await options.mapProfileToUser?.(profile);\n\t\t\treturn {\n\t\t\t\tuser: {\n\t\t\t\t\tid: profile.id,\n\t\t\t\t\tname: profile.display_name,\n\t\t\t\t\timage: profile.pic_url,\n\t\t\t\t\temail: profile.email,\n\t\t\t\t\temailVerified: Boolean(profile.verified),\n\t\t\t\t\t...userMap\n\t\t\t\t},\n\t\t\t\tdata: { ...profile }\n\t\t\t};\n\t\t}\n\t};\n};\n\n//#endregion\n//#region src/social-providers/index.ts\nconst socialProviders = {\n\tapple,\n\tatlassian,\n\tcognito,\n\tdiscord,\n\tfacebook,\n\tfigma,\n\tgithub,\n\tmicrosoft,\n\tgoogle,\n\thuggingface,\n\tslack,\n\tspotify,\n\ttwitch,\n\ttwitter,\n\tdropbox,\n\tkick,\n\tlinear,\n\tlinkedin,\n\tgitlab,\n\ttiktok,\n\treddit,\n\troblox,\n\tsalesforce,\n\tvk,\n\tzoom,\n\tnotion,\n\tkakao,\n\tnaver,\n\tline,\n\tpaybin,\n\tpaypal,\n\tpolar,\n\tvercel\n};\nconst socialProviderList = Object.keys(socialProviders);\nconst SocialProviderListEnum = zod__WEBPACK_IMPORTED_MODULE_12__[\"enum\"](socialProviderList).or(zod__WEBPACK_IMPORTED_MODULE_12__.string());\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L3NvY2lhbC1wcm92aWRlcnMvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBa0Q7QUFDbkI7QUFDOEI7QUFDbUg7QUFDdko7QUFDMEI7QUFDRDtBQUNnRDtBQUMzRDs7QUFFdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDRCQUE0QjtBQUM3RDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsdURBQXNCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNILHNDQUFzQyxpQ0FBaUM7QUFDdkUsVUFBVSx1REFBeUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsV0FBVyxtQkFBbUIsRUFBRSwyREFBcUI7QUFDckQ7QUFDQSxXQUFXLHFCQUFxQixRQUFRLCtDQUFTO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLFVBQVUsdURBQWtCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiwrQ0FBUztBQUM1QjtBQUNBLGdDQUFnQyw0QkFBNEIsRUFBRSwwQkFBMEI7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFL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b25lMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcLnBucG1cXEBiZXR0ZXItYXV0aCtjb3JlQDEuNC4xMF9AYl9lMGM3ZTE4NjA3OTY1YTYyMmMwMTMxM2ZmOTQ2ZjU0ZFxcbm9kZV9tb2R1bGVzXFxAYmV0dGVyLWF1dGhcXGNvcmVcXGRpc3RcXHNvY2lhbC1wcm92aWRlcnNcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpIGFzIGxvZ2dlciB9IGZyb20gXCIuLi9lbnYtRGJzc216b0subWpzXCI7XG5pbXBvcnQgXCIuLi91dGlscy1ObG9JWFlFMC5tanNcIjtcbmltcG9ydCB7IHQgYXMgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIi4uL2Vycm9yLVJ0S3dyM1B1Lm1qc1wiO1xuaW1wb3J0IHsgYSBhcyB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlLCBjIGFzIHJlZnJlc2hBY2Nlc3NUb2tlbiwgZCBhcyBnZXRPQXV0aDJUb2tlbnMsIGwgYXMgY3JlYXRlQXV0aG9yaXphdGlvblVSTCwgdSBhcyBnZW5lcmF0ZUNvZGVDaGFsbGVuZ2UgfSBmcm9tIFwiLi4vb2F1dGgyLUJqV00xNWhtLm1qc1wiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBiYXNlNjQgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2Jhc2U2NFwiO1xuaW1wb3J0IHsgYmV0dGVyRmV0Y2ggfSBmcm9tIFwiQGJldHRlci1mZXRjaC9mZXRjaFwiO1xuaW1wb3J0IHsgY3JlYXRlUmVtb3RlSldLU2V0LCBkZWNvZGVKd3QsIGRlY29kZVByb3RlY3RlZEhlYWRlciwgaW1wb3J0SldLLCBqd3RWZXJpZnkgfSBmcm9tIFwiam9zZVwiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcblxuLy8jcmVnaW9uIHNyYy9zb2NpYWwtcHJvdmlkZXJzL2FwcGxlLnRzXG5jb25zdCBhcHBsZSA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IHRva2VuRW5kcG9pbnQgPSBcImh0dHBzOi8vYXBwbGVpZC5hcHBsZS5jb20vYXV0aC90b2tlblwiO1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcImFwcGxlXCIsXG5cdFx0bmFtZTogXCJBcHBsZVwiLFxuXHRcdGFzeW5jIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCByZWRpcmVjdFVSSSB9KSB7XG5cdFx0XHRjb25zdCBfc2NvcGUgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcImVtYWlsXCIsIFwibmFtZVwiXTtcblx0XHRcdGlmIChvcHRpb25zLnNjb3BlKSBfc2NvcGUucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcblx0XHRcdGlmIChzY29wZXMpIF9zY29wZS5wdXNoKC4uLnNjb3Blcyk7XG5cdFx0XHRyZXR1cm4gYXdhaXQgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG5cdFx0XHRcdGlkOiBcImFwcGxlXCIsXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdGF1dGhvcml6YXRpb25FbmRwb2ludDogXCJodHRwczovL2FwcGxlaWQuYXBwbGUuY29tL2F1dGgvYXV0aG9yaXplXCIsXG5cdFx0XHRcdHNjb3BlczogX3Njb3BlLFxuXHRcdFx0XHRzdGF0ZSxcblx0XHRcdFx0cmVkaXJlY3RVUkksXG5cdFx0XHRcdHJlc3BvbnNlTW9kZTogXCJmb3JtX3Bvc3RcIixcblx0XHRcdFx0cmVzcG9uc2VUeXBlOiBcImNvZGUgaWRfdG9rZW5cIlxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHR2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCBjb2RlVmVyaWZpZXIsIHJlZGlyZWN0VVJJIH0pID0+IHtcblx0XHRcdHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcblx0XHRcdFx0Y29kZSxcblx0XHRcdFx0Y29kZVZlcmlmaWVyLFxuXHRcdFx0XHRyZWRpcmVjdFVSSSxcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0dG9rZW5FbmRwb2ludFxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRhc3luYyB2ZXJpZnlJZFRva2VuKHRva2VuLCBub25jZSkge1xuXHRcdFx0aWYgKG9wdGlvbnMuZGlzYWJsZUlkVG9rZW5TaWduSW4pIHJldHVybiBmYWxzZTtcblx0XHRcdGlmIChvcHRpb25zLnZlcmlmeUlkVG9rZW4pIHJldHVybiBvcHRpb25zLnZlcmlmeUlkVG9rZW4odG9rZW4sIG5vbmNlKTtcblx0XHRcdGNvbnN0IHsga2lkLCBhbGc6IGp3dEFsZyB9ID0gZGVjb2RlUHJvdGVjdGVkSGVhZGVyKHRva2VuKTtcblx0XHRcdGlmICgha2lkIHx8ICFqd3RBbGcpIHJldHVybiBmYWxzZTtcblx0XHRcdGNvbnN0IHsgcGF5bG9hZDogand0Q2xhaW1zIH0gPSBhd2FpdCBqd3RWZXJpZnkodG9rZW4sIGF3YWl0IGdldEFwcGxlUHVibGljS2V5KGtpZCksIHtcblx0XHRcdFx0YWxnb3JpdGhtczogW2p3dEFsZ10sXG5cdFx0XHRcdGlzc3VlcjogXCJodHRwczovL2FwcGxlaWQuYXBwbGUuY29tXCIsXG5cdFx0XHRcdGF1ZGllbmNlOiBvcHRpb25zLmF1ZGllbmNlICYmIG9wdGlvbnMuYXVkaWVuY2UubGVuZ3RoID8gb3B0aW9ucy5hdWRpZW5jZSA6IG9wdGlvbnMuYXBwQnVuZGxlSWRlbnRpZmllciA/IG9wdGlvbnMuYXBwQnVuZGxlSWRlbnRpZmllciA6IG9wdGlvbnMuY2xpZW50SWQsXG5cdFx0XHRcdG1heFRva2VuQWdlOiBcIjFoXCJcblx0XHRcdH0pO1xuXHRcdFx0W1wiZW1haWxfdmVyaWZpZWRcIiwgXCJpc19wcml2YXRlX2VtYWlsXCJdLmZvckVhY2goKGZpZWxkKSA9PiB7XG5cdFx0XHRcdGlmIChqd3RDbGFpbXNbZmllbGRdICE9PSB2b2lkIDApIGp3dENsYWltc1tmaWVsZF0gPSBCb29sZWFuKGp3dENsYWltc1tmaWVsZF0pO1xuXHRcdFx0fSk7XG5cdFx0XHRpZiAobm9uY2UgJiYgand0Q2xhaW1zLm5vbmNlICE9PSBub25jZSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0cmV0dXJuICEhand0Q2xhaW1zO1xuXHRcdH0sXG5cdFx0cmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuXHRcdFx0cmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG5cdFx0XHRcdHJlZnJlc2hUb2tlbixcblx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG5cdFx0XHRcdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vYXBwbGVpZC5hcHBsZS5jb20vYXV0aC90b2tlblwiXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG5cdFx0XHRpZiAob3B0aW9ucy5nZXRVc2VySW5mbykgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuXHRcdFx0aWYgKCF0b2tlbi5pZFRva2VuKSByZXR1cm4gbnVsbDtcblx0XHRcdGNvbnN0IHByb2ZpbGUgPSBkZWNvZGVKd3QodG9rZW4uaWRUb2tlbik7XG5cdFx0XHRpZiAoIXByb2ZpbGUpIHJldHVybiBudWxsO1xuXHRcdFx0Y29uc3QgbmFtZSA9IHRva2VuLnVzZXIgPyBgJHt0b2tlbi51c2VyLm5hbWU/LmZpcnN0TmFtZX0gJHt0b2tlbi51c2VyLm5hbWU/Lmxhc3ROYW1lfWAgOiBwcm9maWxlLm5hbWUgfHwgcHJvZmlsZS5lbWFpbDtcblx0XHRcdGNvbnN0IGVtYWlsVmVyaWZpZWQgPSB0eXBlb2YgcHJvZmlsZS5lbWFpbF92ZXJpZmllZCA9PT0gXCJib29sZWFuXCIgPyBwcm9maWxlLmVtYWlsX3ZlcmlmaWVkIDogcHJvZmlsZS5lbWFpbF92ZXJpZmllZCA9PT0gXCJ0cnVlXCI7XG5cdFx0XHRjb25zdCBlbnJpY2hlZFByb2ZpbGUgPSB7XG5cdFx0XHRcdC4uLnByb2ZpbGUsXG5cdFx0XHRcdG5hbWVcblx0XHRcdH07XG5cdFx0XHRjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4oZW5yaWNoZWRQcm9maWxlKTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRpZDogcHJvZmlsZS5zdWIsXG5cdFx0XHRcdFx0bmFtZTogZW5yaWNoZWRQcm9maWxlLm5hbWUsXG5cdFx0XHRcdFx0ZW1haWxWZXJpZmllZCxcblx0XHRcdFx0XHRlbWFpbDogcHJvZmlsZS5lbWFpbCxcblx0XHRcdFx0XHQuLi51c2VyTWFwXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRhdGE6IGVucmljaGVkUHJvZmlsZVxuXHRcdFx0fTtcblx0XHR9LFxuXHRcdG9wdGlvbnNcblx0fTtcbn07XG5jb25zdCBnZXRBcHBsZVB1YmxpY0tleSA9IGFzeW5jIChraWQpID0+IHtcblx0Y29uc3QgeyBkYXRhIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChgaHR0cHM6Ly9hcHBsZWlkLmFwcGxlLmNvbS9hdXRoL2tleXNgKTtcblx0aWYgKCFkYXRhPy5rZXlzKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiS2V5cyBub3QgZm91bmRcIiB9KTtcblx0Y29uc3QgandrID0gZGF0YS5rZXlzLmZpbmQoKGtleSkgPT4ga2V5LmtpZCA9PT0ga2lkKTtcblx0aWYgKCFqd2spIHRocm93IG5ldyBFcnJvcihgSldLIHdpdGgga2lkICR7a2lkfSBub3QgZm91bmRgKTtcblx0cmV0dXJuIGF3YWl0IGltcG9ydEpXSyhqd2ssIGp3ay5hbGcpO1xufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL3NvY2lhbC1wcm92aWRlcnMvYXRsYXNzaWFuLnRzXG5jb25zdCBhdGxhc3NpYW4gPSAob3B0aW9ucykgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcImF0bGFzc2lhblwiLFxuXHRcdG5hbWU6IFwiQXRsYXNzaWFuXCIsXG5cdFx0YXN5bmMgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkge1xuXHRcdFx0aWYgKCFvcHRpb25zLmNsaWVudElkIHx8ICFvcHRpb25zLmNsaWVudFNlY3JldCkge1xuXHRcdFx0XHRsb2dnZXIuZXJyb3IoXCJDbGllbnQgSWQgYW5kIFNlY3JldCBhcmUgcmVxdWlyZWQgZm9yIEF0bGFzc2lhblwiKTtcblx0XHRcdFx0dGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkNMSUVOVF9JRF9BTkRfU0VDUkVUX1JFUVVJUkVEXCIpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFjb2RlVmVyaWZpZXIpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJjb2RlVmVyaWZpZXIgaXMgcmVxdWlyZWQgZm9yIEF0bGFzc2lhblwiKTtcblx0XHRcdGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcInJlYWQ6amlyYS11c2VyXCIsIFwib2ZmbGluZV9hY2Nlc3NcIl07XG5cdFx0XHRpZiAob3B0aW9ucy5zY29wZSkgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuXHRcdFx0aWYgKHNjb3BlcykgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG5cdFx0XHRyZXR1cm4gY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG5cdFx0XHRcdGlkOiBcImF0bGFzc2lhblwiLFxuXHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHRhdXRob3JpemF0aW9uRW5kcG9pbnQ6IFwiaHR0cHM6Ly9hdXRoLmF0bGFzc2lhbi5jb20vYXV0aG9yaXplXCIsXG5cdFx0XHRcdHNjb3BlczogX3Njb3Blcyxcblx0XHRcdFx0c3RhdGUsXG5cdFx0XHRcdGNvZGVWZXJpZmllcixcblx0XHRcdFx0cmVkaXJlY3RVUkksXG5cdFx0XHRcdGFkZGl0aW9uYWxQYXJhbXM6IHsgYXVkaWVuY2U6IFwiYXBpLmF0bGFzc2lhbi5jb21cIiB9LFxuXHRcdFx0XHRwcm9tcHQ6IG9wdGlvbnMucHJvbXB0XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuXHRcdFx0cmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuXHRcdFx0XHRjb2RlLFxuXHRcdFx0XHRjb2RlVmVyaWZpZXIsXG5cdFx0XHRcdHJlZGlyZWN0VVJJLFxuXHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vYXV0aC5hdGxhc3NpYW4uY29tL29hdXRoL3Rva2VuXCJcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0cmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuXHRcdFx0cmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG5cdFx0XHRcdHJlZnJlc2hUb2tlbixcblx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcblx0XHRcdFx0fSxcblx0XHRcdFx0dG9rZW5FbmRwb2ludDogXCJodHRwczovL2F1dGguYXRsYXNzaWFuLmNvbS9vYXV0aC90b2tlblwiXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG5cdFx0XHRpZiAob3B0aW9ucy5nZXRVc2VySW5mbykgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuXHRcdFx0aWYgKCF0b2tlbi5hY2Nlc3NUb2tlbikgcmV0dXJuIG51bGw7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCB7IGRhdGE6IHByb2ZpbGUgfSA9IGF3YWl0IGJldHRlckZldGNoKFwiaHR0cHM6Ly9hcGkuYXRsYXNzaWFuLmNvbS9tZVwiLCB7IGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWAgfSB9KTtcblx0XHRcdFx0aWYgKCFwcm9maWxlKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0Y29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdGlkOiBwcm9maWxlLmFjY291bnRfaWQsXG5cdFx0XHRcdFx0XHRuYW1lOiBwcm9maWxlLm5hbWUsXG5cdFx0XHRcdFx0XHRlbWFpbDogcHJvZmlsZS5lbWFpbCxcblx0XHRcdFx0XHRcdGltYWdlOiBwcm9maWxlLnBpY3R1cmUsXG5cdFx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiBmYWxzZSxcblx0XHRcdFx0XHRcdC4uLnVzZXJNYXBcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGRhdGE6IHByb2ZpbGVcblx0XHRcdFx0fTtcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCB1c2VyIGluZm8gZnJvbSBGaWdtYTpcIiwgZXJyb3IpO1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblx0XHR9LFxuXHRcdG9wdGlvbnNcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9zb2NpYWwtcHJvdmlkZXJzL2NvZ25pdG8udHNcbmNvbnN0IGNvZ25pdG8gPSAob3B0aW9ucykgPT4ge1xuXHRpZiAoIW9wdGlvbnMuZG9tYWluIHx8ICFvcHRpb25zLnJlZ2lvbiB8fCAhb3B0aW9ucy51c2VyUG9vbElkKSB7XG5cdFx0bG9nZ2VyLmVycm9yKFwiRG9tYWluLCByZWdpb24gYW5kIHVzZXJQb29sSWQgYXJlIHJlcXVpcmVkIGZvciBBbWF6b24gQ29nbml0by4gTWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhlbSBpbiB0aGUgb3B0aW9ucy5cIik7XG5cdFx0dGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkRPTUFJTl9BTkRfUkVHSU9OX1JFUVVJUkVEXCIpO1xuXHR9XG5cdGNvbnN0IGNsZWFuRG9tYWluID0gb3B0aW9ucy5kb21haW4ucmVwbGFjZSgvXmh0dHBzPzpcXC9cXC8vLCBcIlwiKTtcblx0Y29uc3QgYXV0aG9yaXphdGlvbkVuZHBvaW50ID0gYGh0dHBzOi8vJHtjbGVhbkRvbWFpbn0vb2F1dGgyL2F1dGhvcml6ZWA7XG5cdGNvbnN0IHRva2VuRW5kcG9pbnQgPSBgaHR0cHM6Ly8ke2NsZWFuRG9tYWlufS9vYXV0aDIvdG9rZW5gO1xuXHRjb25zdCB1c2VySW5mb0VuZHBvaW50ID0gYGh0dHBzOi8vJHtjbGVhbkRvbWFpbn0vb2F1dGgyL3VzZXJpbmZvYDtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJjb2duaXRvXCIsXG5cdFx0bmFtZTogXCJDb2duaXRvXCIsXG5cdFx0YXN5bmMgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkge1xuXHRcdFx0aWYgKCFvcHRpb25zLmNsaWVudElkKSB7XG5cdFx0XHRcdGxvZ2dlci5lcnJvcihcIkNsaWVudElkIGlzIHJlcXVpcmVkIGZvciBBbWF6b24gQ29nbml0by4gTWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhlbSBpbiB0aGUgb3B0aW9ucy5cIik7XG5cdFx0XHRcdHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJDTElFTlRfSURfQU5EX1NFQ1JFVF9SRVFVSVJFRFwiKTtcblx0XHRcdH1cblx0XHRcdGlmIChvcHRpb25zLnJlcXVpcmVDbGllbnRTZWNyZXQgJiYgIW9wdGlvbnMuY2xpZW50U2VjcmV0KSB7XG5cdFx0XHRcdGxvZ2dlci5lcnJvcihcIkNsaWVudCBTZWNyZXQgaXMgcmVxdWlyZWQgd2hlbiByZXF1aXJlQ2xpZW50U2VjcmV0IGlzIHRydWUuIE1ha2Ugc3VyZSB0byBwcm92aWRlIGl0IGluIHRoZSBvcHRpb25zLlwiKTtcblx0XHRcdFx0dGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkNMSUVOVF9TRUNSRVRfUkVRVUlSRURcIik7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXG5cdFx0XHRcdFwib3BlbmlkXCIsXG5cdFx0XHRcdFwicHJvZmlsZVwiLFxuXHRcdFx0XHRcImVtYWlsXCJcblx0XHRcdF07XG5cdFx0XHRpZiAob3B0aW9ucy5zY29wZSkgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuXHRcdFx0aWYgKHNjb3BlcykgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG5cdFx0XHRjb25zdCB1cmwgPSBhd2FpdCBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcblx0XHRcdFx0aWQ6IFwiY29nbml0b1wiLFxuXHRcdFx0XHRvcHRpb25zOiB7IC4uLm9wdGlvbnMgfSxcblx0XHRcdFx0YXV0aG9yaXphdGlvbkVuZHBvaW50LFxuXHRcdFx0XHRzY29wZXM6IF9zY29wZXMsXG5cdFx0XHRcdHN0YXRlLFxuXHRcdFx0XHRjb2RlVmVyaWZpZXIsXG5cdFx0XHRcdHJlZGlyZWN0VVJJLFxuXHRcdFx0XHRwcm9tcHQ6IG9wdGlvbnMucHJvbXB0XG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IHNjb3BlVmFsdWUgPSB1cmwuc2VhcmNoUGFyYW1zLmdldChcInNjb3BlXCIpO1xuXHRcdFx0aWYgKHNjb3BlVmFsdWUpIHtcblx0XHRcdFx0dXJsLnNlYXJjaFBhcmFtcy5kZWxldGUoXCJzY29wZVwiKTtcblx0XHRcdFx0Y29uc3QgZW5jb2RlZFNjb3BlID0gZW5jb2RlVVJJQ29tcG9uZW50KHNjb3BlVmFsdWUpO1xuXHRcdFx0XHRjb25zdCB1cmxTdHJpbmcgPSB1cmwudG9TdHJpbmcoKTtcblx0XHRcdFx0Y29uc3Qgc2VwYXJhdG9yID0gdXJsU3RyaW5nLmluY2x1ZGVzKFwiP1wiKSA/IFwiJlwiIDogXCI/XCI7XG5cdFx0XHRcdHJldHVybiBuZXcgVVJMKGAke3VybFN0cmluZ30ke3NlcGFyYXRvcn1zY29wZT0ke2VuY29kZWRTY29wZX1gKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB1cmw7XG5cdFx0fSxcblx0XHR2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCBjb2RlVmVyaWZpZXIsIHJlZGlyZWN0VVJJIH0pID0+IHtcblx0XHRcdHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcblx0XHRcdFx0Y29kZSxcblx0XHRcdFx0Y29kZVZlcmlmaWVyLFxuXHRcdFx0XHRyZWRpcmVjdFVSSSxcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0dG9rZW5FbmRwb2ludFxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRyZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG5cdFx0XHRyZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcblx0XHRcdFx0cmVmcmVzaFRva2VuLFxuXHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0Y2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG5cdFx0XHRcdFx0Y2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcblx0XHRcdFx0XHRjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRva2VuRW5kcG9pbnRcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0YXN5bmMgdmVyaWZ5SWRUb2tlbih0b2tlbiwgbm9uY2UpIHtcblx0XHRcdGlmIChvcHRpb25zLmRpc2FibGVJZFRva2VuU2lnbkluKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRpZiAob3B0aW9ucy52ZXJpZnlJZFRva2VuKSByZXR1cm4gb3B0aW9ucy52ZXJpZnlJZFRva2VuKHRva2VuLCBub25jZSk7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCB7IGtpZCwgYWxnOiBqd3RBbGcgfSA9IGRlY29kZVByb3RlY3RlZEhlYWRlcih0b2tlbik7XG5cdFx0XHRcdGlmICgha2lkIHx8ICFqd3RBbGcpIHJldHVybiBmYWxzZTtcblx0XHRcdFx0Y29uc3QgcHVibGljS2V5ID0gYXdhaXQgZ2V0Q29nbml0b1B1YmxpY0tleShraWQsIG9wdGlvbnMucmVnaW9uLCBvcHRpb25zLnVzZXJQb29sSWQpO1xuXHRcdFx0XHRjb25zdCBleHBlY3RlZElzc3VlciA9IGBodHRwczovL2NvZ25pdG8taWRwLiR7b3B0aW9ucy5yZWdpb259LmFtYXpvbmF3cy5jb20vJHtvcHRpb25zLnVzZXJQb29sSWR9YDtcblx0XHRcdFx0Y29uc3QgeyBwYXlsb2FkOiBqd3RDbGFpbXMgfSA9IGF3YWl0IGp3dFZlcmlmeSh0b2tlbiwgcHVibGljS2V5LCB7XG5cdFx0XHRcdFx0YWxnb3JpdGhtczogW2p3dEFsZ10sXG5cdFx0XHRcdFx0aXNzdWVyOiBleHBlY3RlZElzc3Vlcixcblx0XHRcdFx0XHRhdWRpZW5jZTogb3B0aW9ucy5jbGllbnRJZCxcblx0XHRcdFx0XHRtYXhUb2tlbkFnZTogXCIxaFwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAobm9uY2UgJiYgand0Q2xhaW1zLm5vbmNlICE9PSBub25jZSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byB2ZXJpZnkgSUQgdG9rZW46XCIsIGVycm9yKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0YXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcblx0XHRcdGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG5cdFx0XHRpZiAodG9rZW4uaWRUb2tlbikgdHJ5IHtcblx0XHRcdFx0Y29uc3QgcHJvZmlsZSA9IGRlY29kZUp3dCh0b2tlbi5pZFRva2VuKTtcblx0XHRcdFx0aWYgKCFwcm9maWxlKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0Y29uc3QgbmFtZSA9IHByb2ZpbGUubmFtZSB8fCBwcm9maWxlLmdpdmVuX25hbWUgfHwgcHJvZmlsZS51c2VybmFtZSB8fCBwcm9maWxlLmVtYWlsO1xuXHRcdFx0XHRjb25zdCBlbnJpY2hlZFByb2ZpbGUgPSB7XG5cdFx0XHRcdFx0Li4ucHJvZmlsZSxcblx0XHRcdFx0XHRuYW1lXG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/LihlbnJpY2hlZFByb2ZpbGUpO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdGlkOiBwcm9maWxlLnN1Yixcblx0XHRcdFx0XHRcdG5hbWU6IGVucmljaGVkUHJvZmlsZS5uYW1lLFxuXHRcdFx0XHRcdFx0ZW1haWw6IHByb2ZpbGUuZW1haWwsXG5cdFx0XHRcdFx0XHRpbWFnZTogcHJvZmlsZS5waWN0dXJlLFxuXHRcdFx0XHRcdFx0ZW1haWxWZXJpZmllZDogcHJvZmlsZS5lbWFpbF92ZXJpZmllZCxcblx0XHRcdFx0XHRcdC4uLnVzZXJNYXBcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGRhdGE6IGVucmljaGVkUHJvZmlsZVxuXHRcdFx0XHR9O1xuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0bG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGRlY29kZSBJRCB0b2tlbjpcIiwgZXJyb3IpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRva2VuLmFjY2Vzc1Rva2VuKSB0cnkge1xuXHRcdFx0XHRjb25zdCB7IGRhdGE6IHVzZXJJbmZvIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaCh1c2VySW5mb0VuZHBvaW50LCB7IGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWAgfSB9KTtcblx0XHRcdFx0aWYgKHVzZXJJbmZvKSB7XG5cdFx0XHRcdFx0Y29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHVzZXJJbmZvKTtcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdFx0XHRpZDogdXNlckluZm8uc3ViLFxuXHRcdFx0XHRcdFx0XHRuYW1lOiB1c2VySW5mby5uYW1lIHx8IHVzZXJJbmZvLmdpdmVuX25hbWUgfHwgdXNlckluZm8udXNlcm5hbWUsXG5cdFx0XHRcdFx0XHRcdGVtYWlsOiB1c2VySW5mby5lbWFpbCxcblx0XHRcdFx0XHRcdFx0aW1hZ2U6IHVzZXJJbmZvLnBpY3R1cmUsXG5cdFx0XHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHVzZXJJbmZvLmVtYWlsX3ZlcmlmaWVkLFxuXHRcdFx0XHRcdFx0XHQuLi51c2VyTWFwXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0ZGF0YTogdXNlckluZm9cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggdXNlciBpbmZvIGZyb20gQ29nbml0bzpcIiwgZXJyb3IpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fSxcblx0XHRvcHRpb25zXG5cdH07XG59O1xuY29uc3QgZ2V0Q29nbml0b1B1YmxpY0tleSA9IGFzeW5jIChraWQsIHJlZ2lvbiwgdXNlclBvb2xJZCkgPT4ge1xuXHRjb25zdCBDT0dOSVRPX0pXS1NfVVJJID0gYGh0dHBzOi8vY29nbml0by1pZHAuJHtyZWdpb259LmFtYXpvbmF3cy5jb20vJHt1c2VyUG9vbElkfS8ud2VsbC1rbm93bi9qd2tzLmpzb25gO1xuXHR0cnkge1xuXHRcdGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goQ09HTklUT19KV0tTX1VSSSk7XG5cdFx0aWYgKCFkYXRhPy5rZXlzKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiS2V5cyBub3QgZm91bmRcIiB9KTtcblx0XHRjb25zdCBqd2sgPSBkYXRhLmtleXMuZmluZCgoa2V5KSA9PiBrZXkua2lkID09PSBraWQpO1xuXHRcdGlmICghandrKSB0aHJvdyBuZXcgRXJyb3IoYEpXSyB3aXRoIGtpZCAke2tpZH0gbm90IGZvdW5kYCk7XG5cdFx0cmV0dXJuIGF3YWl0IGltcG9ydEpXSyhqd2ssIGp3ay5hbGcpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCBDb2duaXRvIHB1YmxpYyBrZXk6XCIsIGVycm9yKTtcblx0XHR0aHJvdyBlcnJvcjtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL3NvY2lhbC1wcm92aWRlcnMvZGlzY29yZC50c1xuY29uc3QgZGlzY29yZCA9IChvcHRpb25zKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwiZGlzY29yZFwiLFxuXHRcdG5hbWU6IFwiRGlzY29yZFwiLFxuXHRcdGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCByZWRpcmVjdFVSSSB9KSB7XG5cdFx0XHRjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJpZGVudGlmeVwiLCBcImVtYWlsXCJdO1xuXHRcdFx0aWYgKHNjb3BlcykgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG5cdFx0XHRpZiAob3B0aW9ucy5zY29wZSkgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuXHRcdFx0Y29uc3QgcGVybWlzc2lvbnNQYXJhbSA9IF9zY29wZXMuaW5jbHVkZXMoXCJib3RcIikgJiYgb3B0aW9ucy5wZXJtaXNzaW9ucyAhPT0gdm9pZCAwID8gYCZwZXJtaXNzaW9ucz0ke29wdGlvbnMucGVybWlzc2lvbnN9YCA6IFwiXCI7XG5cdFx0XHRyZXR1cm4gbmV3IFVSTChgaHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvb2F1dGgyL2F1dGhvcml6ZT9zY29wZT0ke19zY29wZXMuam9pbihcIitcIil9JnJlc3BvbnNlX3R5cGU9Y29kZSZjbGllbnRfaWQ9JHtvcHRpb25zLmNsaWVudElkfSZyZWRpcmVjdF91cmk9JHtlbmNvZGVVUklDb21wb25lbnQob3B0aW9ucy5yZWRpcmVjdFVSSSB8fCByZWRpcmVjdFVSSSl9JnN0YXRlPSR7c3RhdGV9JnByb21wdD0ke29wdGlvbnMucHJvbXB0IHx8IFwibm9uZVwifSR7cGVybWlzc2lvbnNQYXJhbX1gKTtcblx0XHR9LFxuXHRcdHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIHJlZGlyZWN0VVJJIH0pID0+IHtcblx0XHRcdHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcblx0XHRcdFx0Y29kZSxcblx0XHRcdFx0cmVkaXJlY3RVUkksXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvb2F1dGgyL3Rva2VuXCJcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0cmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuXHRcdFx0cmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG5cdFx0XHRcdHJlZnJlc2hUb2tlbixcblx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG5cdFx0XHRcdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vZGlzY29yZC5jb20vYXBpL29hdXRoMi90b2tlblwiXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG5cdFx0XHRpZiAob3B0aW9ucy5nZXRVc2VySW5mbykgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuXHRcdFx0Y29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXCJodHRwczovL2Rpc2NvcmQuY29tL2FwaS91c2Vycy9AbWVcIiwgeyBoZWFkZXJzOiB7IGF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gIH0gfSk7XG5cdFx0XHRpZiAoZXJyb3IpIHJldHVybiBudWxsO1xuXHRcdFx0aWYgKHByb2ZpbGUuYXZhdGFyID09PSBudWxsKSBwcm9maWxlLmltYWdlX3VybCA9IGBodHRwczovL2Nkbi5kaXNjb3JkYXBwLmNvbS9lbWJlZC9hdmF0YXJzLyR7cHJvZmlsZS5kaXNjcmltaW5hdG9yID09PSBcIjBcIiA/IE51bWJlcihCaWdJbnQocHJvZmlsZS5pZCkgPj4gQmlnSW50KDIyKSkgJSA2IDogcGFyc2VJbnQocHJvZmlsZS5kaXNjcmltaW5hdG9yKSAlIDV9LnBuZ2A7XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0Y29uc3QgZm9ybWF0ID0gcHJvZmlsZS5hdmF0YXIuc3RhcnRzV2l0aChcImFfXCIpID8gXCJnaWZcIiA6IFwicG5nXCI7XG5cdFx0XHRcdHByb2ZpbGUuaW1hZ2VfdXJsID0gYGh0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2F2YXRhcnMvJHtwcm9maWxlLmlkfS8ke3Byb2ZpbGUuYXZhdGFyfS4ke2Zvcm1hdH1gO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdGlkOiBwcm9maWxlLmlkLFxuXHRcdFx0XHRcdG5hbWU6IHByb2ZpbGUuZ2xvYmFsX25hbWUgfHwgcHJvZmlsZS51c2VybmFtZSB8fCBcIlwiLFxuXHRcdFx0XHRcdGVtYWlsOiBwcm9maWxlLmVtYWlsLFxuXHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHByb2ZpbGUudmVyaWZpZWQsXG5cdFx0XHRcdFx0aW1hZ2U6IHByb2ZpbGUuaW1hZ2VfdXJsLFxuXHRcdFx0XHRcdC4uLnVzZXJNYXBcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGF0YTogcHJvZmlsZVxuXHRcdFx0fTtcblx0XHR9LFxuXHRcdG9wdGlvbnNcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9zb2NpYWwtcHJvdmlkZXJzL2Ryb3Bib3gudHNcbmNvbnN0IGRyb3Bib3ggPSAob3B0aW9ucykgPT4ge1xuXHRjb25zdCB0b2tlbkVuZHBvaW50ID0gXCJodHRwczovL2FwaS5kcm9wYm94YXBpLmNvbS9vYXV0aDIvdG9rZW5cIjtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJkcm9wYm94XCIsXG5cdFx0bmFtZTogXCJEcm9wYm94XCIsXG5cdFx0Y3JlYXRlQXV0aG9yaXphdGlvblVSTDogYXN5bmMgKHsgc3RhdGUsIHNjb3BlcywgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSA9PiB7XG5cdFx0XHRjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJhY2NvdW50X2luZm8ucmVhZFwiXTtcblx0XHRcdGlmIChvcHRpb25zLnNjb3BlKSBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG5cdFx0XHRpZiAoc2NvcGVzKSBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcblx0XHRcdGNvbnN0IGFkZGl0aW9uYWxQYXJhbXMgPSB7fTtcblx0XHRcdGlmIChvcHRpb25zLmFjY2Vzc1R5cGUpIGFkZGl0aW9uYWxQYXJhbXMudG9rZW5fYWNjZXNzX3R5cGUgPSBvcHRpb25zLmFjY2Vzc1R5cGU7XG5cdFx0XHRyZXR1cm4gYXdhaXQgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG5cdFx0XHRcdGlkOiBcImRyb3Bib3hcIixcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0YXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8vd3d3LmRyb3Bib3guY29tL29hdXRoMi9hdXRob3JpemVcIixcblx0XHRcdFx0c2NvcGVzOiBfc2NvcGVzLFxuXHRcdFx0XHRzdGF0ZSxcblx0XHRcdFx0cmVkaXJlY3RVUkksXG5cdFx0XHRcdGNvZGVWZXJpZmllcixcblx0XHRcdFx0YWRkaXRpb25hbFBhcmFtc1xuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHR2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCBjb2RlVmVyaWZpZXIsIHJlZGlyZWN0VVJJIH0pID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcblx0XHRcdFx0Y29kZSxcblx0XHRcdFx0Y29kZVZlcmlmaWVyLFxuXHRcdFx0XHRyZWRpcmVjdFVSSSxcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0dG9rZW5FbmRwb2ludFxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRyZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG5cdFx0XHRyZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcblx0XHRcdFx0cmVmcmVzaFRva2VuLFxuXHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0Y2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG5cdFx0XHRcdFx0Y2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcblx0XHRcdFx0XHRjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vb2F1dGgyL3Rva2VuXCJcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0YXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcblx0XHRcdGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG5cdFx0XHRjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcImh0dHBzOi8vYXBpLmRyb3Bib3hhcGkuY29tLzIvdXNlcnMvZ2V0X2N1cnJlbnRfYWNjb3VudFwiLCB7XG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWAgfVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoZXJyb3IpIHJldHVybiBudWxsO1xuXHRcdFx0Y29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdGlkOiBwcm9maWxlLmFjY291bnRfaWQsXG5cdFx0XHRcdFx0bmFtZTogcHJvZmlsZS5uYW1lPy5kaXNwbGF5X25hbWUsXG5cdFx0XHRcdFx0ZW1haWw6IHByb2ZpbGUuZW1haWwsXG5cdFx0XHRcdFx0ZW1haWxWZXJpZmllZDogcHJvZmlsZS5lbWFpbF92ZXJpZmllZCB8fCBmYWxzZSxcblx0XHRcdFx0XHRpbWFnZTogcHJvZmlsZS5wcm9maWxlX3Bob3RvX3VybCxcblx0XHRcdFx0XHQuLi51c2VyTWFwXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRhdGE6IHByb2ZpbGVcblx0XHRcdH07XG5cdFx0fSxcblx0XHRvcHRpb25zXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvc29jaWFsLXByb3ZpZGVycy9mYWNlYm9vay50c1xuY29uc3QgZmFjZWJvb2sgPSAob3B0aW9ucykgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcImZhY2Vib29rXCIsXG5cdFx0bmFtZTogXCJGYWNlYm9va1wiLFxuXHRcdGFzeW5jIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCByZWRpcmVjdFVSSSwgbG9naW5IaW50IH0pIHtcblx0XHRcdGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcImVtYWlsXCIsIFwicHVibGljX3Byb2ZpbGVcIl07XG5cdFx0XHRpZiAob3B0aW9ucy5zY29wZSkgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuXHRcdFx0aWYgKHNjb3BlcykgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG5cdFx0XHRyZXR1cm4gYXdhaXQgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG5cdFx0XHRcdGlkOiBcImZhY2Vib29rXCIsXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdGF1dGhvcml6YXRpb25FbmRwb2ludDogXCJodHRwczovL3d3dy5mYWNlYm9vay5jb20vdjIxLjAvZGlhbG9nL29hdXRoXCIsXG5cdFx0XHRcdHNjb3BlczogX3Njb3Blcyxcblx0XHRcdFx0c3RhdGUsXG5cdFx0XHRcdHJlZGlyZWN0VVJJLFxuXHRcdFx0XHRsb2dpbkhpbnQsXG5cdFx0XHRcdGFkZGl0aW9uYWxQYXJhbXM6IG9wdGlvbnMuY29uZmlnSWQgPyB7IGNvbmZpZ19pZDogb3B0aW9ucy5jb25maWdJZCB9IDoge31cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0dmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuXHRcdFx0cmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuXHRcdFx0XHRjb2RlLFxuXHRcdFx0XHRyZWRpcmVjdFVSSSxcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0dG9rZW5FbmRwb2ludDogXCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9vYXV0aC9hY2Nlc3NfdG9rZW5cIlxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRhc3luYyB2ZXJpZnlJZFRva2VuKHRva2VuLCBub25jZSkge1xuXHRcdFx0aWYgKG9wdGlvbnMuZGlzYWJsZUlkVG9rZW5TaWduSW4pIHJldHVybiBmYWxzZTtcblx0XHRcdGlmIChvcHRpb25zLnZlcmlmeUlkVG9rZW4pIHJldHVybiBvcHRpb25zLnZlcmlmeUlkVG9rZW4odG9rZW4sIG5vbmNlKTtcblx0XHRcdGlmICh0b2tlbi5zcGxpdChcIi5cIikubGVuZ3RoID09PSAzKSB0cnkge1xuXHRcdFx0XHRjb25zdCB7IHBheWxvYWQ6IGp3dENsYWltcyB9ID0gYXdhaXQgand0VmVyaWZ5KHRva2VuLCBjcmVhdGVSZW1vdGVKV0tTZXQobmV3IFVSTChcImh0dHBzOi8vbGltaXRlZC5mYWNlYm9vay5jb20vLndlbGwta25vd24vb2F1dGgvb3BlbmlkL2p3a3MvXCIpKSwge1xuXHRcdFx0XHRcdGFsZ29yaXRobXM6IFtcIlJTMjU2XCJdLFxuXHRcdFx0XHRcdGF1ZGllbmNlOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdGlzc3VlcjogXCJodHRwczovL3d3dy5mYWNlYm9vay5jb21cIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKG5vbmNlICYmIGp3dENsYWltcy5ub25jZSAhPT0gbm9uY2UpIHJldHVybiBmYWxzZTtcblx0XHRcdFx0cmV0dXJuICEhand0Q2xhaW1zO1xuXHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0sXG5cdFx0cmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuXHRcdFx0cmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG5cdFx0XHRcdHJlZnJlc2hUb2tlbixcblx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG5cdFx0XHRcdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3YxOC4wL29hdXRoL2FjY2Vzc190b2tlblwiXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG5cdFx0XHRpZiAob3B0aW9ucy5nZXRVc2VySW5mbykgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuXHRcdFx0aWYgKHRva2VuLmlkVG9rZW4gJiYgdG9rZW4uaWRUb2tlbi5zcGxpdChcIi5cIikubGVuZ3RoID09PSAzKSB7XG5cdFx0XHRcdGNvbnN0IHByb2ZpbGUkMSA9IGRlY29kZUp3dCh0b2tlbi5pZFRva2VuKTtcblx0XHRcdFx0Y29uc3QgdXNlciA9IHtcblx0XHRcdFx0XHRpZDogcHJvZmlsZSQxLnN1Yixcblx0XHRcdFx0XHRuYW1lOiBwcm9maWxlJDEubmFtZSxcblx0XHRcdFx0XHRlbWFpbDogcHJvZmlsZSQxLmVtYWlsLFxuXHRcdFx0XHRcdHBpY3R1cmU6IHsgZGF0YToge1xuXHRcdFx0XHRcdFx0dXJsOiBwcm9maWxlJDEucGljdHVyZSxcblx0XHRcdFx0XHRcdGhlaWdodDogMTAwLFxuXHRcdFx0XHRcdFx0d2lkdGg6IDEwMCxcblx0XHRcdFx0XHRcdGlzX3NpbGhvdWV0dGU6IGZhbHNlXG5cdFx0XHRcdFx0fSB9XG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnN0IHVzZXJNYXAkMSA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHtcblx0XHRcdFx0XHQuLi51c2VyLFxuXHRcdFx0XHRcdGVtYWlsX3ZlcmlmaWVkOiBmYWxzZVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHQuLi51c2VyLFxuXHRcdFx0XHRcdFx0ZW1haWxWZXJpZmllZDogZmFsc2UsXG5cdFx0XHRcdFx0XHQuLi51c2VyTWFwJDFcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGRhdGE6IHByb2ZpbGUkMVxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZT9maWVsZHM9XCIgKyBbXG5cdFx0XHRcdFwiaWRcIixcblx0XHRcdFx0XCJuYW1lXCIsXG5cdFx0XHRcdFwiZW1haWxcIixcblx0XHRcdFx0XCJwaWN0dXJlXCIsXG5cdFx0XHRcdC4uLm9wdGlvbnM/LmZpZWxkcyB8fCBbXVxuXHRcdFx0XS5qb2luKFwiLFwiKSwgeyBhdXRoOiB7XG5cdFx0XHRcdHR5cGU6IFwiQmVhcmVyXCIsXG5cdFx0XHRcdHRva2VuOiB0b2tlbi5hY2Nlc3NUb2tlblxuXHRcdFx0fSB9KTtcblx0XHRcdGlmIChlcnJvcikgcmV0dXJuIG51bGw7XG5cdFx0XHRjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0aWQ6IHByb2ZpbGUuaWQsXG5cdFx0XHRcdFx0bmFtZTogcHJvZmlsZS5uYW1lLFxuXHRcdFx0XHRcdGVtYWlsOiBwcm9maWxlLmVtYWlsLFxuXHRcdFx0XHRcdGltYWdlOiBwcm9maWxlLnBpY3R1cmUuZGF0YS51cmwsXG5cdFx0XHRcdFx0ZW1haWxWZXJpZmllZDogcHJvZmlsZS5lbWFpbF92ZXJpZmllZCxcblx0XHRcdFx0XHQuLi51c2VyTWFwXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRhdGE6IHByb2ZpbGVcblx0XHRcdH07XG5cdFx0fSxcblx0XHRvcHRpb25zXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvc29jaWFsLXByb3ZpZGVycy9maWdtYS50c1xuY29uc3QgZmlnbWEgPSAob3B0aW9ucykgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcImZpZ21hXCIsXG5cdFx0bmFtZTogXCJGaWdtYVwiLFxuXHRcdGFzeW5jIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCBjb2RlVmVyaWZpZXIsIHJlZGlyZWN0VVJJIH0pIHtcblx0XHRcdGlmICghb3B0aW9ucy5jbGllbnRJZCB8fCAhb3B0aW9ucy5jbGllbnRTZWNyZXQpIHtcblx0XHRcdFx0bG9nZ2VyLmVycm9yKFwiQ2xpZW50IElkIGFuZCBDbGllbnQgU2VjcmV0IGFyZSByZXF1aXJlZCBmb3IgRmlnbWEuIE1ha2Ugc3VyZSB0byBwcm92aWRlIHRoZW0gaW4gdGhlIG9wdGlvbnMuXCIpO1xuXHRcdFx0XHR0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiQ0xJRU5UX0lEX0FORF9TRUNSRVRfUkVRVUlSRURcIik7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWNvZGVWZXJpZmllcikgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcImNvZGVWZXJpZmllciBpcyByZXF1aXJlZCBmb3IgRmlnbWFcIik7XG5cdFx0XHRjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJmaWxlX3JlYWRcIl07XG5cdFx0XHRpZiAob3B0aW9ucy5zY29wZSkgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuXHRcdFx0aWYgKHNjb3BlcykgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG5cdFx0XHRyZXR1cm4gYXdhaXQgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG5cdFx0XHRcdGlkOiBcImZpZ21hXCIsXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdGF1dGhvcml6YXRpb25FbmRwb2ludDogXCJodHRwczovL3d3dy5maWdtYS5jb20vb2F1dGhcIixcblx0XHRcdFx0c2NvcGVzOiBfc2NvcGVzLFxuXHRcdFx0XHRzdGF0ZSxcblx0XHRcdFx0Y29kZVZlcmlmaWVyLFxuXHRcdFx0XHRyZWRpcmVjdFVSSVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHR2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCBjb2RlVmVyaWZpZXIsIHJlZGlyZWN0VVJJIH0pID0+IHtcblx0XHRcdHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcblx0XHRcdFx0Y29kZSxcblx0XHRcdFx0Y29kZVZlcmlmaWVyLFxuXHRcdFx0XHRyZWRpcmVjdFVSSSxcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0dG9rZW5FbmRwb2ludDogXCJodHRwczovL3d3dy5maWdtYS5jb20vYXBpL29hdXRoL3Rva2VuXCJcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0cmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuXHRcdFx0cmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG5cdFx0XHRcdHJlZnJlc2hUb2tlbixcblx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG5cdFx0XHRcdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vd3d3LmZpZ21hLmNvbS9hcGkvb2F1dGgvdG9rZW5cIlxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuXHRcdFx0aWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IHsgZGF0YTogcHJvZmlsZSB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXCJodHRwczovL2FwaS5maWdtYS5jb20vdjEvbWVcIiwgeyBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gIH0gfSk7XG5cdFx0XHRcdGlmICghcHJvZmlsZSkge1xuXHRcdFx0XHRcdGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCB1c2VyIGZyb20gRmlnbWFcIik7XG5cdFx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdGlkOiBwcm9maWxlLmlkLFxuXHRcdFx0XHRcdFx0bmFtZTogcHJvZmlsZS5oYW5kbGUsXG5cdFx0XHRcdFx0XHRlbWFpbDogcHJvZmlsZS5lbWFpbCxcblx0XHRcdFx0XHRcdGltYWdlOiBwcm9maWxlLmltZ191cmwsXG5cdFx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiBmYWxzZSxcblx0XHRcdFx0XHRcdC4uLnVzZXJNYXBcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGRhdGE6IHByb2ZpbGVcblx0XHRcdFx0fTtcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCB1c2VyIGluZm8gZnJvbSBGaWdtYTpcIiwgZXJyb3IpO1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblx0XHR9LFxuXHRcdG9wdGlvbnNcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9zb2NpYWwtcHJvdmlkZXJzL2dpdGh1Yi50c1xuY29uc3QgZ2l0aHViID0gKG9wdGlvbnMpID0+IHtcblx0Y29uc3QgdG9rZW5FbmRwb2ludCA9IFwiaHR0cHM6Ly9naXRodWIuY29tL2xvZ2luL29hdXRoL2FjY2Vzc190b2tlblwiO1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcImdpdGh1YlwiLFxuXHRcdG5hbWU6IFwiR2l0SHViXCIsXG5cdFx0Y3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIGxvZ2luSGludCwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSB7XG5cdFx0XHRjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJyZWFkOnVzZXJcIiwgXCJ1c2VyOmVtYWlsXCJdO1xuXHRcdFx0aWYgKG9wdGlvbnMuc2NvcGUpIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcblx0XHRcdGlmIChzY29wZXMpIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuXHRcdFx0cmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuXHRcdFx0XHRpZDogXCJnaXRodWJcIixcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0YXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8vZ2l0aHViLmNvbS9sb2dpbi9vYXV0aC9hdXRob3JpemVcIixcblx0XHRcdFx0c2NvcGVzOiBfc2NvcGVzLFxuXHRcdFx0XHRzdGF0ZSxcblx0XHRcdFx0Y29kZVZlcmlmaWVyLFxuXHRcdFx0XHRyZWRpcmVjdFVSSSxcblx0XHRcdFx0bG9naW5IaW50LFxuXHRcdFx0XHRwcm9tcHQ6IG9wdGlvbnMucHJvbXB0XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuXHRcdFx0cmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuXHRcdFx0XHRjb2RlLFxuXHRcdFx0XHRjb2RlVmVyaWZpZXIsXG5cdFx0XHRcdHJlZGlyZWN0VVJJLFxuXHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcblx0XHRcdHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuXHRcdFx0XHRyZWZyZXNoVG9rZW4sXG5cdFx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0XHRjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcblx0XHRcdFx0XHRjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuXHRcdFx0XHRcdGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcblx0XHRcdFx0fSxcblx0XHRcdFx0dG9rZW5FbmRwb2ludDogXCJodHRwczovL2dpdGh1Yi5jb20vbG9naW4vb2F1dGgvYWNjZXNzX3Rva2VuXCJcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0YXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcblx0XHRcdGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG5cdFx0XHRjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcImh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vdXNlclwiLCB7IGhlYWRlcnM6IHtcblx0XHRcdFx0XCJVc2VyLUFnZW50XCI6IFwiYmV0dGVyLWF1dGhcIixcblx0XHRcdFx0YXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWBcblx0XHRcdH0gfSk7XG5cdFx0XHRpZiAoZXJyb3IpIHJldHVybiBudWxsO1xuXHRcdFx0Y29uc3QgeyBkYXRhOiBlbWFpbHMgfSA9IGF3YWl0IGJldHRlckZldGNoKFwiaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS91c2VyL2VtYWlsc1wiLCB7IGhlYWRlcnM6IHtcblx0XHRcdFx0QXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWAsXG5cdFx0XHRcdFwiVXNlci1BZ2VudFwiOiBcImJldHRlci1hdXRoXCJcblx0XHRcdH0gfSk7XG5cdFx0XHRpZiAoIXByb2ZpbGUuZW1haWwgJiYgZW1haWxzKSBwcm9maWxlLmVtYWlsID0gKGVtYWlscy5maW5kKChlKSA9PiBlLnByaW1hcnkpID8/IGVtYWlsc1swXSk/LmVtYWlsO1xuXHRcdFx0Y29uc3QgZW1haWxWZXJpZmllZCA9IGVtYWlscz8uZmluZCgoZSkgPT4gZS5lbWFpbCA9PT0gcHJvZmlsZS5lbWFpbCk/LnZlcmlmaWVkID8/IGZhbHNlO1xuXHRcdFx0Y29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdGlkOiBwcm9maWxlLmlkLFxuXHRcdFx0XHRcdG5hbWU6IHByb2ZpbGUubmFtZSB8fCBwcm9maWxlLmxvZ2luLFxuXHRcdFx0XHRcdGVtYWlsOiBwcm9maWxlLmVtYWlsLFxuXHRcdFx0XHRcdGltYWdlOiBwcm9maWxlLmF2YXRhcl91cmwsXG5cdFx0XHRcdFx0ZW1haWxWZXJpZmllZCxcblx0XHRcdFx0XHQuLi51c2VyTWFwXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRhdGE6IHByb2ZpbGVcblx0XHRcdH07XG5cdFx0fSxcblx0XHRvcHRpb25zXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvc29jaWFsLXByb3ZpZGVycy9naXRsYWIudHNcbmNvbnN0IGNsZWFuRG91YmxlU2xhc2hlcyA9IChpbnB1dCA9IFwiXCIpID0+IHtcblx0cmV0dXJuIGlucHV0LnNwbGl0KFwiOi8vXCIpLm1hcCgoc3RyKSA9PiBzdHIucmVwbGFjZSgvXFwvezIsfS9nLCBcIi9cIikpLmpvaW4oXCI6Ly9cIik7XG59O1xuY29uc3QgaXNzdWVyVG9FbmRwb2ludHMgPSAoaXNzdWVyKSA9PiB7XG5cdGxldCBiYXNlVXJsID0gaXNzdWVyIHx8IFwiaHR0cHM6Ly9naXRsYWIuY29tXCI7XG5cdHJldHVybiB7XG5cdFx0YXV0aG9yaXphdGlvbkVuZHBvaW50OiBjbGVhbkRvdWJsZVNsYXNoZXMoYCR7YmFzZVVybH0vb2F1dGgvYXV0aG9yaXplYCksXG5cdFx0dG9rZW5FbmRwb2ludDogY2xlYW5Eb3VibGVTbGFzaGVzKGAke2Jhc2VVcmx9L29hdXRoL3Rva2VuYCksXG5cdFx0dXNlcmluZm9FbmRwb2ludDogY2xlYW5Eb3VibGVTbGFzaGVzKGAke2Jhc2VVcmx9L2FwaS92NC91c2VyYClcblx0fTtcbn07XG5jb25zdCBnaXRsYWIgPSAob3B0aW9ucykgPT4ge1xuXHRjb25zdCB7IGF1dGhvcml6YXRpb25FbmRwb2ludCwgdG9rZW5FbmRwb2ludCwgdXNlcmluZm9FbmRwb2ludCB9ID0gaXNzdWVyVG9FbmRwb2ludHMob3B0aW9ucy5pc3N1ZXIpO1xuXHRjb25zdCBpc3N1ZXJJZCA9IFwiZ2l0bGFiXCI7XG5cdHJldHVybiB7XG5cdFx0aWQ6IGlzc3VlcklkLFxuXHRcdG5hbWU6IFwiR2l0bGFiXCIsXG5cdFx0Y3JlYXRlQXV0aG9yaXphdGlvblVSTDogYXN5bmMgKHsgc3RhdGUsIHNjb3BlcywgY29kZVZlcmlmaWVyLCBsb2dpbkhpbnQsIHJlZGlyZWN0VVJJIH0pID0+IHtcblx0XHRcdGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcInJlYWRfdXNlclwiXTtcblx0XHRcdGlmIChvcHRpb25zLnNjb3BlKSBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG5cdFx0XHRpZiAoc2NvcGVzKSBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcblx0XHRcdHJldHVybiBhd2FpdCBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcblx0XHRcdFx0aWQ6IGlzc3VlcklkLFxuXHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHRhdXRob3JpemF0aW9uRW5kcG9pbnQsXG5cdFx0XHRcdHNjb3BlczogX3Njb3Blcyxcblx0XHRcdFx0c3RhdGUsXG5cdFx0XHRcdHJlZGlyZWN0VVJJLFxuXHRcdFx0XHRjb2RlVmVyaWZpZXIsXG5cdFx0XHRcdGxvZ2luSGludFxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHR2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCByZWRpcmVjdFVSSSwgY29kZVZlcmlmaWVyIH0pID0+IHtcblx0XHRcdHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcblx0XHRcdFx0Y29kZSxcblx0XHRcdFx0cmVkaXJlY3RVUkksXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdGNvZGVWZXJpZmllcixcblx0XHRcdFx0dG9rZW5FbmRwb2ludFxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRyZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG5cdFx0XHRyZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcblx0XHRcdFx0cmVmcmVzaFRva2VuLFxuXHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0Y2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG5cdFx0XHRcdFx0Y2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcblx0XHRcdFx0XHRjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRva2VuRW5kcG9pbnRcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0YXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcblx0XHRcdGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG5cdFx0XHRjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaCh1c2VyaW5mb0VuZHBvaW50LCB7IGhlYWRlcnM6IHsgYXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWAgfSB9KTtcblx0XHRcdGlmIChlcnJvciB8fCBwcm9maWxlLnN0YXRlICE9PSBcImFjdGl2ZVwiIHx8IHByb2ZpbGUubG9ja2VkKSByZXR1cm4gbnVsbDtcblx0XHRcdGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lihwcm9maWxlKTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRpZDogcHJvZmlsZS5pZCxcblx0XHRcdFx0XHRuYW1lOiBwcm9maWxlLm5hbWUgPz8gcHJvZmlsZS51c2VybmFtZSxcblx0XHRcdFx0XHRlbWFpbDogcHJvZmlsZS5lbWFpbCxcblx0XHRcdFx0XHRpbWFnZTogcHJvZmlsZS5hdmF0YXJfdXJsLFxuXHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHByb2ZpbGUuZW1haWxfdmVyaWZpZWQgPz8gZmFsc2UsXG5cdFx0XHRcdFx0Li4udXNlck1hcFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRkYXRhOiBwcm9maWxlXG5cdFx0XHR9O1xuXHRcdH0sXG5cdFx0b3B0aW9uc1xuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL3NvY2lhbC1wcm92aWRlcnMvZ29vZ2xlLnRzXG5jb25zdCBnb29nbGUgPSAob3B0aW9ucykgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcImdvb2dsZVwiLFxuXHRcdG5hbWU6IFwiR29vZ2xlXCIsXG5cdFx0YXN5bmMgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkksIGxvZ2luSGludCwgZGlzcGxheSB9KSB7XG5cdFx0XHRpZiAoIW9wdGlvbnMuY2xpZW50SWQgfHwgIW9wdGlvbnMuY2xpZW50U2VjcmV0KSB7XG5cdFx0XHRcdGxvZ2dlci5lcnJvcihcIkNsaWVudCBJZCBhbmQgQ2xpZW50IFNlY3JldCBpcyByZXF1aXJlZCBmb3IgR29vZ2xlLiBNYWtlIHN1cmUgdG8gcHJvdmlkZSB0aGVtIGluIHRoZSBvcHRpb25zLlwiKTtcblx0XHRcdFx0dGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkNMSUVOVF9JRF9BTkRfU0VDUkVUX1JFUVVJUkVEXCIpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFjb2RlVmVyaWZpZXIpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJjb2RlVmVyaWZpZXIgaXMgcmVxdWlyZWQgZm9yIEdvb2dsZVwiKTtcblx0XHRcdGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcblx0XHRcdFx0XCJlbWFpbFwiLFxuXHRcdFx0XHRcInByb2ZpbGVcIixcblx0XHRcdFx0XCJvcGVuaWRcIlxuXHRcdFx0XTtcblx0XHRcdGlmIChvcHRpb25zLnNjb3BlKSBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG5cdFx0XHRpZiAoc2NvcGVzKSBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcblx0XHRcdHJldHVybiBhd2FpdCBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcblx0XHRcdFx0aWQ6IFwiZ29vZ2xlXCIsXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdGF1dGhvcml6YXRpb25FbmRwb2ludDogXCJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20vby9vYXV0aDIvYXV0aFwiLFxuXHRcdFx0XHRzY29wZXM6IF9zY29wZXMsXG5cdFx0XHRcdHN0YXRlLFxuXHRcdFx0XHRjb2RlVmVyaWZpZXIsXG5cdFx0XHRcdHJlZGlyZWN0VVJJLFxuXHRcdFx0XHRwcm9tcHQ6IG9wdGlvbnMucHJvbXB0LFxuXHRcdFx0XHRhY2Nlc3NUeXBlOiBvcHRpb25zLmFjY2Vzc1R5cGUsXG5cdFx0XHRcdGRpc3BsYXk6IGRpc3BsYXkgfHwgb3B0aW9ucy5kaXNwbGF5LFxuXHRcdFx0XHRsb2dpbkhpbnQsXG5cdFx0XHRcdGhkOiBvcHRpb25zLmhkLFxuXHRcdFx0XHRhZGRpdGlvbmFsUGFyYW1zOiB7IGluY2x1ZGVfZ3JhbnRlZF9zY29wZXM6IFwidHJ1ZVwiIH1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0dmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSA9PiB7XG5cdFx0XHRyZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG5cdFx0XHRcdGNvZGUsXG5cdFx0XHRcdGNvZGVWZXJpZmllcixcblx0XHRcdFx0cmVkaXJlY3RVUkksXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9vYXV0aDIuZ29vZ2xlYXBpcy5jb20vdG9rZW5cIlxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRyZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG5cdFx0XHRyZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcblx0XHRcdFx0cmVmcmVzaFRva2VuLFxuXHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0Y2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG5cdFx0XHRcdFx0Y2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcblx0XHRcdFx0XHRjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3Y0L3Rva2VuXCJcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0YXN5bmMgdmVyaWZ5SWRUb2tlbih0b2tlbiwgbm9uY2UpIHtcblx0XHRcdGlmIChvcHRpb25zLmRpc2FibGVJZFRva2VuU2lnbkluKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRpZiAob3B0aW9ucy52ZXJpZnlJZFRva2VuKSByZXR1cm4gb3B0aW9ucy52ZXJpZnlJZFRva2VuKHRva2VuLCBub25jZSk7XG5cdFx0XHRjb25zdCB7IGtpZCwgYWxnOiBqd3RBbGcgfSA9IGRlY29kZVByb3RlY3RlZEhlYWRlcih0b2tlbik7XG5cdFx0XHRpZiAoIWtpZCB8fCAhand0QWxnKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRjb25zdCB7IHBheWxvYWQ6IGp3dENsYWltcyB9ID0gYXdhaXQgand0VmVyaWZ5KHRva2VuLCBhd2FpdCBnZXRHb29nbGVQdWJsaWNLZXkoa2lkKSwge1xuXHRcdFx0XHRhbGdvcml0aG1zOiBband0QWxnXSxcblx0XHRcdFx0aXNzdWVyOiBbXCJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb21cIiwgXCJhY2NvdW50cy5nb29nbGUuY29tXCJdLFxuXHRcdFx0XHRhdWRpZW5jZTogb3B0aW9ucy5jbGllbnRJZCxcblx0XHRcdFx0bWF4VG9rZW5BZ2U6IFwiMWhcIlxuXHRcdFx0fSk7XG5cdFx0XHRpZiAobm9uY2UgJiYgand0Q2xhaW1zLm5vbmNlICE9PSBub25jZSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSxcblx0XHRhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuXHRcdFx0aWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcblx0XHRcdGlmICghdG9rZW4uaWRUb2tlbikgcmV0dXJuIG51bGw7XG5cdFx0XHRjb25zdCB1c2VyID0gZGVjb2RlSnd0KHRva2VuLmlkVG9rZW4pO1xuXHRcdFx0Y29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHVzZXIpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdGlkOiB1c2VyLnN1Yixcblx0XHRcdFx0XHRuYW1lOiB1c2VyLm5hbWUsXG5cdFx0XHRcdFx0ZW1haWw6IHVzZXIuZW1haWwsXG5cdFx0XHRcdFx0aW1hZ2U6IHVzZXIucGljdHVyZSxcblx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB1c2VyLmVtYWlsX3ZlcmlmaWVkLFxuXHRcdFx0XHRcdC4uLnVzZXJNYXBcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGF0YTogdXNlclxuXHRcdFx0fTtcblx0XHR9LFxuXHRcdG9wdGlvbnNcblx0fTtcbn07XG5jb25zdCBnZXRHb29nbGVQdWJsaWNLZXkgPSBhc3luYyAoa2lkKSA9PiB7XG5cdGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjMvY2VydHNcIik7XG5cdGlmICghZGF0YT8ua2V5cykgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIktleXMgbm90IGZvdW5kXCIgfSk7XG5cdGNvbnN0IGp3ayA9IGRhdGEua2V5cy5maW5kKChrZXkpID0+IGtleS5raWQgPT09IGtpZCk7XG5cdGlmICghandrKSB0aHJvdyBuZXcgRXJyb3IoYEpXSyB3aXRoIGtpZCAke2tpZH0gbm90IGZvdW5kYCk7XG5cdHJldHVybiBhd2FpdCBpbXBvcnRKV0soandrLCBqd2suYWxnKTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9zb2NpYWwtcHJvdmlkZXJzL2h1Z2dpbmdmYWNlLnRzXG5jb25zdCBodWdnaW5nZmFjZSA9IChvcHRpb25zKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwiaHVnZ2luZ2ZhY2VcIixcblx0XHRuYW1lOiBcIkh1Z2dpbmcgRmFjZVwiLFxuXHRcdGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCBjb2RlVmVyaWZpZXIsIHJlZGlyZWN0VVJJIH0pIHtcblx0XHRcdGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcblx0XHRcdFx0XCJvcGVuaWRcIixcblx0XHRcdFx0XCJwcm9maWxlXCIsXG5cdFx0XHRcdFwiZW1haWxcIlxuXHRcdFx0XTtcblx0XHRcdGlmIChvcHRpb25zLnNjb3BlKSBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG5cdFx0XHRpZiAoc2NvcGVzKSBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcblx0XHRcdHJldHVybiBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcblx0XHRcdFx0aWQ6IFwiaHVnZ2luZ2ZhY2VcIixcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0YXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8vaHVnZ2luZ2ZhY2UuY28vb2F1dGgvYXV0aG9yaXplXCIsXG5cdFx0XHRcdHNjb3BlczogX3Njb3Blcyxcblx0XHRcdFx0c3RhdGUsXG5cdFx0XHRcdGNvZGVWZXJpZmllcixcblx0XHRcdFx0cmVkaXJlY3RVUklcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0dmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSA9PiB7XG5cdFx0XHRyZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG5cdFx0XHRcdGNvZGUsXG5cdFx0XHRcdGNvZGVWZXJpZmllcixcblx0XHRcdFx0cmVkaXJlY3RVUkksXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9odWdnaW5nZmFjZS5jby9vYXV0aC90b2tlblwiXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcblx0XHRcdHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuXHRcdFx0XHRyZWZyZXNoVG9rZW4sXG5cdFx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0XHRjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcblx0XHRcdFx0XHRjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuXHRcdFx0XHRcdGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcblx0XHRcdFx0fSxcblx0XHRcdFx0dG9rZW5FbmRwb2ludDogXCJodHRwczovL2h1Z2dpbmdmYWNlLmNvL29hdXRoL3Rva2VuXCJcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0YXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcblx0XHRcdGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG5cdFx0XHRjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcImh0dHBzOi8vaHVnZ2luZ2ZhY2UuY28vb2F1dGgvdXNlcmluZm9cIiwge1xuXHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWAgfVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoZXJyb3IpIHJldHVybiBudWxsO1xuXHRcdFx0Y29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdGlkOiBwcm9maWxlLnN1Yixcblx0XHRcdFx0XHRuYW1lOiBwcm9maWxlLm5hbWUgfHwgcHJvZmlsZS5wcmVmZXJyZWRfdXNlcm5hbWUsXG5cdFx0XHRcdFx0ZW1haWw6IHByb2ZpbGUuZW1haWwsXG5cdFx0XHRcdFx0aW1hZ2U6IHByb2ZpbGUucGljdHVyZSxcblx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiBwcm9maWxlLmVtYWlsX3ZlcmlmaWVkID8/IGZhbHNlLFxuXHRcdFx0XHRcdC4uLnVzZXJNYXBcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGF0YTogcHJvZmlsZVxuXHRcdFx0fTtcblx0XHR9LFxuXHRcdG9wdGlvbnNcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9zb2NpYWwtcHJvdmlkZXJzL2tha2FvLnRzXG5jb25zdCBrYWthbyA9IChvcHRpb25zKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwia2FrYW9cIixcblx0XHRuYW1lOiBcIktha2FvXCIsXG5cdFx0Y3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIHJlZGlyZWN0VVJJIH0pIHtcblx0XHRcdGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcblx0XHRcdFx0XCJhY2NvdW50X2VtYWlsXCIsXG5cdFx0XHRcdFwicHJvZmlsZV9pbWFnZVwiLFxuXHRcdFx0XHRcInByb2ZpbGVfbmlja25hbWVcIlxuXHRcdFx0XTtcblx0XHRcdGlmIChvcHRpb25zLnNjb3BlKSBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG5cdFx0XHRpZiAoc2NvcGVzKSBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcblx0XHRcdHJldHVybiBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcblx0XHRcdFx0aWQ6IFwia2FrYW9cIixcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0YXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8va2F1dGgua2FrYW8uY29tL29hdXRoL2F1dGhvcml6ZVwiLFxuXHRcdFx0XHRzY29wZXM6IF9zY29wZXMsXG5cdFx0XHRcdHN0YXRlLFxuXHRcdFx0XHRyZWRpcmVjdFVSSVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHR2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCByZWRpcmVjdFVSSSB9KSA9PiB7XG5cdFx0XHRyZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG5cdFx0XHRcdGNvZGUsXG5cdFx0XHRcdHJlZGlyZWN0VVJJLFxuXHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8va2F1dGgua2FrYW8uY29tL29hdXRoL3Rva2VuXCJcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0cmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuXHRcdFx0cmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG5cdFx0XHRcdHJlZnJlc2hUb2tlbixcblx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG5cdFx0XHRcdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8va2F1dGgua2FrYW8uY29tL29hdXRoL3Rva2VuXCJcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0YXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcblx0XHRcdGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG5cdFx0XHRjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcImh0dHBzOi8va2FwaS5rYWthby5jb20vdjIvdXNlci9tZVwiLCB7IGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWAgfSB9KTtcblx0XHRcdGlmIChlcnJvciB8fCAhcHJvZmlsZSkgcmV0dXJuIG51bGw7XG5cdFx0XHRjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG5cdFx0XHRjb25zdCBhY2NvdW50ID0gcHJvZmlsZS5rYWthb19hY2NvdW50IHx8IHt9O1xuXHRcdFx0Y29uc3Qga2FrYW9Qcm9maWxlID0gYWNjb3VudC5wcm9maWxlIHx8IHt9O1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdGlkOiBTdHJpbmcocHJvZmlsZS5pZCksXG5cdFx0XHRcdFx0bmFtZToga2FrYW9Qcm9maWxlLm5pY2tuYW1lIHx8IGFjY291bnQubmFtZSB8fCB2b2lkIDAsXG5cdFx0XHRcdFx0ZW1haWw6IGFjY291bnQuZW1haWwsXG5cdFx0XHRcdFx0aW1hZ2U6IGtha2FvUHJvZmlsZS5wcm9maWxlX2ltYWdlX3VybCB8fCBrYWthb1Byb2ZpbGUudGh1bWJuYWlsX2ltYWdlX3VybCxcblx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiAhIWFjY291bnQuaXNfZW1haWxfdmFsaWQgJiYgISFhY2NvdW50LmlzX2VtYWlsX3ZlcmlmaWVkLFxuXHRcdFx0XHRcdC4uLnVzZXJNYXBcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGF0YTogcHJvZmlsZVxuXHRcdFx0fTtcblx0XHR9LFxuXHRcdG9wdGlvbnNcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9zb2NpYWwtcHJvdmlkZXJzL2tpY2sudHNcbmNvbnN0IGtpY2sgPSAob3B0aW9ucykgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcImtpY2tcIixcblx0XHRuYW1lOiBcIktpY2tcIixcblx0XHRjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIHNjb3BlcywgcmVkaXJlY3RVUkksIGNvZGVWZXJpZmllciB9KSB7XG5cdFx0XHRjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJ1c2VyOnJlYWRcIl07XG5cdFx0XHRpZiAob3B0aW9ucy5zY29wZSkgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuXHRcdFx0aWYgKHNjb3BlcykgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG5cdFx0XHRyZXR1cm4gY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG5cdFx0XHRcdGlkOiBcImtpY2tcIixcblx0XHRcdFx0cmVkaXJlY3RVUkksXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdGF1dGhvcml6YXRpb25FbmRwb2ludDogXCJodHRwczovL2lkLmtpY2suY29tL29hdXRoL2F1dGhvcml6ZVwiLFxuXHRcdFx0XHRzY29wZXM6IF9zY29wZXMsXG5cdFx0XHRcdGNvZGVWZXJpZmllcixcblx0XHRcdFx0c3RhdGVcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0YXN5bmMgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7IGNvZGUsIHJlZGlyZWN0VVJJLCBjb2RlVmVyaWZpZXIgfSkge1xuXHRcdFx0cmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuXHRcdFx0XHRjb2RlLFxuXHRcdFx0XHRyZWRpcmVjdFVSSSxcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0dG9rZW5FbmRwb2ludDogXCJodHRwczovL2lkLmtpY2suY29tL29hdXRoL3Rva2VuXCIsXG5cdFx0XHRcdGNvZGVWZXJpZmllclxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRyZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG5cdFx0XHRyZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcblx0XHRcdFx0cmVmcmVzaFRva2VuLFxuXHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0Y2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG5cdFx0XHRcdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vaWQua2ljay5jb20vb2F1dGgvdG9rZW5cIlxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuXHRcdFx0aWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcblx0XHRcdGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFwiaHR0cHM6Ly9hcGkua2ljay5jb20vcHVibGljL3YxL3VzZXJzXCIsIHtcblx0XHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0XHRoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gIH1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKGVycm9yKSByZXR1cm4gbnVsbDtcblx0XHRcdGNvbnN0IHByb2ZpbGUgPSBkYXRhLmRhdGFbMF07XG5cdFx0XHRjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0aWQ6IHByb2ZpbGUudXNlcl9pZCxcblx0XHRcdFx0XHRuYW1lOiBwcm9maWxlLm5hbWUsXG5cdFx0XHRcdFx0ZW1haWw6IHByb2ZpbGUuZW1haWwsXG5cdFx0XHRcdFx0aW1hZ2U6IHByb2ZpbGUucHJvZmlsZV9waWN0dXJlLFxuXHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdC4uLnVzZXJNYXBcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGF0YTogcHJvZmlsZVxuXHRcdFx0fTtcblx0XHR9LFxuXHRcdG9wdGlvbnNcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9zb2NpYWwtcHJvdmlkZXJzL2xpbmUudHNcbi8qKlxuKiBMSU5FIExvZ2luIHYyLjFcbiogLSBBdXRob3JpemF0aW9uIGVuZHBvaW50OiBodHRwczovL2FjY2Vzcy5saW5lLm1lL29hdXRoMi92Mi4xL2F1dGhvcml6ZVxuKiAtIFRva2VuIGVuZHBvaW50OiBodHRwczovL2FwaS5saW5lLm1lL29hdXRoMi92Mi4xL3Rva2VuXG4qIC0gVXNlckluZm8gZW5kcG9pbnQ6IGh0dHBzOi8vYXBpLmxpbmUubWUvb2F1dGgyL3YyLjEvdXNlcmluZm9cbiogLSBWZXJpZnkgSUQgdG9rZW46IGh0dHBzOi8vYXBpLmxpbmUubWUvb2F1dGgyL3YyLjEvdmVyaWZ5XG4qXG4qIERvY3M6IGh0dHBzOi8vZGV2ZWxvcGVycy5saW5lLmJpei9lbi9yZWZlcmVuY2UvbGluZS1sb2dpbi8jaXNzdWUtYWNjZXNzLXRva2VuXG4qL1xuY29uc3QgbGluZSA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IGF1dGhvcml6YXRpb25FbmRwb2ludCA9IFwiaHR0cHM6Ly9hY2Nlc3MubGluZS5tZS9vYXV0aDIvdjIuMS9hdXRob3JpemVcIjtcblx0Y29uc3QgdG9rZW5FbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkubGluZS5tZS9vYXV0aDIvdjIuMS90b2tlblwiO1xuXHRjb25zdCB1c2VySW5mb0VuZHBvaW50ID0gXCJodHRwczovL2FwaS5saW5lLm1lL29hdXRoMi92Mi4xL3VzZXJpbmZvXCI7XG5cdGNvbnN0IHZlcmlmeUlkVG9rZW5FbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkubGluZS5tZS9vYXV0aDIvdjIuMS92ZXJpZnlcIjtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJsaW5lXCIsXG5cdFx0bmFtZTogXCJMSU5FXCIsXG5cdFx0YXN5bmMgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkksIGxvZ2luSGludCB9KSB7XG5cdFx0XHRjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXG5cdFx0XHRcdFwib3BlbmlkXCIsXG5cdFx0XHRcdFwicHJvZmlsZVwiLFxuXHRcdFx0XHRcImVtYWlsXCJcblx0XHRcdF07XG5cdFx0XHRpZiAob3B0aW9ucy5zY29wZSkgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuXHRcdFx0aWYgKHNjb3BlcykgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG5cdFx0XHRyZXR1cm4gYXdhaXQgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG5cdFx0XHRcdGlkOiBcImxpbmVcIixcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0YXV0aG9yaXphdGlvbkVuZHBvaW50LFxuXHRcdFx0XHRzY29wZXM6IF9zY29wZXMsXG5cdFx0XHRcdHN0YXRlLFxuXHRcdFx0XHRjb2RlVmVyaWZpZXIsXG5cdFx0XHRcdHJlZGlyZWN0VVJJLFxuXHRcdFx0XHRsb2dpbkhpbnRcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0dmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSA9PiB7XG5cdFx0XHRyZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG5cdFx0XHRcdGNvZGUsXG5cdFx0XHRcdGNvZGVWZXJpZmllcixcblx0XHRcdFx0cmVkaXJlY3RVUkksXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdHRva2VuRW5kcG9pbnRcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0cmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuXHRcdFx0cmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG5cdFx0XHRcdHJlZnJlc2hUb2tlbixcblx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcblx0XHRcdFx0fSxcblx0XHRcdFx0dG9rZW5FbmRwb2ludFxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRhc3luYyB2ZXJpZnlJZFRva2VuKHRva2VuLCBub25jZSkge1xuXHRcdFx0aWYgKG9wdGlvbnMuZGlzYWJsZUlkVG9rZW5TaWduSW4pIHJldHVybiBmYWxzZTtcblx0XHRcdGlmIChvcHRpb25zLnZlcmlmeUlkVG9rZW4pIHJldHVybiBvcHRpb25zLnZlcmlmeUlkVG9rZW4odG9rZW4sIG5vbmNlKTtcblx0XHRcdGNvbnN0IGJvZHkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG5cdFx0XHRib2R5LnNldChcImlkX3Rva2VuXCIsIHRva2VuKTtcblx0XHRcdGJvZHkuc2V0KFwiY2xpZW50X2lkXCIsIG9wdGlvbnMuY2xpZW50SWQpO1xuXHRcdFx0aWYgKG5vbmNlKSBib2R5LnNldChcIm5vbmNlXCIsIG5vbmNlKTtcblx0XHRcdGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKHZlcmlmeUlkVG9rZW5FbmRwb2ludCwge1xuXHRcdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0XHRoZWFkZXJzOiB7IFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIgfSxcblx0XHRcdFx0Ym9keVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoZXJyb3IgfHwgIWRhdGEpIHJldHVybiBmYWxzZTtcblx0XHRcdGlmIChkYXRhLmF1ZCAhPT0gb3B0aW9ucy5jbGllbnRJZCkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0aWYgKGRhdGEubm9uY2UgJiYgZGF0YS5ub25jZSAhPT0gbm9uY2UpIHJldHVybiBmYWxzZTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0sXG5cdFx0YXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcblx0XHRcdGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG5cdFx0XHRsZXQgcHJvZmlsZSA9IG51bGw7XG5cdFx0XHRpZiAodG9rZW4uaWRUb2tlbikgdHJ5IHtcblx0XHRcdFx0cHJvZmlsZSA9IGRlY29kZUp3dCh0b2tlbi5pZFRva2VuKTtcblx0XHRcdH0gY2F0Y2gge31cblx0XHRcdGlmICghcHJvZmlsZSkge1xuXHRcdFx0XHRjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGJldHRlckZldGNoKHVzZXJJbmZvRW5kcG9pbnQsIHsgaGVhZGVyczogeyBhdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YCB9IH0pO1xuXHRcdFx0XHRwcm9maWxlID0gZGF0YSB8fCBudWxsO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFwcm9maWxlKSByZXR1cm4gbnVsbDtcblx0XHRcdGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lihwcm9maWxlKTtcblx0XHRcdGNvbnN0IGlkID0gcHJvZmlsZS5zdWIgfHwgcHJvZmlsZS51c2VySWQ7XG5cdFx0XHRjb25zdCBuYW1lID0gcHJvZmlsZS5uYW1lIHx8IHByb2ZpbGUuZGlzcGxheU5hbWU7XG5cdFx0XHRjb25zdCBpbWFnZSA9IHByb2ZpbGUucGljdHVyZSB8fCBwcm9maWxlLnBpY3R1cmVVcmwgfHwgdm9pZCAwO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdGlkLFxuXHRcdFx0XHRcdG5hbWUsXG5cdFx0XHRcdFx0ZW1haWw6IHByb2ZpbGUuZW1haWwsXG5cdFx0XHRcdFx0aW1hZ2UsXG5cdFx0XHRcdFx0ZW1haWxWZXJpZmllZDogZmFsc2UsXG5cdFx0XHRcdFx0Li4udXNlck1hcFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRkYXRhOiBwcm9maWxlXG5cdFx0XHR9O1xuXHRcdH0sXG5cdFx0b3B0aW9uc1xuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL3NvY2lhbC1wcm92aWRlcnMvbGluZWFyLnRzXG5jb25zdCBsaW5lYXIgPSAob3B0aW9ucykgPT4ge1xuXHRjb25zdCB0b2tlbkVuZHBvaW50ID0gXCJodHRwczovL2FwaS5saW5lYXIuYXBwL29hdXRoL3Rva2VuXCI7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwibGluZWFyXCIsXG5cdFx0bmFtZTogXCJMaW5lYXJcIixcblx0XHRjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIHNjb3BlcywgbG9naW5IaW50LCByZWRpcmVjdFVSSSB9KSB7XG5cdFx0XHRjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJyZWFkXCJdO1xuXHRcdFx0aWYgKG9wdGlvbnMuc2NvcGUpIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcblx0XHRcdGlmIChzY29wZXMpIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuXHRcdFx0cmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuXHRcdFx0XHRpZDogXCJsaW5lYXJcIixcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0YXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8vbGluZWFyLmFwcC9vYXV0aC9hdXRob3JpemVcIixcblx0XHRcdFx0c2NvcGVzOiBfc2NvcGVzLFxuXHRcdFx0XHRzdGF0ZSxcblx0XHRcdFx0cmVkaXJlY3RVUkksXG5cdFx0XHRcdGxvZ2luSGludFxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHR2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCByZWRpcmVjdFVSSSB9KSA9PiB7XG5cdFx0XHRyZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG5cdFx0XHRcdGNvZGUsXG5cdFx0XHRcdHJlZGlyZWN0VVJJLFxuXHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcblx0XHRcdHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuXHRcdFx0XHRyZWZyZXNoVG9rZW4sXG5cdFx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0XHRjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcblx0XHRcdFx0XHRjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuXHRcdFx0XHRcdGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcblx0XHRcdFx0fSxcblx0XHRcdFx0dG9rZW5FbmRwb2ludFxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuXHRcdFx0aWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcblx0XHRcdGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFwiaHR0cHM6Ly9hcGkubGluZWFyLmFwcC9ncmFwaHFsXCIsIHtcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuXHRcdFx0XHRcdEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcXVlcnk6IGBcblx0XHRcdFx0XHRcdFx0cXVlcnkge1xuXHRcdFx0XHRcdFx0XHRcdHZpZXdlciB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZFxuXHRcdFx0XHRcdFx0XHRcdFx0bmFtZVxuXHRcdFx0XHRcdFx0XHRcdFx0ZW1haWxcblx0XHRcdFx0XHRcdFx0XHRcdGF2YXRhclVybFxuXHRcdFx0XHRcdFx0XHRcdFx0YWN0aXZlXG5cdFx0XHRcdFx0XHRcdFx0XHRjcmVhdGVkQXRcblx0XHRcdFx0XHRcdFx0XHRcdHVwZGF0ZWRBdFxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YCB9KVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoZXJyb3IgfHwgIXByb2ZpbGU/LmRhdGE/LnZpZXdlcikgcmV0dXJuIG51bGw7XG5cdFx0XHRjb25zdCB1c2VyRGF0YSA9IHByb2ZpbGUuZGF0YS52aWV3ZXI7XG5cdFx0XHRjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4odXNlckRhdGEpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdGlkOiBwcm9maWxlLmRhdGEudmlld2VyLmlkLFxuXHRcdFx0XHRcdG5hbWU6IHByb2ZpbGUuZGF0YS52aWV3ZXIubmFtZSxcblx0XHRcdFx0XHRlbWFpbDogcHJvZmlsZS5kYXRhLnZpZXdlci5lbWFpbCxcblx0XHRcdFx0XHRpbWFnZTogcHJvZmlsZS5kYXRhLnZpZXdlci5hdmF0YXJVcmwsXG5cdFx0XHRcdFx0ZW1haWxWZXJpZmllZDogZmFsc2UsXG5cdFx0XHRcdFx0Li4udXNlck1hcFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRkYXRhOiB1c2VyRGF0YVxuXHRcdFx0fTtcblx0XHR9LFxuXHRcdG9wdGlvbnNcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9zb2NpYWwtcHJvdmlkZXJzL2xpbmtlZGluLnRzXG5jb25zdCBsaW5rZWRpbiA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IGF1dGhvcml6YXRpb25FbmRwb2ludCA9IFwiaHR0cHM6Ly93d3cubGlua2VkaW4uY29tL29hdXRoL3YyL2F1dGhvcml6YXRpb25cIjtcblx0Y29uc3QgdG9rZW5FbmRwb2ludCA9IFwiaHR0cHM6Ly93d3cubGlua2VkaW4uY29tL29hdXRoL3YyL2FjY2Vzc1Rva2VuXCI7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwibGlua2VkaW5cIixcblx0XHRuYW1lOiBcIkxpbmtlZGluXCIsXG5cdFx0Y3JlYXRlQXV0aG9yaXphdGlvblVSTDogYXN5bmMgKHsgc3RhdGUsIHNjb3BlcywgcmVkaXJlY3RVUkksIGxvZ2luSGludCB9KSA9PiB7XG5cdFx0XHRjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXG5cdFx0XHRcdFwicHJvZmlsZVwiLFxuXHRcdFx0XHRcImVtYWlsXCIsXG5cdFx0XHRcdFwib3BlbmlkXCJcblx0XHRcdF07XG5cdFx0XHRpZiAob3B0aW9ucy5zY29wZSkgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuXHRcdFx0aWYgKHNjb3BlcykgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG5cdFx0XHRyZXR1cm4gYXdhaXQgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG5cdFx0XHRcdGlkOiBcImxpbmtlZGluXCIsXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdGF1dGhvcml6YXRpb25FbmRwb2ludCxcblx0XHRcdFx0c2NvcGVzOiBfc2NvcGVzLFxuXHRcdFx0XHRzdGF0ZSxcblx0XHRcdFx0bG9naW5IaW50LFxuXHRcdFx0XHRyZWRpcmVjdFVSSVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHR2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCByZWRpcmVjdFVSSSB9KSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG5cdFx0XHRcdGNvZGUsXG5cdFx0XHRcdHJlZGlyZWN0VVJJLFxuXHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcblx0XHRcdHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuXHRcdFx0XHRyZWZyZXNoVG9rZW4sXG5cdFx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0XHRjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcblx0XHRcdFx0XHRjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuXHRcdFx0XHRcdGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcblx0XHRcdFx0fSxcblx0XHRcdFx0dG9rZW5FbmRwb2ludFxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuXHRcdFx0aWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcblx0XHRcdGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFwiaHR0cHM6Ly9hcGkubGlua2VkaW4uY29tL3YyL3VzZXJpbmZvXCIsIHtcblx0XHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0XHRoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gIH1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKGVycm9yKSByZXR1cm4gbnVsbDtcblx0XHRcdGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lihwcm9maWxlKTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRpZDogcHJvZmlsZS5zdWIsXG5cdFx0XHRcdFx0bmFtZTogcHJvZmlsZS5uYW1lLFxuXHRcdFx0XHRcdGVtYWlsOiBwcm9maWxlLmVtYWlsLFxuXHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHByb2ZpbGUuZW1haWxfdmVyaWZpZWQgfHwgZmFsc2UsXG5cdFx0XHRcdFx0aW1hZ2U6IHByb2ZpbGUucGljdHVyZSxcblx0XHRcdFx0XHQuLi51c2VyTWFwXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRhdGE6IHByb2ZpbGVcblx0XHRcdH07XG5cdFx0fSxcblx0XHRvcHRpb25zXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvc29jaWFsLXByb3ZpZGVycy9taWNyb3NvZnQtZW50cmEtaWQudHNcbmNvbnN0IG1pY3Jvc29mdCA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IHRlbmFudCA9IG9wdGlvbnMudGVuYW50SWQgfHwgXCJjb21tb25cIjtcblx0Y29uc3QgYXV0aG9yaXR5ID0gb3B0aW9ucy5hdXRob3JpdHkgfHwgXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb21cIjtcblx0Y29uc3QgYXV0aG9yaXphdGlvbkVuZHBvaW50ID0gYCR7YXV0aG9yaXR5fS8ke3RlbmFudH0vb2F1dGgyL3YyLjAvYXV0aG9yaXplYDtcblx0Y29uc3QgdG9rZW5FbmRwb2ludCA9IGAke2F1dGhvcml0eX0vJHt0ZW5hbnR9L29hdXRoMi92Mi4wL3Rva2VuYDtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJtaWNyb3NvZnRcIixcblx0XHRuYW1lOiBcIk1pY3Jvc29mdCBFbnRyYUlEXCIsXG5cdFx0Y3JlYXRlQXV0aG9yaXphdGlvblVSTChkYXRhKSB7XG5cdFx0XHRjb25zdCBzY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcblx0XHRcdFx0XCJvcGVuaWRcIixcblx0XHRcdFx0XCJwcm9maWxlXCIsXG5cdFx0XHRcdFwiZW1haWxcIixcblx0XHRcdFx0XCJVc2VyLlJlYWRcIixcblx0XHRcdFx0XCJvZmZsaW5lX2FjY2Vzc1wiXG5cdFx0XHRdO1xuXHRcdFx0aWYgKG9wdGlvbnMuc2NvcGUpIHNjb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuXHRcdFx0aWYgKGRhdGEuc2NvcGVzKSBzY29wZXMucHVzaCguLi5kYXRhLnNjb3Blcyk7XG5cdFx0XHRyZXR1cm4gY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG5cdFx0XHRcdGlkOiBcIm1pY3Jvc29mdFwiLFxuXHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHRhdXRob3JpemF0aW9uRW5kcG9pbnQsXG5cdFx0XHRcdHN0YXRlOiBkYXRhLnN0YXRlLFxuXHRcdFx0XHRjb2RlVmVyaWZpZXI6IGRhdGEuY29kZVZlcmlmaWVyLFxuXHRcdFx0XHRzY29wZXMsXG5cdFx0XHRcdHJlZGlyZWN0VVJJOiBkYXRhLnJlZGlyZWN0VVJJLFxuXHRcdFx0XHRwcm9tcHQ6IG9wdGlvbnMucHJvbXB0LFxuXHRcdFx0XHRsb2dpbkhpbnQ6IGRhdGEubG9naW5IaW50XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoeyBjb2RlLCBjb2RlVmVyaWZpZXIsIHJlZGlyZWN0VVJJIH0pIHtcblx0XHRcdHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcblx0XHRcdFx0Y29kZSxcblx0XHRcdFx0Y29kZVZlcmlmaWVyLFxuXHRcdFx0XHRyZWRpcmVjdFVSSSxcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0dG9rZW5FbmRwb2ludFxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuXHRcdFx0aWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcblx0XHRcdGlmICghdG9rZW4uaWRUb2tlbikgcmV0dXJuIG51bGw7XG5cdFx0XHRjb25zdCB1c2VyID0gZGVjb2RlSnd0KHRva2VuLmlkVG9rZW4pO1xuXHRcdFx0Y29uc3QgcHJvZmlsZVBob3RvU2l6ZSA9IG9wdGlvbnMucHJvZmlsZVBob3RvU2l6ZSB8fCA0ODtcblx0XHRcdGF3YWl0IGJldHRlckZldGNoKGBodHRwczovL2dyYXBoLm1pY3Jvc29mdC5jb20vdjEuMC9tZS9waG90b3MvJHtwcm9maWxlUGhvdG9TaXplfXgke3Byb2ZpbGVQaG90b1NpemV9LyR2YWx1ZWAsIHtcblx0XHRcdFx0aGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YCB9LFxuXHRcdFx0XHRhc3luYyBvblJlc3BvbnNlKGNvbnRleHQpIHtcblx0XHRcdFx0XHRpZiAob3B0aW9ucy5kaXNhYmxlUHJvZmlsZVBob3RvIHx8ICFjb250ZXh0LnJlc3BvbnNlLm9rKSByZXR1cm47XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGNvbnN0IHBpY3R1cmVCdWZmZXIgPSBhd2FpdCBjb250ZXh0LnJlc3BvbnNlLmNsb25lKCkuYXJyYXlCdWZmZXIoKTtcblx0XHRcdFx0XHRcdHVzZXIucGljdHVyZSA9IGBkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCAke2Jhc2U2NC5lbmNvZGUocGljdHVyZUJ1ZmZlcil9YDtcblx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHRsb2dnZXIuZXJyb3IoZSAmJiB0eXBlb2YgZSA9PT0gXCJvYmplY3RcIiAmJiBcIm5hbWVcIiBpbiBlID8gZS5uYW1lIDogXCJcIiwgZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lih1c2VyKTtcblx0XHRcdGNvbnN0IGVtYWlsVmVyaWZpZWQgPSB1c2VyLmVtYWlsX3ZlcmlmaWVkICE9PSB2b2lkIDAgPyB1c2VyLmVtYWlsX3ZlcmlmaWVkIDogdXNlci5lbWFpbCAmJiAodXNlci52ZXJpZmllZF9wcmltYXJ5X2VtYWlsPy5pbmNsdWRlcyh1c2VyLmVtYWlsKSB8fCB1c2VyLnZlcmlmaWVkX3NlY29uZGFyeV9lbWFpbD8uaW5jbHVkZXModXNlci5lbWFpbCkpID8gdHJ1ZSA6IGZhbHNlO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdGlkOiB1c2VyLnN1Yixcblx0XHRcdFx0XHRuYW1lOiB1c2VyLm5hbWUsXG5cdFx0XHRcdFx0ZW1haWw6IHVzZXIuZW1haWwsXG5cdFx0XHRcdFx0aW1hZ2U6IHVzZXIucGljdHVyZSxcblx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkLFxuXHRcdFx0XHRcdC4uLnVzZXJNYXBcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGF0YTogdXNlclxuXHRcdFx0fTtcblx0XHR9LFxuXHRcdHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcblx0XHRcdGNvbnN0IHNjb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1xuXHRcdFx0XHRcIm9wZW5pZFwiLFxuXHRcdFx0XHRcInByb2ZpbGVcIixcblx0XHRcdFx0XCJlbWFpbFwiLFxuXHRcdFx0XHRcIlVzZXIuUmVhZFwiLFxuXHRcdFx0XHRcIm9mZmxpbmVfYWNjZXNzXCJcblx0XHRcdF07XG5cdFx0XHRpZiAob3B0aW9ucy5zY29wZSkgc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG5cdFx0XHRyZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcblx0XHRcdFx0cmVmcmVzaFRva2VuLFxuXHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0Y2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG5cdFx0XHRcdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRleHRyYVBhcmFtczogeyBzY29wZTogc2NvcGVzLmpvaW4oXCIgXCIpIH0sXG5cdFx0XHRcdHRva2VuRW5kcG9pbnRcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0b3B0aW9uc1xuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL3NvY2lhbC1wcm92aWRlcnMvbmF2ZXIudHNcbmNvbnN0IG5hdmVyID0gKG9wdGlvbnMpID0+IHtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJuYXZlclwiLFxuXHRcdG5hbWU6IFwiTmF2ZXJcIixcblx0XHRjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIHNjb3BlcywgcmVkaXJlY3RVUkkgfSkge1xuXHRcdFx0Y29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1wicHJvZmlsZVwiLCBcImVtYWlsXCJdO1xuXHRcdFx0aWYgKG9wdGlvbnMuc2NvcGUpIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcblx0XHRcdGlmIChzY29wZXMpIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuXHRcdFx0cmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuXHRcdFx0XHRpZDogXCJuYXZlclwiLFxuXHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHRhdXRob3JpemF0aW9uRW5kcG9pbnQ6IFwiaHR0cHM6Ly9uaWQubmF2ZXIuY29tL29hdXRoMi4wL2F1dGhvcml6ZVwiLFxuXHRcdFx0XHRzY29wZXM6IF9zY29wZXMsXG5cdFx0XHRcdHN0YXRlLFxuXHRcdFx0XHRyZWRpcmVjdFVSSVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHR2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCByZWRpcmVjdFVSSSB9KSA9PiB7XG5cdFx0XHRyZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG5cdFx0XHRcdGNvZGUsXG5cdFx0XHRcdHJlZGlyZWN0VVJJLFxuXHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vbmlkLm5hdmVyLmNvbS9vYXV0aDIuMC90b2tlblwiXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcblx0XHRcdHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuXHRcdFx0XHRyZWZyZXNoVG9rZW4sXG5cdFx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0XHRjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcblx0XHRcdFx0XHRjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuXHRcdFx0XHRcdGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcblx0XHRcdFx0fSxcblx0XHRcdFx0dG9rZW5FbmRwb2ludDogXCJodHRwczovL25pZC5uYXZlci5jb20vb2F1dGgyLjAvdG9rZW5cIlxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuXHRcdFx0aWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcblx0XHRcdGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFwiaHR0cHM6Ly9vcGVuYXBpLm5hdmVyLmNvbS92MS9uaWQvbWVcIiwgeyBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gIH0gfSk7XG5cdFx0XHRpZiAoZXJyb3IgfHwgIXByb2ZpbGUgfHwgcHJvZmlsZS5yZXN1bHRjb2RlICE9PSBcIjAwXCIpIHJldHVybiBudWxsO1xuXHRcdFx0Y29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuXHRcdFx0Y29uc3QgcmVzID0gcHJvZmlsZS5yZXNwb25zZSB8fCB7fTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRpZDogcmVzLmlkLFxuXHRcdFx0XHRcdG5hbWU6IHJlcy5uYW1lIHx8IHJlcy5uaWNrbmFtZSxcblx0XHRcdFx0XHRlbWFpbDogcmVzLmVtYWlsLFxuXHRcdFx0XHRcdGltYWdlOiByZXMucHJvZmlsZV9pbWFnZSxcblx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiBmYWxzZSxcblx0XHRcdFx0XHQuLi51c2VyTWFwXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRhdGE6IHByb2ZpbGVcblx0XHRcdH07XG5cdFx0fSxcblx0XHRvcHRpb25zXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvc29jaWFsLXByb3ZpZGVycy9ub3Rpb24udHNcbmNvbnN0IG5vdGlvbiA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IHRva2VuRW5kcG9pbnQgPSBcImh0dHBzOi8vYXBpLm5vdGlvbi5jb20vdjEvb2F1dGgvdG9rZW5cIjtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJub3Rpb25cIixcblx0XHRuYW1lOiBcIk5vdGlvblwiLFxuXHRcdGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCBsb2dpbkhpbnQsIHJlZGlyZWN0VVJJIH0pIHtcblx0XHRcdGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtdO1xuXHRcdFx0aWYgKG9wdGlvbnMuc2NvcGUpIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcblx0XHRcdGlmIChzY29wZXMpIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuXHRcdFx0cmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuXHRcdFx0XHRpZDogXCJub3Rpb25cIixcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0YXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8vYXBpLm5vdGlvbi5jb20vdjEvb2F1dGgvYXV0aG9yaXplXCIsXG5cdFx0XHRcdHNjb3BlczogX3Njb3Blcyxcblx0XHRcdFx0c3RhdGUsXG5cdFx0XHRcdHJlZGlyZWN0VVJJLFxuXHRcdFx0XHRsb2dpbkhpbnQsXG5cdFx0XHRcdGFkZGl0aW9uYWxQYXJhbXM6IHsgb3duZXI6IFwidXNlclwiIH1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0dmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuXHRcdFx0cmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuXHRcdFx0XHRjb2RlLFxuXHRcdFx0XHRyZWRpcmVjdFVSSSxcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0dG9rZW5FbmRwb2ludCxcblx0XHRcdFx0YXV0aGVudGljYXRpb246IFwiYmFzaWNcIlxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRyZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG5cdFx0XHRyZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcblx0XHRcdFx0cmVmcmVzaFRva2VuLFxuXHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0Y2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG5cdFx0XHRcdFx0Y2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcblx0XHRcdFx0XHRjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRva2VuRW5kcG9pbnRcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0YXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcblx0XHRcdGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG5cdFx0XHRjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcImh0dHBzOi8vYXBpLm5vdGlvbi5jb20vdjEvdXNlcnMvbWVcIiwgeyBoZWFkZXJzOiB7XG5cdFx0XHRcdEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gLFxuXHRcdFx0XHRcIk5vdGlvbi1WZXJzaW9uXCI6IFwiMjAyMi0wNi0yOFwiXG5cdFx0XHR9IH0pO1xuXHRcdFx0aWYgKGVycm9yIHx8ICFwcm9maWxlKSByZXR1cm4gbnVsbDtcblx0XHRcdGNvbnN0IHVzZXJQcm9maWxlID0gcHJvZmlsZS5ib3Q/Lm93bmVyPy51c2VyO1xuXHRcdFx0aWYgKCF1c2VyUHJvZmlsZSkgcmV0dXJuIG51bGw7XG5cdFx0XHRjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4odXNlclByb2ZpbGUpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdGlkOiB1c2VyUHJvZmlsZS5pZCxcblx0XHRcdFx0XHRuYW1lOiB1c2VyUHJvZmlsZS5uYW1lIHx8IFwiTm90aW9uIFVzZXJcIixcblx0XHRcdFx0XHRlbWFpbDogdXNlclByb2ZpbGUucGVyc29uPy5lbWFpbCB8fCBudWxsLFxuXHRcdFx0XHRcdGltYWdlOiB1c2VyUHJvZmlsZS5hdmF0YXJfdXJsLFxuXHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdC4uLnVzZXJNYXBcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGF0YTogdXNlclByb2ZpbGVcblx0XHRcdH07XG5cdFx0fSxcblx0XHRvcHRpb25zXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvc29jaWFsLXByb3ZpZGVycy9wYXliaW4udHNcbmNvbnN0IHBheWJpbiA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IGlzc3VlciA9IG9wdGlvbnMuaXNzdWVyIHx8IFwiaHR0cHM6Ly9pZHAucGF5YmluLmlvXCI7XG5cdGNvbnN0IGF1dGhvcml6YXRpb25FbmRwb2ludCA9IGAke2lzc3Vlcn0vb2F1dGgyL2F1dGhvcml6ZWA7XG5cdGNvbnN0IHRva2VuRW5kcG9pbnQgPSBgJHtpc3N1ZXJ9L29hdXRoMi90b2tlbmA7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwicGF5YmluXCIsXG5cdFx0bmFtZTogXCJQYXliaW5cIixcblx0XHRhc3luYyBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIHNjb3BlcywgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSwgbG9naW5IaW50IH0pIHtcblx0XHRcdGlmICghb3B0aW9ucy5jbGllbnRJZCB8fCAhb3B0aW9ucy5jbGllbnRTZWNyZXQpIHtcblx0XHRcdFx0bG9nZ2VyLmVycm9yKFwiQ2xpZW50IElkIGFuZCBDbGllbnQgU2VjcmV0IGlzIHJlcXVpcmVkIGZvciBQYXliaW4uIE1ha2Ugc3VyZSB0byBwcm92aWRlIHRoZW0gaW4gdGhlIG9wdGlvbnMuXCIpO1xuXHRcdFx0XHR0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiQ0xJRU5UX0lEX0FORF9TRUNSRVRfUkVRVUlSRURcIik7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWNvZGVWZXJpZmllcikgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcImNvZGVWZXJpZmllciBpcyByZXF1aXJlZCBmb3IgUGF5YmluXCIpO1xuXHRcdFx0Y29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1xuXHRcdFx0XHRcIm9wZW5pZFwiLFxuXHRcdFx0XHRcImVtYWlsXCIsXG5cdFx0XHRcdFwicHJvZmlsZVwiXG5cdFx0XHRdO1xuXHRcdFx0aWYgKG9wdGlvbnMuc2NvcGUpIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcblx0XHRcdGlmIChzY29wZXMpIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuXHRcdFx0cmV0dXJuIGF3YWl0IGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuXHRcdFx0XHRpZDogXCJwYXliaW5cIixcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0YXV0aG9yaXphdGlvbkVuZHBvaW50LFxuXHRcdFx0XHRzY29wZXM6IF9zY29wZXMsXG5cdFx0XHRcdHN0YXRlLFxuXHRcdFx0XHRjb2RlVmVyaWZpZXIsXG5cdFx0XHRcdHJlZGlyZWN0VVJJLFxuXHRcdFx0XHRwcm9tcHQ6IG9wdGlvbnMucHJvbXB0LFxuXHRcdFx0XHRsb2dpbkhpbnRcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0dmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSA9PiB7XG5cdFx0XHRyZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG5cdFx0XHRcdGNvZGUsXG5cdFx0XHRcdGNvZGVWZXJpZmllcixcblx0XHRcdFx0cmVkaXJlY3RVUkksXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdHRva2VuRW5kcG9pbnRcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0cmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuXHRcdFx0cmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG5cdFx0XHRcdHJlZnJlc2hUb2tlbixcblx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG5cdFx0XHRcdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG5cdFx0XHRpZiAob3B0aW9ucy5nZXRVc2VySW5mbykgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuXHRcdFx0aWYgKCF0b2tlbi5pZFRva2VuKSByZXR1cm4gbnVsbDtcblx0XHRcdGNvbnN0IHVzZXIgPSBkZWNvZGVKd3QodG9rZW4uaWRUb2tlbik7XG5cdFx0XHRjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4odXNlcik7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0aWQ6IHVzZXIuc3ViLFxuXHRcdFx0XHRcdG5hbWU6IHVzZXIubmFtZSB8fCB1c2VyLnByZWZlcnJlZF91c2VybmFtZSB8fCAodXNlci5lbWFpbCA/IHVzZXIuZW1haWwuc3BsaXQoXCJAXCIpWzBdIDogXCJVc2VyXCIpIHx8IFwiVXNlclwiLFxuXHRcdFx0XHRcdGVtYWlsOiB1c2VyLmVtYWlsLFxuXHRcdFx0XHRcdGltYWdlOiB1c2VyLnBpY3R1cmUsXG5cdFx0XHRcdFx0ZW1haWxWZXJpZmllZDogdXNlci5lbWFpbF92ZXJpZmllZCB8fCBmYWxzZSxcblx0XHRcdFx0XHQuLi51c2VyTWFwXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRhdGE6IHVzZXJcblx0XHRcdH07XG5cdFx0fSxcblx0XHRvcHRpb25zXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvc29jaWFsLXByb3ZpZGVycy9wYXlwYWwudHNcbmNvbnN0IHBheXBhbCA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IGlzU2FuZGJveCA9IChvcHRpb25zLmVudmlyb25tZW50IHx8IFwic2FuZGJveFwiKSA9PT0gXCJzYW5kYm94XCI7XG5cdGNvbnN0IGF1dGhvcml6YXRpb25FbmRwb2ludCA9IGlzU2FuZGJveCA/IFwiaHR0cHM6Ly93d3cuc2FuZGJveC5wYXlwYWwuY29tL3NpZ25pbi9hdXRob3JpemVcIiA6IFwiaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9zaWduaW4vYXV0aG9yaXplXCI7XG5cdGNvbnN0IHRva2VuRW5kcG9pbnQgPSBpc1NhbmRib3ggPyBcImh0dHBzOi8vYXBpLW0uc2FuZGJveC5wYXlwYWwuY29tL3YxL29hdXRoMi90b2tlblwiIDogXCJodHRwczovL2FwaS1tLnBheXBhbC5jb20vdjEvb2F1dGgyL3Rva2VuXCI7XG5cdGNvbnN0IHVzZXJJbmZvRW5kcG9pbnQgPSBpc1NhbmRib3ggPyBcImh0dHBzOi8vYXBpLW0uc2FuZGJveC5wYXlwYWwuY29tL3YxL2lkZW50aXR5L29hdXRoMi91c2VyaW5mb1wiIDogXCJodHRwczovL2FwaS1tLnBheXBhbC5jb20vdjEvaWRlbnRpdHkvb2F1dGgyL3VzZXJpbmZvXCI7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwicGF5cGFsXCIsXG5cdFx0bmFtZTogXCJQYXlQYWxcIixcblx0XHRhc3luYyBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkge1xuXHRcdFx0aWYgKCFvcHRpb25zLmNsaWVudElkIHx8ICFvcHRpb25zLmNsaWVudFNlY3JldCkge1xuXHRcdFx0XHRsb2dnZXIuZXJyb3IoXCJDbGllbnQgSWQgYW5kIENsaWVudCBTZWNyZXQgaXMgcmVxdWlyZWQgZm9yIFBheVBhbC4gTWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhlbSBpbiB0aGUgb3B0aW9ucy5cIik7XG5cdFx0XHRcdHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJDTElFTlRfSURfQU5EX1NFQ1JFVF9SRVFVSVJFRFwiKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBhd2FpdCBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcblx0XHRcdFx0aWQ6IFwicGF5cGFsXCIsXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdGF1dGhvcml6YXRpb25FbmRwb2ludCxcblx0XHRcdFx0c2NvcGVzOiBbXSxcblx0XHRcdFx0c3RhdGUsXG5cdFx0XHRcdGNvZGVWZXJpZmllcixcblx0XHRcdFx0cmVkaXJlY3RVUkksXG5cdFx0XHRcdHByb21wdDogb3B0aW9ucy5wcm9tcHRcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0dmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuXHRcdFx0LyoqXG5cdFx0XHQqIFBheVBhbCByZXF1aXJlcyBCYXNpYyBBdXRoIGZvciB0b2tlbiBleGNoYW5nZVxuXHRcdFx0KiovXG5cdFx0XHRjb25zdCBjcmVkZW50aWFscyA9IGJhc2U2NC5lbmNvZGUoYCR7b3B0aW9ucy5jbGllbnRJZH06JHtvcHRpb25zLmNsaWVudFNlY3JldH1gKTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYmV0dGVyRmV0Y2godG9rZW5FbmRwb2ludCwge1xuXHRcdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdFx0QXV0aG9yaXphdGlvbjogYEJhc2ljICR7Y3JlZGVudGlhbHN9YCxcblx0XHRcdFx0XHRcdEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG5cdFx0XHRcdFx0XHRcIkFjY2VwdC1MYW5ndWFnZVwiOiBcImVuX1VTXCIsXG5cdFx0XHRcdFx0XHRcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcblx0XHRcdFx0XHRcdGdyYW50X3R5cGU6IFwiYXV0aG9yaXphdGlvbl9jb2RlXCIsXG5cdFx0XHRcdFx0XHRjb2RlLFxuXHRcdFx0XHRcdFx0cmVkaXJlY3RfdXJpOiByZWRpcmVjdFVSSVxuXHRcdFx0XHRcdH0pLnRvU3RyaW5nKClcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICghcmVzcG9uc2UuZGF0YSkgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkZBSUxFRF9UT19HRVRfQUNDRVNTX1RPS0VOXCIpO1xuXHRcdFx0XHRjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRhY2Nlc3NUb2tlbjogZGF0YS5hY2Nlc3NfdG9rZW4sXG5cdFx0XHRcdFx0cmVmcmVzaFRva2VuOiBkYXRhLnJlZnJlc2hfdG9rZW4sXG5cdFx0XHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQ6IGRhdGEuZXhwaXJlc19pbiA/IG5ldyBEYXRlKERhdGUubm93KCkgKyBkYXRhLmV4cGlyZXNfaW4gKiAxZTMpIDogdm9pZCAwLFxuXHRcdFx0XHRcdGlkVG9rZW46IGRhdGEuaWRfdG9rZW5cblx0XHRcdFx0fTtcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdGxvZ2dlci5lcnJvcihcIlBheVBhbCB0b2tlbiBleGNoYW5nZSBmYWlsZWQ6XCIsIGVycm9yKTtcblx0XHRcdFx0dGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkZBSUxFRF9UT19HRVRfQUNDRVNTX1RPS0VOXCIpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0cmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuXHRcdFx0Y29uc3QgY3JlZGVudGlhbHMgPSBiYXNlNjQuZW5jb2RlKGAke29wdGlvbnMuY2xpZW50SWR9OiR7b3B0aW9ucy5jbGllbnRTZWNyZXR9YCk7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGJldHRlckZldGNoKHRva2VuRW5kcG9pbnQsIHtcblx0XHRcdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XHRcdEF1dGhvcml6YXRpb246IGBCYXNpYyAke2NyZWRlbnRpYWxzfWAsXG5cdFx0XHRcdFx0XHRBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiLFxuXHRcdFx0XHRcdFx0XCJBY2NlcHQtTGFuZ3VhZ2VcIjogXCJlbl9VU1wiLFxuXHRcdFx0XHRcdFx0XCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Ym9keTogbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG5cdFx0XHRcdFx0XHRncmFudF90eXBlOiBcInJlZnJlc2hfdG9rZW5cIixcblx0XHRcdFx0XHRcdHJlZnJlc2hfdG9rZW46IHJlZnJlc2hUb2tlblxuXHRcdFx0XHRcdH0pLnRvU3RyaW5nKClcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICghcmVzcG9uc2UuZGF0YSkgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkZBSUxFRF9UT19SRUZSRVNIX0FDQ0VTU19UT0tFTlwiKTtcblx0XHRcdFx0Y29uc3QgZGF0YSA9IHJlc3BvbnNlLmRhdGE7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0YWNjZXNzVG9rZW46IGRhdGEuYWNjZXNzX3Rva2VuLFxuXHRcdFx0XHRcdHJlZnJlc2hUb2tlbjogZGF0YS5yZWZyZXNoX3Rva2VuLFxuXHRcdFx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiBkYXRhLmV4cGlyZXNfaW4gPyBuZXcgRGF0ZShEYXRlLm5vdygpICsgZGF0YS5leHBpcmVzX2luICogMWUzKSA6IHZvaWQgMFxuXHRcdFx0XHR9O1xuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0bG9nZ2VyLmVycm9yKFwiUGF5UGFsIHRva2VuIHJlZnJlc2ggZmFpbGVkOlwiLCBlcnJvcik7XG5cdFx0XHRcdHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJGQUlMRURfVE9fUkVGUkVTSF9BQ0NFU1NfVE9LRU5cIik7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRhc3luYyB2ZXJpZnlJZFRva2VuKHRva2VuLCBub25jZSkge1xuXHRcdFx0aWYgKG9wdGlvbnMuZGlzYWJsZUlkVG9rZW5TaWduSW4pIHJldHVybiBmYWxzZTtcblx0XHRcdGlmIChvcHRpb25zLnZlcmlmeUlkVG9rZW4pIHJldHVybiBvcHRpb25zLnZlcmlmeUlkVG9rZW4odG9rZW4sIG5vbmNlKTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHJldHVybiAhIWRlY29kZUp3dCh0b2tlbikuc3ViO1xuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0bG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIHZlcmlmeSBQYXlQYWwgSUQgdG9rZW46XCIsIGVycm9yKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0YXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcblx0XHRcdGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG5cdFx0XHRpZiAoIXRva2VuLmFjY2Vzc1Rva2VuKSB7XG5cdFx0XHRcdGxvZ2dlci5lcnJvcihcIkFjY2VzcyB0b2tlbiBpcyByZXF1aXJlZCB0byBmZXRjaCBQYXlQYWwgdXNlciBpbmZvXCIpO1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYmV0dGVyRmV0Y2goYCR7dXNlckluZm9FbmRwb2ludH0/c2NoZW1hPXBheXBhbHYxLjFgLCB7IGhlYWRlcnM6IHtcblx0XHRcdFx0XHRBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YCxcblx0XHRcdFx0XHRBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiXG5cdFx0XHRcdH0gfSk7XG5cdFx0XHRcdGlmICghcmVzcG9uc2UuZGF0YSkge1xuXHRcdFx0XHRcdGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCB1c2VyIGluZm8gZnJvbSBQYXlQYWxcIik7XG5cdFx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgdXNlckluZm8gPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0XHRjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4odXNlckluZm8pO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdGlkOiB1c2VySW5mby51c2VyX2lkLFxuXHRcdFx0XHRcdFx0bmFtZTogdXNlckluZm8ubmFtZSxcblx0XHRcdFx0XHRcdGVtYWlsOiB1c2VySW5mby5lbWFpbCxcblx0XHRcdFx0XHRcdGltYWdlOiB1c2VySW5mby5waWN0dXJlLFxuXHRcdFx0XHRcdFx0ZW1haWxWZXJpZmllZDogdXNlckluZm8uZW1haWxfdmVyaWZpZWQsXG5cdFx0XHRcdFx0XHQuLi51c2VyTWFwXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRkYXRhOiB1c2VySW5mb1xuXHRcdFx0XHR9O1xuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0bG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHVzZXIgaW5mbyBmcm9tIFBheVBhbDpcIiwgZXJyb3IpO1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblx0XHR9LFxuXHRcdG9wdGlvbnNcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9zb2NpYWwtcHJvdmlkZXJzL3BvbGFyLnRzXG5jb25zdCBwb2xhciA9IChvcHRpb25zKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwicG9sYXJcIixcblx0XHRuYW1lOiBcIlBvbGFyXCIsXG5cdFx0Y3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkge1xuXHRcdFx0Y29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1xuXHRcdFx0XHRcIm9wZW5pZFwiLFxuXHRcdFx0XHRcInByb2ZpbGVcIixcblx0XHRcdFx0XCJlbWFpbFwiXG5cdFx0XHRdO1xuXHRcdFx0aWYgKG9wdGlvbnMuc2NvcGUpIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcblx0XHRcdGlmIChzY29wZXMpIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuXHRcdFx0cmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuXHRcdFx0XHRpZDogXCJwb2xhclwiLFxuXHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHRhdXRob3JpemF0aW9uRW5kcG9pbnQ6IFwiaHR0cHM6Ly9wb2xhci5zaC9vYXV0aDIvYXV0aG9yaXplXCIsXG5cdFx0XHRcdHNjb3BlczogX3Njb3Blcyxcblx0XHRcdFx0c3RhdGUsXG5cdFx0XHRcdGNvZGVWZXJpZmllcixcblx0XHRcdFx0cmVkaXJlY3RVUkksXG5cdFx0XHRcdHByb21wdDogb3B0aW9ucy5wcm9tcHRcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0dmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSA9PiB7XG5cdFx0XHRyZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG5cdFx0XHRcdGNvZGUsXG5cdFx0XHRcdGNvZGVWZXJpZmllcixcblx0XHRcdFx0cmVkaXJlY3RVUkksXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9hcGkucG9sYXIuc2gvdjEvb2F1dGgyL3Rva2VuXCJcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0cmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuXHRcdFx0cmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG5cdFx0XHRcdHJlZnJlc2hUb2tlbixcblx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG5cdFx0XHRcdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vYXBpLnBvbGFyLnNoL3YxL29hdXRoMi90b2tlblwiXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG5cdFx0XHRpZiAob3B0aW9ucy5nZXRVc2VySW5mbykgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuXHRcdFx0Y29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXCJodHRwczovL2FwaS5wb2xhci5zaC92MS9vYXV0aDIvdXNlcmluZm9cIiwgeyBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gIH0gfSk7XG5cdFx0XHRpZiAoZXJyb3IpIHJldHVybiBudWxsO1xuXHRcdFx0Y29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdGlkOiBwcm9maWxlLmlkLFxuXHRcdFx0XHRcdG5hbWU6IHByb2ZpbGUucHVibGljX25hbWUgfHwgcHJvZmlsZS51c2VybmFtZSxcblx0XHRcdFx0XHRlbWFpbDogcHJvZmlsZS5lbWFpbCxcblx0XHRcdFx0XHRpbWFnZTogcHJvZmlsZS5hdmF0YXJfdXJsLFxuXHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHByb2ZpbGUuZW1haWxfdmVyaWZpZWQgPz8gZmFsc2UsXG5cdFx0XHRcdFx0Li4udXNlck1hcFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRkYXRhOiBwcm9maWxlXG5cdFx0XHR9O1xuXHRcdH0sXG5cdFx0b3B0aW9uc1xuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL3NvY2lhbC1wcm92aWRlcnMvcmVkZGl0LnRzXG5jb25zdCByZWRkaXQgPSAob3B0aW9ucykgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcInJlZGRpdFwiLFxuXHRcdG5hbWU6IFwiUmVkZGl0XCIsXG5cdFx0Y3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIHJlZGlyZWN0VVJJIH0pIHtcblx0XHRcdGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcImlkZW50aXR5XCJdO1xuXHRcdFx0aWYgKG9wdGlvbnMuc2NvcGUpIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcblx0XHRcdGlmIChzY29wZXMpIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuXHRcdFx0cmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuXHRcdFx0XHRpZDogXCJyZWRkaXRcIixcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0YXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8vd3d3LnJlZGRpdC5jb20vYXBpL3YxL2F1dGhvcml6ZVwiLFxuXHRcdFx0XHRzY29wZXM6IF9zY29wZXMsXG5cdFx0XHRcdHN0YXRlLFxuXHRcdFx0XHRyZWRpcmVjdFVSSSxcblx0XHRcdFx0ZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb25cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0dmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuXHRcdFx0Y29uc3QgYm9keSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuXHRcdFx0XHRncmFudF90eXBlOiBcImF1dGhvcml6YXRpb25fY29kZVwiLFxuXHRcdFx0XHRjb2RlLFxuXHRcdFx0XHRyZWRpcmVjdF91cmk6IG9wdGlvbnMucmVkaXJlY3RVUkkgfHwgcmVkaXJlY3RVUklcblx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXCJodHRwczovL3d3dy5yZWRkaXQuY29tL2FwaS92MS9hY2Nlc3NfdG9rZW5cIiwge1xuXHRcdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0XCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIixcblx0XHRcdFx0XHRhY2NlcHQ6IFwidGV4dC9wbGFpblwiLFxuXHRcdFx0XHRcdFwidXNlci1hZ2VudFwiOiBcImJldHRlci1hdXRoXCIsXG5cdFx0XHRcdFx0QXV0aG9yaXphdGlvbjogYEJhc2ljICR7YmFzZTY0LmVuY29kZShgJHtvcHRpb25zLmNsaWVudElkfToke29wdGlvbnMuY2xpZW50U2VjcmV0fWApfWBcblx0XHRcdFx0fSxcblx0XHRcdFx0Ym9keTogYm9keS50b1N0cmluZygpXG5cdFx0XHR9KTtcblx0XHRcdGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG5cdFx0XHRyZXR1cm4gZ2V0T0F1dGgyVG9rZW5zKGRhdGEpO1xuXHRcdH0sXG5cdFx0cmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuXHRcdFx0cmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG5cdFx0XHRcdHJlZnJlc2hUb2tlbixcblx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG5cdFx0XHRcdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRhdXRoZW50aWNhdGlvbjogXCJiYXNpY1wiLFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vd3d3LnJlZGRpdC5jb20vYXBpL3YxL2FjY2Vzc190b2tlblwiXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG5cdFx0XHRpZiAob3B0aW9ucy5nZXRVc2VySW5mbykgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuXHRcdFx0Y29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXCJodHRwczovL29hdXRoLnJlZGRpdC5jb20vYXBpL3YxL21lXCIsIHsgaGVhZGVyczoge1xuXHRcdFx0XHRBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YCxcblx0XHRcdFx0XCJVc2VyLUFnZW50XCI6IFwiYmV0dGVyLWF1dGhcIlxuXHRcdFx0fSB9KTtcblx0XHRcdGlmIChlcnJvcikgcmV0dXJuIG51bGw7XG5cdFx0XHRjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0aWQ6IHByb2ZpbGUuaWQsXG5cdFx0XHRcdFx0bmFtZTogcHJvZmlsZS5uYW1lLFxuXHRcdFx0XHRcdGVtYWlsOiBwcm9maWxlLm9hdXRoX2NsaWVudF9pZCxcblx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiBwcm9maWxlLmhhc192ZXJpZmllZF9lbWFpbCxcblx0XHRcdFx0XHRpbWFnZTogcHJvZmlsZS5pY29uX2ltZz8uc3BsaXQoXCI/XCIpWzBdLFxuXHRcdFx0XHRcdC4uLnVzZXJNYXBcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGF0YTogcHJvZmlsZVxuXHRcdFx0fTtcblx0XHR9LFxuXHRcdG9wdGlvbnNcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9zb2NpYWwtcHJvdmlkZXJzL3JvYmxveC50c1xuY29uc3Qgcm9ibG94ID0gKG9wdGlvbnMpID0+IHtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJyb2Jsb3hcIixcblx0XHRuYW1lOiBcIlJvYmxveFwiLFxuXHRcdGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCByZWRpcmVjdFVSSSB9KSB7XG5cdFx0XHRjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJvcGVuaWRcIiwgXCJwcm9maWxlXCJdO1xuXHRcdFx0aWYgKG9wdGlvbnMuc2NvcGUpIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcblx0XHRcdGlmIChzY29wZXMpIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuXHRcdFx0cmV0dXJuIG5ldyBVUkwoYGh0dHBzOi8vYXBpcy5yb2Jsb3guY29tL29hdXRoL3YxL2F1dGhvcml6ZT9zY29wZT0ke19zY29wZXMuam9pbihcIitcIil9JnJlc3BvbnNlX3R5cGU9Y29kZSZjbGllbnRfaWQ9JHtvcHRpb25zLmNsaWVudElkfSZyZWRpcmVjdF91cmk9JHtlbmNvZGVVUklDb21wb25lbnQob3B0aW9ucy5yZWRpcmVjdFVSSSB8fCByZWRpcmVjdFVSSSl9JnN0YXRlPSR7c3RhdGV9JnByb21wdD0ke29wdGlvbnMucHJvbXB0IHx8IFwic2VsZWN0X2FjY291bnQgY29uc2VudFwifWApO1xuXHRcdH0sXG5cdFx0dmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuXHRcdFx0cmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuXHRcdFx0XHRjb2RlLFxuXHRcdFx0XHRyZWRpcmVjdFVSSTogb3B0aW9ucy5yZWRpcmVjdFVSSSB8fCByZWRpcmVjdFVSSSxcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0dG9rZW5FbmRwb2ludDogXCJodHRwczovL2FwaXMucm9ibG94LmNvbS9vYXV0aC92MS90b2tlblwiLFxuXHRcdFx0XHRhdXRoZW50aWNhdGlvbjogXCJwb3N0XCJcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0cmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuXHRcdFx0cmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG5cdFx0XHRcdHJlZnJlc2hUb2tlbixcblx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG5cdFx0XHRcdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vYXBpcy5yb2Jsb3guY29tL29hdXRoL3YxL3Rva2VuXCJcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0YXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcblx0XHRcdGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG5cdFx0XHRjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcImh0dHBzOi8vYXBpcy5yb2Jsb3guY29tL29hdXRoL3YxL3VzZXJpbmZvXCIsIHsgaGVhZGVyczogeyBhdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YCB9IH0pO1xuXHRcdFx0aWYgKGVycm9yKSByZXR1cm4gbnVsbDtcblx0XHRcdGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lihwcm9maWxlKTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRpZDogcHJvZmlsZS5zdWIsXG5cdFx0XHRcdFx0bmFtZTogcHJvZmlsZS5uaWNrbmFtZSB8fCBwcm9maWxlLnByZWZlcnJlZF91c2VybmFtZSB8fCBcIlwiLFxuXHRcdFx0XHRcdGltYWdlOiBwcm9maWxlLnBpY3R1cmUsXG5cdFx0XHRcdFx0ZW1haWw6IHByb2ZpbGUucHJlZmVycmVkX3VzZXJuYW1lIHx8IG51bGwsXG5cdFx0XHRcdFx0ZW1haWxWZXJpZmllZDogZmFsc2UsXG5cdFx0XHRcdFx0Li4udXNlck1hcFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRkYXRhOiB7IC4uLnByb2ZpbGUgfVxuXHRcdFx0fTtcblx0XHR9LFxuXHRcdG9wdGlvbnNcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9zb2NpYWwtcHJvdmlkZXJzL3NhbGVzZm9yY2UudHNcbmNvbnN0IHNhbGVzZm9yY2UgPSAob3B0aW9ucykgPT4ge1xuXHRjb25zdCBpc1NhbmRib3ggPSAob3B0aW9ucy5lbnZpcm9ubWVudCA/PyBcInByb2R1Y3Rpb25cIikgPT09IFwic2FuZGJveFwiO1xuXHRjb25zdCBhdXRob3JpemF0aW9uRW5kcG9pbnQgPSBvcHRpb25zLmxvZ2luVXJsID8gYGh0dHBzOi8vJHtvcHRpb25zLmxvZ2luVXJsfS9zZXJ2aWNlcy9vYXV0aDIvYXV0aG9yaXplYCA6IGlzU2FuZGJveCA/IFwiaHR0cHM6Ly90ZXN0LnNhbGVzZm9yY2UuY29tL3NlcnZpY2VzL29hdXRoMi9hdXRob3JpemVcIiA6IFwiaHR0cHM6Ly9sb2dpbi5zYWxlc2ZvcmNlLmNvbS9zZXJ2aWNlcy9vYXV0aDIvYXV0aG9yaXplXCI7XG5cdGNvbnN0IHRva2VuRW5kcG9pbnQgPSBvcHRpb25zLmxvZ2luVXJsID8gYGh0dHBzOi8vJHtvcHRpb25zLmxvZ2luVXJsfS9zZXJ2aWNlcy9vYXV0aDIvdG9rZW5gIDogaXNTYW5kYm94ID8gXCJodHRwczovL3Rlc3Quc2FsZXNmb3JjZS5jb20vc2VydmljZXMvb2F1dGgyL3Rva2VuXCIgOiBcImh0dHBzOi8vbG9naW4uc2FsZXNmb3JjZS5jb20vc2VydmljZXMvb2F1dGgyL3Rva2VuXCI7XG5cdGNvbnN0IHVzZXJJbmZvRW5kcG9pbnQgPSBvcHRpb25zLmxvZ2luVXJsID8gYGh0dHBzOi8vJHtvcHRpb25zLmxvZ2luVXJsfS9zZXJ2aWNlcy9vYXV0aDIvdXNlcmluZm9gIDogaXNTYW5kYm94ID8gXCJodHRwczovL3Rlc3Quc2FsZXNmb3JjZS5jb20vc2VydmljZXMvb2F1dGgyL3VzZXJpbmZvXCIgOiBcImh0dHBzOi8vbG9naW4uc2FsZXNmb3JjZS5jb20vc2VydmljZXMvb2F1dGgyL3VzZXJpbmZvXCI7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwic2FsZXNmb3JjZVwiLFxuXHRcdG5hbWU6IFwiU2FsZXNmb3JjZVwiLFxuXHRcdGFzeW5jIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCBjb2RlVmVyaWZpZXIsIHJlZGlyZWN0VVJJIH0pIHtcblx0XHRcdGlmICghb3B0aW9ucy5jbGllbnRJZCB8fCAhb3B0aW9ucy5jbGllbnRTZWNyZXQpIHtcblx0XHRcdFx0bG9nZ2VyLmVycm9yKFwiQ2xpZW50IElkIGFuZCBDbGllbnQgU2VjcmV0IGFyZSByZXF1aXJlZCBmb3IgU2FsZXNmb3JjZS4gTWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhlbSBpbiB0aGUgb3B0aW9ucy5cIik7XG5cdFx0XHRcdHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJDTElFTlRfSURfQU5EX1NFQ1JFVF9SRVFVSVJFRFwiKTtcblx0XHRcdH1cblx0XHRcdGlmICghY29kZVZlcmlmaWVyKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiY29kZVZlcmlmaWVyIGlzIHJlcXVpcmVkIGZvciBTYWxlc2ZvcmNlXCIpO1xuXHRcdFx0Y29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1xuXHRcdFx0XHRcIm9wZW5pZFwiLFxuXHRcdFx0XHRcImVtYWlsXCIsXG5cdFx0XHRcdFwicHJvZmlsZVwiXG5cdFx0XHRdO1xuXHRcdFx0aWYgKG9wdGlvbnMuc2NvcGUpIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcblx0XHRcdGlmIChzY29wZXMpIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuXHRcdFx0cmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuXHRcdFx0XHRpZDogXCJzYWxlc2ZvcmNlXCIsXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdGF1dGhvcml6YXRpb25FbmRwb2ludCxcblx0XHRcdFx0c2NvcGVzOiBfc2NvcGVzLFxuXHRcdFx0XHRzdGF0ZSxcblx0XHRcdFx0Y29kZVZlcmlmaWVyLFxuXHRcdFx0XHRyZWRpcmVjdFVSSTogb3B0aW9ucy5yZWRpcmVjdFVSSSB8fCByZWRpcmVjdFVSSVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHR2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCBjb2RlVmVyaWZpZXIsIHJlZGlyZWN0VVJJIH0pID0+IHtcblx0XHRcdHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcblx0XHRcdFx0Y29kZSxcblx0XHRcdFx0Y29kZVZlcmlmaWVyLFxuXHRcdFx0XHRyZWRpcmVjdFVSSTogb3B0aW9ucy5yZWRpcmVjdFVSSSB8fCByZWRpcmVjdFVSSSxcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0dG9rZW5FbmRwb2ludFxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRyZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG5cdFx0XHRyZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcblx0XHRcdFx0cmVmcmVzaFRva2VuLFxuXHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0Y2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG5cdFx0XHRcdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG5cdFx0XHRpZiAob3B0aW9ucy5nZXRVc2VySW5mbykgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgeyBkYXRhOiB1c2VyIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaCh1c2VySW5mb0VuZHBvaW50LCB7IGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWAgfSB9KTtcblx0XHRcdFx0aWYgKCF1c2VyKSB7XG5cdFx0XHRcdFx0bG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHVzZXIgaW5mbyBmcm9tIFNhbGVzZm9yY2VcIik7XG5cdFx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHVzZXIpO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdGlkOiB1c2VyLnVzZXJfaWQsXG5cdFx0XHRcdFx0XHRuYW1lOiB1c2VyLm5hbWUsXG5cdFx0XHRcdFx0XHRlbWFpbDogdXNlci5lbWFpbCxcblx0XHRcdFx0XHRcdGltYWdlOiB1c2VyLnBob3Rvcz8ucGljdHVyZSB8fCB1c2VyLnBob3Rvcz8udGh1bWJuYWlsLFxuXHRcdFx0XHRcdFx0ZW1haWxWZXJpZmllZDogdXNlci5lbWFpbF92ZXJpZmllZCA/PyBmYWxzZSxcblx0XHRcdFx0XHRcdC4uLnVzZXJNYXBcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGRhdGE6IHVzZXJcblx0XHRcdFx0fTtcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCB1c2VyIGluZm8gZnJvbSBTYWxlc2ZvcmNlOlwiLCBlcnJvcik7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0b3B0aW9uc1xuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL3NvY2lhbC1wcm92aWRlcnMvc2xhY2sudHNcbmNvbnN0IHNsYWNrID0gKG9wdGlvbnMpID0+IHtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJzbGFja1wiLFxuXHRcdG5hbWU6IFwiU2xhY2tcIixcblx0XHRjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIHNjb3BlcywgcmVkaXJlY3RVUkkgfSkge1xuXHRcdFx0Y29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1xuXHRcdFx0XHRcIm9wZW5pZFwiLFxuXHRcdFx0XHRcInByb2ZpbGVcIixcblx0XHRcdFx0XCJlbWFpbFwiXG5cdFx0XHRdO1xuXHRcdFx0aWYgKHNjb3BlcykgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG5cdFx0XHRpZiAob3B0aW9ucy5zY29wZSkgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuXHRcdFx0Y29uc3QgdXJsID0gbmV3IFVSTChcImh0dHBzOi8vc2xhY2suY29tL29wZW5pZC9jb25uZWN0L2F1dGhvcml6ZVwiKTtcblx0XHRcdHVybC5zZWFyY2hQYXJhbXMuc2V0KFwic2NvcGVcIiwgX3Njb3Blcy5qb2luKFwiIFwiKSk7XG5cdFx0XHR1cmwuc2VhcmNoUGFyYW1zLnNldChcInJlc3BvbnNlX3R5cGVcIiwgXCJjb2RlXCIpO1xuXHRcdFx0dXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJjbGllbnRfaWRcIiwgb3B0aW9ucy5jbGllbnRJZCk7XG5cdFx0XHR1cmwuc2VhcmNoUGFyYW1zLnNldChcInJlZGlyZWN0X3VyaVwiLCBvcHRpb25zLnJlZGlyZWN0VVJJIHx8IHJlZGlyZWN0VVJJKTtcblx0XHRcdHVybC5zZWFyY2hQYXJhbXMuc2V0KFwic3RhdGVcIiwgc3RhdGUpO1xuXHRcdFx0cmV0dXJuIHVybDtcblx0XHR9LFxuXHRcdHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIHJlZGlyZWN0VVJJIH0pID0+IHtcblx0XHRcdHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcblx0XHRcdFx0Y29kZSxcblx0XHRcdFx0cmVkaXJlY3RVUkksXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9zbGFjay5jb20vYXBpL29wZW5pZC5jb25uZWN0LnRva2VuXCJcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0cmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuXHRcdFx0cmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG5cdFx0XHRcdHJlZnJlc2hUb2tlbixcblx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG5cdFx0XHRcdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vc2xhY2suY29tL2FwaS9vcGVuaWQuY29ubmVjdC50b2tlblwiXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG5cdFx0XHRpZiAob3B0aW9ucy5nZXRVc2VySW5mbykgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuXHRcdFx0Y29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXCJodHRwczovL3NsYWNrLmNvbS9hcGkvb3BlbmlkLmNvbm5lY3QudXNlckluZm9cIiwgeyBoZWFkZXJzOiB7IGF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gIH0gfSk7XG5cdFx0XHRpZiAoZXJyb3IpIHJldHVybiBudWxsO1xuXHRcdFx0Y29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdGlkOiBwcm9maWxlW1wiaHR0cHM6Ly9zbGFjay5jb20vdXNlcl9pZFwiXSxcblx0XHRcdFx0XHRuYW1lOiBwcm9maWxlLm5hbWUgfHwgXCJcIixcblx0XHRcdFx0XHRlbWFpbDogcHJvZmlsZS5lbWFpbCxcblx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiBwcm9maWxlLmVtYWlsX3ZlcmlmaWVkLFxuXHRcdFx0XHRcdGltYWdlOiBwcm9maWxlLnBpY3R1cmUgfHwgcHJvZmlsZVtcImh0dHBzOi8vc2xhY2suY29tL3VzZXJfaW1hZ2VfNTEyXCJdLFxuXHRcdFx0XHRcdC4uLnVzZXJNYXBcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGF0YTogcHJvZmlsZVxuXHRcdFx0fTtcblx0XHR9LFxuXHRcdG9wdGlvbnNcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9zb2NpYWwtcHJvdmlkZXJzL3Nwb3RpZnkudHNcbmNvbnN0IHNwb3RpZnkgPSAob3B0aW9ucykgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcInNwb3RpZnlcIixcblx0XHRuYW1lOiBcIlNwb3RpZnlcIixcblx0XHRjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIHNjb3BlcywgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSB7XG5cdFx0XHRjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJ1c2VyLXJlYWQtZW1haWxcIl07XG5cdFx0XHRpZiAob3B0aW9ucy5zY29wZSkgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuXHRcdFx0aWYgKHNjb3BlcykgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG5cdFx0XHRyZXR1cm4gY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG5cdFx0XHRcdGlkOiBcInNwb3RpZnlcIixcblx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0YXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8vYWNjb3VudHMuc3BvdGlmeS5jb20vYXV0aG9yaXplXCIsXG5cdFx0XHRcdHNjb3BlczogX3Njb3Blcyxcblx0XHRcdFx0c3RhdGUsXG5cdFx0XHRcdGNvZGVWZXJpZmllcixcblx0XHRcdFx0cmVkaXJlY3RVUklcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0dmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSA9PiB7XG5cdFx0XHRyZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG5cdFx0XHRcdGNvZGUsXG5cdFx0XHRcdGNvZGVWZXJpZmllcixcblx0XHRcdFx0cmVkaXJlY3RVUkksXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9hY2NvdW50cy5zcG90aWZ5LmNvbS9hcGkvdG9rZW5cIlxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRyZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG5cdFx0XHRyZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcblx0XHRcdFx0cmVmcmVzaFRva2VuLFxuXHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0Y2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG5cdFx0XHRcdFx0Y2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcblx0XHRcdFx0XHRjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9hY2NvdW50cy5zcG90aWZ5LmNvbS9hcGkvdG9rZW5cIlxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuXHRcdFx0aWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcblx0XHRcdGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFwiaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvbWVcIiwge1xuXHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWAgfVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoZXJyb3IpIHJldHVybiBudWxsO1xuXHRcdFx0Y29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdGlkOiBwcm9maWxlLmlkLFxuXHRcdFx0XHRcdG5hbWU6IHByb2ZpbGUuZGlzcGxheV9uYW1lLFxuXHRcdFx0XHRcdGVtYWlsOiBwcm9maWxlLmVtYWlsLFxuXHRcdFx0XHRcdGltYWdlOiBwcm9maWxlLmltYWdlc1swXT8udXJsLFxuXHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdC4uLnVzZXJNYXBcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGF0YTogcHJvZmlsZVxuXHRcdFx0fTtcblx0XHR9LFxuXHRcdG9wdGlvbnNcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9zb2NpYWwtcHJvdmlkZXJzL3Rpa3Rvay50c1xuY29uc3QgdGlrdG9rID0gKG9wdGlvbnMpID0+IHtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJ0aWt0b2tcIixcblx0XHRuYW1lOiBcIlRpa1Rva1wiLFxuXHRcdGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCByZWRpcmVjdFVSSSB9KSB7XG5cdFx0XHRjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJ1c2VyLmluZm8ucHJvZmlsZVwiXTtcblx0XHRcdGlmIChvcHRpb25zLnNjb3BlKSBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG5cdFx0XHRpZiAoc2NvcGVzKSBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcblx0XHRcdHJldHVybiBuZXcgVVJMKGBodHRwczovL3d3dy50aWt0b2suY29tL3YyL2F1dGgvYXV0aG9yaXplP3Njb3BlPSR7X3Njb3Blcy5qb2luKFwiLFwiKX0mcmVzcG9uc2VfdHlwZT1jb2RlJmNsaWVudF9rZXk9JHtvcHRpb25zLmNsaWVudEtleX0mcmVkaXJlY3RfdXJpPSR7ZW5jb2RlVVJJQ29tcG9uZW50KG9wdGlvbnMucmVkaXJlY3RVUkkgfHwgcmVkaXJlY3RVUkkpfSZzdGF0ZT0ke3N0YXRlfWApO1xuXHRcdH0sXG5cdFx0dmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuXHRcdFx0cmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuXHRcdFx0XHRjb2RlLFxuXHRcdFx0XHRyZWRpcmVjdFVSSTogb3B0aW9ucy5yZWRpcmVjdFVSSSB8fCByZWRpcmVjdFVSSSxcblx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG5cdFx0XHRcdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vb3Blbi50aWt0b2thcGlzLmNvbS92Mi9vYXV0aC90b2tlbi9cIlxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRyZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG5cdFx0XHRyZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcblx0XHRcdFx0cmVmcmVzaFRva2VuLFxuXHRcdFx0XHRvcHRpb25zOiB7IGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXQgfSxcblx0XHRcdFx0dG9rZW5FbmRwb2ludDogXCJodHRwczovL29wZW4udGlrdG9rYXBpcy5jb20vdjIvb2F1dGgvdG9rZW4vXCIsXG5cdFx0XHRcdGF1dGhlbnRpY2F0aW9uOiBcInBvc3RcIixcblx0XHRcdFx0ZXh0cmFQYXJhbXM6IHsgY2xpZW50X2tleTogb3B0aW9ucy5jbGllbnRLZXkgfVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuXHRcdFx0aWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcblx0XHRcdGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKGBodHRwczovL29wZW4udGlrdG9rYXBpcy5jb20vdjIvdXNlci9pbmZvLz9maWVsZHM9JHtbXG5cdFx0XHRcdFwib3Blbl9pZFwiLFxuXHRcdFx0XHRcImF2YXRhcl9sYXJnZV91cmxcIixcblx0XHRcdFx0XCJkaXNwbGF5X25hbWVcIixcblx0XHRcdFx0XCJ1c2VybmFtZVwiXG5cdFx0XHRdLmpvaW4oXCIsXCIpfWAsIHsgaGVhZGVyczogeyBhdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YCB9IH0pO1xuXHRcdFx0aWYgKGVycm9yKSByZXR1cm4gbnVsbDtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRlbWFpbDogcHJvZmlsZS5kYXRhLnVzZXIuZW1haWwgfHwgcHJvZmlsZS5kYXRhLnVzZXIudXNlcm5hbWUsXG5cdFx0XHRcdFx0aWQ6IHByb2ZpbGUuZGF0YS51c2VyLm9wZW5faWQsXG5cdFx0XHRcdFx0bmFtZTogcHJvZmlsZS5kYXRhLnVzZXIuZGlzcGxheV9uYW1lIHx8IHByb2ZpbGUuZGF0YS51c2VyLnVzZXJuYW1lLFxuXHRcdFx0XHRcdGltYWdlOiBwcm9maWxlLmRhdGEudXNlci5hdmF0YXJfbGFyZ2VfdXJsLFxuXHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IGZhbHNlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRhdGE6IHByb2ZpbGVcblx0XHRcdH07XG5cdFx0fSxcblx0XHRvcHRpb25zXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvc29jaWFsLXByb3ZpZGVycy90d2l0Y2gudHNcbmNvbnN0IHR3aXRjaCA9IChvcHRpb25zKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwidHdpdGNoXCIsXG5cdFx0bmFtZTogXCJUd2l0Y2hcIixcblx0XHRjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIHNjb3BlcywgcmVkaXJlY3RVUkkgfSkge1xuXHRcdFx0Y29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1widXNlcjpyZWFkOmVtYWlsXCIsIFwib3BlbmlkXCJdO1xuXHRcdFx0aWYgKG9wdGlvbnMuc2NvcGUpIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcblx0XHRcdGlmIChzY29wZXMpIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuXHRcdFx0cmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuXHRcdFx0XHRpZDogXCJ0d2l0Y2hcIixcblx0XHRcdFx0cmVkaXJlY3RVUkksXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdGF1dGhvcml6YXRpb25FbmRwb2ludDogXCJodHRwczovL2lkLnR3aXRjaC50di9vYXV0aDIvYXV0aG9yaXplXCIsXG5cdFx0XHRcdHNjb3BlczogX3Njb3Blcyxcblx0XHRcdFx0c3RhdGUsXG5cdFx0XHRcdGNsYWltczogb3B0aW9ucy5jbGFpbXMgfHwgW1xuXHRcdFx0XHRcdFwiZW1haWxcIixcblx0XHRcdFx0XHRcImVtYWlsX3ZlcmlmaWVkXCIsXG5cdFx0XHRcdFx0XCJwcmVmZXJyZWRfdXNlcm5hbWVcIixcblx0XHRcdFx0XHRcInBpY3R1cmVcIlxuXHRcdFx0XHRdXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIHJlZGlyZWN0VVJJIH0pID0+IHtcblx0XHRcdHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcblx0XHRcdFx0Y29kZSxcblx0XHRcdFx0cmVkaXJlY3RVUkksXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9pZC50d2l0Y2gudHYvb2F1dGgyL3Rva2VuXCJcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0cmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuXHRcdFx0cmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG5cdFx0XHRcdHJlZnJlc2hUb2tlbixcblx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG5cdFx0XHRcdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vaWQudHdpdGNoLnR2L29hdXRoMi90b2tlblwiXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG5cdFx0XHRpZiAob3B0aW9ucy5nZXRVc2VySW5mbykgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuXHRcdFx0Y29uc3QgaWRUb2tlbiA9IHRva2VuLmlkVG9rZW47XG5cdFx0XHRpZiAoIWlkVG9rZW4pIHtcblx0XHRcdFx0bG9nZ2VyLmVycm9yKFwiTm8gaWRUb2tlbiBmb3VuZCBpbiB0b2tlblwiKTtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBwcm9maWxlID0gZGVjb2RlSnd0KGlkVG9rZW4pO1xuXHRcdFx0Y29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdGlkOiBwcm9maWxlLnN1Yixcblx0XHRcdFx0XHRuYW1lOiBwcm9maWxlLnByZWZlcnJlZF91c2VybmFtZSxcblx0XHRcdFx0XHRlbWFpbDogcHJvZmlsZS5lbWFpbCxcblx0XHRcdFx0XHRpbWFnZTogcHJvZmlsZS5waWN0dXJlLFxuXHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHByb2ZpbGUuZW1haWxfdmVyaWZpZWQsXG5cdFx0XHRcdFx0Li4udXNlck1hcFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRkYXRhOiBwcm9maWxlXG5cdFx0XHR9O1xuXHRcdH0sXG5cdFx0b3B0aW9uc1xuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL3NvY2lhbC1wcm92aWRlcnMvdHdpdHRlci50c1xuY29uc3QgdHdpdHRlciA9IChvcHRpb25zKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwidHdpdHRlclwiLFxuXHRcdG5hbWU6IFwiVHdpdHRlclwiLFxuXHRcdGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoZGF0YSkge1xuXHRcdFx0Y29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1xuXHRcdFx0XHRcInVzZXJzLnJlYWRcIixcblx0XHRcdFx0XCJ0d2VldC5yZWFkXCIsXG5cdFx0XHRcdFwib2ZmbGluZS5hY2Nlc3NcIixcblx0XHRcdFx0XCJ1c2Vycy5lbWFpbFwiXG5cdFx0XHRdO1xuXHRcdFx0aWYgKG9wdGlvbnMuc2NvcGUpIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcblx0XHRcdGlmIChkYXRhLnNjb3BlcykgX3Njb3Blcy5wdXNoKC4uLmRhdGEuc2NvcGVzKTtcblx0XHRcdHJldHVybiBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcblx0XHRcdFx0aWQ6IFwidHdpdHRlclwiLFxuXHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHRhdXRob3JpemF0aW9uRW5kcG9pbnQ6IFwiaHR0cHM6Ly94LmNvbS9pL29hdXRoMi9hdXRob3JpemVcIixcblx0XHRcdFx0c2NvcGVzOiBfc2NvcGVzLFxuXHRcdFx0XHRzdGF0ZTogZGF0YS5zdGF0ZSxcblx0XHRcdFx0Y29kZVZlcmlmaWVyOiBkYXRhLmNvZGVWZXJpZmllcixcblx0XHRcdFx0cmVkaXJlY3RVUkk6IGRhdGEucmVkaXJlY3RVUklcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0dmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSA9PiB7XG5cdFx0XHRyZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG5cdFx0XHRcdGNvZGUsXG5cdFx0XHRcdGNvZGVWZXJpZmllcixcblx0XHRcdFx0YXV0aGVudGljYXRpb246IFwiYmFzaWNcIixcblx0XHRcdFx0cmVkaXJlY3RVUkksXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9hcGkueC5jb20vMi9vYXV0aDIvdG9rZW5cIlxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRyZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG5cdFx0XHRyZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcblx0XHRcdFx0cmVmcmVzaFRva2VuLFxuXHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0Y2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG5cdFx0XHRcdFx0Y2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcblx0XHRcdFx0XHRjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGF1dGhlbnRpY2F0aW9uOiBcImJhc2ljXCIsXG5cdFx0XHRcdHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9hcGkueC5jb20vMi9vYXV0aDIvdG9rZW5cIlxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuXHRcdFx0aWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcblx0XHRcdGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3I6IHByb2ZpbGVFcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXCJodHRwczovL2FwaS54LmNvbS8yL3VzZXJzL21lP3VzZXIuZmllbGRzPXByb2ZpbGVfaW1hZ2VfdXJsXCIsIHtcblx0XHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0XHRoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gIH1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKHByb2ZpbGVFcnJvcikgcmV0dXJuIG51bGw7XG5cdFx0XHRjb25zdCB7IGRhdGE6IGVtYWlsRGF0YSwgZXJyb3I6IGVtYWlsRXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFwiaHR0cHM6Ly9hcGkueC5jb20vMi91c2Vycy9tZT91c2VyLmZpZWxkcz1jb25maXJtZWRfZW1haWxcIiwge1xuXHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWAgfVxuXHRcdFx0fSk7XG5cdFx0XHRsZXQgZW1haWxWZXJpZmllZCA9IGZhbHNlO1xuXHRcdFx0aWYgKCFlbWFpbEVycm9yICYmIGVtYWlsRGF0YT8uZGF0YT8uY29uZmlybWVkX2VtYWlsKSB7XG5cdFx0XHRcdHByb2ZpbGUuZGF0YS5lbWFpbCA9IGVtYWlsRGF0YS5kYXRhLmNvbmZpcm1lZF9lbWFpbDtcblx0XHRcdFx0ZW1haWxWZXJpZmllZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0aWQ6IHByb2ZpbGUuZGF0YS5pZCxcblx0XHRcdFx0XHRuYW1lOiBwcm9maWxlLmRhdGEubmFtZSxcblx0XHRcdFx0XHRlbWFpbDogcHJvZmlsZS5kYXRhLmVtYWlsIHx8IHByb2ZpbGUuZGF0YS51c2VybmFtZSB8fCBudWxsLFxuXHRcdFx0XHRcdGltYWdlOiBwcm9maWxlLmRhdGEucHJvZmlsZV9pbWFnZV91cmwsXG5cdFx0XHRcdFx0ZW1haWxWZXJpZmllZCxcblx0XHRcdFx0XHQuLi51c2VyTWFwXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRhdGE6IHByb2ZpbGVcblx0XHRcdH07XG5cdFx0fSxcblx0XHRvcHRpb25zXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvc29jaWFsLXByb3ZpZGVycy92ZXJjZWwudHNcbmNvbnN0IHZlcmNlbCA9IChvcHRpb25zKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwidmVyY2VsXCIsXG5cdFx0bmFtZTogXCJWZXJjZWxcIixcblx0XHRjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIHNjb3BlcywgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSB7XG5cdFx0XHRpZiAoIWNvZGVWZXJpZmllcikgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcImNvZGVWZXJpZmllciBpcyByZXF1aXJlZCBmb3IgVmVyY2VsXCIpO1xuXHRcdFx0bGV0IF9zY29wZXMgPSB2b2lkIDA7XG5cdFx0XHRpZiAob3B0aW9ucy5zY29wZSAhPT0gdm9pZCAwIHx8IHNjb3BlcyAhPT0gdm9pZCAwKSB7XG5cdFx0XHRcdF9zY29wZXMgPSBbXTtcblx0XHRcdFx0aWYgKG9wdGlvbnMuc2NvcGUpIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcblx0XHRcdFx0aWYgKHNjb3BlcykgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG5cdFx0XHRcdGlkOiBcInZlcmNlbFwiLFxuXHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHRhdXRob3JpemF0aW9uRW5kcG9pbnQ6IFwiaHR0cHM6Ly92ZXJjZWwuY29tL29hdXRoL2F1dGhvcml6ZVwiLFxuXHRcdFx0XHRzY29wZXM6IF9zY29wZXMsXG5cdFx0XHRcdHN0YXRlLFxuXHRcdFx0XHRjb2RlVmVyaWZpZXIsXG5cdFx0XHRcdHJlZGlyZWN0VVJJXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuXHRcdFx0cmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuXHRcdFx0XHRjb2RlLFxuXHRcdFx0XHRjb2RlVmVyaWZpZXIsXG5cdFx0XHRcdHJlZGlyZWN0VVJJLFxuXHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vYXBpLnZlcmNlbC5jb20vbG9naW4vb2F1dGgvdG9rZW5cIlxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuXHRcdFx0aWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcblx0XHRcdGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFwiaHR0cHM6Ly9hcGkudmVyY2VsLmNvbS9sb2dpbi9vYXV0aC91c2VyaW5mb1wiLCB7IGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWAgfSB9KTtcblx0XHRcdGlmIChlcnJvciB8fCAhcHJvZmlsZSkgcmV0dXJuIG51bGw7XG5cdFx0XHRjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0aWQ6IHByb2ZpbGUuc3ViLFxuXHRcdFx0XHRcdG5hbWU6IHByb2ZpbGUubmFtZSA/PyBwcm9maWxlLnByZWZlcnJlZF91c2VybmFtZSxcblx0XHRcdFx0XHRlbWFpbDogcHJvZmlsZS5lbWFpbCxcblx0XHRcdFx0XHRpbWFnZTogcHJvZmlsZS5waWN0dXJlLFxuXHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHByb2ZpbGUuZW1haWxfdmVyaWZpZWQgPz8gZmFsc2UsXG5cdFx0XHRcdFx0Li4udXNlck1hcFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRkYXRhOiBwcm9maWxlXG5cdFx0XHR9O1xuXHRcdH0sXG5cdFx0b3B0aW9uc1xuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL3NvY2lhbC1wcm92aWRlcnMvdmsudHNcbmNvbnN0IHZrID0gKG9wdGlvbnMpID0+IHtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJ2a1wiLFxuXHRcdG5hbWU6IFwiVktcIixcblx0XHRhc3luYyBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIHNjb3BlcywgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSB7XG5cdFx0XHRjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJlbWFpbFwiLCBcInBob25lXCJdO1xuXHRcdFx0aWYgKG9wdGlvbnMuc2NvcGUpIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcblx0XHRcdGlmIChzY29wZXMpIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuXHRcdFx0cmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuXHRcdFx0XHRpZDogXCJ2a1wiLFxuXHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHRhdXRob3JpemF0aW9uRW5kcG9pbnQ6IFwiaHR0cHM6Ly9pZC52ay5jb20vYXV0aG9yaXplXCIsXG5cdFx0XHRcdHNjb3BlczogX3Njb3Blcyxcblx0XHRcdFx0c3RhdGUsXG5cdFx0XHRcdHJlZGlyZWN0VVJJLFxuXHRcdFx0XHRjb2RlVmVyaWZpZXJcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0dmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSwgZGV2aWNlSWQgfSkgPT4ge1xuXHRcdFx0cmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuXHRcdFx0XHRjb2RlLFxuXHRcdFx0XHRjb2RlVmVyaWZpZXIsXG5cdFx0XHRcdHJlZGlyZWN0VVJJOiBvcHRpb25zLnJlZGlyZWN0VVJJIHx8IHJlZGlyZWN0VVJJLFxuXHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHRkZXZpY2VJZCxcblx0XHRcdFx0dG9rZW5FbmRwb2ludDogXCJodHRwczovL2lkLnZrLmNvbS9vYXV0aDIvYXV0aFwiXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcblx0XHRcdHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuXHRcdFx0XHRyZWZyZXNoVG9rZW4sXG5cdFx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0XHRjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcblx0XHRcdFx0XHRjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuXHRcdFx0XHRcdGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcblx0XHRcdFx0fSxcblx0XHRcdFx0dG9rZW5FbmRwb2ludDogXCJodHRwczovL2lkLnZrLmNvbS9vYXV0aDIvYXV0aFwiXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGFzeW5jIGdldFVzZXJJbmZvKGRhdGEpIHtcblx0XHRcdGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyhkYXRhKTtcblx0XHRcdGlmICghZGF0YS5hY2Nlc3NUb2tlbikgcmV0dXJuIG51bGw7XG5cdFx0XHRjb25zdCBmb3JtQm9keSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuXHRcdFx0XHRhY2Nlc3NfdG9rZW46IGRhdGEuYWNjZXNzVG9rZW4sXG5cdFx0XHRcdGNsaWVudF9pZDogb3B0aW9ucy5jbGllbnRJZFxuXHRcdFx0fSkudG9TdHJpbmcoKTtcblx0XHRcdGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFwiaHR0cHM6Ly9pZC52ay5jb20vb2F1dGgyL3VzZXJfaW5mb1wiLCB7XG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiB9LFxuXHRcdFx0XHRib2R5OiBmb3JtQm9keVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoZXJyb3IpIHJldHVybiBudWxsO1xuXHRcdFx0Y29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuXHRcdFx0aWYgKCFwcm9maWxlLnVzZXIuZW1haWwgJiYgIXVzZXJNYXA/LmVtYWlsKSByZXR1cm4gbnVsbDtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRpZDogcHJvZmlsZS51c2VyLnVzZXJfaWQsXG5cdFx0XHRcdFx0Zmlyc3RfbmFtZTogcHJvZmlsZS51c2VyLmZpcnN0X25hbWUsXG5cdFx0XHRcdFx0bGFzdF9uYW1lOiBwcm9maWxlLnVzZXIubGFzdF9uYW1lLFxuXHRcdFx0XHRcdGVtYWlsOiBwcm9maWxlLnVzZXIuZW1haWwsXG5cdFx0XHRcdFx0aW1hZ2U6IHByb2ZpbGUudXNlci5hdmF0YXIsXG5cdFx0XHRcdFx0ZW1haWxWZXJpZmllZDogZmFsc2UsXG5cdFx0XHRcdFx0YmlydGhkYXk6IHByb2ZpbGUudXNlci5iaXJ0aGRheSxcblx0XHRcdFx0XHRzZXg6IHByb2ZpbGUudXNlci5zZXgsXG5cdFx0XHRcdFx0bmFtZTogYCR7cHJvZmlsZS51c2VyLmZpcnN0X25hbWV9ICR7cHJvZmlsZS51c2VyLmxhc3RfbmFtZX1gLFxuXHRcdFx0XHRcdC4uLnVzZXJNYXBcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGF0YTogcHJvZmlsZVxuXHRcdFx0fTtcblx0XHR9LFxuXHRcdG9wdGlvbnNcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9zb2NpYWwtcHJvdmlkZXJzL3pvb20udHNcbmNvbnN0IHpvb20gPSAodXNlck9wdGlvbnMpID0+IHtcblx0Y29uc3Qgb3B0aW9ucyA9IHtcblx0XHRwa2NlOiB0cnVlLFxuXHRcdC4uLnVzZXJPcHRpb25zXG5cdH07XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwiem9vbVwiLFxuXHRcdG5hbWU6IFwiWm9vbVwiLFxuXHRcdGNyZWF0ZUF1dGhvcml6YXRpb25VUkw6IGFzeW5jICh7IHN0YXRlLCByZWRpcmVjdFVSSSwgY29kZVZlcmlmaWVyIH0pID0+IHtcblx0XHRcdGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuXHRcdFx0XHRyZXNwb25zZV90eXBlOiBcImNvZGVcIixcblx0XHRcdFx0cmVkaXJlY3RfdXJpOiBvcHRpb25zLnJlZGlyZWN0VVJJID8gb3B0aW9ucy5yZWRpcmVjdFVSSSA6IHJlZGlyZWN0VVJJLFxuXHRcdFx0XHRjbGllbnRfaWQ6IG9wdGlvbnMuY2xpZW50SWQsXG5cdFx0XHRcdHN0YXRlXG5cdFx0XHR9KTtcblx0XHRcdGlmIChvcHRpb25zLnBrY2UpIHtcblx0XHRcdFx0Y29uc3QgY29kZUNoYWxsZW5nZSA9IGF3YWl0IGdlbmVyYXRlQ29kZUNoYWxsZW5nZShjb2RlVmVyaWZpZXIpO1xuXHRcdFx0XHRwYXJhbXMuc2V0KFwiY29kZV9jaGFsbGVuZ2VfbWV0aG9kXCIsIFwiUzI1NlwiKTtcblx0XHRcdFx0cGFyYW1zLnNldChcImNvZGVfY2hhbGxlbmdlXCIsIGNvZGVDaGFsbGVuZ2UpO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgdXJsID0gbmV3IFVSTChcImh0dHBzOi8vem9vbS51cy9vYXV0aC9hdXRob3JpemVcIik7XG5cdFx0XHR1cmwuc2VhcmNoID0gcGFyYW1zLnRvU3RyaW5nKCk7XG5cdFx0XHRyZXR1cm4gdXJsO1xuXHRcdH0sXG5cdFx0dmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgcmVkaXJlY3RVUkksIGNvZGVWZXJpZmllciB9KSA9PiB7XG5cdFx0XHRyZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG5cdFx0XHRcdGNvZGUsXG5cdFx0XHRcdHJlZGlyZWN0VVJJOiBvcHRpb25zLnJlZGlyZWN0VVJJIHx8IHJlZGlyZWN0VVJJLFxuXHRcdFx0XHRjb2RlVmVyaWZpZXIsXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly96b29tLnVzL29hdXRoL3Rva2VuXCIsXG5cdFx0XHRcdGF1dGhlbnRpY2F0aW9uOiBcInBvc3RcIlxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRyZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuXHRcdFx0cmVmcmVzaFRva2VuLFxuXHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcblx0XHRcdFx0Y2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcblx0XHRcdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuXHRcdFx0fSxcblx0XHRcdHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly96b29tLnVzL29hdXRoL3Rva2VuXCJcblx0XHR9KSxcblx0XHRhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuXHRcdFx0aWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcblx0XHRcdGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFwiaHR0cHM6Ly9hcGkuem9vbS51cy92Mi91c2Vycy9tZVwiLCB7IGhlYWRlcnM6IHsgYXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWAgfSB9KTtcblx0XHRcdGlmIChlcnJvcikgcmV0dXJuIG51bGw7XG5cdFx0XHRjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0aWQ6IHByb2ZpbGUuaWQsXG5cdFx0XHRcdFx0bmFtZTogcHJvZmlsZS5kaXNwbGF5X25hbWUsXG5cdFx0XHRcdFx0aW1hZ2U6IHByb2ZpbGUucGljX3VybCxcblx0XHRcdFx0XHRlbWFpbDogcHJvZmlsZS5lbWFpbCxcblx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiBCb29sZWFuKHByb2ZpbGUudmVyaWZpZWQpLFxuXHRcdFx0XHRcdC4uLnVzZXJNYXBcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGF0YTogeyAuLi5wcm9maWxlIH1cblx0XHRcdH07XG5cdFx0fVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL3NvY2lhbC1wcm92aWRlcnMvaW5kZXgudHNcbmNvbnN0IHNvY2lhbFByb3ZpZGVycyA9IHtcblx0YXBwbGUsXG5cdGF0bGFzc2lhbixcblx0Y29nbml0byxcblx0ZGlzY29yZCxcblx0ZmFjZWJvb2ssXG5cdGZpZ21hLFxuXHRnaXRodWIsXG5cdG1pY3Jvc29mdCxcblx0Z29vZ2xlLFxuXHRodWdnaW5nZmFjZSxcblx0c2xhY2ssXG5cdHNwb3RpZnksXG5cdHR3aXRjaCxcblx0dHdpdHRlcixcblx0ZHJvcGJveCxcblx0a2ljayxcblx0bGluZWFyLFxuXHRsaW5rZWRpbixcblx0Z2l0bGFiLFxuXHR0aWt0b2ssXG5cdHJlZGRpdCxcblx0cm9ibG94LFxuXHRzYWxlc2ZvcmNlLFxuXHR2ayxcblx0em9vbSxcblx0bm90aW9uLFxuXHRrYWthbyxcblx0bmF2ZXIsXG5cdGxpbmUsXG5cdHBheWJpbixcblx0cGF5cGFsLFxuXHRwb2xhcixcblx0dmVyY2VsXG59O1xuY29uc3Qgc29jaWFsUHJvdmlkZXJMaXN0ID0gT2JqZWN0LmtleXMoc29jaWFsUHJvdmlkZXJzKTtcbmNvbnN0IFNvY2lhbFByb3ZpZGVyTGlzdEVudW0gPSB6LmVudW0oc29jaWFsUHJvdmlkZXJMaXN0KS5vcih6LnN0cmluZygpKTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBTb2NpYWxQcm92aWRlckxpc3RFbnVtLCBhcHBsZSwgYXRsYXNzaWFuLCBjb2duaXRvLCBkaXNjb3JkLCBkcm9wYm94LCBmYWNlYm9vaywgZmlnbWEsIGdldEFwcGxlUHVibGljS2V5LCBnZXRDb2duaXRvUHVibGljS2V5LCBnZXRHb29nbGVQdWJsaWNLZXksIGdpdGh1YiwgZ2l0bGFiLCBnb29nbGUsIGh1Z2dpbmdmYWNlLCBrYWthbywga2ljaywgbGluZSwgbGluZWFyLCBsaW5rZWRpbiwgbWljcm9zb2Z0LCBuYXZlciwgbm90aW9uLCBwYXliaW4sIHBheXBhbCwgcG9sYXIsIHJlZGRpdCwgcm9ibG94LCBzYWxlc2ZvcmNlLCBzbGFjaywgc29jaWFsUHJvdmlkZXJMaXN0LCBzb2NpYWxQcm92aWRlcnMsIHNwb3RpZnksIHRpa3RvaywgdHdpdGNoLCB0d2l0dGVyLCB2ZXJjZWwsIHZrLCB6b29tIH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/social-providers/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils-NloIXYE0.mjs":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils-NloIXYE0.mjs ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   i: () => (/* binding */ defineErrorCodes),\n/* harmony export */   n: () => (/* binding */ safeJSONParse),\n/* harmony export */   r: () => (/* binding */ generateId),\n/* harmony export */   t: () => (/* binding */ capitalizeFirstLetter)\n/* harmony export */ });\n/* harmony import */ var _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./env-DbssmzoK.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env-DbssmzoK.mjs\");\n/* harmony import */ var _better_auth_utils_random__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/utils/random */ \"(rsc)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/random.mjs\");\n\n\n\n//#region src/utils/error-codes.ts\nfunction defineErrorCodes(codes) {\n\treturn codes;\n}\n\n//#endregion\n//#region src/utils/id.ts\nconst generateId = (size) => {\n\treturn (0,_better_auth_utils_random__WEBPACK_IMPORTED_MODULE_1__.createRandomStringGenerator)(\"a-z\", \"A-Z\", \"0-9\")(size || 32);\n};\n\n//#endregion\n//#region src/utils/json.ts\nfunction safeJSONParse(data) {\n\tfunction reviver(_, value) {\n\t\tif (typeof value === \"string\") {\n\t\t\tif (/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(?:\\.\\d+)?Z$/.test(value)) {\n\t\t\t\tconst date = new Date(value);\n\t\t\t\tif (!isNaN(date.getTime())) return date;\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\ttry {\n\t\tif (typeof data !== \"string\") return data;\n\t\treturn JSON.parse(data, reviver);\n\t} catch (e) {\n\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Error parsing JSON\", { error: e });\n\t\treturn null;\n\t}\n}\n\n//#endregion\n//#region src/utils/string.ts\nfunction capitalizeFirstLetter(str) {\n\treturn str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L3V0aWxzLU5sb0lYWUUwLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBaUQ7QUFDdUI7O0FBRXhFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0ZBQTJCO0FBQ25DOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSxnREFBTSwrQkFBK0IsVUFBVTtBQUNqRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiRDpcXGhhY2thdGhvbmUyXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFwucG5wbVxcQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkXFxub2RlX21vZHVsZXNcXEBiZXR0ZXItYXV0aFxcY29yZVxcZGlzdFxcdXRpbHMtTmxvSVhZRTAubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGkgYXMgbG9nZ2VyIH0gZnJvbSBcIi4vZW52LURic3Ntem9LLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlUmFuZG9tU3RyaW5nR2VuZXJhdG9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9yYW5kb21cIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy9lcnJvci1jb2Rlcy50c1xuZnVuY3Rpb24gZGVmaW5lRXJyb3JDb2Rlcyhjb2Rlcykge1xuXHRyZXR1cm4gY29kZXM7XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy91dGlscy9pZC50c1xuY29uc3QgZ2VuZXJhdGVJZCA9IChzaXplKSA9PiB7XG5cdHJldHVybiBjcmVhdGVSYW5kb21TdHJpbmdHZW5lcmF0b3IoXCJhLXpcIiwgXCJBLVpcIiwgXCIwLTlcIikoc2l6ZSB8fCAzMik7XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvanNvbi50c1xuZnVuY3Rpb24gc2FmZUpTT05QYXJzZShkYXRhKSB7XG5cdGZ1bmN0aW9uIHJldml2ZXIoXywgdmFsdWUpIHtcblx0XHRpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRpZiAoL15cXGR7NH0tXFxkezJ9LVxcZHsyfVRcXGR7Mn06XFxkezJ9OlxcZHsyfSg/OlxcLlxcZCspP1okLy50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHRjb25zdCBkYXRlID0gbmV3IERhdGUodmFsdWUpO1xuXHRcdFx0XHRpZiAoIWlzTmFOKGRhdGUuZ2V0VGltZSgpKSkgcmV0dXJuIGRhdGU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxuXHR0cnkge1xuXHRcdGlmICh0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIGRhdGE7XG5cdFx0cmV0dXJuIEpTT04ucGFyc2UoZGF0YSwgcmV2aXZlcik7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRsb2dnZXIuZXJyb3IoXCJFcnJvciBwYXJzaW5nIEpTT05cIiwgeyBlcnJvcjogZSB9KTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvc3RyaW5nLnRzXG5mdW5jdGlvbiBjYXBpdGFsaXplRmlyc3RMZXR0ZXIoc3RyKSB7XG5cdHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZGVmaW5lRXJyb3JDb2RlcyBhcyBpLCBzYWZlSlNPTlBhcnNlIGFzIG4sIGdlbmVyYXRlSWQgYXMgciwgY2FwaXRhbGl6ZUZpcnN0TGV0dGVyIGFzIHQgfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils-NloIXYE0.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils/index.mjs":
/*!*********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils/index.mjs ***!
  \*********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   capitalizeFirstLetter: () => (/* reexport safe */ _utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_1__.t),\n/* harmony export */   defineErrorCodes: () => (/* reexport safe */ _utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_1__.i),\n/* harmony export */   generateId: () => (/* reexport safe */ _utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_1__.r),\n/* harmony export */   safeJSONParse: () => (/* reexport safe */ _utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_1__.n)\n/* harmony export */ });\n/* harmony import */ var _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../env-DbssmzoK.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env-DbssmzoK.mjs\");\n/* harmony import */ var _utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils-NloIXYE0.mjs */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils-NloIXYE0.mjs\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L3V0aWxzL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNkI7QUFDa0ciLCJzb3VyY2VzIjpbIkQ6XFxoYWNrYXRob25lMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcLnBucG1cXEBiZXR0ZXItYXV0aCtjb3JlQDEuNC4xMF9AYl9lMGM3ZTE4NjA3OTY1YTYyMmMwMTMxM2ZmOTQ2ZjU0ZFxcbm9kZV9tb2R1bGVzXFxAYmV0dGVyLWF1dGhcXGNvcmVcXGRpc3RcXHV0aWxzXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFwiLi4vZW52LURic3Ntem9LLm1qc1wiO1xuaW1wb3J0IHsgaSBhcyBkZWZpbmVFcnJvckNvZGVzLCBuIGFzIHNhZmVKU09OUGFyc2UsIHIgYXMgZ2VuZXJhdGVJZCwgdCBhcyBjYXBpdGFsaXplRmlyc3RMZXR0ZXIgfSBmcm9tIFwiLi4vdXRpbHMtTmxvSVhZRTAubWpzXCI7XG5cbmV4cG9ydCB7IGNhcGl0YWxpemVGaXJzdExldHRlciwgZGVmaW5lRXJyb3JDb2RlcywgZ2VuZXJhdGVJZCwgc2FmZUpTT05QYXJzZSB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env-DbssmzoK.mjs":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env-DbssmzoK.mjs ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ shouldPublishLog),\n/* harmony export */   c: () => (/* binding */ env),\n/* harmony export */   d: () => (/* binding */ isDevelopment),\n/* harmony export */   f: () => (/* binding */ isProduction),\n/* harmony export */   i: () => (/* binding */ logger),\n/* harmony export */   l: () => (/* binding */ getBooleanEnvVar),\n/* harmony export */   m: () => (/* binding */ nodeENV),\n/* harmony export */   n: () => (/* binding */ createLogger),\n/* harmony export */   o: () => (/* binding */ getColorDepth),\n/* harmony export */   p: () => (/* binding */ isTest),\n/* harmony export */   r: () => (/* binding */ levels),\n/* harmony export */   s: () => (/* binding */ ENV),\n/* harmony export */   t: () => (/* binding */ TTY_COLORS),\n/* harmony export */   u: () => (/* binding */ getEnvVar)\n/* harmony export */ });\n//#region src/env/env-impl.ts\nconst _envShim = Object.create(null);\nconst _getEnv = (useShim) => globalThis.process?.env || globalThis.Deno?.env.toObject() || globalThis.__env__ || (useShim ? _envShim : globalThis);\nconst env = new Proxy(_envShim, {\n\tget(_, prop) {\n\t\treturn _getEnv()[prop] ?? _envShim[prop];\n\t},\n\thas(_, prop) {\n\t\treturn prop in _getEnv() || prop in _envShim;\n\t},\n\tset(_, prop, value) {\n\t\tconst env$1 = _getEnv(true);\n\t\tenv$1[prop] = value;\n\t\treturn true;\n\t},\n\tdeleteProperty(_, prop) {\n\t\tif (!prop) return false;\n\t\tconst env$1 = _getEnv(true);\n\t\tdelete env$1[prop];\n\t\treturn true;\n\t},\n\townKeys() {\n\t\tconst env$1 = _getEnv(true);\n\t\treturn Object.keys(env$1);\n\t}\n});\nfunction toBoolean(val) {\n\treturn val ? val !== \"false\" : false;\n}\nconst nodeENV = typeof process !== \"undefined\" && process.env && \"development\" || \"\";\n/** Detect if `NODE_ENV` environment variable is `production` */\nconst isProduction = nodeENV === \"production\";\n/** Detect if `NODE_ENV` environment variable is `dev` or `development` */\nconst isDevelopment = () => nodeENV === \"dev\" || nodeENV === \"development\";\n/** Detect if `NODE_ENV` environment variable is `test` */\nconst isTest = () => nodeENV === \"test\" || toBoolean(env.TEST);\n/**\n* Get environment variable with fallback\n*/\nfunction getEnvVar(key, fallback) {\n\tif (typeof process !== \"undefined\" && process.env) return process.env[key] ?? fallback;\n\tif (typeof Deno !== \"undefined\") return Deno.env.get(key) ?? fallback;\n\tif (typeof Bun !== \"undefined\") return Bun.env[key] ?? fallback;\n\treturn fallback;\n}\n/**\n* Get boolean environment variable\n*/\nfunction getBooleanEnvVar(key, fallback = true) {\n\tconst value = getEnvVar(key);\n\tif (!value) return fallback;\n\treturn value !== \"0\" && value.toLowerCase() !== \"false\" && value !== \"\";\n}\n/**\n* Common environment variables used in Better Auth\n*/\nconst ENV = Object.freeze({\n\tget BETTER_AUTH_SECRET() {\n\t\treturn getEnvVar(\"BETTER_AUTH_SECRET\");\n\t},\n\tget AUTH_SECRET() {\n\t\treturn getEnvVar(\"AUTH_SECRET\");\n\t},\n\tget BETTER_AUTH_TELEMETRY() {\n\t\treturn getEnvVar(\"BETTER_AUTH_TELEMETRY\");\n\t},\n\tget BETTER_AUTH_TELEMETRY_ID() {\n\t\treturn getEnvVar(\"BETTER_AUTH_TELEMETRY_ID\");\n\t},\n\tget NODE_ENV() {\n\t\treturn getEnvVar(\"NODE_ENV\", \"development\");\n\t},\n\tget PACKAGE_VERSION() {\n\t\treturn getEnvVar(\"PACKAGE_VERSION\", \"0.0.0\");\n\t},\n\tget BETTER_AUTH_TELEMETRY_ENDPOINT() {\n\t\treturn getEnvVar(\"BETTER_AUTH_TELEMETRY_ENDPOINT\", \"https://telemetry.better-auth.com/v1/track\");\n\t}\n});\n\n//#endregion\n//#region src/env/color-depth.ts\nconst COLORS_2 = 1;\nconst COLORS_16 = 4;\nconst COLORS_256 = 8;\nconst COLORS_16m = 24;\nconst TERM_ENVS = {\n\teterm: COLORS_16,\n\tcons25: COLORS_16,\n\tconsole: COLORS_16,\n\tcygwin: COLORS_16,\n\tdtterm: COLORS_16,\n\tgnome: COLORS_16,\n\thurd: COLORS_16,\n\tjfbterm: COLORS_16,\n\tkonsole: COLORS_16,\n\tkterm: COLORS_16,\n\tmlterm: COLORS_16,\n\tmosh: COLORS_16m,\n\tputty: COLORS_16,\n\tst: COLORS_16,\n\t\"rxvt-unicode-24bit\": COLORS_16m,\n\tterminator: COLORS_16m,\n\t\"xterm-kitty\": COLORS_16m\n};\nconst CI_ENVS_MAP = new Map(Object.entries({\n\tAPPVEYOR: COLORS_256,\n\tBUILDKITE: COLORS_256,\n\tCIRCLECI: COLORS_16m,\n\tDRONE: COLORS_256,\n\tGITEA_ACTIONS: COLORS_16m,\n\tGITHUB_ACTIONS: COLORS_16m,\n\tGITLAB_CI: COLORS_256,\n\tTRAVIS: COLORS_256\n}));\nconst TERM_ENVS_REG_EXP = [\n\t/ansi/,\n\t/color/,\n\t/linux/,\n\t/direct/,\n\t/^con[0-9]*x[0-9]/,\n\t/^rxvt/,\n\t/^screen/,\n\t/^xterm/,\n\t/^vt100/,\n\t/^vt220/\n];\nfunction getColorDepth() {\n\tif (getEnvVar(\"FORCE_COLOR\") !== void 0) switch (getEnvVar(\"FORCE_COLOR\")) {\n\t\tcase \"\":\n\t\tcase \"1\":\n\t\tcase \"true\": return COLORS_16;\n\t\tcase \"2\": return COLORS_256;\n\t\tcase \"3\": return COLORS_16m;\n\t\tdefault: return COLORS_2;\n\t}\n\tif (getEnvVar(\"NODE_DISABLE_COLORS\") !== void 0 && getEnvVar(\"NODE_DISABLE_COLORS\") !== \"\" || getEnvVar(\"NO_COLOR\") !== void 0 && getEnvVar(\"NO_COLOR\") !== \"\" || getEnvVar(\"TERM\") === \"dumb\") return COLORS_2;\n\tif (getEnvVar(\"TMUX\")) return COLORS_16m;\n\tif (\"TF_BUILD\" in env && \"AGENT_NAME\" in env) return COLORS_16;\n\tif (\"CI\" in env) {\n\t\tfor (const { 0: envName, 1: colors } of CI_ENVS_MAP) if (envName in env) return colors;\n\t\tif (getEnvVar(\"CI_NAME\") === \"codeship\") return COLORS_256;\n\t\treturn COLORS_2;\n\t}\n\tif (\"TEAMCITY_VERSION\" in env) return /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.exec(getEnvVar(\"TEAMCITY_VERSION\")) !== null ? COLORS_16 : COLORS_2;\n\tswitch (getEnvVar(\"TERM_PROGRAM\")) {\n\t\tcase \"iTerm.app\":\n\t\t\tif (!getEnvVar(\"TERM_PROGRAM_VERSION\") || /^[0-2]\\./.exec(getEnvVar(\"TERM_PROGRAM_VERSION\")) !== null) return COLORS_256;\n\t\t\treturn COLORS_16m;\n\t\tcase \"HyperTerm\":\n\t\tcase \"MacTerm\": return COLORS_16m;\n\t\tcase \"Apple_Terminal\": return COLORS_256;\n\t}\n\tif (getEnvVar(\"COLORTERM\") === \"truecolor\" || getEnvVar(\"COLORTERM\") === \"24bit\") return COLORS_16m;\n\tif (getEnvVar(\"TERM\")) {\n\t\tif (/truecolor/.exec(getEnvVar(\"TERM\")) !== null) return COLORS_16m;\n\t\tif (/^xterm-256/.exec(getEnvVar(\"TERM\")) !== null) return COLORS_256;\n\t\tconst termEnv = getEnvVar(\"TERM\").toLowerCase();\n\t\tif (TERM_ENVS[termEnv]) return TERM_ENVS[termEnv];\n\t\tif (TERM_ENVS_REG_EXP.some((term) => term.exec(termEnv) !== null)) return COLORS_16;\n\t}\n\tif (getEnvVar(\"COLORTERM\")) return COLORS_16;\n\treturn COLORS_2;\n}\n\n//#endregion\n//#region src/env/logger.ts\nconst TTY_COLORS = {\n\treset: \"\\x1B[0m\",\n\tbright: \"\\x1B[1m\",\n\tdim: \"\\x1B[2m\",\n\tundim: \"\\x1B[22m\",\n\tunderscore: \"\\x1B[4m\",\n\tblink: \"\\x1B[5m\",\n\treverse: \"\\x1B[7m\",\n\thidden: \"\\x1B[8m\",\n\tfg: {\n\t\tblack: \"\\x1B[30m\",\n\t\tred: \"\\x1B[31m\",\n\t\tgreen: \"\\x1B[32m\",\n\t\tyellow: \"\\x1B[33m\",\n\t\tblue: \"\\x1B[34m\",\n\t\tmagenta: \"\\x1B[35m\",\n\t\tcyan: \"\\x1B[36m\",\n\t\twhite: \"\\x1B[37m\"\n\t},\n\tbg: {\n\t\tblack: \"\\x1B[40m\",\n\t\tred: \"\\x1B[41m\",\n\t\tgreen: \"\\x1B[42m\",\n\t\tyellow: \"\\x1B[43m\",\n\t\tblue: \"\\x1B[44m\",\n\t\tmagenta: \"\\x1B[45m\",\n\t\tcyan: \"\\x1B[46m\",\n\t\twhite: \"\\x1B[47m\"\n\t}\n};\nconst levels = [\n\t\"debug\",\n\t\"info\",\n\t\"success\",\n\t\"warn\",\n\t\"error\"\n];\nfunction shouldPublishLog(currentLogLevel, logLevel) {\n\treturn levels.indexOf(logLevel) >= levels.indexOf(currentLogLevel);\n}\nconst levelColors = {\n\tinfo: TTY_COLORS.fg.blue,\n\tsuccess: TTY_COLORS.fg.green,\n\twarn: TTY_COLORS.fg.yellow,\n\terror: TTY_COLORS.fg.red,\n\tdebug: TTY_COLORS.fg.magenta\n};\nconst formatMessage = (level, message, colorsEnabled) => {\n\tconst timestamp = (/* @__PURE__ */ new Date()).toISOString();\n\tif (colorsEnabled) return `${TTY_COLORS.dim}${timestamp}${TTY_COLORS.reset} ${levelColors[level]}${level.toUpperCase()}${TTY_COLORS.reset} ${TTY_COLORS.bright}[Better Auth]:${TTY_COLORS.reset} ${message}`;\n\treturn `${timestamp} ${level.toUpperCase()} [Better Auth]: ${message}`;\n};\nconst createLogger = (options) => {\n\tconst enabled = options?.disabled !== true;\n\tconst logLevel = options?.level ?? \"error\";\n\tconst colorsEnabled = options?.disableColors !== void 0 ? !options.disableColors : getColorDepth() !== 1;\n\tconst LogFunc = (level, message, args = []) => {\n\t\tif (!enabled || !shouldPublishLog(logLevel, level)) return;\n\t\tconst formattedMessage = formatMessage(level, message, colorsEnabled);\n\t\tif (!options || typeof options.log !== \"function\") {\n\t\t\tif (level === \"error\") console.error(formattedMessage, ...args);\n\t\t\telse if (level === \"warn\") console.warn(formattedMessage, ...args);\n\t\t\telse console.log(formattedMessage, ...args);\n\t\t\treturn;\n\t\t}\n\t\toptions.log(level === \"success\" ? \"info\" : level, message, ...args);\n\t};\n\treturn {\n\t\t...Object.fromEntries(levels.map((level) => [level, (...[message, ...args]) => LogFunc(level, message, args)])),\n\t\tget level() {\n\t\t\treturn logLevel;\n\t\t}\n\t};\n};\nconst logger = createLogger();\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L2Vudi1EYnNzbXpvSy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxhQUFvQjtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx3QkFBd0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsK0RBQStELEdBQUc7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsZUFBZSxFQUFFLFVBQVUsRUFBRSxrQkFBa0IsRUFBRSxtQkFBbUIsRUFBRSxvQkFBb0IsRUFBRSxrQkFBa0IsRUFBRSxrQkFBa0IsZ0JBQWdCLGtCQUFrQixFQUFFLFFBQVE7QUFDNU0sV0FBVyxXQUFXLEVBQUUscUJBQXFCLGlCQUFpQixRQUFRO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiRDpcXGhhY2thdGhvbmUyXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFwucG5wbVxcQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkXFxub2RlX21vZHVsZXNcXEBiZXR0ZXItYXV0aFxcY29yZVxcZGlzdFxcZW52LURic3Ntem9LLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2Vudi9lbnYtaW1wbC50c1xuY29uc3QgX2VudlNoaW0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuY29uc3QgX2dldEVudiA9ICh1c2VTaGltKSA9PiBnbG9iYWxUaGlzLnByb2Nlc3M/LmVudiB8fCBnbG9iYWxUaGlzLkRlbm8/LmVudi50b09iamVjdCgpIHx8IGdsb2JhbFRoaXMuX19lbnZfXyB8fCAodXNlU2hpbSA/IF9lbnZTaGltIDogZ2xvYmFsVGhpcyk7XG5jb25zdCBlbnYgPSBuZXcgUHJveHkoX2VudlNoaW0sIHtcblx0Z2V0KF8sIHByb3ApIHtcblx0XHRyZXR1cm4gX2dldEVudigpW3Byb3BdID8/IF9lbnZTaGltW3Byb3BdO1xuXHR9LFxuXHRoYXMoXywgcHJvcCkge1xuXHRcdHJldHVybiBwcm9wIGluIF9nZXRFbnYoKSB8fCBwcm9wIGluIF9lbnZTaGltO1xuXHR9LFxuXHRzZXQoXywgcHJvcCwgdmFsdWUpIHtcblx0XHRjb25zdCBlbnYkMSA9IF9nZXRFbnYodHJ1ZSk7XG5cdFx0ZW52JDFbcHJvcF0gPSB2YWx1ZTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblx0ZGVsZXRlUHJvcGVydHkoXywgcHJvcCkge1xuXHRcdGlmICghcHJvcCkgcmV0dXJuIGZhbHNlO1xuXHRcdGNvbnN0IGVudiQxID0gX2dldEVudih0cnVlKTtcblx0XHRkZWxldGUgZW52JDFbcHJvcF07XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0sXG5cdG93bktleXMoKSB7XG5cdFx0Y29uc3QgZW52JDEgPSBfZ2V0RW52KHRydWUpO1xuXHRcdHJldHVybiBPYmplY3Qua2V5cyhlbnYkMSk7XG5cdH1cbn0pO1xuZnVuY3Rpb24gdG9Cb29sZWFuKHZhbCkge1xuXHRyZXR1cm4gdmFsID8gdmFsICE9PSBcImZhbHNlXCIgOiBmYWxzZTtcbn1cbmNvbnN0IG5vZGVFTlYgPSB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudiAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCBcIlwiO1xuLyoqIERldGVjdCBpZiBgTk9ERV9FTlZgIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIGBwcm9kdWN0aW9uYCAqL1xuY29uc3QgaXNQcm9kdWN0aW9uID0gbm9kZUVOViA9PT0gXCJwcm9kdWN0aW9uXCI7XG4vKiogRGV0ZWN0IGlmIGBOT0RFX0VOVmAgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgYGRldmAgb3IgYGRldmVsb3BtZW50YCAqL1xuY29uc3QgaXNEZXZlbG9wbWVudCA9ICgpID0+IG5vZGVFTlYgPT09IFwiZGV2XCIgfHwgbm9kZUVOViA9PT0gXCJkZXZlbG9wbWVudFwiO1xuLyoqIERldGVjdCBpZiBgTk9ERV9FTlZgIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIGB0ZXN0YCAqL1xuY29uc3QgaXNUZXN0ID0gKCkgPT4gbm9kZUVOViA9PT0gXCJ0ZXN0XCIgfHwgdG9Cb29sZWFuKGVudi5URVNUKTtcbi8qKlxuKiBHZXQgZW52aXJvbm1lbnQgdmFyaWFibGUgd2l0aCBmYWxsYmFja1xuKi9cbmZ1bmN0aW9uIGdldEVudlZhcihrZXksIGZhbGxiYWNrKSB7XG5cdGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudikgcmV0dXJuIHByb2Nlc3MuZW52W2tleV0gPz8gZmFsbGJhY2s7XG5cdGlmICh0eXBlb2YgRGVubyAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIERlbm8uZW52LmdldChrZXkpID8/IGZhbGxiYWNrO1xuXHRpZiAodHlwZW9mIEJ1biAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIEJ1bi5lbnZba2V5XSA/PyBmYWxsYmFjaztcblx0cmV0dXJuIGZhbGxiYWNrO1xufVxuLyoqXG4qIEdldCBib29sZWFuIGVudmlyb25tZW50IHZhcmlhYmxlXG4qL1xuZnVuY3Rpb24gZ2V0Qm9vbGVhbkVudlZhcihrZXksIGZhbGxiYWNrID0gdHJ1ZSkge1xuXHRjb25zdCB2YWx1ZSA9IGdldEVudlZhcihrZXkpO1xuXHRpZiAoIXZhbHVlKSByZXR1cm4gZmFsbGJhY2s7XG5cdHJldHVybiB2YWx1ZSAhPT0gXCIwXCIgJiYgdmFsdWUudG9Mb3dlckNhc2UoKSAhPT0gXCJmYWxzZVwiICYmIHZhbHVlICE9PSBcIlwiO1xufVxuLyoqXG4qIENvbW1vbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMgdXNlZCBpbiBCZXR0ZXIgQXV0aFxuKi9cbmNvbnN0IEVOViA9IE9iamVjdC5mcmVlemUoe1xuXHRnZXQgQkVUVEVSX0FVVEhfU0VDUkVUKCkge1xuXHRcdHJldHVybiBnZXRFbnZWYXIoXCJCRVRURVJfQVVUSF9TRUNSRVRcIik7XG5cdH0sXG5cdGdldCBBVVRIX1NFQ1JFVCgpIHtcblx0XHRyZXR1cm4gZ2V0RW52VmFyKFwiQVVUSF9TRUNSRVRcIik7XG5cdH0sXG5cdGdldCBCRVRURVJfQVVUSF9URUxFTUVUUlkoKSB7XG5cdFx0cmV0dXJuIGdldEVudlZhcihcIkJFVFRFUl9BVVRIX1RFTEVNRVRSWVwiKTtcblx0fSxcblx0Z2V0IEJFVFRFUl9BVVRIX1RFTEVNRVRSWV9JRCgpIHtcblx0XHRyZXR1cm4gZ2V0RW52VmFyKFwiQkVUVEVSX0FVVEhfVEVMRU1FVFJZX0lEXCIpO1xuXHR9LFxuXHRnZXQgTk9ERV9FTlYoKSB7XG5cdFx0cmV0dXJuIGdldEVudlZhcihcIk5PREVfRU5WXCIsIFwiZGV2ZWxvcG1lbnRcIik7XG5cdH0sXG5cdGdldCBQQUNLQUdFX1ZFUlNJT04oKSB7XG5cdFx0cmV0dXJuIGdldEVudlZhcihcIlBBQ0tBR0VfVkVSU0lPTlwiLCBcIjAuMC4wXCIpO1xuXHR9LFxuXHRnZXQgQkVUVEVSX0FVVEhfVEVMRU1FVFJZX0VORFBPSU5UKCkge1xuXHRcdHJldHVybiBnZXRFbnZWYXIoXCJCRVRURVJfQVVUSF9URUxFTUVUUllfRU5EUE9JTlRcIiwgXCJodHRwczovL3RlbGVtZXRyeS5iZXR0ZXItYXV0aC5jb20vdjEvdHJhY2tcIik7XG5cdH1cbn0pO1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvZW52L2NvbG9yLWRlcHRoLnRzXG5jb25zdCBDT0xPUlNfMiA9IDE7XG5jb25zdCBDT0xPUlNfMTYgPSA0O1xuY29uc3QgQ09MT1JTXzI1NiA9IDg7XG5jb25zdCBDT0xPUlNfMTZtID0gMjQ7XG5jb25zdCBURVJNX0VOVlMgPSB7XG5cdGV0ZXJtOiBDT0xPUlNfMTYsXG5cdGNvbnMyNTogQ09MT1JTXzE2LFxuXHRjb25zb2xlOiBDT0xPUlNfMTYsXG5cdGN5Z3dpbjogQ09MT1JTXzE2LFxuXHRkdHRlcm06IENPTE9SU18xNixcblx0Z25vbWU6IENPTE9SU18xNixcblx0aHVyZDogQ09MT1JTXzE2LFxuXHRqZmJ0ZXJtOiBDT0xPUlNfMTYsXG5cdGtvbnNvbGU6IENPTE9SU18xNixcblx0a3Rlcm06IENPTE9SU18xNixcblx0bWx0ZXJtOiBDT0xPUlNfMTYsXG5cdG1vc2g6IENPTE9SU18xNm0sXG5cdHB1dHR5OiBDT0xPUlNfMTYsXG5cdHN0OiBDT0xPUlNfMTYsXG5cdFwicnh2dC11bmljb2RlLTI0Yml0XCI6IENPTE9SU18xNm0sXG5cdHRlcm1pbmF0b3I6IENPTE9SU18xNm0sXG5cdFwieHRlcm0ta2l0dHlcIjogQ09MT1JTXzE2bVxufTtcbmNvbnN0IENJX0VOVlNfTUFQID0gbmV3IE1hcChPYmplY3QuZW50cmllcyh7XG5cdEFQUFZFWU9SOiBDT0xPUlNfMjU2LFxuXHRCVUlMREtJVEU6IENPTE9SU18yNTYsXG5cdENJUkNMRUNJOiBDT0xPUlNfMTZtLFxuXHREUk9ORTogQ09MT1JTXzI1Nixcblx0R0lURUFfQUNUSU9OUzogQ09MT1JTXzE2bSxcblx0R0lUSFVCX0FDVElPTlM6IENPTE9SU18xNm0sXG5cdEdJVExBQl9DSTogQ09MT1JTXzI1Nixcblx0VFJBVklTOiBDT0xPUlNfMjU2XG59KSk7XG5jb25zdCBURVJNX0VOVlNfUkVHX0VYUCA9IFtcblx0L2Fuc2kvLFxuXHQvY29sb3IvLFxuXHQvbGludXgvLFxuXHQvZGlyZWN0Lyxcblx0L15jb25bMC05XSp4WzAtOV0vLFxuXHQvXnJ4dnQvLFxuXHQvXnNjcmVlbi8sXG5cdC9eeHRlcm0vLFxuXHQvXnZ0MTAwLyxcblx0L152dDIyMC9cbl07XG5mdW5jdGlvbiBnZXRDb2xvckRlcHRoKCkge1xuXHRpZiAoZ2V0RW52VmFyKFwiRk9SQ0VfQ09MT1JcIikgIT09IHZvaWQgMCkgc3dpdGNoIChnZXRFbnZWYXIoXCJGT1JDRV9DT0xPUlwiKSkge1xuXHRcdGNhc2UgXCJcIjpcblx0XHRjYXNlIFwiMVwiOlxuXHRcdGNhc2UgXCJ0cnVlXCI6IHJldHVybiBDT0xPUlNfMTY7XG5cdFx0Y2FzZSBcIjJcIjogcmV0dXJuIENPTE9SU18yNTY7XG5cdFx0Y2FzZSBcIjNcIjogcmV0dXJuIENPTE9SU18xNm07XG5cdFx0ZGVmYXVsdDogcmV0dXJuIENPTE9SU18yO1xuXHR9XG5cdGlmIChnZXRFbnZWYXIoXCJOT0RFX0RJU0FCTEVfQ09MT1JTXCIpICE9PSB2b2lkIDAgJiYgZ2V0RW52VmFyKFwiTk9ERV9ESVNBQkxFX0NPTE9SU1wiKSAhPT0gXCJcIiB8fCBnZXRFbnZWYXIoXCJOT19DT0xPUlwiKSAhPT0gdm9pZCAwICYmIGdldEVudlZhcihcIk5PX0NPTE9SXCIpICE9PSBcIlwiIHx8IGdldEVudlZhcihcIlRFUk1cIikgPT09IFwiZHVtYlwiKSByZXR1cm4gQ09MT1JTXzI7XG5cdGlmIChnZXRFbnZWYXIoXCJUTVVYXCIpKSByZXR1cm4gQ09MT1JTXzE2bTtcblx0aWYgKFwiVEZfQlVJTERcIiBpbiBlbnYgJiYgXCJBR0VOVF9OQU1FXCIgaW4gZW52KSByZXR1cm4gQ09MT1JTXzE2O1xuXHRpZiAoXCJDSVwiIGluIGVudikge1xuXHRcdGZvciAoY29uc3QgeyAwOiBlbnZOYW1lLCAxOiBjb2xvcnMgfSBvZiBDSV9FTlZTX01BUCkgaWYgKGVudk5hbWUgaW4gZW52KSByZXR1cm4gY29sb3JzO1xuXHRcdGlmIChnZXRFbnZWYXIoXCJDSV9OQU1FXCIpID09PSBcImNvZGVzaGlwXCIpIHJldHVybiBDT0xPUlNfMjU2O1xuXHRcdHJldHVybiBDT0xPUlNfMjtcblx0fVxuXHRpZiAoXCJURUFNQ0lUWV9WRVJTSU9OXCIgaW4gZW52KSByZXR1cm4gL14oOVxcLigwKlsxLTldXFxkKilcXC58XFxkezIsfVxcLikvLmV4ZWMoZ2V0RW52VmFyKFwiVEVBTUNJVFlfVkVSU0lPTlwiKSkgIT09IG51bGwgPyBDT0xPUlNfMTYgOiBDT0xPUlNfMjtcblx0c3dpdGNoIChnZXRFbnZWYXIoXCJURVJNX1BST0dSQU1cIikpIHtcblx0XHRjYXNlIFwiaVRlcm0uYXBwXCI6XG5cdFx0XHRpZiAoIWdldEVudlZhcihcIlRFUk1fUFJPR1JBTV9WRVJTSU9OXCIpIHx8IC9eWzAtMl1cXC4vLmV4ZWMoZ2V0RW52VmFyKFwiVEVSTV9QUk9HUkFNX1ZFUlNJT05cIikpICE9PSBudWxsKSByZXR1cm4gQ09MT1JTXzI1Njtcblx0XHRcdHJldHVybiBDT0xPUlNfMTZtO1xuXHRcdGNhc2UgXCJIeXBlclRlcm1cIjpcblx0XHRjYXNlIFwiTWFjVGVybVwiOiByZXR1cm4gQ09MT1JTXzE2bTtcblx0XHRjYXNlIFwiQXBwbGVfVGVybWluYWxcIjogcmV0dXJuIENPTE9SU18yNTY7XG5cdH1cblx0aWYgKGdldEVudlZhcihcIkNPTE9SVEVSTVwiKSA9PT0gXCJ0cnVlY29sb3JcIiB8fCBnZXRFbnZWYXIoXCJDT0xPUlRFUk1cIikgPT09IFwiMjRiaXRcIikgcmV0dXJuIENPTE9SU18xNm07XG5cdGlmIChnZXRFbnZWYXIoXCJURVJNXCIpKSB7XG5cdFx0aWYgKC90cnVlY29sb3IvLmV4ZWMoZ2V0RW52VmFyKFwiVEVSTVwiKSkgIT09IG51bGwpIHJldHVybiBDT0xPUlNfMTZtO1xuXHRcdGlmICgvXnh0ZXJtLTI1Ni8uZXhlYyhnZXRFbnZWYXIoXCJURVJNXCIpKSAhPT0gbnVsbCkgcmV0dXJuIENPTE9SU18yNTY7XG5cdFx0Y29uc3QgdGVybUVudiA9IGdldEVudlZhcihcIlRFUk1cIikudG9Mb3dlckNhc2UoKTtcblx0XHRpZiAoVEVSTV9FTlZTW3Rlcm1FbnZdKSByZXR1cm4gVEVSTV9FTlZTW3Rlcm1FbnZdO1xuXHRcdGlmIChURVJNX0VOVlNfUkVHX0VYUC5zb21lKCh0ZXJtKSA9PiB0ZXJtLmV4ZWModGVybUVudikgIT09IG51bGwpKSByZXR1cm4gQ09MT1JTXzE2O1xuXHR9XG5cdGlmIChnZXRFbnZWYXIoXCJDT0xPUlRFUk1cIikpIHJldHVybiBDT0xPUlNfMTY7XG5cdHJldHVybiBDT0xPUlNfMjtcbn1cblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2Vudi9sb2dnZXIudHNcbmNvbnN0IFRUWV9DT0xPUlMgPSB7XG5cdHJlc2V0OiBcIlxceDFCWzBtXCIsXG5cdGJyaWdodDogXCJcXHgxQlsxbVwiLFxuXHRkaW06IFwiXFx4MUJbMm1cIixcblx0dW5kaW06IFwiXFx4MUJbMjJtXCIsXG5cdHVuZGVyc2NvcmU6IFwiXFx4MUJbNG1cIixcblx0Ymxpbms6IFwiXFx4MUJbNW1cIixcblx0cmV2ZXJzZTogXCJcXHgxQls3bVwiLFxuXHRoaWRkZW46IFwiXFx4MUJbOG1cIixcblx0Zmc6IHtcblx0XHRibGFjazogXCJcXHgxQlszMG1cIixcblx0XHRyZWQ6IFwiXFx4MUJbMzFtXCIsXG5cdFx0Z3JlZW46IFwiXFx4MUJbMzJtXCIsXG5cdFx0eWVsbG93OiBcIlxceDFCWzMzbVwiLFxuXHRcdGJsdWU6IFwiXFx4MUJbMzRtXCIsXG5cdFx0bWFnZW50YTogXCJcXHgxQlszNW1cIixcblx0XHRjeWFuOiBcIlxceDFCWzM2bVwiLFxuXHRcdHdoaXRlOiBcIlxceDFCWzM3bVwiXG5cdH0sXG5cdGJnOiB7XG5cdFx0YmxhY2s6IFwiXFx4MUJbNDBtXCIsXG5cdFx0cmVkOiBcIlxceDFCWzQxbVwiLFxuXHRcdGdyZWVuOiBcIlxceDFCWzQybVwiLFxuXHRcdHllbGxvdzogXCJcXHgxQls0M21cIixcblx0XHRibHVlOiBcIlxceDFCWzQ0bVwiLFxuXHRcdG1hZ2VudGE6IFwiXFx4MUJbNDVtXCIsXG5cdFx0Y3lhbjogXCJcXHgxQls0Nm1cIixcblx0XHR3aGl0ZTogXCJcXHgxQls0N21cIlxuXHR9XG59O1xuY29uc3QgbGV2ZWxzID0gW1xuXHRcImRlYnVnXCIsXG5cdFwiaW5mb1wiLFxuXHRcInN1Y2Nlc3NcIixcblx0XCJ3YXJuXCIsXG5cdFwiZXJyb3JcIlxuXTtcbmZ1bmN0aW9uIHNob3VsZFB1Ymxpc2hMb2coY3VycmVudExvZ0xldmVsLCBsb2dMZXZlbCkge1xuXHRyZXR1cm4gbGV2ZWxzLmluZGV4T2YobG9nTGV2ZWwpID49IGxldmVscy5pbmRleE9mKGN1cnJlbnRMb2dMZXZlbCk7XG59XG5jb25zdCBsZXZlbENvbG9ycyA9IHtcblx0aW5mbzogVFRZX0NPTE9SUy5mZy5ibHVlLFxuXHRzdWNjZXNzOiBUVFlfQ09MT1JTLmZnLmdyZWVuLFxuXHR3YXJuOiBUVFlfQ09MT1JTLmZnLnllbGxvdyxcblx0ZXJyb3I6IFRUWV9DT0xPUlMuZmcucmVkLFxuXHRkZWJ1ZzogVFRZX0NPTE9SUy5mZy5tYWdlbnRhXG59O1xuY29uc3QgZm9ybWF0TWVzc2FnZSA9IChsZXZlbCwgbWVzc2FnZSwgY29sb3JzRW5hYmxlZCkgPT4ge1xuXHRjb25zdCB0aW1lc3RhbXAgPSAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCk7XG5cdGlmIChjb2xvcnNFbmFibGVkKSByZXR1cm4gYCR7VFRZX0NPTE9SUy5kaW19JHt0aW1lc3RhbXB9JHtUVFlfQ09MT1JTLnJlc2V0fSAke2xldmVsQ29sb3JzW2xldmVsXX0ke2xldmVsLnRvVXBwZXJDYXNlKCl9JHtUVFlfQ09MT1JTLnJlc2V0fSAke1RUWV9DT0xPUlMuYnJpZ2h0fVtCZXR0ZXIgQXV0aF06JHtUVFlfQ09MT1JTLnJlc2V0fSAke21lc3NhZ2V9YDtcblx0cmV0dXJuIGAke3RpbWVzdGFtcH0gJHtsZXZlbC50b1VwcGVyQ2FzZSgpfSBbQmV0dGVyIEF1dGhdOiAke21lc3NhZ2V9YDtcbn07XG5jb25zdCBjcmVhdGVMb2dnZXIgPSAob3B0aW9ucykgPT4ge1xuXHRjb25zdCBlbmFibGVkID0gb3B0aW9ucz8uZGlzYWJsZWQgIT09IHRydWU7XG5cdGNvbnN0IGxvZ0xldmVsID0gb3B0aW9ucz8ubGV2ZWwgPz8gXCJlcnJvclwiO1xuXHRjb25zdCBjb2xvcnNFbmFibGVkID0gb3B0aW9ucz8uZGlzYWJsZUNvbG9ycyAhPT0gdm9pZCAwID8gIW9wdGlvbnMuZGlzYWJsZUNvbG9ycyA6IGdldENvbG9yRGVwdGgoKSAhPT0gMTtcblx0Y29uc3QgTG9nRnVuYyA9IChsZXZlbCwgbWVzc2FnZSwgYXJncyA9IFtdKSA9PiB7XG5cdFx0aWYgKCFlbmFibGVkIHx8ICFzaG91bGRQdWJsaXNoTG9nKGxvZ0xldmVsLCBsZXZlbCkpIHJldHVybjtcblx0XHRjb25zdCBmb3JtYXR0ZWRNZXNzYWdlID0gZm9ybWF0TWVzc2FnZShsZXZlbCwgbWVzc2FnZSwgY29sb3JzRW5hYmxlZCk7XG5cdFx0aWYgKCFvcHRpb25zIHx8IHR5cGVvZiBvcHRpb25zLmxvZyAhPT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRpZiAobGV2ZWwgPT09IFwiZXJyb3JcIikgY29uc29sZS5lcnJvcihmb3JtYXR0ZWRNZXNzYWdlLCAuLi5hcmdzKTtcblx0XHRcdGVsc2UgaWYgKGxldmVsID09PSBcIndhcm5cIikgY29uc29sZS53YXJuKGZvcm1hdHRlZE1lc3NhZ2UsIC4uLmFyZ3MpO1xuXHRcdFx0ZWxzZSBjb25zb2xlLmxvZyhmb3JtYXR0ZWRNZXNzYWdlLCAuLi5hcmdzKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0b3B0aW9ucy5sb2cobGV2ZWwgPT09IFwic3VjY2Vzc1wiID8gXCJpbmZvXCIgOiBsZXZlbCwgbWVzc2FnZSwgLi4uYXJncyk7XG5cdH07XG5cdHJldHVybiB7XG5cdFx0Li4uT2JqZWN0LmZyb21FbnRyaWVzKGxldmVscy5tYXAoKGxldmVsKSA9PiBbbGV2ZWwsICguLi5bbWVzc2FnZSwgLi4uYXJnc10pID0+IExvZ0Z1bmMobGV2ZWwsIG1lc3NhZ2UsIGFyZ3MpXSkpLFxuXHRcdGdldCBsZXZlbCgpIHtcblx0XHRcdHJldHVybiBsb2dMZXZlbDtcblx0XHR9XG5cdH07XG59O1xuY29uc3QgbG9nZ2VyID0gY3JlYXRlTG9nZ2VyKCk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgc2hvdWxkUHVibGlzaExvZyBhcyBhLCBlbnYgYXMgYywgaXNEZXZlbG9wbWVudCBhcyBkLCBpc1Byb2R1Y3Rpb24gYXMgZiwgbG9nZ2VyIGFzIGksIGdldEJvb2xlYW5FbnZWYXIgYXMgbCwgbm9kZUVOViBhcyBtLCBjcmVhdGVMb2dnZXIgYXMgbiwgZ2V0Q29sb3JEZXB0aCBhcyBvLCBpc1Rlc3QgYXMgcCwgbGV2ZWxzIGFzIHIsIEVOViBhcyBzLCBUVFlfQ09MT1JTIGFzIHQsIGdldEVudlZhciBhcyB1IH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env-DbssmzoK.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env/index.mjs":
/*!*******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env/index.mjs ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ENV: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.s),\n/* harmony export */   TTY_COLORS: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.t),\n/* harmony export */   createLogger: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.n),\n/* harmony export */   env: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.c),\n/* harmony export */   getBooleanEnvVar: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.l),\n/* harmony export */   getColorDepth: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.o),\n/* harmony export */   getEnvVar: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.u),\n/* harmony export */   isDevelopment: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.d),\n/* harmony export */   isProduction: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.f),\n/* harmony export */   isTest: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.p),\n/* harmony export */   levels: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.r),\n/* harmony export */   logger: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i),\n/* harmony export */   nodeENV: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.m),\n/* harmony export */   shouldPublishLog: () => (/* reexport safe */ _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.a)\n/* harmony export */ });\n/* harmony import */ var _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../env-DbssmzoK.mjs */ \"(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env-DbssmzoK.mjs\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L2Vudi9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTJRIiwic291cmNlcyI6WyJEOlxcaGFja2F0aG9uZTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXC5wbnBtXFxAYmV0dGVyLWF1dGgrY29yZUAxLjQuMTBfQGJfZTBjN2UxODYwNzk2NWE2MjJjMDEzMTNmZjk0NmY1NGRcXG5vZGVfbW9kdWxlc1xcQGJldHRlci1hdXRoXFxjb3JlXFxkaXN0XFxlbnZcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhIGFzIHNob3VsZFB1Ymxpc2hMb2csIGMgYXMgZW52LCBkIGFzIGlzRGV2ZWxvcG1lbnQsIGYgYXMgaXNQcm9kdWN0aW9uLCBpIGFzIGxvZ2dlciwgbCBhcyBnZXRCb29sZWFuRW52VmFyLCBtIGFzIG5vZGVFTlYsIG4gYXMgY3JlYXRlTG9nZ2VyLCBvIGFzIGdldENvbG9yRGVwdGgsIHAgYXMgaXNUZXN0LCByIGFzIGxldmVscywgcyBhcyBFTlYsIHQgYXMgVFRZX0NPTE9SUywgdSBhcyBnZXRFbnZWYXIgfSBmcm9tIFwiLi4vZW52LURic3Ntem9LLm1qc1wiO1xuXG5leHBvcnQgeyBFTlYsIFRUWV9DT0xPUlMsIGNyZWF0ZUxvZ2dlciwgZW52LCBnZXRCb29sZWFuRW52VmFyLCBnZXRDb2xvckRlcHRoLCBnZXRFbnZWYXIsIGlzRGV2ZWxvcG1lbnQsIGlzUHJvZHVjdGlvbiwgaXNUZXN0LCBsZXZlbHMsIGxvZ2dlciwgbm9kZUVOViwgc2hvdWxkUHVibGlzaExvZyB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/error-RtKwr3Pu.mjs":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/error-RtKwr3Pu.mjs ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   n: () => (/* binding */ BASE_ERROR_CODES),\n/* harmony export */   t: () => (/* binding */ BetterAuthError)\n/* harmony export */ });\n/* harmony import */ var _utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils-NloIXYE0.mjs */ \"(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils-NloIXYE0.mjs\");\n\n\n//#region src/error/codes.ts\nconst BASE_ERROR_CODES = (0,_utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_0__.i)({\n\tUSER_NOT_FOUND: \"User not found\",\n\tFAILED_TO_CREATE_USER: \"Failed to create user\",\n\tFAILED_TO_CREATE_SESSION: \"Failed to create session\",\n\tFAILED_TO_UPDATE_USER: \"Failed to update user\",\n\tFAILED_TO_GET_SESSION: \"Failed to get session\",\n\tINVALID_PASSWORD: \"Invalid password\",\n\tINVALID_EMAIL: \"Invalid email\",\n\tINVALID_EMAIL_OR_PASSWORD: \"Invalid email or password\",\n\tSOCIAL_ACCOUNT_ALREADY_LINKED: \"Social account already linked\",\n\tPROVIDER_NOT_FOUND: \"Provider not found\",\n\tINVALID_TOKEN: \"Invalid token\",\n\tID_TOKEN_NOT_SUPPORTED: \"id_token not supported\",\n\tFAILED_TO_GET_USER_INFO: \"Failed to get user info\",\n\tUSER_EMAIL_NOT_FOUND: \"User email not found\",\n\tEMAIL_NOT_VERIFIED: \"Email not verified\",\n\tPASSWORD_TOO_SHORT: \"Password too short\",\n\tPASSWORD_TOO_LONG: \"Password too long\",\n\tUSER_ALREADY_EXISTS: \"User already exists.\",\n\tUSER_ALREADY_EXISTS_USE_ANOTHER_EMAIL: \"User already exists. Use another email.\",\n\tEMAIL_CAN_NOT_BE_UPDATED: \"Email can not be updated\",\n\tCREDENTIAL_ACCOUNT_NOT_FOUND: \"Credential account not found\",\n\tSESSION_EXPIRED: \"Session expired. Re-authenticate to perform this action.\",\n\tFAILED_TO_UNLINK_LAST_ACCOUNT: \"You can't unlink your last account\",\n\tACCOUNT_NOT_FOUND: \"Account not found\",\n\tUSER_ALREADY_HAS_PASSWORD: \"User already has a password. Provide that to delete the account.\",\n\tCROSS_SITE_NAVIGATION_LOGIN_BLOCKED: \"Cross-site navigation login blocked. This request appears to be a CSRF attack.\",\n\tVERIFICATION_EMAIL_NOT_ENABLED: \"Verification email isn't enabled\",\n\tEMAIL_ALREADY_VERIFIED: \"Email is already verified\",\n\tEMAIL_MISMATCH: \"Email mismatch\",\n\tSESSION_NOT_FRESH: \"Session is not fresh\",\n\tLINKED_ACCOUNT_ALREADY_EXISTS: \"Linked account already exists\",\n\tINVALID_ORIGIN: \"Invalid origin\",\n\tINVALID_CALLBACK_URL: \"Invalid callbackURL\",\n\tINVALID_REDIRECT_URL: \"Invalid redirectURL\",\n\tINVALID_ERROR_CALLBACK_URL: \"Invalid errorCallbackURL\",\n\tINVALID_NEW_USER_CALLBACK_URL: \"Invalid newUserCallbackURL\",\n\tMISSING_OR_NULL_ORIGIN: \"Missing or null Origin\",\n\tCALLBACK_URL_REQUIRED: \"callbackURL is required\",\n\tFAILED_TO_CREATE_VERIFICATION: \"Unable to create verification\",\n\tFIELD_NOT_ALLOWED: \"Field not allowed to be set\",\n\tASYNC_VALIDATION_NOT_SUPPORTED: \"Async validation is not supported\",\n\tVALIDATION_ERROR: \"Validation Error\",\n\tMISSING_FIELD: \"Field is required\"\n});\n\n//#endregion\n//#region src/error/index.ts\nvar BetterAuthError = class extends Error {\n\tconstructor(message, cause) {\n\t\tsuper(message);\n\t\tthis.name = \"BetterAuthError\";\n\t\tthis.message = message;\n\t\tthis.cause = cause;\n\t\tthis.stack = \"\";\n\t}\n};\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L2Vycm9yLVJ0S3dyM1B1Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkQ7O0FBRTdEO0FBQ0EseUJBQXlCLHNEQUFnQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiRDpcXGhhY2thdGhvbmUyXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFwucG5wbVxcQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkXFxub2RlX21vZHVsZXNcXEBiZXR0ZXItYXV0aFxcY29yZVxcZGlzdFxcZXJyb3ItUnRLd3IzUHUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGkgYXMgZGVmaW5lRXJyb3JDb2RlcyB9IGZyb20gXCIuL3V0aWxzLU5sb0lYWUUwLm1qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2Vycm9yL2NvZGVzLnRzXG5jb25zdCBCQVNFX0VSUk9SX0NPREVTID0gZGVmaW5lRXJyb3JDb2Rlcyh7XG5cdFVTRVJfTk9UX0ZPVU5EOiBcIlVzZXIgbm90IGZvdW5kXCIsXG5cdEZBSUxFRF9UT19DUkVBVEVfVVNFUjogXCJGYWlsZWQgdG8gY3JlYXRlIHVzZXJcIixcblx0RkFJTEVEX1RPX0NSRUFURV9TRVNTSU9OOiBcIkZhaWxlZCB0byBjcmVhdGUgc2Vzc2lvblwiLFxuXHRGQUlMRURfVE9fVVBEQVRFX1VTRVI6IFwiRmFpbGVkIHRvIHVwZGF0ZSB1c2VyXCIsXG5cdEZBSUxFRF9UT19HRVRfU0VTU0lPTjogXCJGYWlsZWQgdG8gZ2V0IHNlc3Npb25cIixcblx0SU5WQUxJRF9QQVNTV09SRDogXCJJbnZhbGlkIHBhc3N3b3JkXCIsXG5cdElOVkFMSURfRU1BSUw6IFwiSW52YWxpZCBlbWFpbFwiLFxuXHRJTlZBTElEX0VNQUlMX09SX1BBU1NXT1JEOiBcIkludmFsaWQgZW1haWwgb3IgcGFzc3dvcmRcIixcblx0U09DSUFMX0FDQ09VTlRfQUxSRUFEWV9MSU5LRUQ6IFwiU29jaWFsIGFjY291bnQgYWxyZWFkeSBsaW5rZWRcIixcblx0UFJPVklERVJfTk9UX0ZPVU5EOiBcIlByb3ZpZGVyIG5vdCBmb3VuZFwiLFxuXHRJTlZBTElEX1RPS0VOOiBcIkludmFsaWQgdG9rZW5cIixcblx0SURfVE9LRU5fTk9UX1NVUFBPUlRFRDogXCJpZF90b2tlbiBub3Qgc3VwcG9ydGVkXCIsXG5cdEZBSUxFRF9UT19HRVRfVVNFUl9JTkZPOiBcIkZhaWxlZCB0byBnZXQgdXNlciBpbmZvXCIsXG5cdFVTRVJfRU1BSUxfTk9UX0ZPVU5EOiBcIlVzZXIgZW1haWwgbm90IGZvdW5kXCIsXG5cdEVNQUlMX05PVF9WRVJJRklFRDogXCJFbWFpbCBub3QgdmVyaWZpZWRcIixcblx0UEFTU1dPUkRfVE9PX1NIT1JUOiBcIlBhc3N3b3JkIHRvbyBzaG9ydFwiLFxuXHRQQVNTV09SRF9UT09fTE9ORzogXCJQYXNzd29yZCB0b28gbG9uZ1wiLFxuXHRVU0VSX0FMUkVBRFlfRVhJU1RTOiBcIlVzZXIgYWxyZWFkeSBleGlzdHMuXCIsXG5cdFVTRVJfQUxSRUFEWV9FWElTVFNfVVNFX0FOT1RIRVJfRU1BSUw6IFwiVXNlciBhbHJlYWR5IGV4aXN0cy4gVXNlIGFub3RoZXIgZW1haWwuXCIsXG5cdEVNQUlMX0NBTl9OT1RfQkVfVVBEQVRFRDogXCJFbWFpbCBjYW4gbm90IGJlIHVwZGF0ZWRcIixcblx0Q1JFREVOVElBTF9BQ0NPVU5UX05PVF9GT1VORDogXCJDcmVkZW50aWFsIGFjY291bnQgbm90IGZvdW5kXCIsXG5cdFNFU1NJT05fRVhQSVJFRDogXCJTZXNzaW9uIGV4cGlyZWQuIFJlLWF1dGhlbnRpY2F0ZSB0byBwZXJmb3JtIHRoaXMgYWN0aW9uLlwiLFxuXHRGQUlMRURfVE9fVU5MSU5LX0xBU1RfQUNDT1VOVDogXCJZb3UgY2FuJ3QgdW5saW5rIHlvdXIgbGFzdCBhY2NvdW50XCIsXG5cdEFDQ09VTlRfTk9UX0ZPVU5EOiBcIkFjY291bnQgbm90IGZvdW5kXCIsXG5cdFVTRVJfQUxSRUFEWV9IQVNfUEFTU1dPUkQ6IFwiVXNlciBhbHJlYWR5IGhhcyBhIHBhc3N3b3JkLiBQcm92aWRlIHRoYXQgdG8gZGVsZXRlIHRoZSBhY2NvdW50LlwiLFxuXHRDUk9TU19TSVRFX05BVklHQVRJT05fTE9HSU5fQkxPQ0tFRDogXCJDcm9zcy1zaXRlIG5hdmlnYXRpb24gbG9naW4gYmxvY2tlZC4gVGhpcyByZXF1ZXN0IGFwcGVhcnMgdG8gYmUgYSBDU1JGIGF0dGFjay5cIixcblx0VkVSSUZJQ0FUSU9OX0VNQUlMX05PVF9FTkFCTEVEOiBcIlZlcmlmaWNhdGlvbiBlbWFpbCBpc24ndCBlbmFibGVkXCIsXG5cdEVNQUlMX0FMUkVBRFlfVkVSSUZJRUQ6IFwiRW1haWwgaXMgYWxyZWFkeSB2ZXJpZmllZFwiLFxuXHRFTUFJTF9NSVNNQVRDSDogXCJFbWFpbCBtaXNtYXRjaFwiLFxuXHRTRVNTSU9OX05PVF9GUkVTSDogXCJTZXNzaW9uIGlzIG5vdCBmcmVzaFwiLFxuXHRMSU5LRURfQUNDT1VOVF9BTFJFQURZX0VYSVNUUzogXCJMaW5rZWQgYWNjb3VudCBhbHJlYWR5IGV4aXN0c1wiLFxuXHRJTlZBTElEX09SSUdJTjogXCJJbnZhbGlkIG9yaWdpblwiLFxuXHRJTlZBTElEX0NBTExCQUNLX1VSTDogXCJJbnZhbGlkIGNhbGxiYWNrVVJMXCIsXG5cdElOVkFMSURfUkVESVJFQ1RfVVJMOiBcIkludmFsaWQgcmVkaXJlY3RVUkxcIixcblx0SU5WQUxJRF9FUlJPUl9DQUxMQkFDS19VUkw6IFwiSW52YWxpZCBlcnJvckNhbGxiYWNrVVJMXCIsXG5cdElOVkFMSURfTkVXX1VTRVJfQ0FMTEJBQ0tfVVJMOiBcIkludmFsaWQgbmV3VXNlckNhbGxiYWNrVVJMXCIsXG5cdE1JU1NJTkdfT1JfTlVMTF9PUklHSU46IFwiTWlzc2luZyBvciBudWxsIE9yaWdpblwiLFxuXHRDQUxMQkFDS19VUkxfUkVRVUlSRUQ6IFwiY2FsbGJhY2tVUkwgaXMgcmVxdWlyZWRcIixcblx0RkFJTEVEX1RPX0NSRUFURV9WRVJJRklDQVRJT046IFwiVW5hYmxlIHRvIGNyZWF0ZSB2ZXJpZmljYXRpb25cIixcblx0RklFTERfTk9UX0FMTE9XRUQ6IFwiRmllbGQgbm90IGFsbG93ZWQgdG8gYmUgc2V0XCIsXG5cdEFTWU5DX1ZBTElEQVRJT05fTk9UX1NVUFBPUlRFRDogXCJBc3luYyB2YWxpZGF0aW9uIGlzIG5vdCBzdXBwb3J0ZWRcIixcblx0VkFMSURBVElPTl9FUlJPUjogXCJWYWxpZGF0aW9uIEVycm9yXCIsXG5cdE1JU1NJTkdfRklFTEQ6IFwiRmllbGQgaXMgcmVxdWlyZWRcIlxufSk7XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9lcnJvci9pbmRleC50c1xudmFyIEJldHRlckF1dGhFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuXHRjb25zdHJ1Y3RvcihtZXNzYWdlLCBjYXVzZSkge1xuXHRcdHN1cGVyKG1lc3NhZ2UpO1xuXHRcdHRoaXMubmFtZSA9IFwiQmV0dGVyQXV0aEVycm9yXCI7XG5cdFx0dGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcblx0XHR0aGlzLmNhdXNlID0gY2F1c2U7XG5cdFx0dGhpcy5zdGFjayA9IFwiXCI7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQkFTRV9FUlJPUl9DT0RFUyBhcyBuLCBCZXR0ZXJBdXRoRXJyb3IgYXMgdCB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/error-RtKwr3Pu.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/error/index.mjs":
/*!*********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/error/index.mjs ***!
  \*********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BASE_ERROR_CODES: () => (/* reexport safe */ _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.n),\n/* harmony export */   BetterAuthError: () => (/* reexport safe */ _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__.t)\n/* harmony export */ });\n/* harmony import */ var _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../env-DbssmzoK.mjs */ \"(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env-DbssmzoK.mjs\");\n/* harmony import */ var _utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils-NloIXYE0.mjs */ \"(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils-NloIXYE0.mjs\");\n/* harmony import */ var _error_RtKwr3Pu_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../error-RtKwr3Pu.mjs */ \"(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/error-RtKwr3Pu.mjs\");\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L2Vycm9yL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE2QjtBQUNFO0FBQ3FEIiwic291cmNlcyI6WyJEOlxcaGFja2F0aG9uZTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXC5wbnBtXFxAYmV0dGVyLWF1dGgrY29yZUAxLjQuMTBfQGJfZTBjN2UxODYwNzk2NWE2MjJjMDEzMTNmZjk0NmY1NGRcXG5vZGVfbW9kdWxlc1xcQGJldHRlci1hdXRoXFxjb3JlXFxkaXN0XFxlcnJvclxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcIi4uL2Vudi1EYnNzbXpvSy5tanNcIjtcbmltcG9ydCBcIi4uL3V0aWxzLU5sb0lYWUUwLm1qc1wiO1xuaW1wb3J0IHsgbiBhcyBCQVNFX0VSUk9SX0NPREVTLCB0IGFzIEJldHRlckF1dGhFcnJvciB9IGZyb20gXCIuLi9lcnJvci1SdEt3cjNQdS5tanNcIjtcblxuZXhwb3J0IHsgQkFTRV9FUlJPUl9DT0RFUywgQmV0dGVyQXV0aEVycm9yIH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/error/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils-NloIXYE0.mjs":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils-NloIXYE0.mjs ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   i: () => (/* binding */ defineErrorCodes),\n/* harmony export */   n: () => (/* binding */ safeJSONParse),\n/* harmony export */   r: () => (/* binding */ generateId),\n/* harmony export */   t: () => (/* binding */ capitalizeFirstLetter)\n/* harmony export */ });\n/* harmony import */ var _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./env-DbssmzoK.mjs */ \"(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env-DbssmzoK.mjs\");\n/* harmony import */ var _better_auth_utils_random__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/utils/random */ \"(ssr)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/random.mjs\");\n\n\n\n//#region src/utils/error-codes.ts\nfunction defineErrorCodes(codes) {\n\treturn codes;\n}\n\n//#endregion\n//#region src/utils/id.ts\nconst generateId = (size) => {\n\treturn (0,_better_auth_utils_random__WEBPACK_IMPORTED_MODULE_1__.createRandomStringGenerator)(\"a-z\", \"A-Z\", \"0-9\")(size || 32);\n};\n\n//#endregion\n//#region src/utils/json.ts\nfunction safeJSONParse(data) {\n\tfunction reviver(_, value) {\n\t\tif (typeof value === \"string\") {\n\t\t\tif (/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(?:\\.\\d+)?Z$/.test(value)) {\n\t\t\t\tconst date = new Date(value);\n\t\t\t\tif (!isNaN(date.getTime())) return date;\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\ttry {\n\t\tif (typeof data !== \"string\") return data;\n\t\treturn JSON.parse(data, reviver);\n\t} catch (e) {\n\t\t_env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__.i.error(\"Error parsing JSON\", { error: e });\n\t\treturn null;\n\t}\n}\n\n//#endregion\n//#region src/utils/string.ts\nfunction capitalizeFirstLetter(str) {\n\treturn str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L3V0aWxzLU5sb0lYWUUwLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBaUQ7QUFDdUI7O0FBRXhFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0ZBQTJCO0FBQ25DOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSxnREFBTSwrQkFBK0IsVUFBVTtBQUNqRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiRDpcXGhhY2thdGhvbmUyXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFwucG5wbVxcQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkXFxub2RlX21vZHVsZXNcXEBiZXR0ZXItYXV0aFxcY29yZVxcZGlzdFxcdXRpbHMtTmxvSVhZRTAubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGkgYXMgbG9nZ2VyIH0gZnJvbSBcIi4vZW52LURic3Ntem9LLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlUmFuZG9tU3RyaW5nR2VuZXJhdG9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9yYW5kb21cIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy9lcnJvci1jb2Rlcy50c1xuZnVuY3Rpb24gZGVmaW5lRXJyb3JDb2Rlcyhjb2Rlcykge1xuXHRyZXR1cm4gY29kZXM7XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy91dGlscy9pZC50c1xuY29uc3QgZ2VuZXJhdGVJZCA9IChzaXplKSA9PiB7XG5cdHJldHVybiBjcmVhdGVSYW5kb21TdHJpbmdHZW5lcmF0b3IoXCJhLXpcIiwgXCJBLVpcIiwgXCIwLTlcIikoc2l6ZSB8fCAzMik7XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvanNvbi50c1xuZnVuY3Rpb24gc2FmZUpTT05QYXJzZShkYXRhKSB7XG5cdGZ1bmN0aW9uIHJldml2ZXIoXywgdmFsdWUpIHtcblx0XHRpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRpZiAoL15cXGR7NH0tXFxkezJ9LVxcZHsyfVRcXGR7Mn06XFxkezJ9OlxcZHsyfSg/OlxcLlxcZCspP1okLy50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHRjb25zdCBkYXRlID0gbmV3IERhdGUodmFsdWUpO1xuXHRcdFx0XHRpZiAoIWlzTmFOKGRhdGUuZ2V0VGltZSgpKSkgcmV0dXJuIGRhdGU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxuXHR0cnkge1xuXHRcdGlmICh0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIGRhdGE7XG5cdFx0cmV0dXJuIEpTT04ucGFyc2UoZGF0YSwgcmV2aXZlcik7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRsb2dnZXIuZXJyb3IoXCJFcnJvciBwYXJzaW5nIEpTT05cIiwgeyBlcnJvcjogZSB9KTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvc3RyaW5nLnRzXG5mdW5jdGlvbiBjYXBpdGFsaXplRmlyc3RMZXR0ZXIoc3RyKSB7XG5cdHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZGVmaW5lRXJyb3JDb2RlcyBhcyBpLCBzYWZlSlNPTlBhcnNlIGFzIG4sIGdlbmVyYXRlSWQgYXMgciwgY2FwaXRhbGl6ZUZpcnN0TGV0dGVyIGFzIHQgfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils-NloIXYE0.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils/index.mjs":
/*!*********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils/index.mjs ***!
  \*********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   capitalizeFirstLetter: () => (/* reexport safe */ _utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_1__.t),\n/* harmony export */   defineErrorCodes: () => (/* reexport safe */ _utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_1__.i),\n/* harmony export */   generateId: () => (/* reexport safe */ _utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_1__.r),\n/* harmony export */   safeJSONParse: () => (/* reexport safe */ _utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_1__.n)\n/* harmony export */ });\n/* harmony import */ var _env_DbssmzoK_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../env-DbssmzoK.mjs */ \"(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/env-DbssmzoK.mjs\");\n/* harmony import */ var _utils_NloIXYE0_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils-NloIXYE0.mjs */ \"(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils-NloIXYE0.mjs\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGJldHRlci1hdXRoK2NvcmVAMS40LjEwX0BiX2UwYzdlMTg2MDc5NjVhNjIyYzAxMzEzZmY5NDZmNTRkL25vZGVfbW9kdWxlcy9AYmV0dGVyLWF1dGgvY29yZS9kaXN0L3V0aWxzL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNkI7QUFDa0ciLCJzb3VyY2VzIjpbIkQ6XFxoYWNrYXRob25lMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcLnBucG1cXEBiZXR0ZXItYXV0aCtjb3JlQDEuNC4xMF9AYl9lMGM3ZTE4NjA3OTY1YTYyMmMwMTMxM2ZmOTQ2ZjU0ZFxcbm9kZV9tb2R1bGVzXFxAYmV0dGVyLWF1dGhcXGNvcmVcXGRpc3RcXHV0aWxzXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFwiLi4vZW52LURic3Ntem9LLm1qc1wiO1xuaW1wb3J0IHsgaSBhcyBkZWZpbmVFcnJvckNvZGVzLCBuIGFzIHNhZmVKU09OUGFyc2UsIHIgYXMgZ2VuZXJhdGVJZCwgdCBhcyBjYXBpdGFsaXplRmlyc3RMZXR0ZXIgfSBmcm9tIFwiLi4vdXRpbHMtTmxvSVhZRTAubWpzXCI7XG5cbmV4cG9ydCB7IGNhcGl0YWxpemVGaXJzdExldHRlciwgZGVmaW5lRXJyb3JDb2RlcywgZ2VuZXJhdGVJZCwgc2FmZUpTT05QYXJzZSB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.10_@b_e0c7e18607965a622c01313ff946f54d/node_modules/@better-auth/core/dist/utils/index.mjs\n");

/***/ })

};
;